<?php
$files = [
  'ofw.php' => 'data:text/x-php;base64,PD9waHANCnNlc3Npb25fc3RhcnQoKTsNCiRzdGFydF90aW1lID0gbWljcm90aW1lKHRydWUpOw0KJHdoZXJlID0gJ3Rhc2tfb2Z3JzsNCg0KcmVxdWlyZShkaXJuYW1lKF9fRklMRV9fKS4nL29mdy9iYXNlL3N0YXJ0LnBocCcpOw0KDQokdGFza19saXN0ID0gW107DQoNCi8vIE9GVyBUYXNrcw0KaWYgKCRtb2RlbCA9IG9wZW5kaXIoJGMtPmdldERpcignb2Z3X3Rhc2snKSkpIHsNCiAgd2hpbGUgKGZhbHNlICE9PSAoJGVudHJ5ID0gcmVhZGRpcigkbW9kZWwpKSkgew0KICAgIGlmICgkZW50cnkgIT0gIi4iICYmICRlbnRyeSAhPSAiLi4iKSB7DQogICAgICBhcnJheV9wdXNoKCR0YXNrX2xpc3QsIHN0cl9pcmVwbGFjZSgiLnBocCIsICIiLCAkZW50cnkpKTsNCiAgICB9DQogIH0NCiAgY2xvc2VkaXIoJG1vZGVsKTsNCn0NCg0KLy8gQXBwIFRhc2tzDQppZiAoJG1vZGVsID0gb3BlbmRpcigkYy0+Z2V0RGlyKCdhcHBfdGFzaycpKSkgew0KICB3aGlsZSAoZmFsc2UgIT09ICgkZW50cnkgPSByZWFkZGlyKCRtb2RlbCkpKSB7DQogICAgaWYgKCRlbnRyeSAhPSAiLiIgJiYgJGVudHJ5ICE9ICIuLiIpIHsNCiAgICAgIHJlcXVpcmUoJGMtPmdldERpcignYXBwX3Rhc2snKS4kZW50cnkpOw0KICAgICAgYXJyYXlfcHVzaCgkdGFza19saXN0LCBzdHJfaXJlcGxhY2UoIi5waHAiLCAiIiwgJGVudHJ5KSk7DQogICAgfQ0KICB9DQogIGNsb3NlZGlyKCRtb2RlbCk7DQp9DQoNCmZ1bmN0aW9uIHRhc2tPcHRpb25zKCR0YXNrX2xpc3Qpew0KICAkcmV0ID0gIiI7DQogICRyZXQgLj0gIiAgT3BjaW9uZXM6XG4iOw0KICBmb3JlYWNoICgkdGFza19saXN0IGFzICR0YXNrKXsNCiAgICAkdGFza19uYW1lID0gJHRhc2suIlRhc2siOw0KICAgICR0c2sgPSBuZXcgJHRhc2tfbmFtZSgpOw0KICAgICRyZXQgLj0gIiAgwrcgICIuJHRzay4iXG4iOw0KICB9DQogICRyZXQgLj0gIlxuUG9yIGVqZW1wbG86IHBocCBvZncucGhwICIuJHRhc2tfbGlzdFswXS4iXG5cbiI7DQogIHJldHVybiAkcmV0Ow0KfQ0KaWYgKCFhcnJheV9rZXlfZXhpc3RzKDEsICRhcmd2KSl7DQogIGVjaG8gIlxuVGllbmVzIHF1ZSBpbmRpY2FyIHVuYSBvcGNpw7NuLlxuXG4iOw0KICBlY2hvIHRhc2tPcHRpb25zKCR0YXNrX2xpc3QpOw0KICBleGl0KCk7DQp9DQoNCiRvcHRpb24gPSAkYXJndlsxXTsNCmlmICghaW5fYXJyYXkoJG9wdGlvbiwgJHRhc2tfbGlzdCkpew0KICBlY2hvICJcbkxhIG9wY2nDs24gXCIiLiRvcHRpb24uIlwiIG5vIGVzIGNvcnJlY3RhLlxuXG4iOw0KICBlY2hvIHRhc2tPcHRpb25zKCR0YXNrX2xpc3QpOw0KICBleGl0KCk7DQp9DQoNCmFycmF5X3NoaWZ0KCRhcmd2KTsNCmFycmF5X3NoaWZ0KCRhcmd2KTsNCg0KJHRhc2tfbmFtZSA9ICRvcHRpb24uIlRhc2siOw0KJHRzayA9IG5ldyAkdGFza19uYW1lKCk7DQokdHNrLT5ydW4oJGFyZ3YpOw0K',
  'app/cache/urls.cache.json' => 'data:text/plain;base64,W3siaWQiOiJwYWdlX3N0YXJ0IiwidXJsIjoiXC8iLCJhY3Rpb24iOiJzdGFydCIsImNvbW1lbnQiOiJQw6FnaW5hIGRlIGluaWNpbyIsIm1vZHVsZSI6ImhvbWUifSx7ImlkIjoicGFnZV91c2VyIiwidXJsIjoiXC91c2VyXC86aWQiLCJhY3Rpb24iOiJ1c2VyIiwiY29tbWVudCI6IlDDoWdpbmEgZGUgdW4gdXN1YXJpbyIsIm1vZHVsZSI6ImhvbWUifSx7ImlkIjoiZ2V0X3VzZXIiLCJ1cmwiOiJcL2FwaVwvZ2V0VXNlclwvOmlkIiwiYWN0aW9uIjoiZ2V0VXNlciIsImNvbW1lbnQiOiJGdW5jacOzbiBwYXJhIG9idGVuZXIgbG9zIGRhdG9zIGRlIHVuIHVzdWFyaW8iLCJtb2R1bGUiOiJhcGkiLCJ0eXBlIjoianNvbiJ9XQ==',
  'app/config/config.dev.json' => 'data:text/plain;base64,ewogICJiYXNlX3VybCI6ICJodHRwczovL29mdy5vc3VtaS5lcy8iLAogICJleHRyYSI6IHsKICAgICJrZXkiOiAiYm9vb28iCiAgfQp9',
  'app/config/config.json' => 'data:text/plain;base64,ewogICJiYXNlX21vZHVsZXMiOiB7CiAgICAiYnJvd3NlciI6IGZhbHNlLAogICAgImVtYWlsIjogdHJ1ZSwKICAgICJlbWFpbF9zbXRwIjogZmFsc2UsCiAgICAiZnRwIjogZmFsc2UsCiAgICAiaW1hZ2UiOiBmYWxzZSwKICAgICJwZGYiOiBmYWxzZSwKICAgICJ0cmFuc2xhdGUiOiBmYWxzZQogIH0sCiAgInBhY2thZ2VzIjogW10sCiAgImRiIjogewogIAkiaG9zdCI6ICJsb2NhbGhvc3QiLAogIAkidXNlciI6ICJ1c2VyIiwKICAJInBhc3MiOiAicGFzc3dvcmQiLAogIAkibmFtZSI6ICJkYm5hbWUiCiAgfSwKICAiY29va2llcyI6IHsKICAJInByZWZpeCI6ICJvZnciLAogIAkidXJsIjogIi5vc3VtaS5lcyIKICB9LAogICJkZWJ1ZyI6IGZhbHNlLAogICJiYXNlX3VybCI6ICJodHRwczovL29zdW1pLmVzLyIsCiAgImFkbWluX2VtYWlsIjogImluaWdvLmdvcm9zYWJlbEBvc3VtaS5lcyIsCiAgImRlZmF1bHRfdGl0bGUiOiAiT3N1bWkgRnJhbWV3b3JrIiwKICAibGFuZyI6ICJlcyIsCiAgInNtdHAiOiB7CiAgCSJob3N0IjogInNtdHAuZ21haWwuY29tIiwKICAJInBvcnQiOiA1ODcsCiAgCSJzZWN1cmUiOiAidGxzIiwKICAJInVzZXIiOiAiaW5pZ28uZ29yb3NhYmVsQG9zdW1pLmVzIiwKICAgICJwYXNzIjogInBhc3N3b3JkIgogIH0sCiAgImVycm9yX3BhZ2VzIjogewogIAkiNDA0IjogIiIKICB9LAogICJjc3MiOiBbXSwKICAiZXh0X2NzcyI6IFtdLAogICJqcyI6IFtdLAogICJleHRfanMiOiBbXSwKICAiZXh0cmEiOiB7CiAgICAia2V5IjogInZhbHVlIiwKICAgICJmb28iOiAiYmFyIgogIH0sCiAgImxpYnMiOiBbImFub3RoZXIvbGlicmFyeSJdLAogICJkaXIiOiB7CiAgICAidGVzdCI6ICJ7e2FwcF9jb250cm9sbGVyfX10ZXN0LyIKICB9LAogICJlbnZpcm9ubWVudCI6ICJkZXYiCn0K',
  'app/config/translations.json' => 'data:text/plain;base64,ew0KICAidHJhbnNsYXRpb25zIjogew0KICAgICJob21lIjoge30sDQogICAgImdlbmVyYWwiOnt9DQogIH0NCn0NCg==',
  'app/config/urls.json' => 'data:text/plain;base64,ewogICJ1cmxzIjogWwogICAgewogICAgICAiaWQiOiAicGFnZXMiLAogICAgICAibW9kdWxlIjogImhvbWUiLAogICAgICAidXJscyI6IFsKICAgICAgICB7CiAgICAgICAgICAiaWQiOiAicGFnZV9zdGFydCIsCiAgICAgICAgICAidXJsIjogIi8iLAogICAgICAgICAgImFjdGlvbiI6ICJzdGFydCIsCiAgICAgICAgICAiY29tbWVudCI6ICJQw6FnaW5hIGRlIGluaWNpbyIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICJpZCI6ICJwYWdlX3VzZXIiLAogICAgICAgICAgInVybCI6ICIvdXNlci86aWQiLAogICAgICAgICAgImFjdGlvbiI6ICJ1c2VyIiwKICAgICAgICAgICJjb21tZW50IjogIlDDoWdpbmEgZGUgdW4gdXN1YXJpbyIKICAgICAgICB9CiAgICAgIF0KICAgIH0sCiAgICB7CiAgICAgICJpZCI6ICJhcGkiLAogICAgICAibW9kdWxlIjogImFwaSIsCiAgICAgICJ0eXBlIjogImpzb24iLAogICAgICAicHJlZml4IjogIi9hcGkiLAogICAgICAidXJscyI6IFsKICAgICAgICB7CiAgICAgICAgICAiaWQiOiAiZ2V0X3VzZXIiLAogICAgICAgICAgInVybCI6ICIvZ2V0VXNlci86aWQiLAogICAgICAgICAgImFjdGlvbiI6ICJnZXRVc2VyIiwKICAgICAgICAgICJjb21tZW50IjogIkZ1bmNpw7NuIHBhcmEgb2J0ZW5lciBsb3MgZGF0b3MgZGUgdW4gdXN1YXJpbyIKICAgICAgICB9CiAgICAgIF0KICAgIH0KICBdCn0K',
  'app/controller/api.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgYXBpIGV4dGVuZHMgT0NvbnRyb2xsZXJ7CiAgLyoKICAgKiBGdW5jacOzbiBwYXJhIG9idGVuZXIgbG9zIGRhdG9zIGRlIHVuIHVzdWFyaW8KICAgKi8KICBmdW5jdGlvbiBnZXRVc2VyKCRyZXEpe30KfQ==',
  'app/controller/home.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgaG9tZSBleHRlbmRzIE9Db250cm9sbGVyewogIHByaXZhdGUgJHVzZXJfc2VydmljZTsKICBwcml2YXRlICRwaG90b19zZXJ2aWNlOwoKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpewogICAgJHRoaXMtPnVzZXJfc2VydmljZSAgPSBuZXcgdXNlclNlcnZpY2UoJHRoaXMpOwogICAgJHRoaXMtPnBob3RvX3NlcnZpY2UgPSBuZXcgcGhvdG9TZXJ2aWNlKCR0aGlzKTsKICB9CgogIC8qCiAgICogUMOhZ2luYSBkZSBpbmljaW8KICAgKi8KICBmdW5jdGlvbiBzdGFydCgkcmVxKXsKICAgICR1c2VycyA9ICR0aGlzLT51c2VyX3NlcnZpY2UtPmdldFVzZXJzKCk7CgogICAgJHRoaXMtPmdldFRlbXBsYXRlKCktPmFkZCgnZGF0ZScsICR0aGlzLT51c2VyX3NlcnZpY2UtPmdldExhc3RVcGRhdGUoKSk7CiAgICAkdGhpcy0+Z2V0VGVtcGxhdGUoKS0+YWRkUGFydGlhbCgndXNlcnMnLCAnaG9tZS91c2VycycsIFsndXNlcnMnID0+ICR1c2Vyc10pOwogIH0KCiAgLyoKICAgKiBQw6FnaW5hIGRlIHVuIHVzdWFyaW8KICAgKi8KICBmdW5jdGlvbiB1c2VyKCRyZXEpewogICAgJHVzZXIgPSAkdGhpcy0+dXNlcl9zZXJ2aWNlLT5nZXRVc2VyKCRyZXFbJ2lkJ10pOwogICAgJGxpc3QgPSAkdGhpcy0+cGhvdG9fc2VydmljZS0+Z2V0UGhvdG9zKCR1c2VyLT5nZXQoJ2lkJykpOwoKICAgICR0aGlzLT5nZXRUZW1wbGF0ZSgpLT5hZGQoJ25hbWUnLCAkdXNlci0+Z2V0KCd1c2VyJykpOwogICAgJHRoaXMtPmdldFRlbXBsYXRlKCktPmFkZFBhcnRpYWwoJ3Bob3RvX2xpc3QnLCAnaG9tZS9waG90b19saXN0JywgWydsaXN0Jz0+JGxpc3RdKTsKICB9Cn0K',
  'app/filter/loginFilter.php' => 'data:text/x-php;base64,PD9waHAKICAvKgogICAqIEZpbHRybyBkZSBzZWd1cmlkYWQgcGFyYSBjbGllbnRlcwogICAqLwogIGZ1bmN0aW9uIGxvZ2luRmlsdGVyKCRyZXEpewogICAgZ2xvYmFsICRjOwogICAgJHJlcVsnZmlsdGVyJ10gPSBbJ3N0YXR1cyc9PidlcnJvcicsICdkYXRhJz0+bnVsbF07CgogICAgJHRrID0gbmV3IE9Ub2tlbigkYy0+Z2V0RXh0cmEoJ3NlY3JldCcpKTsKICAgIGlmICgkdGstPmNoZWNrVG9rZW4oJHJlcVsnaGVhZGVycyddWydBdXRob3JpemF0aW9uJ10pKXsKICAgICAgJHJlcVsnZmlsdGVyJ11bJ3N0YXR1cyddID0gJ29rJzsKICAgICAgJHJlcVsnZmlsdGVyJ11bJ2lkJ10gPSAoaW50KSR0ay0+Z2V0UGFyYW0oJ2lkJyk7CiAgICB9CgogICAgcmV0dXJuICRyZXE7CiAgfQo=',
  'app/model/Photo.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgUGhvdG8gZXh0ZW5kcyBPQmFzZXsKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpewogICAgJG1vZGVsX25hbWUgPSBnZXRfY2xhc3MoJHRoaXMpOwogICAgJHRhYmxlX25hbWUgID0gJ3Bob3RvJzsKICAgICRtb2RlbCA9IFsKICAgICAgICAnaWQnID0+IFsKICAgICAgICAgICd0eXBlJyAgICA9PiBCYXNlOjpQSywKICAgICAgICAgICdjb21tZW50JyA9PiAnSWQgw7puaWNvIGRlIGNhZGEgZm90bycKICAgICAgICBdLAogICAgICAgICdpZF91c2VyJyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6TlVNLAogICAgICAgICAgJ2NvbW1lbnQnID0+ICdJZCBkZWwgdXN1YXJpbycsCiAgICAgICAgICAncmVmJyAgICAgPT4gJ3VzZXIuaWQnCiAgICAgICAgXSwKICAgICAgICAnZXh0JyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6VEVYVCwKICAgICAgICAgICdzaXplJyAgICA9PiA1LAogICAgICAgICAgJ2NvbW1lbnQnID0+ICdFeHRlbnNpw7NuIGRlIGxhIGZvdG8nCiAgICAgICAgXSwKICAgICAgICAnY3JlYXRlZF9hdCcgPT4gWwogICAgICAgICAgJ3R5cGUnICAgID0+IEJhc2U6OkNSRUFURUQsCiAgICAgICAgICAnY29tbWVudCcgPT4gJ0ZlY2hhIGRlIGNyZWFjacOzbiBkZWwgcmVnaXN0cm8nCiAgICAgICAgXSwKICAgICAgICAndXBkYXRlZF9hdCcgPT4gWwogICAgICAgICAgJ3R5cGUnICAgID0+IEJhc2U6OlVQREFURUQsCiAgICAgICAgICAnY29tbWVudCcgPT4gJ0ZlY2hhIGRlIMO6bHRpbWEgbW9kaWZpY2FjacOzbiBkZWwgcmVnaXN0cm8nCiAgICAgICAgXQogICAgXTsKCiAgICBwYXJlbnQ6OmxvYWQoJG1vZGVsX25hbWUsICR0YWJsZV9uYW1lLCAkbW9kZWwpOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gX190b1N0cmluZygpewogICAgcmV0dXJuICR0aGlzLT5nZXQoJ2lkJykuJy4nLiR0aGlzLT5nZXQoJ2V4dCcpOwogIH0KICAKICBwcml2YXRlICR0YWdzID0gbnVsbDsKICAKICBwdWJsaWMgZnVuY3Rpb24gc2V0VGFncygkdGFncyl7CiAgICAkdGhpcy0+dGFncyA9ICR0YWdzOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gZ2V0VGFncygpewogICAgaWYgKGlzX251bGwoJHRoaXMtPnRhZ3MpKXsKICAgICAgJHRoaXMtPmxvYWRUYWdzKCk7CiAgICB9CiAgICByZXR1cm4gJHRoaXMtPnRhZ3M7CiAgfQogIAogIHByaXZhdGUgZnVuY3Rpb24gbG9hZFRhZ3MoKXsKICAgICRsaXN0ID0gW107CiAgICAkc3FsID0gc3ByaW50ZiggIlNFTEVDVCAqIEZST00gYHRhZ2AgV0hFUkUgYGlkYCBJTiAoU0VMRUNUIGBpZF90YWdgIEZST00gYHBob3RvX3RhZ2AgV0hFUkUgYGlkX3Bob3RvYCA9ICVzKSIsICR0aGlzLT5nZXQoJ2lkJykgKTsKICAgICR0aGlzLT5kYi0+cXVlcnkoJHNxbCk7CgogICAgd2hpbGUoJHJlcz0kdGhpcy0+ZGItPm5leHQoKSl7CiAgICAgICR0YWcgPSBuZXcgVGFnKCk7CiAgICAgICR0YWctPnVwZGF0ZSgkcmVzKTsKCiAgICAgIGFycmF5X3B1c2goJGxpc3QsICR0YWcpOwogICAgfQoKICAgICR0aGlzLT50YWdzID0gJGxpc3Q7CiAgfQp9Cg==',
  'app/model/PhotoTag.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgUGhvdG9UYWcgZXh0ZW5kcyBPQmFzZXsKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpewogICAgJG1vZGVsX25hbWUgPSBnZXRfY2xhc3MoJHRoaXMpOwogICAgJHRhYmxlX25hbWUgID0gJ3Bob3RvX3RhZyc7CiAgICAkbW9kZWwgPSBbCiAgICAgICAgJ2lkX3Bob3RvJyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6UEssCiAgICAgICAgICAnY29tbWVudCcgPT4gJ0lkIGRlIGxhIGZvdG8nLAogICAgICAgICAgJ3JlZicgICAgID0+ICdwaG90by5pZCcKICAgICAgICBdLAogICAgICAgICdpZF90YWcnID0+IFsKICAgICAgICAgICd0eXBlJyAgICA9PiBCYXNlOjpQSywKICAgICAgICAgICdjb21tZW50JyA9PiAnSWQgZGUgbGEgdGFnJywKICAgICAgICAgICdyZWYnICAgICA9PiAndGFnLmlkJwogICAgICAgIF0sCiAgICAgICAgJ2NyZWF0ZWRfYXQnID0+IFsKICAgICAgICAgICd0eXBlJyAgICA9PiBCYXNlOjpDUkVBVEVELAogICAgICAgICAgJ2NvbW1lbnQnID0+ICdGZWNoYSBkZSBjcmVhY2nDs24gZGVsIHJlZ2lzdHJvJwogICAgICAgIF0KICAgIF07CgogICAgcGFyZW50Ojpsb2FkKCRtb2RlbF9uYW1lLCAkdGFibGVfbmFtZSwgJG1vZGVsKTsKICB9Cn0K',
  'app/model/Tag.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgVGFnIGV4dGVuZHMgT0Jhc2V7CiAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKXsKICAgICRtb2RlbF9uYW1lID0gZ2V0X2NsYXNzKCR0aGlzKTsKICAgICR0YWJsZV9uYW1lICA9ICd0YWcnOwogICAgJG1vZGVsID0gWwogICAgICAgICdpZCcgPT4gWwogICAgICAgICAgJ3R5cGUnICAgID0+IEJhc2U6OlBLLAogICAgICAgICAgJ2NvbW1lbnQnID0+ICdJZCDDum5pY28gZGUgY2FkYSB0YWcnCiAgICAgICAgXSwKICAgICAgICAnbmFtZScgPT4gWwogICAgICAgICAgJ3R5cGUnICAgICA9PiBCYXNlOjpURVhULAogICAgICAgICAgJ3NpemUnICAgICA9PiAyMCwKICAgICAgICAgICdudWxsYWJsZScgPT4gZmFsc2UsCiAgICAgICAgICAnY29tbWVudCcgID0+ICdOb21icmUgZGUgbGEgdGFnJwogICAgICAgIF0sCiAgICAgICAgJ2lkX3VzZXInID0+IFsKICAgICAgICAgICd0eXBlJyAgICAgPT4gQmFzZTo6TlVNLAogICAgICAgICAgJ251bGxhYmxlJyA9PiB0cnVlLAogICAgICAgICAgJ2RlZmF1bHQnICA9PiBudWxsLAogICAgICAgICAgJ2NvbW1lbnQnICA9PiAnSWQgZGVsIHVzdWFyaW8nLAogICAgICAgICAgJ3JlZicgICAgICA9PiAndXNlci5pZCcKICAgICAgICBdLAogICAgICAgICdjcmVhdGVkX2F0JyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6Q1JFQVRFRCwKICAgICAgICAgICdjb21tZW50JyA9PiAnRmVjaGEgZGUgY3JlYWNpw7NuIGRlbCByZWdpc3RybycKICAgICAgICBdLAogICAgICAgICd1cGRhdGVkX2F0JyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6VVBEQVRFRCwKICAgICAgICAgICdjb21tZW50JyA9PiAnRmVjaGEgZGUgw7psdGltYSBtb2RpZmljYWNpw7NuIGRlbCByZWdpc3RybycKICAgICAgICBdCiAgICBdOwoKICAgIHBhcmVudDo6bG9hZCgkbW9kZWxfbmFtZSwgJHRhYmxlX25hbWUsICRtb2RlbCk7CiAgfQogIAogIHB1YmxpYyBmdW5jdGlvbiBfX3RvU3RyaW5nKCl7CiAgICByZXR1cm4gJHRoaXMtPmdldCgnbmFtZScpOwogIH0KfQo=',
  'app/model/User.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgVXNlciBleHRlbmRzIE9CYXNlewogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7CiAgICAkbW9kZWxfbmFtZSA9IGdldF9jbGFzcygkdGhpcyk7CiAgICAkdGFibGVfbmFtZSAgPSAndXNlcic7CiAgICAkbW9kZWwgPSBbCiAgICAgICAgJ2lkJyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6UEssCiAgICAgICAgICAnY29tbWVudCcgPT4gJ0lkIMO6bmljbyBkZSB1biB1c3VhcmlvJwogICAgICAgIF0sCiAgICAgICAgJ3VzZXInID0+IFsKICAgICAgICAgICd0eXBlJyAgICAgPT4gQmFzZTo6VEVYVCwKICAgICAgICAgICdzaXplJyAgICAgPT4gNTAsCiAgICAgICAgICAnbnVsbGFibGUnID0+IGZhbHNlLAogICAgICAgICAgJ2NvbW1lbnQnICA9PiAnTm9tYnJlIGRlIHVzdWFyaW8nCiAgICAgICAgXSwKICAgICAgICAncGFzcycgPT4gWwogICAgICAgICAgJ3R5cGUnICAgICA9PiBCYXNlOjpURVhULAogICAgICAgICAgJ3NpemUnICAgICA9PiAxMDAsCiAgICAgICAgICAnbnVsbGFibGUnID0+IGZhbHNlLAogICAgICAgICAgJ2NvbW1lbnQnICA9PiAnQ29udHJhc2XDsWEgZGVsIHVzdWFyaW8nCiAgICAgICAgXSwKICAgICAgICAnbnVtX3Bob3RvcycgPT4gWwogICAgICAgICAgJ3R5cGUnICAgICA9PiBCYXNlOjpOVU0sCiAgICAgICAgICAnZGVmYXVsdCcgID0+IDAsCiAgICAgICAgICAnbnVsbGFibGUnID0+IGZhbHNlLAogICAgICAgICAgJ2NvbW1lbnQnICA9PidOw7ptZXJvIGRlIGZvdG9zIGRlIHVuIHVzdWFyaW8nCiAgICAgICAgXSwKICAgICAgICAnc2NvcmUnID0+IFsKICAgICAgICAgICd0eXBlJyAgICA9PiBCYXNlOjpGTE9BVCwKICAgICAgICAgICdjb21tZW50JyA9PiAnUHVudHVhY2nDs24gZGVsIHVzdWFyaW8nCiAgICAgICAgXSwKICAgICAgICAnYWN0aXZlJyA9PiBbCiAgICAgICAgICAndHlwZScgICAgID0+IEJhc2U6OkJPT0wsCiAgICAgICAgICAnZGVmYXVsdCcgID0+IHRydWUsCiAgICAgICAgICAnbnVsbGFibGUnID0+IGZhbHNlLAogICAgICAgICAgJ2NvbW1lbnQnICA9PiAnVXN1YXJpbyBhY3Rpdm8gMSBvIG5vIDAnCiAgICAgICAgXSwKICAgICAgICAnbGFzdF9sb2dpbicgPT4gWwogICAgICAgICAgJ3R5cGUnICAgICA9PiBCYXNlOjpEQVRFLAogICAgICAgICAgJ251bGxhYmxlJyA9PiBmYWxzZSwKICAgICAgICAgICdjb21tZW50JyAgPT4gJ0ZlY2hhIGRlIGxhIMO6bHRpbWEgdmV6IHF1ZSBpbmljacOzIHNlc2nDs24nCiAgICAgICAgXSwKICAgICAgICAnbm90ZXMnID0+IFsKICAgICAgICAgICd0eXBlJyAgICA9PiBCYXNlOjpMT05HVEVYVCwKICAgICAgICAgICdjb21tZW50JyA9PiAnTm90YXMgc29icmUgZWwgdXN1YXJpbycKICAgICAgICBdLAogICAgICAgICdjcmVhdGVkX2F0JyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6Q1JFQVRFRCwKICAgICAgICAgICdjb21tZW50JyA9PiAnRmVjaGEgZGUgY3JlYWNpw7NuIGRlbCByZWdpc3RybycKICAgICAgICBdLAogICAgICAgICd1cGRhdGVkX2F0JyA9PiBbCiAgICAgICAgICAndHlwZScgICAgPT4gQmFzZTo6VVBEQVRFRCwKICAgICAgICAgICdjb21tZW50JyA9PiAnRmVjaGEgZGUgw7psdGltYSBtb2RpZmljYWNpw7NuIGRlbCByZWdpc3RybycKICAgICAgICBdCiAgICBdOwoKICAgIHBhcmVudDo6bG9hZCgkbW9kZWxfbmFtZSwgJHRhYmxlX25hbWUsICRtb2RlbCk7CiAgfQp9Cg==',
  'app/service/photo.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgcGhvdG9TZXJ2aWNlIGV4dGVuZHMgT1NlcnZpY2V7CiAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNvbnRyb2xsZXIpewogICAgJHRoaXMtPnNldENvbnRyb2xsZXIoJGNvbnRyb2xsZXIpOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGdldFBob3RvcygkaWQpewogICAgJGRiID0gJHRoaXMtPmdldENvbnRyb2xsZXIoKS0+Z2V0REIoKTsKICAgICRzcWwgPSBzcHJpbnRmKCJTRUxFQ1QgKiBGUk9NIGBwaG90b2AgV0hFUkUgYGlkX3VzZXJgID0gJXMiLCAkaWQpOwogICAgJGRiLT5xdWVyeSgkc3FsKTsKICAgIAogICAgJHBob3RvcyA9IFtdOwogICAgd2hpbGUgKCRyZXM9JGRiLT5uZXh0KCkpewogICAgICAkcGhvdG8gPSBuZXcgUGhvdG8oKTsKICAgICAgJHBob3RvLT51cGRhdGUoJHJlcyk7CiAgICAgIAogICAgICBhcnJheV9wdXNoKCRwaG90b3MsICRwaG90byk7CiAgICB9CiAgICAKICAgIHJldHVybiAkcGhvdG9zOwogIH0KfQ==',
  'app/service/user.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgdXNlclNlcnZpY2UgZXh0ZW5kcyBPU2VydmljZXsKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkY29udHJvbGxlcil7CiAgICAkdGhpcy0+c2V0Q29udHJvbGxlcigkY29udHJvbGxlcik7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gZ2V0TGFzdFVwZGF0ZSgpewogICAgcmV0dXJuIGRhdGUoJ2QtbS1ZIEg6aTpzJyk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gZ2V0VXNlcnMoKXsKICAgICRkYiA9ICR0aGlzLT5nZXRDb250cm9sbGVyKCktPmdldERCKCk7CiAgICAkc3FsID0gIlNFTEVDVCAqIEZST00gYHVzZXJgIjsKICAgICRkYi0+cXVlcnkoJHNxbCk7CiAgICAkbGlzdCA9IFtdOwoKICAgIHdoaWxlICgkcmVzPSRkYi0+bmV4dCgpKXsKICAgICAgJHVzZXIgPSBuZXcgVXNlcigpOwogICAgICAkdXNlci0+dXBkYXRlKCRyZXMpOwoKICAgICAgYXJyYXlfcHVzaCgkbGlzdCwgJHVzZXIpOwogICAgfQoKICAgIHJldHVybiAkbGlzdDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyKCRpZCl7CiAgICAkdXNlciA9IG5ldyBVc2VyKCk7CiAgICAkdXNlci0+ZmluZChbJ2lkJz0+JGlkXSk7CgogICAgcmV0dXJuICR1c2VyOwogIH0KfQo=',
  'app/task/email.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIGVtYWlsVGFza3sNCiAgcHVibGljIGZ1bmN0aW9uIF9fdG9TdHJpbmcoKXsNCiAgICByZXR1cm4gImVtYWlsOiBGdW5jacOzbiBwYXJhIGVudmlhciBlbWFpbHMgZGUgcHJ1ZWJhIjsNCiAgfQ0KDQogIHByaXZhdGUgJGVtYWlsX2xpc3QgPSBbDQogICAgJ3dlbGNvbWUnICAgICAgICAgICAgICA9PiAnRW1haWwgcXVlIHNlIGVudsOtYSBhIHVuIG51ZXZvIGNsaWVudGUgYWwgcmVnaXN0cmFyc2UuJywNCiAgICAnbG9zdC1wYXNzd29yZCcgICAgICAgID0+ICdFbWFpbCBxdWUgc2UgZW52w61hIGEgdW4gY2xpZW50ZSBhbCBzb2xpY2l0YXIgdW5hIG51ZXZhIGNvbnRyYXNlw7FhLicsDQogICAgJ29yZGVyLW9rJyAgICAgICAgICAgICA9PiAnRW1haWwgcXVlIHNlIGVudsOtYSBhIHVuIGNsaWVudGUgcXVlIGhhIGhlY2hvIHVuIHBlZGlkby4nLA0KICAgICdwYXltZW50LXJlY2VpdmVkJyAgICAgPT4gJ0VtYWlsIHF1ZSBzZSBub3MgZW52w61hIGFsIHJlY2liaXIgdW4gcGVkaWRvLicsDQogICAgJ29yZGVyLXNoaXBwZWQnICAgICAgICA9PiAnRW1haWwgcXVlIHNlIGVudsOtYSBhbCBjbGllbnRlIGN1YW5kbyBlbCBwZWRpZG8geWEgc2UgaGEgZW52aWFkby4nLA0KICAgICdvcmRlci1hZGRyZXNzLWNoYW5nZScgPT4gJ0VtYWlsIHF1ZSBzZSBub3MgZW52w61hIGN1YW5kbyB1biBjbGllbnRlIGNhbWJpYSBsYSBkaXJlY2Npw7NuIGRlIGVudHJlZ2EuJywNCiAgICAnY29udGFjdCcgICAgICAgICAgICAgID0+ICdFbWFpbCBxdWUgc2Ugbm9zIGVudsOtYSBjdWFuZG8gdW4gdXN1YXJpbyBlc2NyaWJlIGRlc2RlIGNvbnRhY3RvLicNCiAgXTsNCg0KICBwdWJsaWMgZnVuY3Rpb24gcnVuKCRvcHRpb25zPVtdKXsNCiAgICBpZiAoY291bnQoJG9wdGlvbnMpPT0wKXsNCiAgICAgIGVjaG8gIlxuVGllbmVzIHF1ZSBpbmRpY2FyIHBvciBsbyBtZW5vcyB1bmEgb3BjacOzbi5cblxuIjsNCiAgICAgIGVjaG8gIiAgT3BjaW9uZXM6XG4iOw0KICAgICAgZm9yZWFjaCAoJHRoaXMtPmVtYWlsX2xpc3QgYXMgJG9wdGlvbiA9PiAkdGV4dCl7DQogICAgICAgIGVjaG8gIiAgwrcgICIuJG9wdGlvbi4iOiAiLiR0ZXh0LiJcbiI7DQogICAgICB9DQogICAgICBlY2hvICJcblBvciBlamVtcGxvOiBwaHAgb2Z3LnBocCBlbWFpbCB3ZWxjb21lIGNvbnRhY3RcblxuIjsNCiAgICAgIGV4aXQoKTsNCiAgICB9DQogICAgZm9yZWFjaCAoJG9wdGlvbnMgYXMgJG9wdGlvbil7DQogICAgICBpZiAoIWFycmF5X2tleV9leGlzdHMoJG9wdGlvbiwgJHRoaXMtPmVtYWlsX2xpc3QpKXsNCiAgICAgICAgZWNobyAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iOw0KICAgICAgICBlY2hvICJFUlJPUjogTGEgb3BjacOzbiAiLiRvcHRpb24uIiBubyBleGlzdGUuXG4iOw0KICAgICAgICBlY2hvICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiI7DQogICAgICAgIGNvbnRpbnVlOw0KICAgICAgfQ0KICAgICAgZWNobyAiRW52aWFuZG8gIi4kb3B0aW9uLiI6ICIuJHRoaXMtPmVtYWlsX2xpc3RbJG9wdGlvbl0uIlxuIjsNCiAgICAgIHN3aXRjaCAoJG9wdGlvbil7DQogICAgICAgIGNhc2UgJ3dlbGNvbWUnOiAkdGhpcy0+c2VuZFdlbGNvbWUoKTsNCiAgICAgICAgY2FzZSAnbG9zdC1wYXNzd29yZCc6ICR0aGlzLT5zZW5kTG9zdFBhc3N3b3JkKCk7DQogICAgICAgIGNhc2UgJ29yZGVyLW9rJzogJHRoaXMtPnNlbmRPcmRlck9rKCk7DQogICAgICAgIGNhc2UgJ3BheW1lbnQtcmVjZWl2ZWQnOiAkdGhpcy0+c2VuZFBheW1lbnRSZWNlaXZlZCgpOw0KICAgICAgICBjYXNlICdvcmRlci1zaGlwcGVkJzogJHRoaXMtPnNlbmRPcmRlclNoaXBwZWQoKTsNCiAgICAgICAgY2FzZSAnb3JkZXItYWRkcmVzcy1jaGFuZ2UnOiAkdGhpcy0+c2VuZE9yZGVyQWRkcmVzc0NoYW5nZSgpOw0KICAgICAgICBjYXNlICdjb250YWN0JzogJHRoaXMtPnNlbmRDb250YWN0KCk7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgcHJpdmF0ZSBmdW5jdGlvbiBzZW5kV2VsY29tZSgpew0KDQogIH0NCg0KICBwcml2YXRlIGZ1bmN0aW9uIHNlbmRMb3N0UGFzc3dvcmQoKXsNCg0KICB9DQoNCiAgcHJpdmF0ZSBmdW5jdGlvbiBzZW5kT3JkZXJPaygpew0KDQogIH0NCg0KICBwcml2YXRlIGZ1bmN0aW9uIHNlbmRQYXltZW50UmVjZWl2ZWQoKXsNCg0KICB9DQoNCiAgcHJpdmF0ZSBmdW5jdGlvbiBzZW5kT3JkZXJTaGlwcGVkKCl7DQoNCiAgfQ0KDQogIHByaXZhdGUgZnVuY3Rpb24gc2VuZE9yZGVyQWRkcmVzc0NoYW5nZSgpew0KDQogIH0NCg0KICBwcml2YXRlIGZ1bmN0aW9uIHNlbmRDb250YWN0KCl7DQoNCiAgfQ0KfQ0K',
  'app/template/api/getUser.php' => 'data:inode/x-empty;base64,',
  'app/template/home/start.php' => 'data:text/plain;base64,RGF0ZToge3tkYXRlfX0NCjxicj4NCnt7dXNlcnN9fQ0K',
  'app/template/home/user.php' => 'data:text/plain;base64,PGgxPkhvbGEge3tuYW1lfX08L2gxPg0KDQp7e3Bob3RvX2xpc3R9fQ0K',
  'app/template/layout/default.php' => 'data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVzIj4KICA8aGVhZCBpZD0iaGVhZCI+CiAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCIgLz4KICAgIDwhLS0gU2V0IHRoZSB2aWV3cG9ydCB3aWR0aCB0byBkZXZpY2Ugd2lkdGggZm9yIG1vYmlsZSAtLT4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgiIC8+CiAgICA8dGl0bGU+e3t0aXRsZX19PC90aXRsZT4KICAgIDxsaW5rIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iL2Zhdmljb24ucG5nIiByZWw9Imljb24iPgogICAgPGxpbmsgdHlwZT0iaW1hZ2UveC1pY29uIiBocmVmPSIvZmF2aWNvbi5wbmciIHJlbD0ic2hvcnRjdXQgaWNvbiI+CiAgICB7e2Nzc319CiAgICB7e2pzfX0KICA8L2hlYWQ+CgogIDxib2R5PgogICAgPGRpdiBpZD0ibWVzZ19ib3giPjwvZGl2PgogICAge3tib2R5fX0KICA8L2JvZHk+CjwvaHRtbD4K',
  'app/template/partials/home/photo_list.php' => 'data:text/x-php;base64,PD9waHAgaWYgKGNvdW50KCR2YWx1ZXNbJ2xpc3QnXSk+MCk6ID8+CiAgPHVsPgo8P3BocCBmb3JlYWNoICgkdmFsdWVzWydsaXN0J10gYXMgJHBob3RvKTogPz4KICAgIDxsaT4KICAgICAgPHN0cm9uZz5Gb3RvIDw/cGhwIGVjaG8gJHBob3RvID8+PC9zdHJvbmc+CiAgICAgIDxwPgogICAgICAgIFRhZ3M6IDw/cGhwIGVjaG8gaW1wbG9kZSgnLCAnLCAkcGhvdG8tPmdldFRhZ3MoKSkgPz4KICAgICAgPC9wPgogICAgPC9saT4KPD9waHAgZW5kZm9yZWFjaCA/PgogIDwvdWw+Cjw/cGhwIGVsc2U6ID8+CiAgRWwgdXN1YXJpbyB0b2RhdsOtYSBubyB0aWVuZSBuaW5ndW5hIGZvdG8uCjw/cGhwIGVuZGlmID8+',
  'app/template/partials/home/users.php' => 'data:text/x-php;base64,PD9waHAgaWYgKGNvdW50KCR2YWx1ZXNbJ3VzZXJzJ10pPjApOiA/Pg0KICA8dWw+DQo8P3BocCBmb3JlYWNoICgkdmFsdWVzWyd1c2VycyddIGFzICR1c2VyKTogPz4NCiAgICA8bGk+DQogICAgICA8YSBocmVmPSIvdXNlci88P3BocCBlY2hvICR1c2VyLT5nZXQoJ2lkJykgPz4iPjw/cGhwIGVjaG8gJHVzZXItPmdldCgndXNlcicpID8+PC9hPg0KICAgIDwvbGk+DQo8P3BocCBlbmRmb3JlYWNoID8+DQogIDwvdWw+DQo8P3BocCBlbHNlOiA/Pg0KICBUb2RhdsOtYSBubyBoYXkgbmluZ8O6biB1c3VhcmlvLg0KPD9waHAgZW5kaWYgPz4NCg==',
  'ofw/base/OBase.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIE9CYXNlew0KICBwcm90ZWN0ZWQgJGRiICAgICAgICAgPSBudWxsOw0KICBwcm90ZWN0ZWQgJG1vZGVsX25hbWUgPSAnJzsNCiAgcHJvdGVjdGVkICR0YWJsZV9uYW1lID0gJyc7DQogIHByb3RlY3RlZCAkZGVmYXVsdF9tb2RlbCA9IFsNCiAgICBCYXNlOjpQSyAgICAgICA9PiBbJ2RlZmF1bHQnPT5udWxsLCAgJ29yaWdpbmFsJz0+bnVsbCwgICd2YWx1ZSc9Pm51bGwsICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT50cnVlLCAgJ3NpemUnPT4xMSwgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpDUkVBVEVEICA9PiBbJ2RlZmF1bHQnPT5udWxsLCAgJ29yaWdpbmFsJz0+bnVsbCwgICd2YWx1ZSc9Pm51bGwsICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4wLCAgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpVUERBVEVEICA9PiBbJ2RlZmF1bHQnPT5udWxsLCAgJ29yaWdpbmFsJz0+bnVsbCwgICd2YWx1ZSc9Pm51bGwsICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4wLCAgJ251bGxhYmxlJz0+dHJ1ZSwgICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpOVU0gICAgICA9PiBbJ2RlZmF1bHQnPT4wLCAgICAgJ29yaWdpbmFsJz0+MCwgICAgICd2YWx1ZSc9PjAsICAgICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4xMSwgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpURVhUICAgICA9PiBbJ2RlZmF1bHQnPT4nJywgICAgJ29yaWdpbmFsJz0+JycsICAgICd2YWx1ZSc9PicnLCAgICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT41MCwgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpEQVRFICAgICA9PiBbJ2RlZmF1bHQnPT5udWxsLCAgJ29yaWdpbmFsJz0+bnVsbCwgICd2YWx1ZSc9PicnLCAgICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4wLCAgJ251bGxhYmxlJz0+dHJ1ZSwgICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpCT09MICAgICA9PiBbJ2RlZmF1bHQnPT5mYWxzZSwgJ29yaWdpbmFsJz0+ZmFsc2UsICd2YWx1ZSc9PmZhbHNlLCAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4xLCAgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpMT05HVEVYVCA9PiBbJ2RlZmF1bHQnPT4nJywgICAgJ29yaWdpbmFsJz0+JycsICAgICd2YWx1ZSc9PicnLCAgICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4wLCAgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXSwNCiAgICBCYXNlOjpGTE9BVCAgICA9PiBbJ2RlZmF1bHQnPT4wLCAgICAgJ29yaWdpbmFsJz0+MCwgICAgICd2YWx1ZSc9PjAsICAgICAnY2xlYW4nPT5mYWxzZSwgJ2luY3InPT5mYWxzZSwgJ3NpemUnPT4wLCAgJ251bGxhYmxlJz0+ZmFsc2UsICdjb21tZW50Jz0+JycsICdyZWYnPT4nJywgJ2J5Jz0+JycsICdleHBvc2UnPT50cnVlXQ0KICBdOw0KICBwcm90ZWN0ZWQgJG1vZGVsICAgPSBbXTsNCiAgcHJvdGVjdGVkICRwayAgICAgID0gW107DQogIHByb3RlY3RlZCAkY3JlYXRlZCA9IG51bGw7DQogIHByb3RlY3RlZCAkdXBkYXRlZCA9IG51bGw7DQogIHByb3RlY3RlZCAkc2hvd19pbl9iYWNrZW5kID0gdHJ1ZTsNCg0KICBmdW5jdGlvbiBsb2FkKCRtb2RlbF9uYW1lLCAkdGFibGVfbmFtZSwgJG1vZGVsKXsNCiAgICAkdGhpcy0+ZGIgICAgICAgICA9IG5ldyBPREIoKTsNCiAgICAkdGhpcy0+bW9kZWxfbmFtZSA9ICRtb2RlbF9uYW1lOw0KICAgICR0aGlzLT50YWJsZV9uYW1lID0gJHRhYmxlX25hbWU7DQogICAgJHRoaXMtPm1vZGVsICAgICAgPSAkbW9kZWw7DQoNCiAgICAkZnVsbF9tb2RlbCA9IFtdOw0KICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRfbmFtZSA9PiAkcm93KXsNCiAgICAgIGlmICgkcm93Wyd0eXBlJ109PT1CYXNlOjpQSyl7DQogICAgICAgIGFycmF5X3B1c2goJHRoaXMtPnBrLCAkZmllbGRfbmFtZSk7DQogICAgICB9DQogICAgICBpZiAoJHJvd1sndHlwZSddPT09QmFzZTo6Q1JFQVRFRCl7DQogICAgICAgICR0aGlzLT5jcmVhdGVkID0gJGZpZWxkX25hbWU7DQogICAgICB9DQogICAgICBpZiAoJHJvd1sndHlwZSddPT09QmFzZTo6VVBEQVRFRCl7DQogICAgICAgICR0aGlzLT51cGRhdGVkID0gJGZpZWxkX25hbWU7DQogICAgICB9DQoNCiAgICAgICR0ZW1wID0gJHRoaXMtPmRlZmF1bHRfbW9kZWxbJHJvd1sndHlwZSddXTsNCiAgICAgICR0ZW1wWyd0eXBlJ10gICAgID0gJHJvd1sndHlwZSddOw0KICAgICAgJHRlbXBbJ2RlZmF1bHQnXSAgPSBhcnJheV9rZXlfZXhpc3RzKCdkZWZhdWx0JywgICRyb3cpID8gJHJvd1snZGVmYXVsdCddICA6ICR0ZW1wWydkZWZhdWx0J107DQogICAgICAkdGVtcFsnb3JpZ2luYWwnXSA9IGFycmF5X2tleV9leGlzdHMoJ29yaWdpbmFsJywgJHJvdykgPyAkcm93WydvcmlnaW5hbCddIDogJHRlbXBbJ29yaWdpbmFsJ107DQogICAgICAkdGVtcFsndmFsdWUnXSAgICA9IGFycmF5X2tleV9leGlzdHMoJ3ZhbHVlJywgICAgJHJvdykgPyAkcm93Wyd2YWx1ZSddICAgIDogJHRlbXBbJ3ZhbHVlJ107DQogICAgICAkdGVtcFsnY2xlYW4nXSAgICA9IGFycmF5X2tleV9leGlzdHMoJ2NsZWFuJywgICAgJHJvdykgPyAkcm93WydjbGVhbiddICAgIDogJHRlbXBbJ2NsZWFuJ107DQogICAgICAkdGVtcFsnaW5jciddICAgICA9IGFycmF5X2tleV9leGlzdHMoJ2luY3InLCAgICAgJHJvdykgPyAkcm93WydpbmNyJ10gICAgIDogJHRlbXBbJ2luY3InXTsNCiAgICAgICR0ZW1wWydzaXplJ10gICAgID0gYXJyYXlfa2V5X2V4aXN0cygnc2l6ZScsICAgICAkcm93KSA/ICRyb3dbJ3NpemUnXSAgICAgOiAkdGVtcFsnc2l6ZSddOw0KICAgICAgJHRlbXBbJ251bGxhYmxlJ10gPSBhcnJheV9rZXlfZXhpc3RzKCdudWxsYWJsZScsICRyb3cpID8gJHJvd1snbnVsbGFibGUnXSA6ICR0ZW1wWydudWxsYWJsZSddOw0KICAgICAgJHRlbXBbJ2NvbW1lbnQnXSAgPSBhcnJheV9rZXlfZXhpc3RzKCdjb21tZW50JywgICRyb3cpID8gJHJvd1snY29tbWVudCddICA6ICR0ZW1wWydjb21tZW50J107DQogICAgICAkdGVtcFsncmVmJ10gICAgICA9IGFycmF5X2tleV9leGlzdHMoJ3JlZicsICAgICAgJHJvdykgPyAkcm93WydyZWYnXSAgICAgIDogJHRlbXBbJ3JlZiddOw0KICAgICAgJHRlbXBbJ2J5J10gICAgICAgPSBhcnJheV9rZXlfZXhpc3RzKCdieScsICAgICAgICRyb3cpID8gJHJvd1snYnknXSAgICAgICA6ICR0ZW1wWydieSddOw0KICAgICAgJHRlbXBbJ2V4cG9zZSddICAgPSBhcnJheV9rZXlfZXhpc3RzKCdleHBvc2UnLCAgICRyb3cpID8gJHJvd1snZXhwb3NlJ10gICA6ICR0ZW1wWydleHBvc2UnXTsNCiAgICAgICRmdWxsX21vZGVsWyRmaWVsZF9uYW1lXSA9ICR0ZW1wOw0KICAgIH0NCiAgICAkdGhpcy0+c2V0TW9kZWwoJGZ1bGxfbW9kZWwpOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGdldE1vZGVsTmFtZSgpew0KICAgIHJldHVybiAkdGhpcy0+bW9kZWxfbmFtZTsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKXsNCiAgICByZXR1cm4gJHRoaXMtPnRhYmxlX25hbWU7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0TW9kZWwoJG0pew0KICAgICR0aGlzLT5tb2RlbCA9ICRtOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGdldE1vZGVsKCRrZXk9bnVsbCl7DQogICAgaWYgKGlzX251bGwoJGtleSkpew0KICAgICAgcmV0dXJuICR0aGlzLT5tb2RlbDsNCiAgICB9DQogICAgZWxzZXsNCiAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRrZXksICR0aGlzLT5tb2RlbCkpew0KICAgICAgICByZXR1cm4gJHRoaXMtPm1vZGVsWyRrZXldOw0KICAgICAgfQ0KICAgICAgZWxzZXsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXQoJGtleSwgJHZhbHVlKXsNCiAgICAkbW9kZWwgPSAkdGhpcy0+Z2V0TW9kZWwoKTsNCiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygka2V5LCAkbW9kZWwpKXsNCiAgICAgICRtb2RlbFska2V5XVsndmFsdWUnXSA9ICR2YWx1ZTsNCiAgICAgICR0aGlzLT5zZXRNb2RlbCgkbW9kZWwpOw0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIGVsc2V7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGdldCgka2V5LCAkZXh0cmE9bnVsbCl7DQogICAgJGZpZWxkID0gJHRoaXMtPmdldE1vZGVsKCRrZXkpOw0KICAgIGlmICgkZmllbGQpew0KICAgICAgaWYgKGlzX251bGwoJGZpZWxkWyd2YWx1ZSddKSl7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfQ0KICAgICAgaWYgKCAhaXNfbnVsbCgkZXh0cmEpICYmIGluX2FycmF5KCRmaWVsZFsndHlwZSddLCBbQmFzZTo6Q1JFQVRFRCxCYXNlOjpVUERBVEVELEJhc2U6OkRBVEVdKSApew0KICAgICAgICByZXR1cm4gZGF0ZSgkZXh0cmEsIHN0cnRvdGltZSgkZmllbGRbJ3ZhbHVlJ10pKTsNCiAgICAgIH0NCiAgICAgIGlmICggIWlzX251bGwoJGV4dHJhKSAmJiAoJGZpZWxkWyd0eXBlJ109PUJhc2U6OlRFWFQgfHwgJGZpZWxkWyd0eXBlJ109PUJhc2U6OkxPTkdURVhUKSApew0KICAgICAgICBpZiAoc3RybGVuKCRmaWVsZFsndmFsdWUnXSk+JGV4dHJhKXsNCiAgICAgICAgICByZXR1cm4gc3Vic3RyKCRmaWVsZFsndmFsdWUnXSwgMCwgJGV4dHJhKS4nLi4uJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIHJldHVybiAkZmllbGRbJ3ZhbHVlJ107DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICgkZmllbGRbJ3R5cGUnXT09QmFzZTo6TlVNKXsNCiAgICAgICAgcmV0dXJuIChpbnQpJGZpZWxkWyd2YWx1ZSddOw0KICAgICAgfQ0KICAgICAgaWYgKCRmaWVsZFsndHlwZSddPT1CYXNlOjpCT09MKXsNCiAgICAgICAgcmV0dXJuICggKCAoaW50KSRmaWVsZFsndmFsdWUnXSApPT0xICk7DQogICAgICB9DQogICAgICBpZiAoJGZpZWxkWyd0eXBlJ109PUJhc2U6OkZMT0FUKXsNCiAgICAgICAgcmV0dXJuIChmbG9hdCkkZmllbGRbJ3ZhbHVlJ107DQogICAgICB9DQogICAgICByZXR1cm4gJGZpZWxkWyd2YWx1ZSddOw0KICAgIH0NCiAgICBlbHNlew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBnZXRQa3MoKXsNCiAgICAkcmV0ID0gW107DQogICAgJG1vZGVsID0gJHRoaXMtPmdldE1vZGVsKCk7DQoNCiAgICBmb3JlYWNoICgkbW9kZWwgYXMgJGZpZWxkX25hbWUgPT4gJHJvdyl7DQogICAgICBpZiAoJHJvd1sndHlwZSddPT1CYXNlOjpQSyl7DQogICAgICAgIGFycmF5X3B1c2goJHJldCwgJGZpZWxkX25hbWUpOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gJHJldDsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRTaG93SW5CYWNrZW5kKCRzaG93KXsNCiAgICAkdGhpcy0+c2hvd19pbl9iYWNrZW5kID0gJHNob3c7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0U2hvd0luQmFja2VuZCgpew0KICAgIHJldHVybiAkdGhpcy0+c2hvd19pbl9iYWNrZW5kOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIHNhdmUoKXsNCiAgICAkc2F2ZV90eXBlID0gJyc7DQoNCiAgICAvLyBDb2pvIG1vZGVsbw0KICAgICRtb2RlbCA9ICR0aGlzLT5nZXRNb2RlbCgpOw0KDQogICAgLy8gTWFyY28gZmVjaGEgZGUgdWx0aW1hIG1vZGlmaWNhY2nDs24NCiAgICBpZiAoIWlzX251bGwoJHRoaXMtPnVwZGF0ZWQpKXsNCiAgICAgICRtb2RlbFskdGhpcy0+dXBkYXRlZF1bJ3ZhbHVlJ10gPSBkYXRlKCJZLW0tZCBIOmk6cyIsdGltZSgpKTsNCiAgICB9DQogICAgLy8gVVBEQVRFDQogICAgaWYgKCFpc19udWxsKCRtb2RlbFskdGhpcy0+Y3JlYXRlZF1bJ3ZhbHVlJ10pKXsNCiAgICAgICRzcWwgPSAiVVBEQVRFIGAiLiR0aGlzLT50YWJsZV9uYW1lLiJgIFNFVCAiOw0KICAgICAgJHVwZGF0ZWRfZmllbGRzID0gW107DQogICAgICBmb3JlYWNoICgkbW9kZWwgYXMgJGZpZWxkX25hbWUgPT4gJGZpZWxkKXsNCiAgICAgICAgJGhvbGRlciA9ICInIjsNCiAgICAgICAgJHZhbHVlICA9ICRmaWVsZFsndmFsdWUnXTsNCiAgICAgICAgaWYgKGlzX251bGwoJGZpZWxkWyd2YWx1ZSddKSl7DQogICAgICAgICAgJGhvbGRlciA9ICIiOw0KICAgICAgICAgICR2YWx1ZSAgPSAiTlVMTCI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRmaWVsZFsndHlwZSddIT1CYXNlOjpQSyAmJiAkZmllbGRbJ29yaWdpbmFsJ10hPSR2YWx1ZSl7DQogICAgICAgICAgaWYgKCRmaWVsZFsnY2xlYW4nXSl7DQogICAgICAgICAgICAkY2FkID0gImAiLiRmaWVsZG5hbWUuImAgPSAiLiRob2xkZXIuJHRoaXMtPmRiLT5jbGVhblN0cigkdmFsdWUpLiRob2xkZXI7DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAkY2FkID0gImAiLiRmaWVsZG5hbWUuImAgPSAiLiRob2xkZXIuJHZhbHVlLiRob2xkZXI7DQogICAgICAgICAgfQ0KICAgICAgICAgIGFycmF5X3B1c2goJHVwZGF0ZWRfZmllbGRzLCAkY2FkKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgJHNxbCAuPSBpbXBsb2RlKCR1cGRhdGVkX2ZpZWxkcywiLCAiKTsNCiAgICAgICRzcWwgLj0gIiBXSEVSRSAiOw0KICAgICAgZm9yZWFjaCAoJHRoaXMtPnBrIGFzICRpID0+ICRwa19pbmQpew0KICAgICAgICBpZiAoJGkhPTApew0KICAgICAgICAgICRzcWwgLj0gIkFORCAiOw0KICAgICAgICB9DQogICAgICAgICRzcWwgLj0gImAiLiRwa19pbmQuImAgPSAnIi4kbW9kZWxbJHBrX2luZF1bJ3ZhbHVlJ10uIiciOw0KICAgICAgfQ0KDQogICAgICAkc2F2ZV90eXBlID0gJ3UnOw0KICAgIH0NCiAgICAvLyBJTlNFUlQNCiAgICBlbHNlew0KICAgICAgJG1vZGVsWyR0aGlzLT5jcmVhdGVkXVsndmFsdWUnXSA9IGRhdGUoIlktbS1kIEg6aTpzIix0aW1lKCkpOw0KDQogICAgICAkc3FsID0gIklOU0VSVCBJTlRPIGAiLiR0aGlzLT50YWJsZV9uYW1lLiJgICgiOw0KICAgICAgJGluc2VydF9maWVsZHMgPSBbXTsNCiAgICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRfbmFtZSA9PiAkZmllbGQpew0KICAgICAgICBhcnJheV9wdXNoKCRpbnNlcnRfZmllbGRzLCAiYCIuJGZpZWxkX25hbWUuImAiKTsNCiAgICAgIH0NCiAgICAgICRzcWwgLj0gaW1wbG9kZSgkaW5zZXJ0X2ZpZWxkcywiLCIpOw0KICAgICAgJHNxbCAuPSAiKSBWQUxVRVMgKCI7DQogICAgICAkaW5zZXJ0X2ZpZWxkcyA9IFtdOw0KICAgICAgZm9yZWFjaCAoJG1vZGVsIGFzICRmaWVsZCl7DQogICAgICAgICRob2xkZXIgPSAiJyI7DQogICAgICAgICR2YWx1ZSAgPSAkZmllbGRbJ3ZhbHVlJ107DQogICAgICAgIGlmIChpc19udWxsKCRmaWVsZFsndmFsdWUnXSkpew0KICAgICAgICAgICRob2xkZXIgPSAiIjsNCiAgICAgICAgICAkdmFsdWUgID0gIk5VTEwiOw0KICAgICAgICB9DQogICAgICAgIGlmICgkZmllbGRbJ3R5cGUnXT09MSAmJiAkZmllbGRbJ2luY3InXSl7DQogICAgICAgICAgYXJyYXlfcHVzaCgkaW5zZXJ0X2ZpZWxkcywgIk5VTEwiKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIGlmICgkZmllbGRbJ2NsZWFuJ10pew0KICAgICAgICAgICAgYXJyYXlfcHVzaCgkaW5zZXJ0X2ZpZWxkcywgJGhvbGRlci4kdGhpcy0+ZGItPmNsZWFuU3RyKCR2YWx1ZSkuJGhvbGRlcik7DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICBhcnJheV9wdXNoKCRpbnNlcnRfZmllbGRzLCAkaG9sZGVyLiR2YWx1ZS4kaG9sZGVyKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgICRzcWwgLj0gaW1wbG9kZSgkaW5zZXJ0X2ZpZWxkcywgIiwiKTsNCiAgICAgICRzcWwgLj0gIikiOw0KDQogICAgICAkc2F2ZV90eXBlID0gJ2knOw0KICAgIH0NCg0KICAgIC8vIEVqZWN1dG8gbGEgY29uc3VsdGENCiAgICAkdGhpcy0+ZGItPnF1ZXJ5KCRzcWwpOw0KDQogICAgLy8gU2kgbGEgdGFibGEgc29sbyB0aWVuZSB1biBwayB5IGVzIGluY3JlbWVudGFsIGxvIGd1YXJkbw0KICAgIGlmICgkc2F2ZV90eXBlID09ICdpJyAmJiBjb3VudCgkdGhpcy0+cGspPT0xICYmICRtb2RlbFskdGhpcy0+cGtbMF1dWydpbmNyJ10pew0KICAgICAgJG1vZGVsWyR0aGlzLT5wa1swXV1bJ3ZhbHVlJ10gPSAkdGhpcy0+ZGItPmxhc3RJZCgpOw0KICAgIH0NCg0KICAgIC8vIE1hcmNvIGVuIGVsIG1vZGVsbyB0b2RvIGNvbW8gZ3VhcmRhZG8gKG9yaWdpbmFsPWFjdHVhbCkNCiAgICBmb3JlYWNoKCRtb2RlbCBhcyAkZmllbGRuYW1lPT4kZmllbGQpew0KICAgICAgJG1vZGVsWyRmaWVsZG5hbWVdWydvcmlnaW5hbCddID0gJG1vZGVsWyRmaWVsZG5hbWVdWyd2YWx1ZSddOw0KICAgIH0NCg0KICAgIC8vIEd1YXJkbyBlbCBtb2RlbG8gbW9kaWZpY2Fkbw0KICAgICR0aGlzLT5zZXRNb2RlbCgkbW9kZWwpOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGNoZWNrKCRvcHQ9W10pew0KICAgIGlmICgkdGhpcy0+ZmluZCgkb3B0KSl7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgZWxzZXsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZmluZCgkb3B0PVtdKXsNCiAgICAkcmV0ID0gZmFsc2U7DQogICAgJHNxbCA9ICJTRUxFQ1QgKiBGUk9NIGAiLiR0aGlzLT50YWJsZV9uYW1lLiJgIFdIRVJFICI7DQogICAgJHNlYXJjaF9maWVsZHMgPSBbXTsNCiAgICBmb3JlYWNoICgkb3B0IGFzICRrZXkgPT4gJHZhbHVlKXsNCiAgICAgIGFycmF5X3B1c2goJHNlYXJjaF9maWVsZHMsICJgIi4ka2V5LiJgID0gJyIuJHZhbHVlLiInICIpOw0KICAgIH0NCiAgICAkc3FsIC49IGltcGxvZGUoJHNlYXJjaF9maWVsZHMsICJBTkQgIik7DQogICAgJHRoaXMtPmRiLT5xdWVyeSgkc3FsKTsNCiAgICAkcmVzID0gJHRoaXMtPmRiLT5uZXh0KCk7DQoNCiAgICBpZiAoJHJlcyl7DQogICAgICAkcmV0ID0gdHJ1ZTsNCiAgICAgICR0aGlzLT51cGRhdGUoJHJlcyk7DQogICAgfQ0KDQogICAgcmV0dXJuICRyZXQ7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKCRyZXMpew0KICAgICRtb2RlbCA9ICR0aGlzLT5nZXRNb2RlbCgpOw0KICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRfbmFtZSA9PiAkZmllbGQpew0KICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGZpZWxkX25hbWUsICRyZXMpKXsNCiAgICAgICAgaWYgKGlzX251bGwoJHJlc1skZmllbGRfbmFtZV0pKXsNCiAgICAgICAgICAkbW9kZWxbJGZpZWxkX25hbWVdWydvcmlnaW5hbCddID0gbnVsbDsNCiAgICAgICAgICAkbW9kZWxbJGZpZWxkX25hbWVdWyd2YWx1ZSddICAgID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIHN3aXRjaCgkZmllbGRbJ3R5cGUnXSl7DQogICAgICAgICAgICBjYXNlIEJhc2U6Ok5VTTp7DQogICAgICAgICAgICAgICRtb2RlbFskZmllbGRfbmFtZV1bJ29yaWdpbmFsJ10gPSAoaW50KSRyZXNbJGZpZWxkX25hbWVdOw0KICAgICAgICAgICAgICAkbW9kZWxbJGZpZWxkX25hbWVdWyd2YWx1ZSddICAgID0gKGludCkkcmVzWyRmaWVsZF9uYW1lXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBCYXNlOjpGTE9BVDp7DQogICAgICAgICAgICAgICRtb2RlbFskZmllbGRfbmFtZV1bJ29yaWdpbmFsJ10gPSAoZmxvYXQpJHJlc1skZmllbGRfbmFtZV07DQogICAgICAgICAgICAgICRtb2RlbFskZmllbGRfbmFtZV1bJ3ZhbHVlJ10gICAgPSAoZmxvYXQpJHJlc1skZmllbGRfbmFtZV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgQmFzZTo6Qk9PTDp7DQogICAgICAgICAgICAgICRtb2RlbFskZmllbGRfbmFtZV1bJ29yaWdpbmFsJ10gPSAoJHJlc1skZmllbGRfbmFtZV09PTEpOw0KICAgICAgICAgICAgICAkbW9kZWxbJGZpZWxkX25hbWVdWyd2YWx1ZSddICAgID0gKCRyZXNbJGZpZWxkX25hbWVdPT0xKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVmYXVsdDogew0KICAgICAgICAgICAgICAkbW9kZWxbJGZpZWxkX25hbWVdWydvcmlnaW5hbCddID0gJHJlc1skZmllbGRfbmFtZV07DQogICAgICAgICAgICAgICRtb2RlbFskZmllbGRfbmFtZV1bJ3ZhbHVlJ10gICAgPSAkcmVzWyRmaWVsZF9uYW1lXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgJHRoaXMtPnNldE1vZGVsKCRtb2RlbCk7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCl7DQogICAgJG1vZGVsID0gJHRoaXMtPmdldE1vZGVsKCk7DQogICAgJHNxbCA9ICJERUxFVEUgRlJPTSBgIi4kdGhpcy0+dGFibGVfbmFtZS4iYCBXSEVSRSAiOw0KICAgICRkZWxldGVfZmllbGRzID0gW107DQogICAgZm9yZWFjaCAoJHRoaXMtPnBrIGFzICRwa19maWVsZCl7DQogICAgICBhcnJheV9wdXNoKCRkZWxldGVfZmllbGRzLCAiYCIuJHBrX2ZpZWxkLiJgID0gJyIuJG1vZGVsWyRwa19maWVsZF1bJ3ZhbHVlJ10uIicgIik7DQogICAgfQ0KICAgICRzcWwgLj0gaW1wbG9kZSgnQU5EICcsICRkZWxldGVfZmllbGRzKTsNCg0KICAgICR0aGlzLT5kYi0+cXVlcnkoJHNxbCk7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGUoJHR5cGU9J3NxbCcpew0KICAgICRtb2RlbCA9ICR0aGlzLT5nZXRNb2RlbCgpOw0KICAgICRyZXQgPSAnJzsNCg0KICAgIHN3aXRjaCAoJHR5cGUpew0KICAgICAgY2FzZSAnYXJyYXknOnsNCiAgICAgICAgJHJldCA9ICRtb2RlbDsNCiAgICAgIH0NCiAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAnanNvbic6ew0KICAgICAgICAkcmV0ID0ganNvbl9lbmNvZGUoJG1vZGVsKTsNCiAgICAgIH0NCiAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAnc3FsJzp7DQogICAgICAgICRzcWwgPSAiQ1JFQVRFIFRBQkxFIGAiLiR0aGlzLT50YWJsZV9uYW1lLiJgIChcbiI7DQogICAgICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRfbmFtZSA9PiAkZmllbGQpew0KICAgICAgICAgICRzcWwgLj0gIiAgYCIuJGZpZWxkX25hbWUuImAgIjsNCiAgICAgICAgICBzd2l0Y2ggKCRmaWVsZFsndHlwZSddKXsNCiAgICAgICAgICAgIGNhc2UgQmFzZTo6UEs6ew0KICAgICAgICAgICAgICAkc3FsIC49ICJJTlQoMTEpIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBCYXNlOjpDUkVBVEVEOg0KICAgICAgICAgICAgY2FzZSBCYXNlOjpVUERBVEVEOg0KICAgICAgICAgICAgY2FzZSBCYXNlOjpEQVRFOnsNCiAgICAgICAgICAgICAgJHNxbCAuPSAiREFURVRJTUUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIEJhc2U6Ok5VTTp7DQogICAgICAgICAgICAgICRzcWwgLj0gIklOVCgxMSkiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIEJhc2U6OlRFWFQ6ew0KICAgICAgICAgICAgICBpZiAoJGZpZWxkWydzaXplJ108MjU2KXsNCiAgICAgICAgICAgICAgICAkc3FsIC49ICJWQVJDSEFSKCIuJGZpZWxkWydzaXplJ10uIikgQ09MTEFURSB1dGY4X3VuaWNvZGVfY2kiOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgJHNxbCAuPSAiVEVYVCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaSI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBCYXNlOjpCT09MOnsNCiAgICAgICAgICAgICAgJHNxbCAuPSAiVElOWUlOVCgxKSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgQmFzZTo6TE9OR1RFWFQ6ew0KICAgICAgICAgICAgICAkc3FsIC49ICJURVhUIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBCYXNlOjpGTE9BVDp7DQogICAgICAgICAgICAgICRzcWwgLj0gIkZMT0FUIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoISRmaWVsZFsnbnVsbGFibGUnXSB8fCAkZmllbGRbJ3JlZiddIT0nJyl7DQogICAgICAgICAgICAkc3FsIC49ICIgTk9UIjsNCiAgICAgICAgICB9DQogICAgICAgICAgJHNxbCAuPSAiIE5VTEwiOw0KICAgICAgICAgIGlmICgkZmllbGRbJ2luY3InXSAmJiBjb3VudCgkdGhpcy0+cGspPDIpew0KICAgICAgICAgICAgJHNxbCAuPSAiIEFVVE9fSU5DUkVNRU5UIjsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCEkZmllbGRbJ251bGxhYmxlJ10gJiYgIWlzX251bGwoJGZpZWxkWydkZWZhdWx0J10pICYmICRmaWVsZFsncmVmJ109PScnKXsNCiAgICAgICAgICAgICRzcWwgLj0gIiBERUZBVUxUICciLiRmaWVsZFsnZGVmYXVsdCddLiInIjsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCRmaWVsZFsnY29tbWVudCddIT0nJyl7DQogICAgICAgICAgICAkc3FsIC49ICIgQ09NTUVOVCAnIi4kZmllbGRbJ2NvbW1lbnQnXS4iJyAiOw0KICAgICAgICAgIH0NCiAgICAgICAgICAkc3FsID0gc3Vic3RyKCRzcWwsIDAsIHN0cmxlbigkc3FsKS0xKTsNCiAgICAgICAgICAkc3FsIC49ICIsXG4iOw0KICAgICAgICB9DQogICAgICAgICRzcWwgLj0gIiAgUFJJTUFSWSBLRVkgKGAiLmltcGxvZGUoJ2AsYCcsJHRoaXMtPnBrKS4iYClcbiI7DQogICAgICAgICRzcWwgLj0gIikgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOCBDT0xMQVRFPXV0ZjhfdW5pY29kZV9jaTtcbiI7DQoNCiAgICAgICAgJHJldCA9ICRzcWw7DQogICAgICB9DQogICAgICBicmVhazsNCiAgICB9DQoNCiAgICByZXR1cm4gJHJldDsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZVJlZnMoKXsNCiAgICAkbW9kZWwgICAgICAgPSAkdGhpcy0+Z2V0TW9kZWwoKTsNCiAgICAkc3FsICAgICAgICAgPSAnJzsNCiAgICAkaGFzX3JlZnMgICAgPSBmYWxzZTsNCiAgICAkaW5kZXhlcyAgICAgPSBbXTsNCiAgICAkY29uc3RyYWludHMgPSBbXTsNCg0KICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRfbmFtZSA9PiAkZmllbGQpew0KICAgICAgaWYgKCRmaWVsZFsncmVmJ10hPScnKXsNCiAgICAgICAgJGhhc19yZWZzID0gdHJ1ZTsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfQ0KICAgIGlmICgkaGFzX3JlZnMpew0KICAgICAgJHNxbCAuPSAiQUxURVIgVEFCTEUgYCIuJHRoaXMtPnRhYmxlX25hbWUuImBcbiI7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJG1vZGVsIGFzICRmaWVsZF9uYW1lID0+ICRmaWVsZCl7DQogICAgICBpZiAoJGZpZWxkWydyZWYnXSE9Jycpew0KICAgICAgICAkcmVmID0gZXhwbG9kZSgnLicsICRmaWVsZFsncmVmJ10pOw0KICAgICAgICBhcnJheV9wdXNoKCRpbmRleGVzLCAiICBBREQgS0VZIGBma18iLiR0aGlzLT50YWJsZV9uYW1lLiJfIi4kcmVmWzBdLiJfaWR4YCAoYCIuJGZpZWxkX25hbWUuImApIik7DQogICAgICAgIGFycmF5X3B1c2goJGNvbnN0cmFpbnRzLCAiICBBREQgQ09OU1RSQUlOVCBgZmtfIi4kdGhpcy0+dGFibGVfbmFtZS4iXyIuJHJlZlswXS4iYCBGT1JFSUdOIEtFWSAoYCIuJGZpZWxkX25hbWUuImApIFJFRkVSRU5DRVMgYCIuJHJlZlswXS4iYCAoYCIuJHJlZlsxXS4iYCkgT04gREVMRVRFIE5PIEFDVElPTiBPTiBVUERBVEUgTk8gQUNUSU9OIik7DQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKCRoYXNfcmVmcyl7DQogICAgICAkc3FsIC49IGltcGxvZGUoIixcbiIsICRpbmRleGVzKTsNCiAgICAgICRzcWwgLj0gIixcbiI7DQogICAgICAkc3FsIC49IGltcGxvZGUoIixcbiIsICRjb25zdHJhaW50cyk7DQogICAgICAkc3FsIC49ICI7XG4iOw0KICAgIH0NCg0KICAgIHJldHVybiAkc3FsOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGNsZWFuVmFsdWUoJHZhbCl7DQogICAgaWYgKGlzX251bGwoJHZhbCkpew0KICAgICAgcmV0dXJuICdudWxsJzsNCiAgICB9DQogICAgaWYgKGlzX251bWVyaWMoJHZhbCkpew0KICAgICAgcmV0dXJuICR2YWw7DQogICAgfQ0KICAgICRzdHIgPSBzdHJfaXJlcGxhY2UoIlxuIiwgJ1xuJywgJHZhbCk7DQogICAgJHN0ciA9IHN0cl9pcmVwbGFjZSgnIicsICdcIicsICRzdHIpOw0KICAgIHJldHVybiAnIicuJHN0ci4nIic7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gX190b1N0cmluZygpew0KICAgICRyZXQgPSAneyc7DQogICAgJGZpZWxkcyA9IFtdOw0KICAgICRtb2RlbCA9ICR0aGlzLT5nZXRNb2RlbCgpOw0KICAgIGZvcmVhY2ggKCRtb2RlbCBhcyAkZmllbGRuYW1lID0+ICRmaWVsZCl7DQogICAgICBpZiAoJGZpZWxkWydleHBvc2UnXSl7DQogICAgICAgICRzdHIgPSAnJzsNCiAgICAgICAgJHN0ciAuPSAnIicuJGZpZWxkbmFtZS4nIjogJzsNCiAgICAgICAgJHN0ciAuPSAkdGhpcy0+Y2xlYW5WYWx1ZSgkZmllbGRbJ3ZhbHVlJ10pOw0KICAgICAgICBhcnJheV9wdXNoKCRmaWVsZHMsICRzdHIpOw0KICAgICAgfQ0KICAgIH0NCiAgICAkcmV0IC49IGltcGxvZGUoJywgJywgJGZpZWxkcyk7DQogICAgJHJldCAuPSAnfSc7DQogICAgcmV0dXJuICRyZXQ7DQogIH0NCn0NCg==',
  'ofw/base/OBrowser.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0Jyb3dzZXJ7CiAgcHJpdmF0ZSAkYnJvd3Nlcl9kYXRhID0gbnVsbDsKICBwcml2YXRlICR1YSA9ICcnOwoKICBwdWJsaWMgZnVuY3Rpb24gc2V0VWEoJHVhKXsKICAgICR0aGlzLT51YSA9ICR1YTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBnZXRVYSgpewogICAgcmV0dXJuICR0aGlzLT51YTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRCcm93c2VyZGF0YSgkYmQpewogICAgJHRoaXMtPmJyb3dzZXJfZGF0YSA9ICRiZDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBnZXRCcm93c2VyRGF0YSgpewogICAgaWYgKGlzX251bGwoJHRoaXMtPmJyb3dzZXJfZGF0YSkpewogICAgICAkdGhpcy0+YnJvd3Nlcl9kZXRlY3Rpb24oKTsKICAgIH0KCiAgICByZXR1cm4gJHRoaXMtPmJyb3dzZXJfZGF0YTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBpc0lwYWQoKSB7CiAgICBpZiAoaXNfbnVsbCgkdGhpcy0+Z2V0QnJvd3NlckRhdGEoKSkpewogICAgICAkdGhpcy0+YnJvd3Nlcl9kZXRlY3Rpb24oKTsKICAgIH0KCiAgICAkYnJvd3Nlcl9kYXRhID0gJHRoaXMtPmdldEJyb3dzZXJEYXRhKCk7CgogICAgaWYgKGlzc2V0KCRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0pICYmICRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0gPT0gJ2lwYWQnKXsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBlbHNlewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gaXNJcG9kKCkgewogICAgaWYgKGlzX251bGwoJHRoaXMtPmdldEJyb3dzZXJEYXRhKCkpKXsKICAgICAgJHRoaXMtPmJyb3dzZXJfZGV0ZWN0aW9uKCk7CiAgICB9CgogICAgJGJyb3dzZXJfZGF0YSA9ICR0aGlzLT5nZXRCcm93c2VyRGF0YSgpOwoKICAgIGlmIChpc3NldCgkYnJvd3Nlcl9kYXRhWydtb2JpbGVfZGF0YSddWzBdKSAmJiAkYnJvd3Nlcl9kYXRhWydtb2JpbGVfZGF0YSddWzBdID09ICdpcG9kJyl7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZWxzZXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGlzSXBob25lKCl7CiAgICBpZiAoaXNfbnVsbCgkdGhpcy0+Z2V0QnJvd3NlckRhdGEoKSkpewogICAgICAkdGhpcy0+YnJvd3Nlcl9kZXRlY3Rpb24oKTsKICAgIH0KCiAgICAkYnJvd3Nlcl9kYXRhID0gJHRoaXMtPmdldEJyb3dzZXJEYXRhKCk7CgogICAgaWYgKGlzc2V0KCRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0pICYmICRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0gPT0gJ2lwaG9uZScpewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHB1YmxpYyBmdW5jdGlvbiBpc0FuZHJvaWQoKXsKICAgIGlmIChpc19udWxsKCR0aGlzLT5nZXRCcm93c2VyRGF0YSgpKSl7CiAgICAgICR0aGlzLT5icm93c2VyX2RldGVjdGlvbigpOwogICAgfQoKICAgICRicm93c2VyX2RhdGEgPSAkdGhpcy0+Z2V0QnJvd3NlckRhdGEoKTsKCiAgICBpZiAoaXNzZXQoJGJyb3dzZXJfZGF0YVsnbW9iaWxlX2RhdGEnXVszXSkgJiYgJGJyb3dzZXJfZGF0YVsnbW9iaWxlX2RhdGEnXVszXSA9PSAnYW5kcm9pZCcpewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHB1YmxpYyBmdW5jdGlvbiBpc0JsYWNrYmVycnkoKXsKICAgIGlmIChpc19udWxsKCR0aGlzLT5nZXRCcm93c2VyRGF0YSgpKSl7CiAgICAgICR0aGlzLT5icm93c2VyX2RldGVjdGlvbigpOwogICAgfQoKICAgICRicm93c2VyX2RhdGEgPSAkdGhpcy0+Z2V0QnJvd3NlckRhdGEoKTsKCiAgICBpZiAoaXNzZXQoJGJyb3dzZXJfZGF0YVsnbW9iaWxlX2RhdGEnXVswXSkgJiYgJGJyb3dzZXJfZGF0YVsnbW9iaWxlX2RhdGEnXVswXSA9PSAnYmxhY2tiZXJyeScpewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHB1YmxpYyBmdW5jdGlvbiBpc05va2lhKCl7CiAgICBpZiAoaXNfbnVsbCgkdGhpcy0+Z2V0QnJvd3NlckRhdGEoKSkpewogICAgICAkdGhpcy0+YnJvd3Nlcl9kZXRlY3Rpb24oKTsKICAgIH0KCiAgICAkYnJvd3Nlcl9kYXRhID0gJHRoaXMtPmdldEJyb3dzZXJEYXRhKCk7CgogICAgaWYgKGlzc2V0KCRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0pICYmICRicm93c2VyX2RhdGFbJ21vYmlsZV9kYXRhJ11bMF0gPT0gJ25va2lhJyl7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZWxzZXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGlzTW9iaWxlKCRpcGFkPWZhbHNlKXsKICAgICRpc19tb2JpbGUgPSAkdGhpcy0+aXNJcG9kKCkgfHwgJHRoaXMtPmlzSXBob25lKCkgfHwgJHRoaXMtPmlzQW5kcm9pZCgpIHx8ICR0aGlzLT5pc0JsYWNrYmVycnkoKSB8fCAkdGhpcy0+aXNOb2tpYSgpOwogICAgaWYgKCRpcGFkKXsKICAgICAgcmV0dXJuICgkdGhpcy0+aXNJcGFkKCkgfHwgJGlzX21vYmlsZSk7CiAgICB9CiAgICBlbHNlewogICAgICByZXR1cm4gKCRpc19tb2JpbGUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYnJvd3Nlcl9kZXRlY3Rpb24oKQogIHsKCQkvL2luaXRpYWxpemUgYWxsIHZhcmlhYmxlcyB3aXRoIGRlZmF1bHQgdmFsdWVzIHRvIHByZXZlbnQgZXJyb3IKCQkkYV9icm93c2VyX21hdGhfbnVtYmVyID0gJyc7CgkJJGFfZnVsbF9hc3NvY19kYXRhID0gJyc7CgkJJGFfZnVsbF9kYXRhID0gJyc7CgkJJGFfbW9iaWxlX2RhdGEgPSAnJzsKCQkkYV9tb3pfZGF0YSA9ICcnOwoJCSRhX29zX2RhdGEgPSAnJzsKCQkkYV91bmhhbmRsZWRfYnJvd3NlciA9ICcnOwoJCSRhX3dlYmtpdF9kYXRhID0gJyc7CgkJJGJfZG9tX2Jyb3dzZXIgPSBmYWxzZTsKCQkkYl9vc190ZXN0ID0gdHJ1ZTsKCQkkYl9tb2JpbGVfdGVzdCA9IHRydWU7CgkJJGJfc2FmZV9icm93c2VyID0gZmFsc2U7CgkJJGJfc3VjY2VzcyA9IGZhbHNlOy8vIGJvb2xlYW4gZm9yIGlmIGJyb3dzZXIgZm91bmQgaW4gbWFpbiB0ZXN0CgkJJGJyb3dzZXJfbWF0aF9udW1iZXIgPSAnJzsKCQkkYnJvd3Nlcl90ZW1wID0gJyc7CgkJJGJyb3dzZXJfd29ya2luZyA9ICcnOwoJCSRicm93c2VyX251bWJlciA9ICcnOwoJCSRpZV92ZXJzaW9uID0gJyc7CgkJJG1vYmlsZV90ZXN0ID0gJyc7CgkJJG1vel9yZWxlYXNlX2RhdGUgPSAnJzsKCQkkbW96X3J2ID0gJyc7CgkJJG1vel9ydl9mdWxsID0gJyc7CgkJJG1vel90eXBlID0gJyc7CgkJJG1vel9udW1iZXIgPSAnJzsKCQkkb3NfbnVtYmVyID0gJyc7CgkJJG9zX3R5cGUgPSAnJzsKCQkkcnVuX3RpbWUgPSAnJzsKCQkkdHJ1ZV9pZV9udW1iZXIgPSAnJzsKCQkkdWFfdHlwZSA9ICdib3QnOy8vIGRlZmF1bHQgdG8gYm90IHNpbmNlIHlvdSBuZXZlciBrbm93IHdpdGggYm90cwoJCSR3ZWJraXRfdHlwZSA9ICcnOwoJCSR3ZWJraXRfdHlwZV9udW1iZXIgPSAnJzsKCiAgICAkYnJvd3Nlcl91c2VyX2FnZW50ID0gc3RydG9sb3dlcigkdGhpcy0+Z2V0VWEoKSk7CgoJCS8vIGtub3duIGJyb3dzZXJzLCBsaXN0IHdpbGwgYmUgdXBkYXRlZCByb3V0aW5lbHksIGNoZWNrIGJhY2sgbm93IGFuZCB0aGVuCgkJJGFfYnJvd3Nlcl90eXBlcyA9IFsKCQkJWyAnb3BlcmEnLCB0cnVlLCAnb3AnLCAnYnJvJyBdLAoJCQlbICdtc2llJywgdHJ1ZSwgJ2llJywgJ2JybycgXSwKCQkJLy8gd2Via2l0IGJlZm9yZSBnZWNrbyBiZWNhdXNlIHNvbWUgd2Via2l0IHVhIHN0cmluZ3Mgc2F5OiBsaWtlIGdlY2tvCgkJCVsgJ3dlYmtpdCcsIHRydWUsICd3ZWJraXQnLCAnYnJvJyBdLAoJCQkvLyBrb25xIHdpbGwgYmUgdXNpbmcgd2Via2l0IHNvb24KCQkJWyAna29ucXVlcm9yJywgdHJ1ZSwgJ2tvbnEnLCAnYnJvJyBdLAoJCQkvLyBjb3ZlcnMgTmV0c2NhcGUgNi03LCBLLU1lbGVvbiwgTW9zdCBsaW51eCB2ZXJzaW9ucywgdXNlcyBtb3ogYXJyYXkgYmVsb3cKCQkJWyAnZ2Vja28nLCB0cnVlLCAnbW96JywgJ2JybycgXSwKCQkJWyAnbmV0cG9zaXRpdmUnLCBmYWxzZSwgJ25ldHAnLCAnYmJybycgXSwvLyBiZW9zIGJyb3dzZXIKCQkJWyAnbHlueCcsIGZhbHNlLCAnbHlueCcsICdiYnJvJyBdLCAvLyBjb21tYW5kIGxpbmUgYnJvd3NlcgoJCQlbICdlbGlua3MgJywgZmFsc2UsICdlbGlua3MnLCAnYmJybycgXSwgLy8gbmV3IHZlcnNpb24gb2YgbGlua3MKCQkJWyAnZWxpbmtzJywgZmFsc2UsICdlbGlua3MnLCAnYmJybycgXSwgLy8gYWx0ZXJuYXRlIGlkIGZvciBpdAoJCQlbICdsaW5rczInLCBmYWxzZSwgJ2xpbmtzMicsICdiYnJvJyBdLCAvLyBhbHRlcm5hdGUgbGlua3MgdmVyc2lvbgoJCQlbICdsaW5rcyAnLCBmYWxzZSwgJ2xpbmtzJywgJ2Jicm8nIF0sIC8vIG9sZCBuYW1lIGZvciBsaW5rcwoJCQlbICdsaW5rcycsIGZhbHNlLCAnbGlua3MnLCAnYmJybycgXSwgLy8gYWx0ZXJuYXRlIGlkIGZvciBpdAoJCQlbICd3M20nLCBmYWxzZSwgJ3czbScsICdiYnJvJyBdLCAvLyBvcGVuIHNvdXJjZSBicm93c2VyLCBtb3JlIGZlYXR1cmVzIHRoYW4gbHlueC9saW5rcwoJCQlbICd3ZWJ0dicsIGZhbHNlLCAnd2VidHYnLCAnYmJybycgXSwvLyBqdW5rIG1zIHdlYnR2CgkJCVsgJ2FtYXlhJywgZmFsc2UsICdhbWF5YScsICdiYnJvJyBdLC8vIHczYyBicm93c2VyCgkJCVsgJ2RpbGxvJywgZmFsc2UsICdkaWxsbycsICdiYnJvJyBdLC8vIGxpbnV4IGJyb3dzZXIsIGJhc2ljIHRhYmxlIHN1cHBvcnQKCQkJWyAnaWJyb3dzZScsIGZhbHNlLCAnaWJyb3dzZScsICdiYnJvJyBdLC8vIGFtaWdhIGJyb3dzZXIKCQkJWyAnaWNhYicsIGZhbHNlLCAnaWNhYicsICdicm8nIF0sLy8gbWFjIGJyb3dzZXIKCQkJWyAnY3JhenkgYnJvd3NlcicsIHRydWUsICdpZScsICdicm8nIF0sLy8gdXNlcyBpZSByZW5kZXJpbmcgZW5naW5lCgoJCQkvLyBzZWFyY2ggZW5naW5lIHNwaWRlciBib3RzOgoJCQlbICdnb29nbGVib3QnLCBmYWxzZSwgJ2dvb2dsZScsICdib3QnIF0sLy8gZ29vZ2xlCgkJCVsgJ21lZGlhcGFydG5lcnMtZ29vZ2xlJywgZmFsc2UsICdhZHNlbnNlJywgJ2JvdCcgXSwvLyBnb29nbGUgYWRzZW5zZQoJCQlbICd5YWhvby12ZXJ0aWNhbGNyYXdsZXInLCBmYWxzZSwgJ3lhaG9vJywgJ2JvdCcgXSwvLyBvbGQgeWFob28gYm90CgkJCVsgJ3lhaG9vISBzbHVycCcsIGZhbHNlLCAneWFob28nLCAnYm90JyBdLCAvLyBuZXcgeWFob28gYm90CgkJCVsgJ3lhaG9vLW1tJywgZmFsc2UsICd5YWhvb21tJywgJ2JvdCcgXSwgLy8gZ2V0cyBZYWhvby1NTUNyYXdsZXIgYW5kIFlhaG9vLU1NQXVkVmlkIGJvdHMKCQkJWyAnaW5rdG9taScsIGZhbHNlLCAnaW5rdG9taScsICdib3QnIF0sIC8vIGlua3RvbWkgYm90CgkJCVsgJ3NsdXJwJywgZmFsc2UsICdpbmt0b21pJywgJ2JvdCcgXSwgLy8gaW5rdG9taSBib3QKCQkJWyAnZmFzdC13ZWJjcmF3bGVyJywgZmFsc2UsICdmYXN0JywgJ2JvdCcgXSwvLyBGYXN0IEFsbFRoZVdlYgoJCQlbICdtc25ib3QnLCBmYWxzZSwgJ21zbicsICdib3QnIF0sLy8gbXNuIHNlYXJjaAoJCQlbICdhc2sgamVldmVzJywgZmFsc2UsICdhc2snLCAnYm90JyBdLCAvL2plZXZlcy90ZW9tYQoJCQlbICd0ZW9tYScsIGZhbHNlLCAnYXNrJywgJ2JvdCcgXSwvL2plZXZlcyB0ZW9tYQoJCQlbICdzY29vdGVyJywgZmFsc2UsICdzY29vdGVyJywgJ2JvdCcgXSwvLyBhbHRhdmlzdGEKCQkJWyAnb3BlbmJvdCcsIGZhbHNlLCAnb3BlbmJvdCcsICdib3QnIF0sLy8gb3BlbmJvdCwgZnJvbSB0YWl3YW4KCQkJWyAnaWFfYXJjaGl2ZXInLCBmYWxzZSwgJ2lhX2FyY2hpdmVyJywgJ2JvdCcgXSwvLyBpYSBhcmNoaXZlcgoJCQlbICd6eWJvcmcnLCBmYWxzZSwgJ2xvb2tzbWFydCcsICdib3QnIF0sLy8gbG9va3NtYXJ0CgkJCVsgJ2FsbWFkZW4nLCBmYWxzZSwgJ2libScsICdib3QnIF0sLy8gaWJtIGFsbWFkZW4gd2ViIGNyYXdsZXIKCQkJWyAnYmFpZHVzcGlkZXInLCBmYWxzZSwgJ2JhaWR1JywgJ2JvdCcgXSwvLyBCYWlkdXNwaWRlciBhc2lhbiBzZWFyY2ggc3BpZGVyCgkJCVsgJ3BzYm90JywgZmFsc2UsICdwc2JvdCcsICdib3QnIF0sLy8gcHNib3QgaW1hZ2UgY3Jhd2xlcgoJCQlbICdnaWdhYm90JywgZmFsc2UsICdnaWdhYm90JywgJ2JvdCcgXSwvLyBnaWdhYm90IGNyYXdsZXIKCQkJWyAnbmF2ZXJib3QnLCBmYWxzZSwgJ25hdmVyYm90JywgJ2JvdCcgXSwvLyBuYXZlcmJvdCBjcmF3bGVyLCBiYWQgYm90LCBibG9jawoJCQlbICdzdXJ2ZXlib3QnLCBmYWxzZSwgJ3N1cnZleWJvdCcsICdib3QnIF0sLy8KCQkJWyAnYm9pdGhvLmNvbS1kYycsIGZhbHNlLCAnYm9pdGhvJywgJ2JvdCcgXSwvL25vcndlZ2lhbiBzZWFyY2ggZW5naW5lCgkJCVsgJ29iamVjdHNzZWFyY2gnLCBmYWxzZSwgJ29iamVjdHNlYXJjaCcsICdib3QnIF0sLy8gb3BlbiBzb3VyY2Ugc2VhcmNoIGVuZ2luZQoJCQlbICdhbnN3ZXJidXMnLCBmYWxzZSwgJ2Fuc3dlcmJ1cycsICdib3QnIF0sLy8gaHR0cDovL3d3dy5hbnN3ZXJidXMuY29tLywgd2ViIHF1ZXN0aW9ucwoJCQlbICdzb2h1LXNlYXJjaCcsIGZhbHNlLCAnc29odScsICdib3QnIF0sLy8gY2hpbmVzZSBtZWRpYSBjb21wYW55LCBzZWFyY2ggY29tcG9uZW50CgkJCVsgJ2lsdHJvdmF0b3JlLXNldGFjY2lvJywgZmFsc2UsICdpbC1zZXQnLCAnYm90JyBdLAoKCQkJLy8gdmFyaW91cyBodHRwIHV0aWxpdHkgbGliYXJpZXMKCQkJWyAndzNjX3ZhbGlkYXRvcicsIGZhbHNlLCAndzNjJywgJ2xpYicgXSwgLy8gdXNlcyBsaWJwZXJsLCBtYWtlIGZpcnN0CgkJCVsgJ3dkZ192YWxpZGF0b3InLCBmYWxzZSwgJ3dkZycsICdsaWInIF0sIC8vCgkJCVsgJ2xpYnd3dy1wZXJsJywgZmFsc2UsICdsaWJ3d3ctcGVybCcsICdsaWInIF0sCgkJCVsgJ2pha2FydGEgY29tbW9ucy1odHRwY2xpZW50JywgZmFsc2UsICdqYWthcnRhJywgJ2xpYicgXSwKCQkJWyAncHl0aG9uLXVybGxpYicsIGZhbHNlLCAncHl0aG9uLXVybGxpYicsICdsaWInIF0sCgoJCQkvLyBkb3dubG9hZCBhcHBzCgkJCVsgJ2dldHJpZ2h0JywgZmFsc2UsICdnZXRyaWdodCcsICdkb3cnIF0sCgkJCVsgJ3dnZXQnLCBmYWxzZSwgJ3dnZXQnLCAnZG93JyBdLC8vIG9wZW4gc291cmNlIGRvd25sb2FkZXIsIG9iZXlzIHJvYm90cy50eHQKCgkJCS8vIG5ldHNjYXBlIDQgYW5kIGVhcmxpZXIgdGVzdHMsIHB1dCBsYXN0IHNvIHNwaWRlcnMgZG9uJ3QgZ2V0IGNhdWdodAoJCQlbICdtb3ppbGxhLzQuJywgZmFsc2UsICducycsICdiYnJvJyBdLAoJCQlbICdtb3ppbGxhLzMuJywgZmFsc2UsICducycsICdiYnJvJyBdLAoJCQlbICdtb3ppbGxhLzIuJywgZmFsc2UsICducycsICdiYnJvJyBdCiAgICBdOwoKCQkvKgoJCW1veiB0eXBlcyBhcnJheQoJCW5vdGUgdGhlIG9yZGVyLCBuZXRzY2FwZTYgbXVzdCBjb21lIGJlZm9yZSBuZXRzY2FwZSwgd2hpY2ggIGlzIGhvdyBuZXRzY2FwZSA3IGlkJ3MgaXRzZWxmLgoJCXJ2IGNvbWVzIGxhc3QgaW4gY2FzZSBpdCBpcyBwbGFpbiBvbGQgbW96aWxsYS4gZmlyZWZveC9uZXRzY2FwZS9zZWFtb25rZXkgbmVlZCB0byBiZSBsYXRlcgoJCVRoYW5rcyB0bzogaHR0cDovL3d3dy56eXRyYXguY29tL3RlY2gvd2ViL2ZpcmVmb3gtaGlzdG9yeS5odG1sCgkJKi8KCQkkYV9tb3pfdHlwZXMgPSBbICdib25lY2hvJywgJ2NhbWlubycsICdlcGlwaGFueScsICdmaXJlYmlyZCcsICdmbG9jaycsICdnYWxlb24nLCAnaWNlYXBlJywgJ2ljZWNhdCcsICdrLW1lbGVvbicsICdtaW5pbW8nLCAnbXVsdGl6aWxsYScsICdwaG9lbml4JywgJ3NvbmdiaXJkJywgJ3N3aWZ0Zm94JywgJ3NlYW1vbmtleScsICdzaGlyZXRva28nLCAnaWNld2Vhc2VsJywgJ2ZpcmVmb3gnLCAnbWluZWZpZWxkJywgJ25ldHNjYXBlNicsICduZXRzY2FwZScsICdydicgXTsKCgkJLyoKCQl3ZWJraXQgdHlwZXMsIHRoaXMgaXMgZ29pbmcgdG8gZXhwYW5kIG92ZXIgdGltZSBhcyB3ZWJraXQgYnJvd3NlcnMgc3ByZWFkCgkJa29ucXVlcm9yIGlzIHByb2JhYmx5IGdvaW5nIHRvIG1vdmUgdG8gd2Via2l0LCBzbyB0aGlzIGlzIHByZXBhcmluZyBmb3IgdGhhdAoJCUl0IHdpbGwgbm93IGRlZmF1bHQgdG8ga2h0bWwuIGd0a2xhdW5jaGVyIGlzIHRoZSB0ZW1wIGlkIGZvciBlcGlwaGFueSwgbWlnaHQKCQljaGFuZ2UuIERlZmF1bHRzIHRvIGFwcGxld2Via2l0LCBhbmQgd2lsbCBhbGwgc2hvdyB0aGUgd2Via2l0IG51bWJlci4KCQkqLwoJCSRhX3dlYmtpdF90eXBlcyA9IFsgJ2Fyb3JhJywgJ2Nocm9tZScsICdlcGlwaGFueScsICdndGtsYXVuY2hlcicsICdrb25xdWVyb3InLCAnbWlkb3JpJywgJ29tbml3ZWInLCAnc2FmYXJpJywgJ3V6YmwnLCAnYXBwbGV3ZWJraXQnLCAnd2Via2l0JyBdOwoKCQkvKgoJCXJ1biB0aHJvdWdoIHRoZSBicm93c2VyX3R5cGVzIGFycmF5LCBicmVhayBpZiB5b3UgaGl0IGEgbWF0Y2gsIGlmIG5vIG1hdGNoLCBhc3N1bWUgb2xkIGJyb3dzZXIKCQlvciBub24gZG9tIGJyb3dzZXIsIGFzc2lnbnMgZmFsc2UgdmFsdWUgdG8gJGJfc3VjY2Vzcy4KCQkqLwoJCSRpX2NvdW50ID0gY291bnQoICRhX2Jyb3dzZXJfdHlwZXMgKTsKICAgIGZvciAoICRpID0gMDsgJGkgPCAkaV9jb3VudDsgJGkrKyApCgkJewogIAkJLy91bnBhY2tzIGJyb3dzZXIgYXJyYXksIGFzc2lnbnMgdG8gdmFyaWFibGVzLCBuZWVkIHRvIG5vdCBhc3NpZ24gdGlsIGZvdW5kIGluIHN0cmluZwogIAkJJGJyb3dzZXJfdGVtcCA9ICRhX2Jyb3dzZXJfdHlwZXNbJGldWzBdOy8vIHRleHQgc3RyaW5nIHRvIGlkIGJyb3dzZXIgZnJvbSBhcnJheQoKCQkJaWYgKCBzdHJzdHIoICRicm93c2VyX3VzZXJfYWdlbnQsICRicm93c2VyX3RlbXAgKSApCgkJCXsKCQkJCS8qCgkJCQlpdCBkZWZhdWx0cyB0byB0cnVlLCB3aWxsIGJlY29tZSBmYWxzZSBiZWxvdyBpZiBuZWVkZWQKCQkJCXRoaXMga2VlcHMgaXQgZWFzaWVyIHRvIGtlZXAgdHJhY2sgb2Ygd2hhdCBpcyBzYWZlLCBvbmx5CgkJCQlleHBsaWNpdCBmYWxzZSBhc3NpZ25tZW50IHdpbGwgbWFrZSBpdCBmYWxzZS4KCQkJCSovCgkJCQkkYl9zYWZlX2Jyb3dzZXIgPSB0cnVlOwoJCQkJJGJyb3dzZXJfbmFtZSA9ICRicm93c2VyX3RlbXA7Ly8gdGV4dCBzdHJpbmcgdG8gaWQgYnJvd3NlciBmcm9tIGFycmF5CgoJCQkJLy8gYXNzaWduIHZhbHVlcyBiYXNlZCBvbiBtYXRjaCBvZiB1c2VyIGFnZW50IHN0cmluZwoJCQkJJGJfZG9tX2Jyb3dzZXIgPSAkYV9icm93c2VyX3R5cGVzWyRpXVsxXTsvLyBoYXJkY29kZWQgZG9tIHN1cHBvcnQgZnJvbSBhcnJheQoJCQkJJGJyb3dzZXJfd29ya2luZyA9ICRhX2Jyb3dzZXJfdHlwZXNbJGldWzJdOy8vIHdvcmtpbmcgbmFtZSBmb3IgYnJvd3NlcgoJCQkJJHVhX3R5cGUgPSAkYV9icm93c2VyX3R5cGVzWyRpXVszXTsvLyBzZXRzIHdoZXRoZXIgYm90IG9yIGJyb3dzZXIKCgkJCQlzd2l0Y2ggKCAkYnJvd3Nlcl93b3JraW5nICkKCQkJCXsKCQkJCQkvLyB0aGlzIGlzIG1vZGlmaWVkIHF1aXRlIGEgYml0LCBub3cgd2lsbCByZXR1cm4gcHJvcGVyIG5ldHNjYXBlIHZlcnNpb24gbnVtYmVyCgkJCQkJLy8gY2hlY2sgeW91ciBpbXBsZW1lbnRhdGlvbiB0byBtYWtlIHN1cmUgaXQgd29ya3MKCQkJCQljYXNlICducyc6CgkJCQkJCSRiX3NhZmVfYnJvd3NlciA9IGZhbHNlOwoJCQkJCQkkYnJvd3Nlcl9udW1iZXIgPSAkdGhpcy0+Z2V0X2l0ZW1fdmVyc2lvbiggJ21vemlsbGEnICk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ21veic6CgkJCQkJCS8qCgkJCQkJCW5vdGU6IFRoZSAncnYnIHRlc3QgaXMgbm90IGFic29sdXRlIHNpbmNlIHRoZSBydiBudW1iZXIgaXMgdmVyeSBkaWZmZXJlbnQgb24KCQkJCQkJZGlmZmVyZW50IHZlcnNpb25zLCBmb3IgZXhhbXBsZSBHYWxlYW4gZG9lc24ndCB1c2UgdGhlIHNhbWUgcnYgdmVyc2lvbiBhcyBNb3ppbGxhLAoJCQkJCQluZWl0aGVyIGRvIGxhdGVyIE5ldHNjYXBlcywgbGlrZSA3LnguIEZvciBtb3JlIG9uIHRoaXMsIHJlYWQgdGhlIGZ1bGwgbW96aWxsYQoJCQkJCQludW1iZXJpbmcgY29udmVudGlvbnMgaGVyZTogaHR0cDovL3d3dy5tb3ppbGxhLm9yZy9yZWxlYXNlcy9jdnN0YWdzLmh0bWwKCQkJCQkJKi8KCQkJCQkJLy8gdGhpcyB3aWxsIHJldHVybiBhbHBoYSBhbmQgYmV0YSB2ZXJzaW9uIG51bWJlcnMsIGlmIHByZXNlbnQKCQkJCQkJJG1vel9ydl9mdWxsID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICdydicgKTsKCQkJCQkJLy8gdGhpcyBzbGljZXMgdGhlbSBiYWNrIG9mZiBmb3IgbWF0aCBjb21wYXJpc29ucwoJCQkJCQkkbW96X3J2ID0gc3Vic3RyKCAkbW96X3J2X2Z1bGwsIDAsIDMgKTsKCgkJCQkJCS8vIHRoaXMgaXMgdG8gcHVsbCBvdXQgc3BlY2lmaWMgbW96aWxsYSB2ZXJzaW9ucywgZmlyZWJpcmQsIG5ldHNjYXBlIGV0Yy4uCgkJCQkJCSRqX2NvdW50ID0gY291bnQoICRhX21vel90eXBlcyApOwoJCQkJCQlmb3IgKCAkaiA9IDA7ICRqIDwgJGpfY291bnQ7ICRqKysgKQoJCQkJCQl7CgkJCQkJCQlpZiAoIHN0cnN0ciggJGJyb3dzZXJfdXNlcl9hZ2VudCwgJGFfbW96X3R5cGVzWyRqXSApICkKCQkJCQkJCXsKCQkJCQkJCQkkbW96X3R5cGUgPSAkYV9tb3pfdHlwZXNbJGpdOwoJCQkJCQkJCSRtb3pfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICRtb3pfdHlwZSApOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCS8qCgkJCQkJCXRoaXMgaXMgbmVjZXNhcnkgdG8gcHJvdGVjdCBhZ2FpbnN0IGZhbHNlIGlkJ2VkIG1veidlcyBhbmQgbmV3IG1veidlcy4KCQkJCQkJdGhpcyBjb3JyZWN0cyBmb3IgZ2FsZW9uLCBvciBhbnkgb3RoZXIgbW96IGJyb3dzZXIgd2l0aG91dCBhbiBydiBudW1iZXIKCQkJCQkJKi8KCQkJCQkJaWYgKCAhJG1vel9ydiApCgkJCQkJCXsKCQkJCQkJICAkbW96X3J2ID0gZmxvYXR2YWwoICRtb3pfbnVtYmVyICk7CgkJCQkJCQkkbW96X3J2X2Z1bGwgPSAkbW96X251bWJlcjsKCQkJCQkJfQoJCQkJCQkvLyB0aGlzIGNvcnJlY3RzIHRoZSB2ZXJzaW9uIG5hbWUgaW4gY2FzZSBpdCB3ZW50IHRvIHRoZSBkZWZhdWx0ICdydicgZm9yIHRoZSB0ZXN0CgkJCQkJCWlmICggJG1vel90eXBlID09ICdydicgKQoJCQkJCQl7CgkJCQkJCQkkbW96X3R5cGUgPSAnbW96aWxsYSc7CgkJCQkJCX0KCgkJCQkJCS8vdGhlIG1veiB2ZXJzaW9uIHdpbGwgYmUgdGFrZW4gZnJvbSB0aGUgcnYgbnVtYmVyLCBzZWUgbm90ZXMgYWJvdmUgZm9yIHJ2IHByb2JsZW1zCgkJCQkJCSRicm93c2VyX251bWJlciA9ICRtb3pfcnY7CgkJCQkJCS8vIGdldHMgdGhlIGFjdHVhbCByZWxlYXNlIGRhdGUsIG5lY2Vzc2FyeSBpZiB5b3UgbmVlZCB0byBkbyBmdW5jdGlvbmFsaXR5IHRlc3RzCgkJCQkJCSR0aGlzLT5nZXRfc2V0X2NvdW50KCAnc2V0JywgMCApOwoJCQkJCQkkbW96X3JlbGVhc2VfZGF0ZSA9ICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAnZ2Vja28vJyApOwoJCQkJCQkvKgoJCQkJCQlUZXN0IGZvciBtb3ppbGxhIDAuOS54IC8gbmV0c2NhcGUgNi54CgkJCQkJCXRlc3QgeW91ciBqYXZhc2NyaXB0L0NTUyB0byBzZWUgaWYgaXQgd29ya3MgaW4gdGhlc2UgbW96aWxsYSByZWxlYXNlcywgaWYgaXQKCQkJCQkJZG9lcywganVzdCBkZWZhdWx0IGl0IHRvOiAkYl9zYWZlX2Jyb3dzZXIgPSB0cnVlOwoJCQkJCQkqLwoJCQkJCQlpZiAoICggJG1vel9yZWxlYXNlX2RhdGUgPCAyMDAyMDQwMCApIHx8ICggJG1vel9ydiA8IDEgKSApCgkJCQkJCXsKCQkJCQkJCSRiX3NhZmVfYnJvd3NlciA9IGZhbHNlOwoJCQkJCQl9CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2llJzoKCQkJCQkJLyoKCQkJCQkJbm90ZSB3ZSdyZSBhZGRpbmcgaW4gdGhlIHRyaWRlbnQvIHNlYXJjaCB0byByZXR1cm4gb25seSBmaXJzdCBpbnN0YW5jZSBpbiBjYXNlCgkJCQkJCW9mIG1zaWUgOCwgYW5kIHdlJ3JlIHRyaWdnZXJpbmcgdGhlICBicmVhayBsYXN0IGNvbmRpdGlvbiBpbiB0aGUgdGVzdCwgYXMgd2VsbAoJCQkJCQlhcyB0aGUgdGVzdCBmb3IgYSBzZWNvbmQgc2VhcmNoIHN0cmluZywgdHJpZGVudC8KCQkJCQkJKi8KCQkJCQkJJGJyb3dzZXJfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICRicm93c2VyX25hbWUsIHRydWUsICd0cmlkZW50LycgKTsKCQkJCQkJLy8gY29uc3RydWN0IHRoZSBwcm9wZXIgcmVhbCBudW1iZXIgaWYgaXQncyBpbiBjb21wYXQgbW9kZSBhbmQgbXNpZSA4LjAvOS4wCgkJCQkJCWlmICggc3Ryc3RyKCAkYnJvd3Nlcl9udW1iZXIsICc3LicgKSAmJiBzdHJzdHIoICRicm93c2VyX3VzZXJfYWdlbnQsICd0cmlkZW50LzUnICkgKQoJCQkJCQl7CgkJCQkJCQkvLyBub3RlIHRoYXQgNy4wIGJlY29tZXMgOSB3aGVuIGFkZGluZyAxLCBidXQgaWYgaXQncyA3LjEgaXQgd2lsbCBiZSA5LjEKCQkJCQkJCSR0cnVlX2llX251bWJlciA9ICRicm93c2VyX251bWJlciArIDI7CgkJCQkJCX0KCQkJCQkJZWxzZWlmICggc3Ryc3RyKCAkYnJvd3Nlcl9udW1iZXIsICc3LicgKSAmJiBzdHJzdHIoICRicm93c2VyX3VzZXJfYWdlbnQsICd0cmlkZW50LzQnICkgKQoJCQkJCQl7CgkJCQkJCQkvLyBub3RlIHRoYXQgNy4wIGJlY29tZXMgOCB3aGVuIGFkZGluZyAxLCBidXQgaWYgaXQncyA3LjEgaXQgd2lsbCBiZSA4LjEKCQkJCQkJCSR0cnVlX2llX251bWJlciA9ICRicm93c2VyX251bWJlciArIDE7CgkJCQkJCX0KCQkJCQkJLy8gdGhlIDkgc2VyaWVzIGlzIGZpbmFsbHkgc3RhbmRhcmRzIGNvbXBhdGlibGUsIGh0bWwgNSBldGMsIHNvIHdvcnRoIGEgbmV3IGlkCgkJCQkJCWlmICggJGJyb3dzZXJfbnVtYmVyID49IDkgKQoJCQkJCQl7CgkJCQkJCQkkaWVfdmVyc2lvbiA9ICdpZTl4JzsKCQkJCQkJfQoJCQkJCQkvLyA3Lzggd2VyZSBub3QgeWV0IHF1aXRlIHRvIHN0YW5kYXJkcyBsZXZlbHMgYnV0IGdldHRpbmcgdGhlcmUKCQkJCQkJZWxzZWlmICggJGJyb3dzZXJfbnVtYmVyID49IDcgKQoJCQkJCQl7CgkJCQkJCQkkaWVfdmVyc2lvbiA9ICdpZTd4JzsKCQkJCQkJfQoJCQkJCQkvLyB0aGVuIHRlc3QgZm9yIElFIDV4IG1hYywgdGhhdCdzIHRoZSBtb3N0IHByb2JsZW1hdGljIElFIG91dCB0aGVyZQoJCQkJCQllbHNlaWYgKCBzdHJzdHIoICRicm93c2VyX3VzZXJfYWdlbnQsICdtYWMnKSApCgkJCQkJCXsKCQkJCQkJCSRpZV92ZXJzaW9uID0gJ2llTWFjJzsKCQkJCQkJfQoJCQkJCQkvLyBpZSA1LzYgYXJlIGJvdGggdmVyeSB3ZWFrIGluIHN0YW5kYXJkcyBjb21wbGlhbmNlCgkJCQkJCWVsc2VpZiAoICRicm93c2VyX251bWJlciA+PSA1ICkKCQkJCQkJewoJCQkJCQkJJGllX3ZlcnNpb24gPSAnaWU1eCc7CgkJCQkJCX0KCQkJCQkJZWxzZWlmICggKCAkYnJvd3Nlcl9udW1iZXIgPiAzICkgJiYgKCAkYnJvd3Nlcl9udW1iZXIgPCA1ICkgKQoJCQkJCQl7CgkJCQkJCQkkYl9kb21fYnJvd3NlciA9IGZhbHNlOwoJCQkJCQkJJGllX3ZlcnNpb24gPSAnaWU0JzsKCQkJCQkJCS8vIHRoaXMgZGVwZW5kcyBvbiB3aGF0IHlvdSdyZSB1c2luZyB0aGUgc2NyaXB0IGZvciwgbWFrZSBzdXJlIHRoaXMgZml0cyB5b3VyIG5lZWRzCgkJCQkJCQkkYl9zYWZlX2Jyb3dzZXIgPSB0cnVlOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJGllX3ZlcnNpb24gPSAnb2xkJzsKCQkJCQkJCSRiX2RvbV9icm93c2VyID0gZmFsc2U7CgkJCQkJCQkkYl9zYWZlX2Jyb3dzZXIgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCQlicmVhazsKCQkJCQljYXNlICdvcCc6CgkJCQkJCSRicm93c2VyX251bWJlciA9ICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAkYnJvd3Nlcl9uYW1lICk7CgkJCQkJCS8vIG9wZXJhIGlzIGxlYXZpbmcgdmVyc2lvbiBhdCA5LjgwIChvciB4eCkgZm9yIDEwLnggLSBzZWUgdGhpcyBmb3IgZXhwbGFuYXRpb24KCQkJCQkJLy8gaHR0cDovL2Rldi5vcGVyYS5jb20vYXJ0aWNsZXMvdmlldy9vcGVyYS11YS1zdHJpbmctY2hhbmdlcy8KCQkJCQkJaWYgKCBzdHJzdHIoICRicm93c2VyX251bWJlciwgJzkuJyApICYmIHN0cnN0ciggJGJyb3dzZXJfdXNlcl9hZ2VudCwgJ3ZlcnNpb24vJyApICkKCQkJCQkJewoJCQkJCQkJJHRoaXMtPmdldF9zZXRfY291bnQoICdzZXQnLCAwICk7CgkJCQkJCQkkYnJvd3Nlcl9udW1iZXIgPSAkdGhpcy0+Z2V0X2l0ZW1fdmVyc2lvbiggJ3ZlcnNpb24vJyApOwoJCQkJCQl9CgoJCQkJCQlpZiAoICRicm93c2VyX251bWJlciA8IDUgKS8vIG9wZXJhIDQgd2Fzbid0IHZlcnkgdXNlYWJsZS4KCQkJCQkJewoJCQkJCQkJJGJfc2FmZV9icm93c2VyID0gZmFsc2U7CgkJCQkJCX0KCQkJCQkJYnJlYWs7CgkJCQkJLyoKCQkJCQlub3RlOiB3ZWJraXQgcmV0dXJucyBhbHdheXMgdGhlIHdlYmtpdCB2ZXJzaW9uIG51bWJlciwgbm90IHRoZSBzcGVjaWZpYyB1c2VyCgkJCQkJYWdlbnQgdmVyc2lvbiwgaWUsIHdlYmtpdCA1ODMsIG5vdCBjaHJvbWUgMC4zCgkJCQkJKi8KCQkJCQljYXNlICd3ZWJraXQnOgoJCQkJCQkvLyBub3RlIHRoYXQgdGhpcyBpcyB0aGUgV2Via2l0IHZlcnNpb24gbnVtYmVyCgkJCQkJCSRicm93c2VyX251bWJlciA9ICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAkYnJvd3Nlcl9uYW1lICk7CgkJCQkJCS8vIHRoaXMgaXMgdG8gcHVsbCBvdXQgc3BlY2lmaWMgd2Via2l0IHZlcnNpb25zLCBzYWZhcmksIGdvb2dsZS1jaHJvbWUgZXRjLi4KCQkJCQkJJGpfY291bnQgPSBjb3VudCggJGFfd2Via2l0X3R5cGVzICk7CgkJCQkJCWZvciAoICRqID0gMDsgJGogPCAkal9jb3VudDsgJGorKyApCgkJCQkJCXsKCQkJCQkJCWlmICggc3Ryc3RyKCAkYnJvd3Nlcl91c2VyX2FnZW50LCAkYV93ZWJraXRfdHlwZXNbJGpdICkgKQoJCQkJCQkJewoJCQkJCQkJCSR3ZWJraXRfdHlwZSA9ICRhX3dlYmtpdF90eXBlc1skal07CgkJCQkJCQkJLyoKCQkJCQkJCQlhbmQgdGhpcyBpcyB0aGUgd2Via2l0IHR5cGUgdmVyc2lvbiBudW1iZXIsIGxpa2U6IGNocm9tZSAxLjIKCQkJCQkJCQlpZiBvbW5pIHdlYiwgd2Ugd2FudCB0aGUgY291bnQgMiwgbm90IGRlZmF1bHQgMQoJCQkJCQkJCSovCgkJCQkJCQkJaWYgKCAkd2Via2l0X3R5cGUgPT0gJ29tbml3ZWInICkKCQkJCQkJCQl7CgkJCQkJCQkJCSR0aGlzLT5nZXRfc2V0X2NvdW50KCAnc2V0JywgMiApOwoJCQkJCQkJCX0KCQkJCQkJCQkkd2Via2l0X3R5cGVfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICR3ZWJraXRfdHlwZSApOwoJCQkJCQkJCS8vIGVwaXBoYW55IGhhY2sKCQkJCQkJCQlpZiAoICRhX3dlYmtpdF90eXBlc1skal0gPT0gJ2d0a2xhdW5jaGVyJyApCgkJCQkJCQkJewoJCQkJCQkJCQkkYnJvd3Nlcl9uYW1lID0gJ2VwaXBoYW55JzsKCQkJCQkJCQl9CgkJCQkJCQkJZWxzZQoJCQkJCQkJCXsKCQkJCQkJCQkJJGJyb3dzZXJfbmFtZSA9ICRhX3dlYmtpdF90eXBlc1skal07CgkJCQkJCQkJfQoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWJyZWFrOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCSRicm93c2VyX251bWJlciA9ICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAkYnJvd3Nlcl9uYW1lICk7CgkJCQkJCWJyZWFrOwoJCQkJfSAvLyBkZWwgc3dpdGNoCgkJCQkvLyB0aGUgYnJvd3NlciB3YXMgaWQnZWQKCQkJCSRiX3N1Y2Nlc3MgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCX0gLy8gZGVsIGlmCiAgICB9IC8vIGRlbCBmb3IKCgkJLy9hc3NpZ25zIGRlZmF1bHRzIGlmIHRoZSBicm93c2VyIHdhcyBub3QgZm91bmQgaW4gdGhlIGxvb3AgdGVzdAoJCWlmICggISRiX3N1Y2Nlc3MgKQoJCXsKCQkJLyoKCQkJdGhpcyB3aWxsIHJldHVybiB0aGUgZmlyc3QgcGFydCBvZiB0aGUgYnJvd3NlciBzdHJpbmcgaWYgdGhlIGFib3ZlIGlkJ3MgZmFpbGVkCgkJCXVzdWFsbHkgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIGJyb3dzZXIgc3RyaW5nIGhhcyB0aGUgbmF2aWdhdG9yIHVzZXJhZ2VudCBuYW1lL3ZlcnNpb24gaW4gaXQuCgkJCVRoaXMgd2lsbCB1c3VhbGx5IGNvcnJlY3RseSBpZCB0aGUgYnJvd3NlciBhbmQgdGhlIGJyb3dzZXIgbnVtYmVyIGlmIGl0IGRpZG4ndCBnZXQKCQkJY2F1Z2h0IGJ5IHRoZSBhYm92ZSByb3V0aW5lLgoJCQlJZiB5b3Ugd2FudCBhICcnIHRvIGRvIGEgaWYgYnJvd3NlciA9PSAnJyB0eXBlIHRlc3QsIGp1c3QgY29tbWVudCBvdXQgYWxsIGxpbmVzIGJlbG93CgkJCWV4Y2VwdCBmb3IgdGhlIGxhc3QgbGluZSwgYW5kIHVuY29tbWVudCB0aGUgbGFzdCBsaW5lLiBJZiB5b3Ugd2FudCB1bmRlZmluZWQgdmFsdWVzLAoJCQl0aGUgYnJvd3Nlcl9uYW1lIGlzICcnLCB5b3UgY2FuIGFsd2F5cyB0ZXN0IGZvciB0aGF0CgkJCSovCgkJCS8vIGRlbGV0ZSB0aGlzIHBhcnQgaWYgeW91IHdhbnQgYW4gdW5rbm93biBicm93c2VyIHJldHVybmVkCgkJCSRicm93c2VyX25hbWUgPSBzdWJzdHIoICRicm93c2VyX3VzZXJfYWdlbnQsIDAsIHN0cmNzcG4oICRicm93c2VyX3VzZXJfYWdlbnQgLCAnKCk7JykgKTsKCQkJLy8gdGhpcyBleHRyYWN0cyBqdXN0IHRoZSBicm93c2VyIG5hbWUgZnJvbSB0aGUgc3RyaW5nLCBpZiBzb21ldGhpbmcgdXNhYmxlIHdhcyBmb3VuZAoJCQlpZiAoICRicm93c2VyX25hbWUgJiYgcHJlZ19tYXRjaCggJy9bXjAtOV1bYS16XSotKlwgKlthLXpdKlwgKlthLXpdKi8nLCAkYnJvd3Nlcl9uYW1lLCAkYV91bmhhbmRsZWRfYnJvd3NlciApICkKCQkJewoJCQkJJGJyb3dzZXJfbmFtZSA9ICRhX3VuaGFuZGxlZF9icm93c2VyWzBdOwoKCQkJCWlmICggJGJyb3dzZXJfbmFtZSA9PSAnYmxhY2tiZXJyeScgKQoJCQkJewoJCQkJCSR0aGlzLT5nZXRfc2V0X2NvdW50KCAnc2V0JywgMCApOwoJCQkJfQoJCQkJJGJyb3dzZXJfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICRicm93c2VyX25hbWUgKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRicm93c2VyX25hbWUgPSAnTkEnOwoJCQkJJGJyb3dzZXJfbnVtYmVyID0gJ05BJzsKCQkJfQoKCQkJLy8gdGhlbiB1bmNvbW1lbnQgdGhpcyBwYXJ0CgkJCS8vJGJyb3dzZXJfbmFtZSA9ICcnOy8vZGVsZXRlcyB0aGUgbGFzdCBhcnJheSBpdGVtIGluIGNhc2UgdGhlIGJyb3dzZXIgd2FzIG5vdCBhIG1hdGNoCgkJfQoJCS8vIGdldCBvcyBkYXRhLCBtYWMgb3MgeCB0ZXN0IHJlcXVpcmVzIGJyb3dzZXIvdmVyc2lvbiBpbmZvcm1hdGlvbiwgdGhpcyBpcyBhIGNoYW5nZSBmcm9tIG9sZGVyIHNjcmlwdHMKCQlpZiAoICRiX29zX3Rlc3QgKQoJCXsKCQkJJGFfb3NfZGF0YSA9ICR0aGlzLT5nZXRfb3NfZGF0YSggJGJyb3dzZXJfd29ya2luZywgJGJyb3dzZXJfbnVtYmVyICk7CgkJCSRvc190eXBlID0gJGFfb3NfZGF0YVswXTsvLyBvcyBuYW1lLCBhYmJyZXZpYXRlZAoJCQkkb3NfbnVtYmVyID0gJGFfb3NfZGF0YVsxXTsvLyBvcyBudW1iZXIgb3IgdmVyc2lvbiBpZiBhdmFpbGFibGUKCQl9CgkJLyoKCQl0aGlzIGVuZHMgdGhlIHJ1biB0aHJvdWdoIG9uY2UgaWYgY2xhdXNlLCBzZXQgdGhlIGJvb2xlYW4KCQl0byB0cnVlIHNvIHRoZSBmdW5jdGlvbiB3b24ndCByZXRlc3QgZXZlcnl0aGluZwoJCSovCgkJJGJfcmVwZWF0ID0gdHJ1ZTsKCQkvKgoJCXB1bGxzIG91dCBwcmltYXJ5IHZlcnNpb24gbnVtYmVyIGZyb20gbW9yZSBjb21wbGV4IHN0cmluZywgbGlrZSA3LjVhLAoJCXVzZSB0aGlzIGZvciBudW1lcmljIHZlcnNpb24gY29tcGFyaXNvbgoJCSovCgkJaWYgKCAkYnJvd3Nlcl9udW1iZXIgJiYgcHJlZ19tYXRjaCggJy9bMC05XSpcLipbMC05XSovJywgJGJyb3dzZXJfbnVtYmVyLCAkYV9icm93c2VyX21hdGhfbnVtYmVyICkgKQoJCXsKCQkJJGJyb3dzZXJfbWF0aF9udW1iZXIgPSAkYV9icm93c2VyX21hdGhfbnVtYmVyWzBdOwoJCQkvL3ByaW50X3IoJGFfYnJvd3Nlcl9tYXRoX251bWJlcik7CgkJfQoJCWlmICggJGJfbW9iaWxlX3Rlc3QgKQoJCXsKCQkJJG1vYmlsZV90ZXN0ID0gJHRoaXMtPmNoZWNrX2lzX21vYmlsZSgpOwoJCQlpZiAoICRtb2JpbGVfdGVzdCApCgkJCXsKCQkJCSRhX21vYmlsZV9kYXRhID0gJHRoaXMtPmdldF9tb2JpbGVfZGF0YSgpOwoJCQkJJHVhX3R5cGUgPSAnbW9iaWxlJzsKCQkJfQoJCX0KCiAgCS8qCiAgCWFzc2VtYmxlIHRoZXNlIGZpcnN0IHNvIHRoZXkgY2FuIGJlIGluY2x1ZGVkIGluIGZ1bGwgcmV0dXJuIGRhdGEsIHVzaW5nIHN0YXRpYyB2YXJpYWJsZXMKICAJTm90ZSB0aGF0IHRoZXJlJ3Mgbm8gbmVlZCB0byBrZWVwIHJlcGFja2luZyB0aGVzZSBldmVyeSB0aW1lIHRoZSBzY3JpcHQgaXMgY2FsbGVkCiAgCSovCiAgCWlmICggISRhX21vel9kYXRhICkKICAJewogIAkJJGFfbW96X2RhdGEgPSBbICRtb3pfdHlwZSwgJG1vel9udW1iZXIsICRtb3pfcnYsICRtb3pfcnZfZnVsbCwgJG1vel9yZWxlYXNlX2RhdGUgXTsKICAJfQogIAlpZiAoICEkYV93ZWJraXRfZGF0YSApCiAgCXsKICAJCSRhX3dlYmtpdF9kYXRhID0gWyAkd2Via2l0X3R5cGUsICR3ZWJraXRfdHlwZV9udW1iZXIsICRicm93c2VyX251bWJlciBdOwogIAl9CgogIAkvLyB0aGVuIHBhY2sgdGhlIHByaW1hcnkgZGF0YSBhcnJheQogIAkkYV9mdWxsX2Fzc29jX2RhdGEgPSBbCiAgCQkJJ2Jyb3dzZXJfd29ya2luZycgPT4gJGJyb3dzZXJfd29ya2luZywKICAJCQknYnJvd3Nlcl9udW1iZXInID0+ICRicm93c2VyX251bWJlciwKICAJCQknaWVfdmVyc2lvbicgPT4gJGllX3ZlcnNpb24sCiAgCQkJJ2RvbScgPT4gJGJfZG9tX2Jyb3dzZXIsCiAgCQkJJ3NhZmUnID0+ICRiX3NhZmVfYnJvd3NlciwKICAJCQknb3MnID0+ICRvc190eXBlLAogIAkJCSdvc19udW1iZXInID0+ICRvc19udW1iZXIsCiAgCQkJJ2Jyb3dzZXJfbmFtZScgPT4gJGJyb3dzZXJfbmFtZSwKICAJCQkndWFfdHlwZScgPT4gJHVhX3R5cGUsCiAgCQkJJ2Jyb3dzZXJfbWF0aF9udW1iZXInID0+ICRicm93c2VyX21hdGhfbnVtYmVyLAogIAkJCSdtb3pfZGF0YScgPT4gJGFfbW96X2RhdGEsCiAgCQkJJ3dlYmtpdF9kYXRhJyA9PiAkYV93ZWJraXRfZGF0YSwKICAJCQknbW9iaWxlX3Rlc3QnID0+ICRtb2JpbGVfdGVzdCwKICAJCQknbW9iaWxlX2RhdGEnID0+ICRhX21vYmlsZV9kYXRhLAogIAkJCSd0cnVlX2llX251bWJlcicgPT4gJHRydWVfaWVfbnVtYmVyCiAgCQldOwogIAkkdGhpcy0+c2V0QnJvd3NlckRhdGEoJGFfZnVsbF9hc3NvY19kYXRhKTsKICB9CgogIC8vIGdldHMgd2hpY2ggb3MgZnJvbSB0aGUgYnJvd3NlciBzdHJpbmcKICBwdWJsaWMgZnVuY3Rpb24gZ2V0X29zX2RhdGEgKCAkcHZfYnJvd3Nlcl9uYW1lLCAkcHZfdmVyc2lvbl9udW1iZXIgICkKICB7CiAgICAkcHZfYnJvd3Nlcl9zdHJpbmcgPSBzdHJ0b2xvd2VyKCR0aGlzLT5nZXRVYSgpKTsKICAJLy8gaW5pdGlhbGl6ZSB2YXJpYWJsZXMKICAJJG9zX3dvcmtpbmdfdHlwZSA9ICcnOwogIAkkb3Nfd29ya2luZ19udW1iZXIgPSAnJzsKICAJLyoKICAJcGFja3MgdGhlIG9zIGFycmF5LiBVc2UgdGhpcyBvcmRlciBzaW5jZSBzb21lIG5hdmlnYXRvciB1c2VyIGFnZW50cyB3aWxsIHB1dCAnbWFjaW50b3NoJwogIAlpbiB0aGUgbmF2aWdhdG9yIHVzZXIgYWdlbnQgc3RyaW5nIHdoaWNoIHdvdWxkIG1ha2UgdGhlIG50IHRlc3QgcmVnaXN0ZXIgdHJ1ZQogIAkqLwogIAkkYV9tYWMgPSBbICdpbnRlbCBtYWMnLCAncHBjIG1hYycsICdtYWM2OGsnIF07Ly8gdGhpcyBpcyBub3QgdXNlZCBjdXJyZW50bHkKICAJLy8gc2FtZSBsb2dpYywgY2hlY2sgaW4gb3JkZXIgdG8gY2F0Y2ggdGhlIG9zJ3MgaW4gb3JkZXIsIGxhc3QgaXMgYWx3YXlzIGRlZmF1bHQgaXRlbQogIAkkYV91bml4X3R5cGVzID0gWyAnZHJhZ29uZmx5JywgJ2ZyZWVic2QnLCAnb3BlbmJzZCcsICduZXRic2QnLCAnYnNkJywgJ3VuaXh3YXJlJywgJ3NvbGFyaXMnLCAnc3Vub3MnLCAnc3VuNCcsICdzdW41JywgJ3N1bmk4NicsICdzdW4nLCAnaXJpeDUnLCAnaXJpeDYnLCAnaXJpeCcsICdocHV4OScsICdocHV4MTAnLCAnaHB1eDExJywgJ2hwdXgnLCAnaHAtdXgnLCAnYWl4MScsICdhaXgyJywgJ2FpeDMnLCAnYWl4NCcsICdhaXg1JywgJ2FpeCcsICdzY28nLCAndW5peHdhcmUnLCAnbXByYXMnLCAncmVsaWFudCcsICdkZWMnLCAnc2luaXgnLCAndW5peCcgXTsKICAJLy8gb25seSBzb21ldGltZXMgd2lsbCB5b3UgZ2V0IGEgbGludXggZGlzdHJvIHRvIGlkIGl0c2VsZi4uLgogIAkkYV9saW51eF9kaXN0cm9zID0gWyAndWJ1bnR1JywgJ2t1YnVudHUnLCAneHVidW50dScsICdtZXBpcycsICd4YW5kcm9zJywgJ2xpbnNwaXJlJywgJ3dpbnNwaXJlJywgJ2pvbGljbG91ZCcsICdzaWR1eCcsICdrYW5vdGl4JywgJ2RlYmlhbicsICdvcGVuc3VzZScsICdzdXNlJywgJ2ZlZG9yYScsICdyZWRoYXQnLCAnc2xhY2t3YXJlJywgJ3NsYXgnLCAnbWFuZHJha2UnLCAnbWFuZHJpdmEnLCAnZ2VudG9vJywgJ3NhYmF5b24nLCAnbGludXgnIF07CiAgCSRhX2xpbnV4X3Byb2Nlc3MgPSBbICdpMzg2JywgJ2k1ODYnLCAnaTY4NicgXTsvLyBub3QgdXNlIGN1cnJlbnRseQogIAkvLyBub3RlLCBvcmRlciBvZiBvcyB2ZXJ5IGltcG9ydGFudCBpbiBvcyBhcnJheSwgeW91IHdpbGwgZ2V0IGZhaWxlZCBpZHMgaWYgY2hhbmdlZAogIAkkYV9vc190eXBlcyA9IFsgJ2FuZHJvaWQnLCAnYmxhY2tiZXJyeScsICdpcGhvbmUnLCAncGFsbW9zJywgJ3BhbG1zb3VyY2UnLCAnc3ltYmlhbicsICdiZW9zJywgJ29zMicsICdhbWlnYScsICd3ZWJ0dicsICdtYWMnLCAnbnQnLCAnd2luJywgJGFfdW5peF90eXBlcywgJGFfbGludXhfZGlzdHJvcyBdOwoKICAJLy9vcyB0ZXN0ZXIKICAJJGlfY291bnQgPSBjb3VudCggJGFfb3NfdHlwZXMgKTsKICAJZm9yICggJGkgPSAwOyAkaSA8ICRpX2NvdW50OyAkaSsrICkKICAJewogIAkJLy8gdW5wYWNrcyBvcyBhcnJheSwgYXNzaWducyB0byB2YXJpYWJsZSAkYV9vc193b3JraW5nCiAgCQkkb3Nfd29ya2luZ19kYXRhID0gJGFfb3NfdHlwZXNbJGldOwogIAkJLyoKICAJCWFzc2lnbiBvcyB0byBnbG9iYWwgb3MgdmFyaWFibGUsIG9zIGZsYWcgdHJ1ZSBvbiBzdWNjZXNzCiAgCQkhc3Ryc3RyKCRwdl9icm93c2VyX3N0cmluZywgImxpbnV4IiApIGNvcnJlY3RzIGEgbGludXggZGV0ZWN0aW9uIGJ1ZwogIAkJKi8KICAJCWlmICggIWlzX2FycmF5KCAkb3Nfd29ya2luZ19kYXRhICkgJiYgc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICRvc193b3JraW5nX2RhdGEgKSAmJiAhc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICJsaW51eCIgKSApCiAgCQl7CiAgCQkJJG9zX3dvcmtpbmdfdHlwZSA9ICRvc193b3JraW5nX2RhdGE7CgogIAkJCXN3aXRjaCAoICRvc193b3JraW5nX3R5cGUgKQogIAkJCXsKICAJCQkJLy8gbW9zdCB3aW5kb3dzIG5vdyB1c2VzOiBOVCBYLlkgc3ludGF4CiAgCQkJCWNhc2UgJ250JzoKICAJCQkJCWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICdudCA2LjEnICkgKS8vIHdpbmRvd3MgNwogIAkJCQkJewogIAkJCQkJCSRvc193b3JraW5nX251bWJlciA9IDYuMTsKICAJCQkJCX0KICAJCQkJCWVsc2VpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfc3RyaW5nLCAnbnQgNi4wJyApICkvLyB3aW5kb3dzIHZpc3RhL3NlcnZlciAyMDA4CiAgCQkJCQl7CiAgCQkJCQkJJG9zX3dvcmtpbmdfbnVtYmVyID0gNi4wOwogIAkJCQkJfQogIAkJCQkJZWxzZWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICdudCA1LjInICkgKS8vIHdpbmRvd3Mgc2VydmVyIDIwMDMKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSA1LjI7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ250IDUuMScgKSB8fCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ3hwJyApICkvLyB3aW5kb3dzIHhwCiAgCQkJCQl7CiAgCQkJCQkJJG9zX3dvcmtpbmdfbnVtYmVyID0gNS4xOy8vCiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ250IDUnICkgfHwgc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICcyMDAwJyApICkvLyB3aW5kb3dzIDIwMDAKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSA1LjA7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ250IDQnICkgKS8vIG50IDQKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSA0OwogIAkJCQkJfQogIAkJCQkJZWxzZWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICdudCAzJyApICkvLyBudCA0CiAgCQkJCQl7CiAgCQkJCQkJJG9zX3dvcmtpbmdfbnVtYmVyID0gMzsKICAJCQkJCX0KICAJCQkJCWJyZWFrOwogIAkJCQljYXNlICd3aW4nOgogIAkJCQkJaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ3Zpc3RhJyApICkvLyB3aW5kb3dzIHZpc3RhLCBmb3Igb3BlcmEgSUQKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSA2LjA7CiAgCQkJCQkJJG9zX3dvcmtpbmdfdHlwZSA9ICdudCc7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ3hwJyApICkvLyB3aW5kb3dzIHhwLCBmb3Igb3BlcmEgSUQKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSA1LjE7CiAgCQkJCQkJJG9zX3dvcmtpbmdfdHlwZSA9ICdudCc7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJzIwMDMnICkgKS8vIHdpbmRvd3Mgc2VydmVyIDIwMDMsIGZvciBvcGVyYSBJRAogIAkJCQkJewogIAkJCQkJCSRvc193b3JraW5nX251bWJlciA9IDUuMjsKICAJCQkJCQkkb3Nfd29ya2luZ190eXBlID0gJ250JzsKICAJCQkJCX0KICAJCQkJCWVsc2VpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfc3RyaW5nLCAnd2luZG93cyBjZScgKSApLy8gd2luZG93cyBDRQogIAkJCQkJewogIAkJCQkJCSRvc193b3JraW5nX251bWJlciA9ICdjZSc7CiAgCQkJCQkJJG9zX3dvcmtpbmdfdHlwZSA9ICdudCc7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJzk1JyApICkKICAJCQkJCXsKICAJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSAnOTUnOwogIAkJCQkJfQogIAkJCQkJZWxzZWlmICggKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJzl4IDQuOScgKSApIHx8ICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICcgbWUnICkgKSApCiAgCQkJCQl7CiAgCQkJCQkJJG9zX3dvcmtpbmdfbnVtYmVyID0gJ21lJzsKICAJCQkJCX0KICAJCQkJCWVsc2VpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfc3RyaW5nLCAnOTgnICkgKQogIAkJCQkJewogIAkJCQkJCSRvc193b3JraW5nX251bWJlciA9ICc5OCc7CiAgCQkJCQl9CiAgCQkJCQllbHNlaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJzIwMDAnICkgKS8vIHdpbmRvd3MgMjAwMCwgZm9yIG9wZXJhIElECiAgCQkJCQl7CiAgCQkJCQkJJG9zX3dvcmtpbmdfbnVtYmVyID0gNS4wOwogIAkJCQkJCSRvc193b3JraW5nX3R5cGUgPSAnbnQnOwogIAkJCQkJfQogIAkJCQkJYnJlYWs7CiAgCQkJCWNhc2UgJ21hYyc6CiAgCQkJCQlpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfc3RyaW5nLCAnb3MgeCcgKSApCiAgCQkJCQl7CiAgCQkJCQkJLy8gaWYgaXQgZG9lc24ndCBoYXZlIGEgdmVyc2lvbiBudW1iZXIsIGl0IGlzIG9zIHg7CiAgCQkJCQkJaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3N0cmluZywgJ29zIHggJyApICkKICAJCQkJCQl7CiAgCQkJCQkJCS8vIG51bWJlcnMgYXJlIGxpa2U6IDEwXzIuNCwgb3RoZXJzIDEwLjIuNAogIAkJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSBzdHJfcmVwbGFjZSggJ18nLCAnLicsICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAnb3MgeCcgKSApOwogIAkJCQkJCX0KICAJCQkJCQllbHNlCiAgCQkJCQkJewogIAkJCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSAxMDsKICAJCQkJCQl9CiAgCQkJCQl9CiAgCQkJCQkvKgogIAkJCQkJdGhpcyBpcyBhIGNydWRlIHRlc3QgZm9yIG9zIHgsIHNpbmNlIHNhZmFyaSwgY2FtaW5vLCBpZSA1LjIsICYgbW96ID49IHJ2IDEuMwogIAkJCQkJYXJlIG9ubHkgbWFkZSBmb3Igb3MgeAogIAkJCQkJKi8KICAJCQkJCWVsc2VpZiAoICggJHB2X2Jyb3dzZXJfbmFtZSA9PSAnc2FmJyApIHx8ICggJHB2X2Jyb3dzZXJfbmFtZSA9PSAnY2FtJyApIHx8CiAgCQkJCQkJKCAoICRwdl9icm93c2VyX25hbWUgPT0gJ21veicgKSAmJiAoICRwdl92ZXJzaW9uX251bWJlciA+PSAxLjMgKSApIHx8CiAgCQkJCQkJKCAoICRwdl9icm93c2VyX25hbWUgPT0gJ2llJyApICYmICggJHB2X3ZlcnNpb25fbnVtYmVyID49IDUuMiApICkgKQogIAkJCQkJewogIAkJCQkJCSRvc193b3JraW5nX251bWJlciA9IDEwOwogIAkJCQkJfQogIAkJCQkJYnJlYWs7CiAgCQkJCWNhc2UgJ2lwaG9uZSc6CiAgCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSAxMDsKICAJCQkJCWJyZWFrOwogIAkJCQlkZWZhdWx0OgogIAkJCQkJYnJlYWs7CiAgCQkJfQogIAkJCWJyZWFrOwogIAkJfQogIAkJLyoKICAJCWNoZWNrIHRoYXQgaXQncyBhbiBhcnJheSwgY2hlY2sgaXQncyB0aGUgc2Vjb25kIHRvIGxhc3QgaXRlbQogIAkJaW4gdGhlIG1haW4gb3MgYXJyYXksIHRoZSB1bml4IG9uZSB0aGF0IGlzCiAgCQkqLwogIAkJZWxzZWlmICggaXNfYXJyYXkoICRvc193b3JraW5nX2RhdGEgKSAmJiAoICRpID09ICggJGlfY291bnQgLSAyICkgKSApCiAgCQl7CiAgCQkJJGpfY291bnQgPSBjb3VudCgkb3Nfd29ya2luZ19kYXRhKTsKICAJCQlmb3IgKCRqID0gMDsgJGogPCAkal9jb3VudDsgJGorKykKICAJCQl7CiAgCQkJCWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICRvc193b3JraW5nX2RhdGFbJGpdICkgKQogIAkJCQl7CiAgCQkJCQkkb3Nfd29ya2luZ190eXBlID0gJ3VuaXgnOyAvL2lmIHRoZSBvcyBpcyBpbiB0aGUgdW5peCBhcnJheSwgaXQncyB1bml4LCBvYnZpb3VzbHkuLi4KICAJCQkJCSRvc193b3JraW5nX251bWJlciA9ICggJG9zX3dvcmtpbmdfZGF0YVskal0gIT0gJ3VuaXgnICkgPyAkb3Nfd29ya2luZ19kYXRhWyRqXSA6ICcnOy8vIGFzc2lnbiBzdWIgdW5peCB2ZXJzaW9uIGZyb20gdGhlIHVuaXggYXJyYXkKICAJCQkJCWJyZWFrOwogIAkJCQl9CiAgCQkJfQogIAkJfQogIAkJLyoKICAJCWNoZWNrIHRoYXQgaXQncyBhbiBhcnJheSwgY2hlY2sgaXQncyB0aGUgbGFzdCBpdGVtCiAgCQlpbiB0aGUgbWFpbiBvcyBhcnJheSwgdGhlIGxpbnV4IG9uZSB0aGF0IGlzCiAgCQkqLwogIAkJZWxzZWlmICggaXNfYXJyYXkoICRvc193b3JraW5nX2RhdGEgKSAmJiAoICRpID09ICggJGlfY291bnQgLSAxICkgKSApCiAgCQl7CiAgCQkJJGpfY291bnQgPSBjb3VudCgkb3Nfd29ya2luZ19kYXRhKTsKICAJCQlmb3IgKCRqID0gMDsgJGogPCAkal9jb3VudDsgJGorKykKICAJCQl7CiAgCQkJCWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl9zdHJpbmcsICRvc193b3JraW5nX2RhdGFbJGpdICkgKQogIAkJCQl7CiAgCQkJCQkkb3Nfd29ya2luZ190eXBlID0gJ2xpbic7CiAgCQkJCQkvLyBhc3NpZ24gbGludXggZGlzdHJvIGZyb20gdGhlIGxpbnV4IGFycmF5LCB0aGVyZSdzIGEgZGVmYXVsdAogIAkJCQkJLy9zZWFyY2ggZm9yICdsaW4nLCBpZiBpdCdzIHRoYXQsIHNldCB2ZXJzaW9uIHRvICcnCiAgCQkJCQkkb3Nfd29ya2luZ19udW1iZXIgPSAoICRvc193b3JraW5nX2RhdGFbJGpdICE9ICdsaW51eCcgKSA/ICRvc193b3JraW5nX2RhdGFbJGpdIDogJyc7CiAgCQkJCQlicmVhazsKICAJCQkJfQogIAkJCX0KICAJCX0KICAJfQoKICAJLy8gcGFjayB0aGUgb3MgZGF0YSBhcnJheSBmb3IgcmV0dXJuIHRvIG1haW4gZnVuY3Rpb24KICAJJGFfb3NfZGF0YSA9IFsgJG9zX3dvcmtpbmdfdHlwZSwgJG9zX3dvcmtpbmdfbnVtYmVyIF07CgogIAlyZXR1cm4gJGFfb3NfZGF0YTsKICB9CgogIC8qCiAgRnVuY3Rpb24gSW5mbzoKICBmdW5jdGlvbiByZXR1cm5zIGJyb3dzZXIgbnVtYmVyLCBnZWNrbyBydiBudW1iZXIsIG9yIGdlY2tvIHJlbGVhc2UgZGF0ZQogIGZ1bmN0aW9uIGdldF9pdGVtX3ZlcnNpb24oICRicm93c2VyX3VzZXJfYWdlbnQsICRzZWFyY2hfc3RyaW5nLCAkc3Vic3RyaW5nX2xlbmd0aCApCiAgJHB2X2V4dHJhX3NlYXJjaD0nJyBhbGxvd3MgdXMgdG8gc2V0IGFuIGFkZGl0aW9uYWwgc2VhcmNoL2V4aXQgbG9vcCBwYXJhbWV0ZXIsIGJ1dCB3ZQogIG9ubHkgd2FudCB0aGlzIHJ1bm5pbmcgd2hlbiBuZWVkZWQKICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXRfaXRlbV92ZXJzaW9uKCAkcHZfc2VhcmNoX3N0cmluZywgJHB2X2JfYnJlYWtfbGFzdD0nJywgJHB2X2V4dHJhX3NlYXJjaD0nJyApCiAgewogICAgJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCA9IHN0cnRvbG93ZXIoJHRoaXMtPmdldFVhKCkpOwogIAkvLyAxMiBpcyB0aGUgbG9uZ2VzdCB0aGF0IHdpbGwgYmUgcmVxdWlyZWQsIGhhbmRsZXMgcmVsZWFzZSBkYXRlczogMjAwMjAzMjM7IDAuOC4wKwogIAkkc3Vic3RyaW5nX2xlbmd0aCA9IDE1OwogIAkkc3RhcnRfcG9zID0gMDsgLy8gc2V0ICRzdGFydF9wb3MgdG8gMCBmb3IgZmlyc3QgaXRlcmF0aW9uCiAgCS8vaW5pdGlhbGl6ZSBicm93c2VyIG51bWJlciwgd2lsbCByZXR1cm4gJycgaWYgbm90IGZvdW5kCiAgCSRzdHJpbmdfd29ya2luZ19udW1iZXIgPSAnJzsKICAJLyoKICAJdXNlIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGZvciAkcHZfc2VhcmNoX3N0cmluZwogIAlzdGFydCB0aGUgc3Vic3RyaW5nIHNsaWNlIHJpZ2h0IGFmdGVyIHRoZXNlIG1veiBzZWFyY2ggc3RyaW5ncwogIAl0aGVyZSBhcmUgc29tZSBjYXNlcyBvZiBkb3VibGUgbXNpZSBpZCdzLCBmaXJzdCBpbiBzdHJpbmcgYW5kIHRoZW4gd2l0aCB0aGVuIG51bWJlcgogIAkkc3RhcnRfcG9zID0gMDsKICAJdGhpcyB0ZXN0IGNvdmVycyB5b3UgZm9yIG11bHRpcGxlIG9jY3VycmVuY2VzIG9mIHN0cmluZywgb25seSB3aXRoIGllIHRob3VnaAogIAl3aXRoIGZvciBleGFtcGxlIGdvb2dsZSBib3QgeW91IHdhbnQgdGhlIGZpcnN0IG9jY3VyYW5jZSByZXR1cm5lZCwgc2luY2UgdGhhdCdzIHdoZXJlIHRoZQogIAludW1iZXJpbmcgaGFwcGVucwogIAkqLwogIAlmb3IgKCAkaSA9IDA7ICRpIDwgNDsgJGkrKyApCiAgCXsKICAJCS8vc3RhcnQgdGhlIHNlYXJjaCBhZnRlciB0aGUgZmlyc3Qgc3RyaW5nIG9jY3VycmVuY2UKICAJCWlmICggc3RycG9zKCAkcHZfYnJvd3Nlcl91c2VyX2FnZW50LCAkcHZfc2VhcmNoX3N0cmluZywgJHN0YXJ0X3BvcyApICE9PSBmYWxzZSApCiAgCQl7CiAgCQkJLy8gdXBkYXRlIHN0YXJ0IHBvc2l0aW9uIGlmIHBvc2l0aW9uIGZvdW5kCiAgCQkJJHN0YXJ0X3BvcyA9IHN0cnBvcyggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJHB2X3NlYXJjaF9zdHJpbmcsICRzdGFydF9wb3MgKSArIHN0cmxlbiggJHB2X3NlYXJjaF9zdHJpbmcgKTsKICAJCQkvKgogIAkJCW1zaWUgKGFuZCBtYXliZSBvdGhlciB1c2VyQWdlbnRzIHJlcXVpcmVzIHNwZWNpYWwgaGFuZGxpbmcgYmVjYXVzZSBzb21lIGFwcHMgaW5qZWN0CiAgCQkJYSBzZWNvbmQgbXNpZSwgdXN1YWxseSBhdCB0aGUgYmVnaW5uaW5nLCBjdXN0b20gbW9kZXMgYWxsb3cgYnJlYWtpbmcgYXQgZmlyc3QgaW5zdGFuY2UKICAJCQlpZiAkcHZfYl9icmVha19sYXN0ICRwdl9leHRyYV9zZWFyY2ggY29uZGl0aW9ucyBleGlzdC4gU2luY2Ugd2Ugb25seSB3YW50IHRoaXMgdGVzdAogIAkJCXRvIHJ1biBpZiBhbmQgb25seSBpZiB3ZSBuZWVkIGl0LCBpdCdzIHRyaWdnZXJlZCBieSBjYWxsZXIgcGFzc2luZyB0aGVzZSB2YWx1ZXMuCiAgCQkJKi8KICAJCQlpZiAoICEkcHZfYl9icmVha19sYXN0IHx8ICggJHB2X2V4dHJhX3NlYXJjaCAmJiBzdHJzdHIoICRwdl9icm93c2VyX3VzZXJfYWdlbnQsICRwdl9leHRyYV9zZWFyY2ggKSApICkKICAJCQl7CiAgCQkJCWJyZWFrOwogIAkJCX0KICAJCX0KICAJCWVsc2UKICAJCXsKICAJCQlicmVhazsKICAJCX0KICAJfQogIAkvKgogIAlIYW5kbGVzIHRoaW5ncyBsaWtlIGV4dHJhIG9tbml3ZWIvdjQ1NiwgZ2Vja28vLCBibGFja2JlcnJ5OTcwMAogIAlhbHNvIGNvcnJlY3RzIGZvciB0aGUgb21uaXdlYiAndicKICAJKi8KICAJJHN0YXJ0X3BvcyArPSAkdGhpcy0+Z2V0X3NldF9jb3VudCggJ2dldCcgKTsKICAJJHN0cmluZ193b3JraW5nX251bWJlciA9IHN1YnN0ciggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJHN0YXJ0X3BvcywgJHN1YnN0cmluZ19sZW5ndGggKTsKCiAgCS8vIEZpbmQgdGhlIHNwYWNlLCA7LCBvciBwYXJlbnRoZXNlcyB0aGF0IGVuZHMgdGhlIG51bWJlcgogIAkkc3RyaW5nX3dvcmtpbmdfbnVtYmVyID0gc3Vic3RyKCAkc3RyaW5nX3dvcmtpbmdfbnVtYmVyLCAwLCBzdHJjc3BuKCRzdHJpbmdfd29ya2luZ19udW1iZXIsICcgKTsvJykgKTsKCiAgCS8vbWFrZSBzdXJlIHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBhY3R1YWxseSB0aGUgaWQgbnVtYmVyIGFuZCBub3QgYSBzdHJpbmcKICAJLy8gb3RoZXJ3aXNlIHJldHVybiAnJwogIAkvLyBzdHJjc3BuKCAkc3RyaW5nX3dvcmtpbmdfbnVtYmVyLCAnMDEyMzQ1Njc4OS4nKSA9PSBzdHJsZW4oICRzdHJpbmdfd29ya2luZ19udW1iZXIpCiAgCS8vCWlmICggcHJlZ19tYXRjaCgiL1xcZC8iLCAkc3RyaW5nX3dvcmtpbmdfbnVtYmVyKSA9PSAwICkKICAgCWlmICggIWlzX251bWVyaWMoIHN1YnN0ciggJHN0cmluZ193b3JraW5nX251bWJlciwgMCwgMSApICkgKQogIAl7CiAgCQkkc3RyaW5nX3dvcmtpbmdfbnVtYmVyID0gJyc7CiAgCX0KICAJLy8kc3RyaW5nX3dvcmtpbmdfbnVtYmVyID0gc3RycnBvcyggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJHB2X3NlYXJjaF9zdHJpbmcgKTsKICAJcmV0dXJuICRzdHJpbmdfd29ya2luZ19udW1iZXI7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gZ2V0X3NldF9jb3VudCggJHB2X3R5cGUsICRwdl92YWx1ZT0nJyApCiAgewogIAlzdGF0aWMgJHNsaWNlX2luY3JlbWVudDsKICAJJHJldHVybl92YWx1ZSA9ICcnOwogIAlzd2l0Y2ggKCAkcHZfdHlwZSApCiAgCXsKICAJCWNhc2UgJ2dldCc6CiAgCQkJLy8gc2V0IGlmIHVuc2V0LCBpZSwgZmlyc3QgdXNlLiBub3RlIHRoYXQgZW1wdHkgYW5kIGlzc2V0IGFyZSBub3QgZ29vZCB0ZXN0cyBoZXJlCiAgCQkJaWYgKCBpc19udWxsKCAkc2xpY2VfaW5jcmVtZW50ICkgKQogIAkJCXsKICAJCQkJJHNsaWNlX2luY3JlbWVudCA9IDE7CiAgCQkJfQogIAkJCSRyZXR1cm5fdmFsdWUgPSAkc2xpY2VfaW5jcmVtZW50OwogIAkJCSRzbGljZV9pbmNyZW1lbnQgPSAxOyAvLyByZXNldCB0byBkZWZhdWx0CiAgCQkJcmV0dXJuICRyZXR1cm5fdmFsdWU7CiAgCQkJYnJlYWs7CiAgCQljYXNlICdzZXQnOgogIAkJCSRzbGljZV9pbmNyZW1lbnQgPSAkcHZfdmFsdWU7CiAgCQkJYnJlYWs7CiAgCX0KICB9CgogIC8qCiAgU3BlY2lhbCBJRCBub3RlczoKICBOb3ZhcnJhLVZpc2lvbiBpcyBhIENvbnRlbnQgVHJhbnNmb3JtYXRpb24gU2VydmVyIChDVFMpCiAgKi8KICBwdWJsaWMgZnVuY3Rpb24gY2hlY2tfaXNfbW9iaWxlKCkKICB7CiAgICAkcHZfYnJvd3Nlcl91c2VyX2FnZW50ID0gc3RydG9sb3dlcigkdGhpcy0+Z2V0VWEoKSk7CgogIAkkbW9iaWxlX3dvcmtpbmdfdGVzdCA9ICcnOwogIAkvKgogIAl0aGVzZSB3aWxsIHNlYXJjaCBmb3IgYmFzaWMgbW9iaWxlIGhpbnRzLCB0aGlzIHNob3VsZCBjYXRjaCBtb3N0IG9mIHRoZW0sIGZpcnN0IGNoZWNrCiAgCWtub3duIGhhbmQgaGVsZCBkZXZpY2Ugb3MsIHRoZW4gY2hlY2sgZGV2aWNlIG5hbWVzLCB0aGVuIG1vYmlsZSBicm93c2VyIG5hbWVzCiAgCVRoaXMgbGlzdCBpcyBhbG1vc3QgdGhlIHNhbWUgYnV0IG5vdCBleGFjdGx5IGFzIHRoZSA0IGFycmF5cyBpbiBmdW5jdGlvbiBiZWxvdwogIAkqLwogIAkkYV9tb2JpbGVfc2VhcmNoID0gWwogIAkvKgogIAlNYWtlIHN1cmUgdG8gdXNlIG9ubHkgZGF0YSBoZXJlIHRoYXQgYWx3YXlzIHdpbGwgYmUgYSBtb2JpbGUsIHNvIHRoaXMgbGlzdCBpcyBub3QKICAJaWRlbnRpY2FsIHRvIHRoZSBsaXN0IG9mIGdldF9tb2JpbGVfZGF0YQogIAkqLwogIAkvLyBvcwogIAknYW5kcm9pZCcsICdlcG9jJywgJ2xpbnV4IGFybXYnLCAncGFsbW9zJywgJ3BhbG1zb3VyY2UnLCAnd2luZG93cyBjZScsICd3aW5kb3dzIHBob25lIG9zJywgJ3N5bWJpYW5vcycsICdzeW1iaWFuIG9zJywgJ3N5bWJpYW4nLCAnd2Vib3MnLAogIAkvLyBkZXZpY2VzIC0gaXBvZCBiZWZvcmUgaXBob25lIG9yIGZhaWxzCiAgCSdiZW5xJywgJ2JsYWNrYmVycnknLCAnZGFuZ2VyIGhpcHRvcCcsICdkZGlwb2NrZXQnLCAnIGRyb2lkJywgJ2lwYWQnLCAnaXBvZCcsICdpcGhvbmUnLCAna2luZGxlJywgJ2xnZS1jeCcsICdsZ2UtbHgnLCAnbGdlLW14JywgJ2xnZSB2eCcsICdsZ2UgJywgJ2xnZS0nLCAnbGc7bHgnLCAnbmludGVuZG8gd2lpJywgJ25va2lhJywgJ3BhbG0nLCAncGR4Z3cnLCAncGxheXN0YXRpb24nLCAnc2FnZW0nLCAnc2Ftc3VuZycsICdzZWMtc2doJywgJ3NoYXJwJywgJ3Nvbnllcmljc3NvbicsICdzcHJpbnQnLCAnenVuZScsICdqLXBob25lJywgJ240MTAnLCAnbW90IDI0JywgJ21vdC0nLCAnaHRjLScsICdodGNfJywgJ2h0YyAnLCAnc2VjLScsICdzaWUtbScsICdzaWUtcycsICdzcHYgJywgJ3ZvZGFwaG9uZScsICdzbWFydHBob25lJywgJ2FybXYnLCAnbWlkcCcsICdtb2JpbGVwaG9uZScsCiAgCS8vIGJyb3dzZXJzCiAgCSdhdmFudGdvJywgJ2JsYXplcicsICdlbGFpbmUnLCAnZXVkb3Jhd2ViJywgJ2llbW9iaWxlJywgICdtaW5pbW8nLCAnbW9iaWxlIHNhZmFyaScsICdtb2JpbGVleHBsb3JlcicsICdvcGVyYSBtb2JpJywgJ29wZXJhIG1pbmknLCAnbmV0ZnJvbnQnLCAnb3B3dicsICdwb2xhcmlzJywgJ3NlbWMtYnJvd3NlcicsICd1cC5icm93c2VyJywgJ3dlYnBybycsICd3bXMgcGllJywgJ3hpaW5vJywKICAJLy8gc2VydmljZXMgLSBhc3RlbCBvdXQgb2YgYnVzaW5lc3MKICAJJ2FzdGVsJywgICdkb2NvbW8nLCAgJ25vdmFycmEtdmlzaW9uJywgJ3BvcnRhbG1tbScsICdyZXF3aXJlbGVzc3dlYicsICd2b2RhZm9uZScKICAJXTsKCiAgCS8vIHRoZW4gZG8gYmFzaWMgbW9iaWxlIHR5cGUgc2VhcmNoLCB0aGlzIHVzZXMgZGF0YSBmcm9tOiBnZXRfbW9iaWxlX2RhdGEoKQogIAkkal9jb3VudCA9IGNvdW50KCAkYV9tb2JpbGVfc2VhcmNoICk7CiAgCWZvciAoJGogPSAwOyAkaiA8ICRqX2NvdW50OyAkaisrKQogIAl7CiAgCQlpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJGFfbW9iaWxlX3NlYXJjaFskal0gKSApCiAgCQl7CiAgCQkJJG1vYmlsZV93b3JraW5nX3Rlc3QgPSAkYV9tb2JpbGVfc2VhcmNoWyRqXTsKICAJCQlicmVhazsKICAJCX0KICAJfQoKICAJcmV0dXJuICRtb2JpbGVfd29ya2luZ190ZXN0OwogIH0KCiAgLyoKICB0aGFua3MgdG8gdGhpcyBwYWdlOiBodHRwOi8vd3d3Lnp5dHJheC5jb20vdGVjaC93ZWIvbW9iaWxlX2lkcy5odG1sCiAgZm9yIGRhdGEgdXNlZCBoZXJlCiAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0X21vYmlsZV9kYXRhKCkKICB7CiAgICAkcHZfYnJvd3Nlcl91c2VyX2FnZW50ID0gc3RydG9sb3dlcigkdGhpcy0+Z2V0VWEoKSk7CiAgCSRtb2JpbGVfYnJvd3NlciA9ICcnOwogIAkkbW9iaWxlX2Jyb3dzZXJfbnVtYmVyID0gJyc7CiAgCSRtb2JpbGVfZGV2aWNlID0gJyc7CiAgCSRtb2JpbGVfZGV2aWNlX251bWJlciA9ICcnOwogIAkkbW9iaWxlX29zID0gJyc7IC8vIHdpbGwgdXN1YWxseSBiZSBudWxsLCBzb3JyeQogIAkkbW9iaWxlX29zX251bWJlciA9ICcnOwogIAkkbW9iaWxlX3NlcnZlciA9ICcnOwogIAkkbW9iaWxlX3NlcnZlcl9udW1iZXIgPSAnJzsKCiAgCS8vIGJyb3dzZXJzLCBzaG93IGl0IGFzIGEgaGFuZGhlbGQsIGJ1dCBpcyBub3QgdGhlIG9zCiAgCSRhX21vYmlsZV9icm93c2VyID0gWyAnYXZhbnRnbycsICdibGF6ZXInLCAnZWxhaW5lJywgJ2V1ZG9yYXdlYicsICdpZW1vYmlsZScsICAnbWluaW1vJywgJ21vYmlsZSBzYWZhcmknLCAnbW9iaWxlZXhwbG9yZXInLCAnb3BlcmEgbW9iaScsICdvcGVyYSBtaW5pJywgJ25ldGZyb250JywgJ29wd3YnLCAncG9sYXJpcycsICdzZW1jLWJyb3dzZXInLCAndXAuYnJvd3NlcicsICd3ZWJwcm8nLCAnd21zIHBpZScsICd4aWlubycgXTsKICAJLyoKICAJVGhpcyBnb2VzIGZyb20gZWFzaWVzdCB0byBkZXRlY3QgdG8gaGFyZGVzdCwgc28gZG9uJ3QgdXNlIHRoaXMgZm9yIG91dHB1dCB1bmxlc3MgeW91CiAgCWNsZWFuIGl0IHVwIG1vcmUgaXMgbXkgYWR2aWNlLgogIAlTcGVjaWFsIE5vdGVzOiBkbyBub3QgaW5jbHVkZSBtaWxlc3RvbmUgaW4gZ2VuZXJhbCBtb2JpbGUgdHlwZSB0ZXN0IGFib3ZlLCBpdCdzIHRvbyBnZW5lcmljCiAgCSovCiAgCSRhX21vYmlsZV9kZXZpY2UgPSBbICdiZW5xJywgJ2JsYWNrYmVycnknLCAnZGFuZ2VyIGhpcHRvcCcsICdkZGlwb2NrZXQnLCAnIGRyb2lkJywgJ2h0Y19kcmVhbScsICdodGMgZXNwcmVzc28nLCAnaHRjIGhlcm8nLCAnaHRjIGhhbG8nLCAnaHRjIGh1YW5nc2hhbicsICdodGMgbGVnZW5kJywgJ2h0YyBsaWJlcnR5JywgJ2h0YyBwYXJhZGlzZScsICdodGMgc3VwZXJzb25pYycsICdodGMgdGF0dG9vJywgJ2lwYWQnLCAnaXBvZCcsICdpcGhvbmUnLCAna2luZGxlJywgJ2xnZS1jeCcsICdsZ2UtbHgnLCAnbGdlLW14JywgJ2xnZSB2eCcsICdsZztseCcsICduaW50ZW5kbyB3aWknLCAnbm9raWEnLCAncGFsbScsICdwZHhndycsICdwbGF5c3RhdGlvbicsICdzYWdlbScsICdzYW1zdW5nJywgJ3NlYy1zZ2gnLCAnc2hhcnAnLCAnc29ueWVyaWNzc29uJywgJ3NwcmludCcsICd6dW5laGQnLCAnenVuZScsICdqLXBob25lJywgJ21pbGVzdG9uZScsICduNDEwJywgJ21vdCAyNCcsICdtb3QtJywgJ2h0Yy0nLCAnaHRjXycsICAnaHRjICcsICdsZ2UgJywgJ2xnZS0nLCAnc2VjLScsICdzaWUtbScsICdzaWUtcycsICdzcHYgJywgJ3NtYXJ0cGhvbmUnLCAnYXJtdicsICdtaWRwJywgJ21vYmlsZXBob25lJyBdOwogIAkvKgogIAlub3RlOiBsaW51eCBhbG9uZSBjYW4ndCBiZSBzZWFyY2hlZCBmb3IsIGFuZCBhbG1vc3QgYWxsIGxpbnV4IGRldmljZXMgYXJlIGFybXYgdHlwZXMKICAJaXBhZCAnY3B1IG9zJyBpcyBob3cgdGhlIHJlYWwgb3MgbnVtYmVyIGlzIGhhbmRsZWQKICAJKi8KICAJJGFfbW9iaWxlX29zID0gWyAnYW5kcm9pZCcsICdlcG9jJywgJ2NwdSBvcycsICdpcGhvbmUgb3MnLCAncGFsbW9zJywgJ3BhbG1zb3VyY2UnLCAnd2luZG93cyBwaG9uZSBvcycsICd3aW5kb3dzIGNlJywgJ3N5bWJpYW5vcycsICdzeW1iaWFuIG9zJywgJ3N5bWJpYW4nLCAnd2Vib3MnLCAnbGludXggYXJtdicgIF07CgogIAkvLyBzb21ldGltZXMgdGhlcmUgaXMganVzdCBubyBvdGhlciBpZCBmb3IgdGhlIHVuaXQgdGhhdCB0aGUgQ1RTIHR5cGUgc2VydmljZS9zZXJ2ZXIKICAJJGFfbW9iaWxlX3NlcnZlciA9IFsgJ2FzdGVsJywgJ2RvY29tbycsICdub3ZhcnJhLXZpc2lvbicsICdwb3J0YWxtbW0nLCAncmVxd2lyZWxlc3N3ZWInLCAndm9kYWZvbmUnIF07CgogIAkka19jb3VudCA9IGNvdW50KCAkYV9tb2JpbGVfYnJvd3NlciApOwogIAlmb3IgKCAkayA9IDA7ICRrIDwgJGtfY291bnQ7ICRrKysgKQogIAl7CiAgCQlpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJGFfbW9iaWxlX2Jyb3dzZXJbJGtdICkgKQogIAkJewogIAkJCSRtb2JpbGVfYnJvd3NlciA9ICRhX21vYmlsZV9icm93c2VyWyRrXTsKICAJCQkvLyB0aGlzIG1heSBvciBtYXkgbm90IHdvcmssIGhpZ2hseSB1bnJlbGlhYmxlIGJlY2F1c2UgbW9iaWxlIHVhIHN0cmluZ3MgYXJlIHJhbmRvbQogIAkJCSRtb2JpbGVfYnJvd3Nlcl9udW1iZXIgPSAkdGhpcy0+Z2V0X2l0ZW1fdmVyc2lvbiggJG1vYmlsZV9icm93c2VyICk7CiAgCQkJYnJlYWs7CiAgCQl9CiAgCX0KICAJJGtfY291bnQgPSBjb3VudCggJGFfbW9iaWxlX2RldmljZSApOwogIAlmb3IgKCAkayA9IDA7ICRrIDwgJGtfY291bnQ7ICRrKysgKQogIAl7CiAgCQlpZiAoIHN0cnN0ciggJHB2X2Jyb3dzZXJfdXNlcl9hZ2VudCwgJGFfbW9iaWxlX2RldmljZVska10gKSApCiAgCQl7CiAgCQkJJG1vYmlsZV9kZXZpY2UgPSB0cmltICggJGFfbW9iaWxlX2RldmljZVska10sICctXycgKTsgLy8gYnV0IG5vdCBzcGFjZSB0cmltcyB5ZXQKICAJCQlpZiAoICRtb2JpbGVfZGV2aWNlID09ICdibGFja2JlcnJ5JyApCiAgCQkJewogIAkJCQkkdGhpcy0+Z2V0X3NldF9jb3VudCggJ3NldCcsIDAgKTsKICAJCQl9CiAgCQkJJG1vYmlsZV9kZXZpY2VfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICRtb2JpbGVfZGV2aWNlICk7CiAgCQkJJG1vYmlsZV9kZXZpY2UgPSB0cmltKCAkbW9iaWxlX2RldmljZSApOyAvLyBzb21lIG9mIHRoZSBpZCBzZWFyY2ggc3RyaW5ncyBoYXZlIHdoaXRlIHNwYWNlCiAgCQkJYnJlYWs7CiAgCQl9CiAgCX0KICAJJGtfY291bnQgPSBjb3VudCggJGFfbW9iaWxlX29zICk7CiAgCWZvciAoICRrID0gMDsgJGsgPCAka19jb3VudDsgJGsrKyApCiAgCXsKICAJCWlmICggc3Ryc3RyKCAkcHZfYnJvd3Nlcl91c2VyX2FnZW50LCAkYV9tb2JpbGVfb3NbJGtdICkgKQogIAkJewogIAkJCSRtb2JpbGVfb3MgPSAkYV9tb2JpbGVfb3NbJGtdOwogIAkJCS8vIHRoaXMgbWF5IG9yIG1heSBub3Qgd29yaywgaGlnaGx5IHVucmVsaWFibGUKICAJCQkkbW9iaWxlX29zX251bWJlciA9IHN0cl9yZXBsYWNlKCAnXycsICcuJywgJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICRtb2JpbGVfb3MgKSApOwogIAkJCWJyZWFrOwogIAkJfQogIAl9CiAgCSRrX2NvdW50ID0gY291bnQoICRhX21vYmlsZV9zZXJ2ZXIgKTsKICAJZm9yICggJGsgPSAwOyAkayA8ICRrX2NvdW50OyAkaysrICkKICAJewogIAkJaWYgKCBzdHJzdHIoICRwdl9icm93c2VyX3VzZXJfYWdlbnQsICRhX21vYmlsZV9zZXJ2ZXJbJGtdICkgKQogIAkJewogIAkJCSRtb2JpbGVfc2VydmVyID0gJGFfbW9iaWxlX3NlcnZlclska107CiAgCQkJLy8gdGhpcyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBoaWdobHkgdW5yZWxpYWJsZQogIAkJCSRtb2JpbGVfc2VydmVyX251bWJlciA9ICR0aGlzLT5nZXRfaXRlbV92ZXJzaW9uKCAkbW9iaWxlX3NlcnZlciApOwogIAkJCWJyZWFrOwogIAkJfQogIAl9CiAgCS8vIGp1c3QgZm9yIGNhc2VzIHdoZXJlIHdlIGtub3cgaXQncyBhIG1vYmlsZSBkZXZpY2UgYWxyZWFkeQogIAlpZiAoICEkbW9iaWxlX29zICYmICggJG1vYmlsZV9icm93c2VyIHx8ICRtb2JpbGVfZGV2aWNlIHx8ICRtb2JpbGVfc2VydmVyICkgJiYgc3Ryc3RyKCAkcHZfYnJvd3Nlcl91c2VyX2FnZW50LCAnbGludXgnICkgKQogIAl7CiAgCQkkbW9iaWxlX29zID0gJ2xpbnV4JzsKICAJCSRtb2JpbGVfb3NfbnVtYmVyID0gJHRoaXMtPmdldF9pdGVtX3ZlcnNpb24oICdsaW51eCcgKTsKICAJfQoKICAJJGFfbW9iaWxlX2RhdGEgPSBbICRtb2JpbGVfZGV2aWNlLCAkbW9iaWxlX2Jyb3dzZXIsICRtb2JpbGVfYnJvd3Nlcl9udW1iZXIsICRtb2JpbGVfb3MsICRtb2JpbGVfb3NfbnVtYmVyLCAkbW9iaWxlX3NlcnZlciwgJG1vYmlsZV9zZXJ2ZXJfbnVtYmVyLCAkbW9iaWxlX2RldmljZV9udW1iZXIgXTsKICAJcmV0dXJuICRhX21vYmlsZV9kYXRhOwogIH0KfQo=',
  'ofw/base/OCache.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0NhY2hlewogIHByaXZhdGUgJGNhY2hlX2ZpbGUgPSBudWxsOwogIHByaXZhdGUgJHJhdyAgICAgICAgPSBmYWxzZTsKICBwcml2YXRlICRjYWNoZV9kYXRlID0gbnVsbDsKICBwcml2YXRlICRjYWNoZV9kYXRhID0gbnVsbDsKICBwcml2YXRlICRzdGF0dXMgICAgID0gJ29rJzsKCiAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNhY2hlLCAkcmF3PWZhbHNlKXsKICAgIGdsb2JhbCAkYzsKICAgICR0aGlzLT5jYWNoZV9maWxlID0gJGMtPmdldERpcignYXBwX2NhY2hlJykuJGNhY2hlLicuanNvbic7CiAgICBpZiAoIWZpbGVfZXhpc3RzKCR0aGlzLT5jYWNoZV9maWxlKSl7CiAgICAgICR0aGlzLT5zdGF0dXMgPSAnZXJyb3JfZmlsZSc7CiAgICB9CgogICAgJGRhdGEgPSBudWxsOwogICAgaWYgKCR0aGlzLT5zdGF0dXM9PSdvaycpewogICAgICAkZGF0YSA9IGpzb25fZGVjb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCR0aGlzLT5jYWNoZV9maWxlKSwgdHJ1ZSk7CiAgICAgIGlmICghJGRhdGEpewogICAgICAgICR0aGlzLT5zdGF0dXMgPSAnZXJyb3JfZGF0YSc7CiAgICAgIH0KICAgIH0KCiAgICAkdGhpcy0+cmF3ID0gJHJhdzsKICAgIGlmICgkdGhpcy0+cmF3KXsKICAgICAgJHRoaXMtPmNhY2hlX2RhdGEgPSAkZGF0YTsKICAgIH0KICAgIGVsc2V7CiAgICAgIGlmICgkdGhpcy0+c3RhdHVzPT0nb2snKXsKICAgICAgICAkdGhpcy0+Y2FjaGVfZGF0ZSA9ICRkYXRhWydkYXRlJ107CiAgICAgICAgJGNoZWNrID0gbWt0aW1lKCk7CiAgICAgICAgaWYgKCgkdGhpcy0+Y2FjaGVfZGF0ZSsoNjAqNjAqMjQqNykpPCRjaGVjayl7CiAgICAgICAgICAkdGhpcy0+c3RhdHVzID0gJ2Vycm9yX2RhdGUnOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCR0aGlzLT5zdGF0dXM9PSdvaycpewogICAgICAgICR0aGlzLT5jYWNoZV9kYXRhID0gJGRhdGFbJ2RhdGEnXTsKICAgICAgfQogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1cygpewogICAgcmV0dXJuICR0aGlzLT5zdGF0dXM7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc3RhcnQoKXsKICAgICR0aGlzLT5zdGF0dXMgPSAnb2snOwogICAgJHRoaXMtPmNhY2hlX2RhdGUgPSBta3RpbWUoKTsKICAgICR0aGlzLT5jYWNoZV9kYXRhID0gW107CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gZ2V0KCRrZXkpewogICAgaWYgKCR0aGlzLT5zdGF0dXMhPSdvaycpewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGtleSwgJHRoaXMtPmNhY2hlX2RhdGEpKXsKICAgICAgcmV0dXJuICR0aGlzLT5jYWNoZV9kYXRhWyRrZXldOwogICAgfQogICAgZWxzZXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldCgka2V5LCAkdmFsdWUpewogICAgJHRoaXMtPmNhY2hlX2RhdGFbJGtleV0gPSAkdmFsdWU7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2F2ZSgpewogICAgJHRoaXMtPmNhY2hlX2RhdGUgPSBta3RpbWUoKTsKICAgICRkYXRhID0gWydkYXRlJyA9PiAkdGhpcy0+Y2FjaGVfZGF0ZSwgJ2RhdGEnID0+ICR0aGlzLT5jYWNoZV9kYXRhXTsKCiAgICBmaWxlX3B1dF9jb250ZW50cygkdGhpcy0+Y2FjaGVfZmlsZSwganNvbl9lbmNvZGUoJGRhdGEpKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKXsKICAgIGlmICgkdGhpcy0+c3RhdHVzIT0nb2snKXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmIChmaWxlX2V4aXN0cygkdGhpcy0+Y2FjaGVfZmlsZSkpewogICAgICB1bmxpbmsoJHRoaXMtPmNhY2hlX2ZpbGUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQp9Cg==',
  'ofw/base/OConfig.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0NvbmZpZ3sKICBwcml2YXRlICRkZWJ1Z19tb2RlICAgICAgICAgPSBmYWxzZTsKICBwcml2YXRlICRhbGxvd19jcm9zc19vcmlnaW4gPSB0cnVlOwoKICBwcml2YXRlICRkZWZhdWx0X21vZHVsZXMgPSBbCiAgICAnYnJvd3NlcicgICAgPT4gZmFsc2UsCiAgICAnZW1haWwnICAgICAgPT4gZmFsc2UsCiAgICAnZW1haWxfc210cCcgPT4gZmFsc2UsCiAgICAnZnRwJyAgICAgICAgPT4gZmFsc2UsCiAgICAnaW1hZ2UnICAgICAgPT4gZmFsc2UsCiAgICAncGRmJyAgICAgICAgPT4gZmFsc2UsCiAgICAndHJhbnNsYXRlJyAgPT4gZmFsc2UKICBdOwogIHByaXZhdGUgJHBhY2thZ2VzID0gW107CgogIHByaXZhdGUgJGRpcnMgPSBbXTsKICBwcml2YXRlICRkYiA9IFsKICAgICd1c2VyJyA9PiAnJywKICAgICdwYXNzJyA9PiAnJywKICAgICdob3N0JyA9PiAnJywKICAgICduYW1lJyA9PiAnJwogIF07CiAgcHJpdmF0ZSAkdXJscyA9IFsKICAgICdiYXNlJyAgID0+ICcnLAogICAgJ2ZvbGRlcicgPT4gJycsCiAgICAnYXBpJyAgICA9PiAnJwogIF07CgogIHByaXZhdGUgJGJhY2tlbmQgPSBbCiAgICAndXNlcicgPT4gJycsCiAgICAncGFzcycgPT4gJycKICBdOwoKICBwcml2YXRlICRzbXRwID0gWwogICAgJ2hvc3QnICAgPT4gJycsCiAgICAncG9ydCcgICA9PiBudWxsLAogICAgJ3NlY3VyZScgPT4gJ3RscycsCiAgICAndXNlcicgICA9PiAnJywKICAgICdwYXNzJyAgID0+ICcnCiAgXTsKCiAgcHJpdmF0ZSAkY2xvc2VkID0gZmFsc2U7CgogIHByaXZhdGUgJGNvb2tpZV9wcmVmaXggPSAnJzsKICBwcml2YXRlICRjb29raWVfdXJsICAgID0gJyc7CgogIHByaXZhdGUgJHVybF9saXN0ID0gbnVsbDsKCiAgcHJpdmF0ZSAkZXJyb3JfcGFnZXMgID0gWwogICAgJzQwMycgPT4gbnVsbCwKICAgICc0MDQnID0+IG51bGwsCiAgICAnNTAwJyA9PiBudWxsCiAgXTsKCiAgcHJpdmF0ZSAkY3NzX2xpc3QgICAgICA9IFtdOwogIHByaXZhdGUgJGV4dF9jc3NfbGlzdCAgPSBbXTsKICBwcml2YXRlICRqc19saXN0ICAgICAgID0gW107CiAgcHJpdmF0ZSAkZXh0X2pzX2xpc3QgICA9IFtdOwogIHByaXZhdGUgJGRlZmF1bHRfdGl0bGUgPSAnJzsKICBwcml2YXRlICRkZWZhdWx0X2xhbmcgID0gJ2VzJzsKICBwcml2YXRlICRhZG1pbl9lbWFpbCAgID0gJyc7CiAgcHJpdmF0ZSAkbWFpbGluZ19mcm9tICA9ICcnOwogIHByaXZhdGUgJGxhbmcgICAgICAgICAgPSAnJzsKICBwcml2YXRlICRpbWFnZV90eXBlcyAgID0gW107CgogIHByaXZhdGUgJGxpYnMgPSBbXTsKCiAgcHJpdmF0ZSAkZXh0cmFzID0gW107CgogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRiZCl7CiAgICAkdGhpcy0+c2V0QmFzZURpcigkYmQpOwogICAgJGpzb25fZmlsZSA9ICR0aGlzLT5nZXREaXIoJ2FwcF9jb25maWcnKS4nY29uZmlnLmpzb24nOwogICAgaWYgKCFmaWxlX2V4aXN0cygkanNvbl9maWxlKSl7CiAgICAgIGVjaG8gIkVSUk9SOiBjb25maWcuanNvbiBmaWxlIG5vdCBmb3VuZC5cbiI7CiAgICAgIGV4aXQoKTsKICAgIH0KICAgICRjb25maWcgPSBqc29uX2RlY29kZSggZmlsZV9nZXRfY29udGVudHMoJGpzb25fZmlsZSksIHRydWUgKTsKICAgIGlmICghJGNvbmZpZyl7CiAgICAgIGVjaG8gIkVSUk9SOiBjb25maWcuanNvbiBmaWxlIGlzIG1hbGZvcm1lZC5cbiI7CiAgICAgIGV4aXQoKTsKICAgIH0KICAgICR0aGlzLT5sb2FkQ29uZmlnKCRjb25maWcpOwogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2Vudmlyb25tZW50JywgJGNvbmZpZykpewogICAgICAkanNvbl9lbnZfZmlsZSA9ICR0aGlzLT5nZXREaXIoJ2FwcF9jb25maWcnKS4nY29uZmlnLicuJGNvbmZpZ1snZW52aXJvbm1lbnQnXS4nLmpzb24nOwogICAgICBpZiAoIWZpbGVfZXhpc3RzKCRqc29uX2Vudl9maWxlKSl7CiAgICAgICAgZWNobyAiRVJST1I6IGNvbmZpZy4iLiRjb25maWdbJ2Vudmlyb25tZW50J10uIi5qc29uIGZpbGUgbm90IGZvdW5kLlxuIjsKICAgICAgICBleGl0KCk7CiAgICAgIH0KICAgICAgJGNvbmZpZ19lbnYgPSBqc29uX2RlY29kZSggZmlsZV9nZXRfY29udGVudHMoJGpzb25fZW52X2ZpbGUpLCB0cnVlICk7CiAgICAgIGlmICghJGNvbmZpZ19lbnYpewogICAgICAgIGVjaG8gIkVSUk9SOiBjb25maWcuIi4kY29uZmlnWydlbnZpcm9ubWVudCddLiIuanNvbiBmaWxlIGlzIG1hbGZvcm1lZC5cbiI7CiAgICAgICAgZXhpdCgpOwogICAgICB9CiAgICAgICR0aGlzLT5sb2FkQ29uZmlnKCRjb25maWdfZW52KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGxvYWRDb25maWcoJGNvbmZpZyl7CiAgCWlmIChhcnJheV9rZXlfZXhpc3RzKCdiYXNlX21vZHVsZXMnLCAkY29uZmlnKSl7CiAgICAgICR0aGlzLT5zZXREZWZhdWx0TW9kdWxlcygkY29uZmlnWydiYXNlX21vZHVsZXMnXSk7CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygncGFja2FnZXMnLCAkY29uZmlnKSl7CiAgICAgICR0aGlzLT5zZXRQYWNrYWdlcygkY29uZmlnWydwYWNrYWdlcyddKTsKICAgIH0KICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdkYicsICRjb25maWcpKXsKICAgICAgJGRiX2ZpZWxkcyA9IFsnaG9zdCcsICd1c2VyJywgJ3Bhc3MnLCAnbmFtZSddOwogICAgICBmb3JlYWNoICgkZGJfZmllbGRzIGFzICRkYl9maWVsZCl7CiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGRiX2ZpZWxkLCAkY29uZmlnWydkYiddKSl7CiAgICAgICAgICAkdGhpcy0+c2V0REIoJGRiX2ZpZWxkLCAkY29uZmlnWydkYiddWyRkYl9maWVsZF0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2Nvb2tpZXMnLCAkY29uZmlnKSl7CiAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdwcmVmaXgnLCAkY29uZmlnWydjb29raWVzJ10pKXsKICAgICAgICAkdGhpcy0+c2V0Q29va2llUHJlZml4KCRjb25maWdbJ2Nvb2tpZXMnXVsncHJlZml4J10pOwogICAgICB9CiAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCd1cmwnLCAkY29uZmlnWydjb29raWVzJ10pKXsKICAgICAgICAkdGhpcy0+c2V0Q29va2llVXJsKCRjb25maWdbJ2Nvb2tpZXMnXVsndXJsJ10pOwogICAgICB9CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnZGVidWdfbW9kZScsICRjb25maWcpICYmICRjb25maWdbJ2RlYnVnX21vZGUnXT09PXRydWUpewogICAgICAkdGhpcy0+c2V0RGVidWdNb2RlKHRydWUpOwogICAgfQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2Jhc2VfdXJsJywgJGNvbmZpZykpewogICAgICAkdGhpcy0+c2V0QmFzZVVybCgkY29uZmlnWydiYXNlX3VybCddKTsKICAgIH0KICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdhZG1pbl9lbWFpbCcsICRjb25maWcpKXsKICAgICAgJHRoaXMtPnNldEFkbWluRW1haWwoJGNvbmZpZ1snYWRtaW5fZW1haWwnXSk7CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnZGVmYXVsdF90aXRsZScsICRjb25maWcpKXsKICAgICAgJHRoaXMtPnNldERlZmF1bHRUaXRsZSgkY29uZmlnWydkZWZhdWx0X3RpdGxlJ10pOwogICAgfQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2xhbmcnLCAkY29uZmlnKSl7CiAgICAgICR0aGlzLT5zZXRMYW5nKCRjb25maWdbJ2xhbmcnXSk7CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnc210cCcsICRjb25maWcpKXsKICAgICAgJHNtdHBfZmllbGRzID0gWydob3N0JywgJ3BvcnQnLCAnc2VjdXJlJywgJ3VzZXInLCAncGFzcyddOwogICAgICBmb3JlYWNoICgkc210cF9maWVsZHMgYXMgJHNtdHBfZmllbGQpewogICAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRzbXRwX2ZpZWxkLCAkY29uZmlnWydzbXRwJ10pKXsKICAgICAgICAgICR0aGlzLT5zZXRTTVRQKCRzbXRwX2ZpZWxkLCAkY29uZmlnWydzbXRwJ11bJHNtdHBfZmllbGRdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdlcnJvcl9wYWdlcycsICRjb25maWcpKXsKICAgICAgJGVycm9yX2ZpZWxkcyA9IFsnNDA0JywgJzQwMycsICc1MDAnXTsKICAgICAgZm9yZWFjaCAoJGVycm9yX2ZpZWxkcyBhcyAkZXJyb3JfZmllbGQpewogICAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRlcnJvcl9maWVsZCwgJGNvbmZpZ1snZXJyb3JfcGFnZXMnXSkpewogICAgICAgICAgJHRoaXMtPnNldEVycm9yUGFnZSgkZXJyb3JfZmllbGQsICRjb25maWdbJ2Vycm9yX3BhZ2VzJ11bJGVycm9yX2ZpZWxkXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnY3NzJywgJGNvbmZpZykpewogICAgICAkdGhpcy0+c2V0Q3NzTGlzdCgkY29uZmlnWydjc3MnXSk7CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnZXh0X2NzcycsICRjb25maWcpKXsKICAgICAgJHRoaXMtPnNldEV4dENzc0xpc3QoJGNvbmZpZ1snZXh0X2NzcyddKTsKICAgIH0KICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdqcycsICRjb25maWcpKXsKICAgICAgJHRoaXMtPnNldEpzTGlzdCgkY29uZmlnWydqcyddKTsKICAgIH0KICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCdleHRfanMnLCAkY29uZmlnKSl7CiAgICAgICR0aGlzLT5zZXRFeHRKc0xpc3QoJGNvbmZpZ1snZXh0X2pzJ10pOwogICAgfQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2V4dHJhJywgJGNvbmZpZykpewogICAgICBmb3JlYWNoICgkY29uZmlnWydleHRyYSddIGFzICRrZXkgPT4gJHZhbHVlKXsKICAgICAgICAkdGhpcy0+c2V0RXh0cmEoJGtleSwgJHZhbHVlKTsKICAgICAgfQogICAgfQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2RpcicsICRjb25maWcpKXsKICAgICAgJGRpcl9saXN0ID0gJHRoaXMtPmdldERpcigpOwogICAgICAkZGlyX2Zyb20gPSBbXTsKICAgICAgJGRpcl90byA9IFtdOwogICAgICBmb3JlYWNoICgkZGlyX2xpc3QgYXMgJGtleSA9PiAkdmFsdWUpewogICAgICAgIGFycmF5X3B1c2goJGRpcl9mcm9tLCAne3snLiRrZXkuJ319Jyk7CiAgICAgICAgYXJyYXlfcHVzaCgkZGlyX3RvLCAkdmFsdWUpOwogICAgICB9CiAgICAgIGZvcmVhY2ggKCRjb25maWdbJ2RpciddIGFzICRrZXkgPT4gJHZhbHVlKXsKICAgICAgICAkdGhpcy0+c2V0RGlyKCRrZXksIHN0cl9pcmVwbGFjZSgkZGlyX2Zyb20sICRkaXJfdG8sICR2YWx1ZSkpOwogICAgICB9CiAgICB9CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnbGlicycsICRjb25maWcpKXsKICAgICAgJHRoaXMtPnNldExpYnMoJGNvbmZpZ1snbGlicyddKTsKICAgIH0KICB9CgogIC8vIERlYnVnIG1vZGUKICBmdW5jdGlvbiBzZXREZWJ1Z01vZGUoJGRtKXsKICAgICR0aGlzLT5kZWJ1Z19tb2RlID0gJGRtOwogIH0KICBmdW5jdGlvbiBnZXREZWJ1Z01vZGUoKXsKICAgIHJldHVybiAkdGhpcy0+ZGVidWdfbW9kZTsKICB9CgogIC8vIEFsbG93IENyb3NzLU9yaWdpbgogIHB1YmxpYyBmdW5jdGlvbiBzZXRBbGxvd0Nyb3NzT3JpZ2luKCRhY28pewogICAgJHRoaXMtPmFsbG93X2Nyb3NzX29yaWdpbiA9ICRhY287CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxvd0Nyb3NzT3JpZ2luKCl7CiAgICByZXR1cm4gJHRoaXMtPmFsbG93X2Nyb3NzX29yaWdpbjsKICB9CgogIC8vIERlZmF1bHQgbW9kdWxlcwogIHB1YmxpYyBmdW5jdGlvbiBzZXREZWZhdWx0TW9kdWxlcygkZG0pewogICAgJHRoaXMtPmRlZmF1bHRfbW9kdWxlcyA9ICRkbTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldERlZmF1bHRNb2R1bGVzKCl7CiAgICByZXR1cm4gJHRoaXMtPmRlZmF1bHRfbW9kdWxlczsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBnZXREZWZhdWx0TW9kdWxlKCRtKXsKICAgICRiYXNlX21vZHVsZXMgPSAkdGhpcy0+Z2V0RGVmYXVsdE1vZHVsZXMoKTsKICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRtLCAkYmFzZV9tb2R1bGVzKSAmJiAkYmFzZV9tb2R1bGVzWyRtXT09PXRydWUpewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8vIFBhY2thZ2VzCiAgcHVibGljIGZ1bmN0aW9uIHNldFBhY2thZ2VzKCRwKXsKICAgICR0aGlzLT5wYWNrYWdlcyA9ICRwOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFja2FnZXMoKXsKICAgIHJldHVybiAkdGhpcy0+cGFja2FnZXM7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFja2FnZSgkcCl7CiAgICAkcGFja2FnZXMgPSAkdGhpcy0+Z2V0UGFja2FnZXMoKTsKICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRwLCRwYWNrYWdlcykgJiYgJHBhY2thZ2VzWyRwXT09PXRydWUpewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8vIERpcnMKICBmdW5jdGlvbiBzZXREaXIoJGRpciwkdmFsdWUpewogICAgJHRoaXMtPmRpcnNbJGRpcl0gPSAkdmFsdWU7CiAgfQogIGZ1bmN0aW9uIGdldERpcigkZGlyPW51bGwpewogICAgaWYgKGlzX251bGwoJGRpcikpewogICAgICByZXR1cm4gJHRoaXMtPmRpcnM7CiAgICB9CiAgICByZXR1cm4gYXJyYXlfa2V5X2V4aXN0cygkZGlyLCAkdGhpcy0+ZGlycykgPyAkdGhpcy0+ZGlyc1skZGlyXSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBzZXRCYXNlRGlyKCRiZCl7CiAgICAkdGhpcy0+c2V0RGlyKCdiYXNlJywgICAgICAgICAgICRiZCk7CiAgICAkdGhpcy0+c2V0RGlyKCdhcHAnLCAgICAgICAgICAgICRiZC4iYXBwLyIpOwogICAgJHRoaXMtPnNldERpcignYXBwX2NhY2hlJywgICAgICAkYmQuJ2FwcC9jYWNoZS8nKTsKICAgICR0aGlzLT5zZXREaXIoJ2FwcF9jb25maWcnLCAgICAgJGJkLidhcHAvY29uZmlnLycpOwogICAgJHRoaXMtPnNldERpcignYXBwX2NvbnRyb2xsZXInLCAkYmQuJ2FwcC9jb250cm9sbGVyLycpOwogICAgJHRoaXMtPnNldERpcignYXBwX2ZpbHRlcicsICAgICAkYmQuJ2FwcC9maWx0ZXIvJyk7CiAgICAkdGhpcy0+c2V0RGlyKCdhcHBfbW9kZWwnLCAgICAgICRiZC4nYXBwL21vZGVsLycpOwogICAgJHRoaXMtPnNldERpcignYXBwX3NlcnZpY2UnLCAgICAkYmQuJ2FwcC9zZXJ2aWNlLycpOwogICAgJHRoaXMtPnNldERpcignYXBwX3RlbXBsYXRlJywgICAkYmQuJ2FwcC90ZW1wbGF0ZS8nKTsKICAgICR0aGlzLT5zZXREaXIoJ2FwcF90YXNrJywgICAgICAgJGJkLidhcHAvdGFzay8nKTsKICAgICR0aGlzLT5zZXREaXIoJ29md19iYXNlJywgICAgICAgJGJkLidvZncvYmFzZS8nKTsKICAgICR0aGlzLT5zZXREaXIoJ29md19saWInLCAgICAgICAgJGJkLidvZncvbGliLycpOwogICAgJHRoaXMtPnNldERpcignb2Z3X3BhY2thZ2VzJywgICAkYmQuJ29mdy9wYWNrYWdlcy8nKTsKICAgICR0aGlzLT5zZXREaXIoJ29md190YXNrJywgICAgICAgJGJkLidvZncvdGFzay8nKTsKICAgICR0aGlzLT5zZXREaXIoJ29md19zcWwnLCAgICAgICAgJGJkLidvZncvc3FsLycpOwogICAgJHRoaXMtPnNldERpcignb2Z3X3RtcCcsICAgICAgICAkYmQuJ29mdy90bXAvJyk7CiAgICAkdGhpcy0+c2V0RGlyKCdsb2dzJywgICAgICAgICAgICRiZC4nbG9ncy8nKTsKICAgICR0aGlzLT5zZXREaXIoJ2RlYnVnX2xvZycsICAgICAgJGJkLidsb2dzL2RlYnVnLmxvZycpOwogICAgJHRoaXMtPnNldERpcignd2ViJywgICAgICAgICAgICAkYmQuJ3dlYi8nKTsKICB9CgogIC8vIERhdGEgYmFzZQogIHB1YmxpYyBmdW5jdGlvbiBzZXREQigka2V5LCAkdmFsdWUpewogICAgJHRoaXMtPmRiWyRrZXldID0gJHZhbHVlOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0REIoJGtleSl7CiAgICByZXR1cm4gYXJyYXlfa2V5X2V4aXN0cygka2V5LCAkdGhpcy0+ZGIpID8gJHRoaXMtPmRiWyRrZXldIDogbnVsbDsKICB9CgogIC8vIFVybHMKICBmdW5jdGlvbiBzZXRVcmwoJGtleSwgJHVybCl7CiAgICAkdGhpcy0+dXJsc1ska2V5XSA9ICR1cmw7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRVcmwoJGtleSl7CiAgICByZXR1cm4gYXJyYXlfa2V5X2V4aXN0cygka2V5LCAkdGhpcy0+dXJscykgPyAkdGhpcy0+dXJsc1ska2V5XSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBzZXRCYXNlVXJsKCRidSl7CiAgICAkdGhpcy0+c2V0VXJsKCdiYXNlJywgJGJ1KTsKICAgICR0aGlzLT5zZXRVcmwoJ2FwaScsICAkYnUuJHRoaXMtPmdldFVybCgnZm9sZGVyJykuJ2FwaS8nKTsKICB9CgogIC8vIEJhY2tlbmQKICBmdW5jdGlvbiBzZXRCYWNrZW5kKCRrZXksICR2YWx1ZSl7CiAgICAkdGhpcy0+YmFja2VuZFska2V5XSA9ICR2YWx1ZTsKICB9CiAgZnVuY3Rpb24gZ2V0QmFja2VuZCgka2V5KXsKICAgIHJldHVybiBhcnJheV9rZXlfZXhpc3RzKCRrZXksICR0aGlzLT5iYWNrZW5kKSA/ICR0aGlzLT5iYWNrZW5kWyRrZXldIDogbnVsbDsKICB9CgogIC8vIFNNVFAKICBmdW5jdGlvbiBzZXRTTVRQKCRrZXksICR2YWx1ZSl7CiAgICAkdGhpcy0+c210cFska2V5XSA9ICR2YWx1ZTsKICB9CiAgZnVuY3Rpb24gZ2V0U01UUCgka2V5PW51bGwpewogICAgaWYgKGlzX251bGwoJGtleSkpewogICAgICByZXR1cm4gJHRoaXMtPnNtdHA7CiAgICB9CiAgICByZXR1cm4gYXJyYXlfa2V5X2V4aXN0cygka2V5LCAkdGhpcy0+c210cCkgPyAkdGhpcy0+c210cFska2V5XSA6IG51bGw7CiAgfQoKICAvLyBFeHRyYXMKICBmdW5jdGlvbiBzZXRDbG9zZWQoJGMpewogICAgJHRoaXMtPmNsb3NlZCA9ICRjOwogIH0KICBmdW5jdGlvbiBnZXRDbG9zZWQoKXsKICAgIHJldHVybiAkdGhpcy0+Y2xvc2VkOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldEltYWdlVHlwZXMoJGl0KXsKICAgICR0aGlzLT5pbWFnZV90eXBlcyA9ICRpdDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEltYWdlVHlwZXMoKXsKICAgIHJldHVybiAkdGhpcy0+aW1hZ2VfdHlwZXM7CiAgfQoKICAvLyBDb29raWVzCiAgcHVibGljIGZ1bmN0aW9uIHNldENvb2tpZVByZWZpeCgkY3ApewogICAgJHRoaXMtPmNvb2tpZV9wcmVmaXggPSAkY3A7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRDb29raWVQcmVmaXgoKXsKICAgIHJldHVybiAkdGhpcy0+Y29va2llX3ByZWZpeDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRDb29raWVVcmwoJGN1KXsKICAgICR0aGlzLT5jb29raWVfdXJsID0gJGN1OwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29va2llVXJsKCl7CiAgICByZXR1cm4gJHRoaXMtPmNvb2tpZV91cmw7CiAgfQoKICAvLyBVcmwgY2FjaGUKICBwdWJsaWMgZnVuY3Rpb24gc2V0VXJsTGlzdCgkdSl7CiAgICAkdGhpcy0+dXJsX2xpc3QgPSAkdTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFVybExpc3QoKXsKICAgIHJldHVybiAkdGhpcy0+dXJsX2xpc3Q7CiAgfQoKICAvLyBFcnJvciBwYWdlcwogIHB1YmxpYyBmdW5jdGlvbiBzZXRFcnJvclBhZ2UoJG51bSwgJHVybCl7CiAgICAkdGhpcy0+ZXJyb3JfcGFnZXNbJG51bV0gPSAkdXJsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RXJyb3JQYWdlKCRudW0pewogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJG51bSwgJHRoaXMtPmVycm9yX3BhZ2VzKSl7CiAgICAgIHJldHVybiAkdGhpcy0+ZXJyb3JfcGFnZXNbJG51bV07CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8vIFRlbXBsYXRlcwogIHB1YmxpYyBmdW5jdGlvbiBzZXRDc3NMaXN0KCRjbCl7CiAgICAkdGhpcy0+Y3NzX2xpc3QgPSAkY2w7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRDc3NMaXN0KCl7CiAgICByZXR1cm4gJHRoaXMtPmNzc19saXN0OwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZENzc0xpc3QoJGl0ZW0pewogICAgYXJyYXlfcHVzaCgkdGhpcy0+Y3NzX2xpc3QsICRpdGVtKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRFeHRDc3NMaXN0KCRlY2wpewogICAgJHRoaXMtPmV4dF9jc3NfbGlzdCA9ICRlY2w7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRFeHRDc3NMaXN0KCl7CiAgICByZXR1cm4gJHRoaXMtPmV4dF9jc3NfbGlzdDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRFeHRDc3NMaXN0KCRpdGVtKXsKICAgIGFycmF5X3B1c2goJHRoaXMtPmV4dF9jc3NfbGlzdCwgJGl0ZW0pOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldEpzTGlzdCgkamwpewogICAgJHRoaXMtPmpzX2xpc3QgPSAkamw7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRKc0xpc3QoKXsKICAgIHJldHVybiAkdGhpcy0+anNfbGlzdDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRKc0xpc3QoJGl0ZW0pewogICAgYXJyYXlfcHVzaCgkdGhpcy0+anNfbGlzdCwgJGl0ZW0pOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldEV4dEpzTGlzdCgkZWpsKXsKICAgICR0aGlzLT5leHRfanNfbGlzdCA9ICRlamw7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRFeHRKc0xpc3QoKXsKICAgIHJldHVybiAkdGhpcy0+ZXh0X2pzX2xpc3Q7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gYWRkRXh0SnNMaXN0KCRpdGVtKXsKICAgIGFycmF5X3B1c2goJHRoaXMtPmV4dF9qc19saXN0LCAkaXRlbSk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0RGVmYXVsdFRpdGxlKCRkdCl7CiAgICAkdGhpcy0+ZGVmYXVsdF90aXRsZSA9ICRkdDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldERlZmF1bHRUaXRsZSgpewogICAgcmV0dXJuICR0aGlzLT5kZWZhdWx0X3RpdGxlOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRMYW5nKCRkbCl7CiAgICAkdGhpcy0+ZGVmYXVsdF9sYW5nID0gJGRsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVmYXVsdExhbmcoKXsKICAgIHJldHVybiAkdGhpcy0+ZGVmYXVsdF9sYW5nOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldEFkbWluRW1haWwoJGFlKXsKICAgICR0aGlzLT5hZG1pbl9lbWFpbCA9ICRhZTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEFkbWluRW1haWwoKXsKICAgIHJldHVybiAkdGhpcy0+YWRtaW5fZW1haWw7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TWFpbGluZ0Zyb20oJG1mKXsKICAgICR0aGlzLT5tYWlsaW5nX2Zyb20gPSAkbWY7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRNYWlsaW5nRnJvbSgpewogICAgcmV0dXJuICR0aGlzLT5tYWlsaW5nX2Zyb207CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TGFuZygkbCl7CiAgICAkdGhpcy0+bGFuZz0gJGw7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRMYW5nKCl7CiAgICByZXR1cm4gJHRoaXMtPmxhbmc7CiAgfQoKICAvLyBMaWJzCiAgcHVibGljIGZ1bmN0aW9uIHNldExpYnMoJGwpewogICAgJHRoaXMtPmxpYnMgPSAkbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldExpYnMoKXsKICAgIHJldHVybiAkdGhpcy0+bGliczsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRMaWIoJGl0ZW0pewogICAgYXJyYXlfcHVzaCgkdGhpcy0+bGlicywgJGl0ZW0pOwogIH0KCiAgLy8gRXh0cmFzCiAgZnVuY3Rpb24gc2V0RXh0cmEoJGtleSwgJHZhbHVlKXsKICAgICR0aGlzLT5leHRyYXNbJGtleV0gPSAkdmFsdWU7CiAgfQogIGZ1bmN0aW9uIGdldEV4dHJhKCRrZXkpewogICAgcmV0dXJuIGFycmF5X2tleV9leGlzdHMoJGtleSwgJHRoaXMtPmV4dHJhcykgPyAkdGhpcy0+ZXh0cmFzWyRrZXldIDogbnVsbDsKICB9Cn0K',
  'ofw/base/OController.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0NvbnRyb2xsZXJ7CiAgcHJvdGVjdGVkICRjb25maWcgICA9IG51bGw7Cglwcm90ZWN0ZWQgJGRiICAgICAgID0gbnVsbDsKCXByb3RlY3RlZCAkdGVtcGxhdGUgPSBudWxsOwoJcHJvdGVjdGVkICRsb2cgICAgICA9IG51bGw7Cglwcm90ZWN0ZWQgJHNlc3Npb24gID0gbnVsbDsKCXByb3RlY3RlZCAkY29va2llICAgPSBudWxsOwoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBsb2FkQ29udHJvbGxlcigkdXJsX3Jlc3VsdCl7CiAgCWdsb2JhbCAkYzsKCiAgCSR0aGlzLT5jb25maWcgICA9ICRjOwoJCSR0aGlzLT5kYiAgICAgICA9IG5ldyBPREIoKTsKCQkkdGhpcy0+dGVtcGxhdGUgPSBuZXcgT1RlbXBsYXRlKCk7CgkJJHRoaXMtPmxvZyAgICAgID0gbmV3IE9Mb2coKTsKCQkkdGhpcy0+c2Vzc2lvbiAgPSBuZXcgT1Nlc3Npb24oKTsKCQkkdGhpcy0+Y29va2llICAgPSBuZXcgT0Nvb2tpZSgpOwoKCSAgLy8gTcOzZHVsby9hY2Npw7NuIGFjdHVhbCB5IGFudGVyaW9yCgkgIGlmICgkdGhpcy0+c2Vzc2lvbi0+Z2V0UGFyYW0oJ2N1cnJlbnQnKSAhPSAnJyl7CgkgICAgJHRoaXMtPnNlc3Npb24tPmFkZFBhcmFtKCdwcmV2aW91cycsICR0aGlzLT5zZXNzaW9uLT5nZXRQYXJhbSgnY3VycmVudCcpKTsKCSAgfQoJICAkdGhpcy0+c2Vzc2lvbi0+YWRkUGFyYW0oJ2N1cnJlbnQnLCAkdXJsX3Jlc3VsdFsnbW9kdWxlJ10uJy8nLiR1cmxfcmVzdWx0WydhY3Rpb24nXSk7CgoJCS8vIENhcmdvIG3Ds2R1bG8sIGFjY2nDs24geSBsYXlvdXQgZW4gZWwgdGVtcGxhdGUKCSAgJHRoaXMtPnRlbXBsYXRlLT5zZXRNb2R1bGUoJHVybF9yZXN1bHRbJ21vZHVsZSddKTsKCSAgJHRoaXMtPnRlbXBsYXRlLT5zZXRBY3Rpb24oJHVybF9yZXN1bHRbJ2FjdGlvbiddKTsKCSAgJHRoaXMtPnRlbXBsYXRlLT5zZXRUeXBlKCR1cmxfcmVzdWx0Wyd0eXBlJ10pOwoJICAkdGhpcy0+dGVtcGxhdGUtPmxvYWRMYXlvdXQoJHVybF9yZXN1bHRbJ2xheW91dCddKTsKCSAgaWYgKGFycmF5X2tleV9leGlzdHMoJ3BhY2thZ2UnLCAkdXJsX3Jlc3VsdCkpewogIAkgICR0aGlzLT50ZW1wbGF0ZS0+c2V0UGFja2FnZSgkdXJsX3Jlc3VsdFsncGFja2FnZSddKTsKICAgIH0KCgkJLy8gSW5pY2lhbGl6byBlbCBsb2cKCSAgJHRoaXMtPmxvZy0+c2V0U2VjdGlvbigkdXJsX3Jlc3VsdFsnaWQnXSk7CgkgICR0aGlzLT5sb2ctPnNldE1vZGVsKCR1cmxfcmVzdWx0WydhY3Rpb24nXSk7Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIHNldENvbmZpZygkY29uZmlnKXsKICAJJHRoaXMtPmNvbmZpZyA9ICRjb25maWc7Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIGdldENvbmZpZygpewogIAlyZXR1cm4gJHRoaXMtPmNvbmZpZzsKCX0KCglwdWJsaWMgZmluYWwgZnVuY3Rpb24gc2V0REIoJGRiKXsKICAJJHRoaXMtPmRiID0gJGRiOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBnZXREQigpewogIAlyZXR1cm4gJHRoaXMtPmRiOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBzZXRUZW1wbGF0ZSgkdGVtcGxhdGUpewogIAkkdGhpcy0+dGVtcGxhdGUgPSAkdGVtcGxhdGU7Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIGdldFRlbXBsYXRlKCl7CiAgCXJldHVybiAkdGhpcy0+dGVtcGxhdGU7Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIHNldExvZygkbG9nKXsKICAJJHRoaXMtPmxvZyA9ICRsb2c7Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIGdldExvZygpewogIAlyZXR1cm4gJHRoaXMtPmxvZzsKCX0KCglwdWJsaWMgZmluYWwgZnVuY3Rpb24gc2V0U2Vzc2lvbigkc2Vzc2lvbil7CiAgCSR0aGlzLT5zZXNzaW9uID0gJHNlc3Npb247Cgl9CgoJcHVibGljIGZpbmFsIGZ1bmN0aW9uIGdldFNlc3Npb24oKXsKICAJcmV0dXJuICR0aGlzLT5zZXNzaW9uOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBzZXRDb29raWUoJGNvb2tpZSl7CiAgCSR0aGlzLT5jb29raWUgPSAkY29va2llOwoJfQoKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBnZXRDb29raWUoKXsKICAJcmV0dXJuICR0aGlzLT5jb29raWU7Cgl9Cn0=',
  'ofw/base/OCookie.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0Nvb2tpZXsKICBwcml2YXRlICRjb29raWVfbGlzdCA9IFtdOwoKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpe30KCiAgZnVuY3Rpb24gc2V0Q29va2llTGlzdCgkbCl7CiAgICAkdGhpcy0+Y29va2llX2xpc3QgPSAkbDsKICB9CgogIGZ1bmN0aW9uIGdldENvb2tpZUxpc3QoKXsKICAgIHJldHVybiAkdGhpcy0+Y29va2llX2xpc3Q7CiAgfQoKICBmdW5jdGlvbiBhZGRDb29raWVUb0xpc3QoJGssJHYpewogICAgZ2xvYmFsICRjOwogICAgJGxpc3QgPSAkdGhpcy0+Z2V0Q29va2llTGlzdCgpOwogICAgJGxpc3RbJGtdID0gJHY7CgogICAgc2V0Y29va2llICgkYy0+Z2V0Q29va2llUHJlZml4KCkuJ1snLiRrLiddJywgJHYsIHRpbWUoKSArICgzNjAwKjI0KjMxKSwgJy8nLCAkYy0+Z2V0Q29va2llVXJsKCkpOwoKICAgICR0aGlzLT5zZXRDb29raWVMaXN0KCRsaXN0KTsKICB9CgogIGZ1bmN0aW9uIGdldENvb2tpZSgkayl7CiAgICAkbGlzdCA9ICR0aGlzLT5nZXRDb29raWVMaXN0KCk7CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygkaywgJGxpc3QpKXsKICAgICAgcmV0dXJuICRsaXN0WyRrXTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGxvYWRDb29raWVzKCl7CiAgICBnbG9iYWwgJGM7CiAgICAkbGlzdCA9IFtdOwoKICAgIGlmIChpc3NldCgkX0NPT0tJRVskYy0+Z2V0Q29va2llUHJlZml4KCldKSkgewogICAgICBmb3JlYWNoICgkX0NPT0tJRVskYy0+Z2V0Q29va2llUHJlZml4KCldIGFzICRuYW1lID0+ICR2YWx1ZSkgewogICAgICAgICRuYW1lID0gaHRtbHNwZWNpYWxjaGFycygkbmFtZSk7CiAgICAgICAgJHZhbHVlID0gaHRtbHNwZWNpYWxjaGFycygkdmFsdWUpOwoKICAgICAgICAkbGlzdFskbmFtZV0gPSAkdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICAkdGhpcy0+c2V0Q29va2llTGlzdCgkbGlzdCk7CiAgfQoKICBmdW5jdGlvbiBzYXZlQ29va2llcygpewogICAgZ2xvYmFsICRjOwogICAgJGxpc3QgPSAkdGhpcy0+Z2V0Q29va2llTGlzdCgpOwoKICAgIGZvcmVhY2ggKCRsaXN0IGFzICRrZXkgPT4gJHZhbHVlKXsKICAgICAgc2V0Y29va2llICgkYy0+Z2V0Q29va2llUHJlZml4KCkuJ1snLiRrZXkuJ10nLCAkdmFsdWUsIHRpbWUoKSArICgzNjAwKjI0KjMxKSwgJy8nLCAkYy0+Z2V0Q29va2llVXJsKCkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2xlYW5Db29raWVzKCl7CiAgICBnbG9iYWwgJGM7CiAgICAkbGlzdCA9ICR0aGlzLT5nZXRDb29raWVMaXN0KCk7CgogICAgZm9yZWFjaCAoJGxpc3QgYXMgJGtleSA9PiAkdmFsdWUpewogICAgICBzZXRjb29raWUgKCRjLT5nZXRDb29raWVQcmVmaXgoKS4nWycuJGtleS4nXScsICR2YWx1ZSwgMSwgJy8nLCAkYy0+Z2V0Q29va2llVXJsKCkpOwogICAgfQoKICAgICR0aGlzLT5zZXRDb29raWVMaXN0KFtdKTsKICB9Cn0K',
  'ofw/base/ODB.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIENsYXNlIHBhcmEgZ2VzdGlvbmFyIGxhIEJhc2UgZGUgZGF0b3MKICovCmNsYXNzIE9EQiB7Cglwcml2YXRlICRob3N0OwoJcHJpdmF0ZSAkdXNlcjsKCXByaXZhdGUgJHBhc3M7Cglwcml2YXRlICRuYW1lOwoJcHJpdmF0ZSAkbGluazsKCXByaXZhdGUgJHJlczsKCXByaXZhdGUgJHF1ZXJ5OwoJcHJpdmF0ZSAkbGFzdF9pZDsKCXByaXZhdGUgJGZvdW5kX3Jvd3M7CgoJZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHVzZXI9JycsICRwYXNzPScnLCAkaG9zdD0nJywgJG5hbWU9JycpewoJCWdsb2JhbCAkYzsKCQlpZihlbXB0eSgkdXNlcikgfHxlbXB0eSgkcGFzcykgfHxlbXB0eSgkaG9zdCkgfHxlbXB0eSgkbmFtZSkgKXsKCQkJJHRoaXMtPmhvc3QgPSAkYy0+Z2V0REIoJ2hvc3QnKTsKCQkJJHRoaXMtPnVzZXIgPSAkYy0+Z2V0REIoJ3VzZXInKTsKCQkJJHRoaXMtPnBhc3MgPSAkYy0+Z2V0REIoJ3Bhc3MnKTsKCQkJJHRoaXMtPm5hbWUgPSAkYy0+Z2V0REIoJ25hbWUnKTsKCQl9ZWxzZXsKCQkJJHRoaXMtPmhvc3QgPSAkaG9zdDsKCQkJJHRoaXMtPnVzZXIgPSAkdXNlcjsKCQkJJHRoaXMtPnBhc3MgPSAkcGFzczsKCQkJJHRoaXMtPm5hbWUgPSAkbmFtZTsKCQl9Cgl9CgoJZnVuY3Rpb24gY29ubmVjdCgpewoJCSRsaW5rID0gbXlzcWxpX2Nvbm5lY3QoJHRoaXMtPmhvc3QsJHRoaXMtPnVzZXIsJHRoaXMtPnBhc3MsJHRoaXMtPm5hbWUpOwoJCWlmICghJGxpbmspewoJCQlyZXR1cm4gbXlzcWxpX2Vycm5vKCRsaW5rKTsgICMgRXJyb3IgQ29uZWN0YW5kbyBsYSBEQgoJCX1lbHNlewoJCQkkdGhpcy0+bGluaz0kbGluazsKCQkJbXlzcWxpX3NldF9jaGFyc2V0KCRsaW5rLCd1dGY4Jyk7CgkJfQoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIHF1ZXJ5KCRxLCRzaWxlbnQ9ZmFsc2UpewoJCSR0aGlzLT5xdWVyeSA9ICRxOwoJCSR0aGlzLT5jb25uZWN0KCk7CgkJJHJlc3VsdCA9IG15c3FsaV9xdWVyeSgkdGhpcy0+bGluaywkcSk7CgkJaWYgKCEkcmVzdWx0KXsKCQkJaWYoISRzaWxlbnQpewoJCQkJZWNobyAiRVJST1IgZW4gbGEgY29uc3VsdGE6ICIuJHEuIlxuIi5teXNxbGlfZXJyb3IoJHRoaXMtPmxpbmspLiJcbiI7CgkJCX0KCQkJJHRoaXMtPmRpc2Nvbm5lY3QoKTsKCQkJcmV0dXJuIG15c3FsaV9lcnJvcigkdGhpcy0+bGluayk7CgkJfWVsc2V7CgkJCSR0aGlzLT5yZXMgPSAkcmVzdWx0OwoJCQlpZiggc3RycG9zKHN0cnRvdXBwZXIoJHEpLCdJTlNFUlQnKSAhPT0gZmFsc2UgKXsKCQkJCSRnZXRfbGFzdF9pZCA9IG15c3FsaV9xdWVyeSgkdGhpcy0+bGluaywnU0VMRUNUIExBU1RfSU5TRVJUX0lEKCkgQVMgYGxhc3RfaWRgJyk7CgkJCQkkbGFzdF9pZCA9IG15c3FsaV9mZXRjaF9hcnJheSgkZ2V0X2xhc3RfaWQsTVlTUUxJX0FTU09DKTsKCQkJCSR0aGlzLT5sYXN0X2lkID0gJGxhc3RfaWRbJ2xhc3RfaWQnXTsKCQkJfQoJCQlpZiggc3RycG9zKHN0cnRvdXBwZXIoJHEpLCdTUUxfQ0FMQ19GT1VORF9ST1dTJykgIT09IGZhbHNlICl7CgkJCQkkbnVtX2ZvdW5kID0gbXlzcWxpX3F1ZXJ5KCR0aGlzLT5saW5rLCdTRUxFQ1QgRk9VTkRfUk9XUygpIEFTIGBudW1gJyk7CgkJCQkkZm91bmRfcm93cyA9IG15c3FsaV9mZXRjaF9hcnJheSgkbnVtX2ZvdW5kLE1ZU1FMSV9BU1NPQyk7CgkJCQkkdGhpcy0+Zm91bmRfcm93cyA9ICRmb3VuZF9yb3dzWydudW0nXTsKCQkJfQoJCQkkdGhpcy0+ZGlzY29ubmVjdCgpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJZnVuY3Rpb24gYXV0b0NvbW1pdCgkbW9kZSl7CgkJbXlzcWxpX2F1dG9jb21taXQoJHRoaXMtPmxpbmssICRtb2RlKTsKCX0KCglmdW5jdGlvbiBjb21taXQoKXsKCQlteXNxbGlfY29tbWl0KCR0aGlzLT5saW5rKTsKCX0KCglmdW5jdGlvbiByb2xsYmFjaygpewoJCW15c3FsaV9yb2xsYmFjaygkdGhpcy0+bGluayk7Cgl9CgoJZnVuY3Rpb24gaW5mbygpewoJCXJldHVybiBteXNxbGlfaW5mbygkdGhpcy0+bGluayk7Cgl9CgoJZnVuY3Rpb24gYWZmZWN0ZWQoKXsKCQlyZXR1cm4gbXlzcWxpX2FmZmVjdGVkX3Jvd3MoJHRoaXMtPmxpbmspOwoJfQoKCWZ1bmN0aW9uIGhvd01hbnkoKXsKCQlyZXR1cm4gbXlzcWxpX251bV9yb3dzKCR0aGlzLT5yZXMpOwoJfQoKCWZ1bmN0aW9uIG5leHQoKXsKCQlyZXR1cm4gbXlzcWxpX2ZldGNoX2FycmF5KCR0aGlzLT5yZXMsTVlTUUxJX0FTU09DKTsKCX0KCglmdW5jdGlvbiBsYXN0UXVlcnkoKXsKCQlyZXR1cm4gJHRoaXMtPnF1ZXJ5OwoJfQoKCWZ1bmN0aW9uIGxhc3RJZCgpewoJCXJldHVybiAkdGhpcy0+bGFzdF9pZDsKCX0KCglmdW5jdGlvbiBmb3VuZFJvd3MoKXsKCQlyZXR1cm4gJHRoaXMtPmZvdW5kX3Jvd3M7Cgl9CgoJZnVuY3Rpb24gZGlzY29ubmVjdCgpewoJCW15c3FsaV9jbG9zZSgkdGhpcy0+bGluayk7CgkJJHRoaXMtPmxpbmsgPSBudWxsOwoJfQoKCWZ1bmN0aW9uIGNsZWFuU3RyKCRzdHIpewoJCWlmIChpc19udWxsKCR0aGlzLT5saW5rKSl7CgkJCSR0aGlzLT5jb25uZWN0KCk7CgkJfQoJCXJldHVybiBteXNxbGlfcmVhbF9lc2NhcGVfc3RyaW5nKCR0aGlzLT5saW5rLCRzdHIpOwoJfQp9',
  'ofw/base/ODBp.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIENsYXNlIHBhcmEgZ2VzdGlvbmFyIGxhIEJhc2UgZGUgZGF0b3MKICovCmNsYXNzIE9EQnAgewogIHByaXZhdGUgJGRyaXZlciAgICAgPSAnbXlzcWwnOwoJcHJpdmF0ZSAkaG9zdCAgICAgICA9IG51bGw7Cglwcml2YXRlICR1c2VyICAgICAgID0gbnVsbDsKCXByaXZhdGUgJHBhc3MgICAgICAgPSBudWxsOwoJcHJpdmF0ZSAkbmFtZSAgICAgICA9IG51bGw7Cglwcml2YXRlICRsaW5rICAgICAgID0gbnVsbDsKCXByaXZhdGUgJHN0bXQgICAgICAgPSBudWxsOwoJcHJpdmF0ZSAkZmV0Y2hfbW9kZSA9IG51bGw7CgoJZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHVzZXI9JycsICRwYXNzPScnLCAkaG9zdD0nJywgJG5hbWU9JycpewoJCWdsb2JhbCAkYzsKCQlpZihlbXB0eSgkdXNlcikgfHxlbXB0eSgkcGFzcykgfHxlbXB0eSgkaG9zdCkgfHxlbXB0eSgkbmFtZSkgKXsKCQkJJHRoaXMtPnNldEhvc3QoICRjLT5nZXREQignaG9zdCcpICk7CgkJCSR0aGlzLT5zZXRVc2VyKCAkYy0+Z2V0REIoJ3VzZXInKSApOwoJCQkkdGhpcy0+c2V0UGFzcyggJGMtPmdldERCKCdwYXNzJykgKTsKCQkJJHRoaXMtPnNldE5hbWUoICRjLT5nZXREQignbmFtZScpICk7CgkJfWVsc2V7CgkJCSR0aGlzLT5zZXRIb3N0KCAkaG9zdCApOwoJCQkkdGhpcy0+c2V0VXNlciggJHVzZXIgKTsKCQkJJHRoaXMtPnNldFBhc3MoICRwYXNzICk7CgkJCSR0aGlzLT5zZXROYW1lKCAkbmFtZSApOwoJCX0KCX0KCgkvKgogICAqIEdldHRlcnMgLyBTZXR0ZXJzCiAgICovCglwdWJsaWMgZnVuY3Rpb24gc2V0RHJpdmVyKCRkKXsKICAJJHRoaXMtPmRyaXZlciA9ICRkOwoJfQoJcHVibGljIGZ1bmN0aW9uIGdldERyaXZlcigpewogIAlyZXR1cm4gJHRoaXMtPmRyaXZlcjsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRIb3N0KCRoKXsKICAJJHRoaXMtPmhvc3QgPSAkaDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRIb3N0KCl7CiAgCXJldHVybiAkdGhpcy0+aG9zdDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRVc2VyKCR1KXsKICAJJHRoaXMtPnVzZXIgPSAkdTsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyKCl7CiAgCXJldHVybiAkdGhpcy0+dXNlcjsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRQYXNzKCRwKXsKICAJJHRoaXMtPnBhc3MgPSAkcDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXNzKCl7CiAgCXJldHVybiAkdGhpcy0+cGFzczsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRuKXsKICAJJHRoaXMtPm5hbWUgPSAkbjsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCl7CiAgCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRMaW5rKCRsKXsKICAJJHRoaXMtPmxpbmsgPSAkbDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRMaW5rKCl7CiAgCXJldHVybiAkdGhpcy0+bGluazsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRTdG10KCRzKXsKICAJJHRoaXMtPnN0bXQgPSAkczsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRTdG10KCl7CiAgCXJldHVybiAkdGhpcy0+c3RtdDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBzZXRGZXRjaE1vZGUoJGZtKXsKICAJJHRoaXMtPmZldGNoX21vZGUgPSAkZm07Cgl9CglwdWJsaWMgZnVuY3Rpb24gZ2V0RmV0Y2hNb2RlKCl7CiAgCXJldHVybiAkdGhpcy0+ZmV0Y2hfbW9kZTsKCX0KCgkvKgogICAqIEZ1bmN0aW9uIHRvIG9wZW4gYSBjb25uZWN0aW9uIHRvIHRoZSBkYXRhYmFzZQogICAqLwoJZnVuY3Rpb24gY29ubmVjdCgpewogIAl0cnkgewogIAkgICRsaW5rID0gbmV3IFBETygKICAJICAgICR0aGlzLT5nZXREcml2ZXIoKS4nOmhvc3Q9Jy4kdGhpcy0+Z2V0SG9zdCgpLic7ZGJuYW1lPScuJHRoaXMtPmdldE5hbWUoKS4nO2NoYXJzZXQ9VVRGOCcsCiAgCSAgICAkdGhpcy0+Z2V0VXNlcigpLAogIAkgICAgJHRoaXMtPmdldFBhc3MoKSwKICAJICAgIFtQRE86Ok1ZU1FMX0FUVFJfSU5JVF9DT01NQU5EID0+ICdTRVQgTkFNRVMgXCdVVEY4XCcnXQogICAgICApOwogICAgICAkdGhpcy0+c2V0TGluaygkbGluayk7CiAgICB9CiAgICBjYXRjaCAoUERPRXhjZXB0aW9uICRlKSB7CiAgICAgIHJldHVybiAnQ29ubmVjdGlvbiBmYWlsZWQ6ICcgLiAkZS0+Z2V0TWVzc2FnZSgpOwogICAgfQoKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKgogICAqIEZ1bmN0aW9uIHRvIGRvIGEgcXVlcnkgd2l0aCBhIHByZXBhcmVkIHN0YXRlbWVudAogICAqLwoJcHVibGljIGZ1bmN0aW9uIHF1ZXJ5KCRxLCAkcGFyYW1zPVtdKXsKICAJLy8gR2V0IGNvbm5lY3Rpb24KICAJJHBkbyA9ICR0aGlzLT5nZXRMaW5rKCk7CiAgCWlmICghJHBkbyl7CiAgICAJJGNvbm4gPSAkdGhpcy0+Y29ubmVjdCgpOwogICAgCWlmICgkY29ubj09PXRydWUpewogICAgCSAgJHBkbyA9ICR0aGlzLT5nZXRMaW5rKCk7CiAgICAJfQogICAgCWVsc2V7CiAgICAgIAlyZXR1cm4gJGNvbm47CiAgICAJfQogIAl9CgogIAkvLyBQcmVwYXJlIHN0YXRlbWVudAogIAkkc3RtdCA9ICRwZG8tPnByZXBhcmUoJHEpOwoKICAJLy8gUGFzcyBwYXJhbWV0ZXJzIHRvIHN0YXRlbWVudAogIAlpZiAoY291bnQoJHBhcmFtcyk+MCl7CiAgICAgICRzdG10LT5leGVjdXRlKCRwYXJhbXMpOwogICAgfQogICAgZWxzZXsKICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsKICAgIH0KCiAgICAvLyBJZiBmZXRjaCBtb2RlIGlzIG5vdCBudWxsLCBzZXQgaXQgaW50byB0aGUgc3RhdGVtZW50CiAgICBpZiAoIWlzX251bGwoJHRoaXMtPmdldEZldGNoTW9kZSgpKSl7CiAgICAgICRzdG10LT5zZXRGZXRjaE1vZGUoUERPOjpGRVRDSF9DTEFTUywgJHRoaXMtPmdldEZldGNoTW9kZSgpKTsKICAgIH0KCiAgICAkdGhpcy0+c2V0U3RtdCgkc3RtdCk7Cgl9CgoJLyoKICAgKiBGdW5jdGlvbiB0byBiZWdpbiBhIHRyYW5zYWN0aW9uCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGJlZ2luVHJhbnNhY3Rpb24oKXsKICAgICR0aGlzLT5nZXRTdG10KCktPmJlZ2luVHJhbnNhY3Rpb24oKTsKICB9CgogIC8qCiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBhIGNvbW1pdCBvbiBhIHRyYW5zYWN0aW9uCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGNvbW1pdCgpewogICAgJHRoaXMtPmdldFN0bXQoKS0+Y29tbWl0KCk7CiAgfQoKICAvKgogICAqIEZ1bmN0aW9uIHRvIHJvbGxiYWNrIGEgdHJhbnNhY3Rpb24KICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gcm9sbGJhY2soKXsKICAgICR0aGlzLT5nZXRTdG10KCktPnJvbGxiYWNrKCk7CiAgfQoKCS8qCiAgICogRnVuY3Rpb24gdG8gZ2V0IG9uZSByZXN1bHQKICAgKi8KCXB1YmxpYyBmdW5jdGlvbiBmZXRjaCgpewogIAlpZiAoaXNfbnVsbCgkdGhpcy0+Z2V0RmV0Y2hNb2RlKCkpKXsKICAJICByZXR1cm4gJHRoaXMtPmdldFN0bXQoKS0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQyk7CiAgCX0KICAJcmV0dXJuICR0aGlzLT5nZXRTdG10KCktPmZldGNoKCk7Cgl9CgoJLyoKICAgKiBGdW5jdGlvbiB0byBnZXQgYWxsIHRoZSByZXN1bHRzIGluIGFuIGFycmF5CiAgICovCglwdWJsaWMgZnVuY3Rpb24gZmV0Y2hBbGwoKXsKICAJcmV0dXJuICR0aGlzLT5nZXRTdG10KCktPmZldGNoQWxsKCk7Cgl9CgoJLyoKICAgKiBGdW5jdGlvbiB0byBnZXQgbGFzdCBpbnNlcnRlZCBpZAogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0SWQoKXsKICAgIHJldHVybiAkdGhpcy0+Z2V0U3RtdCgpLT5sYXN0SW5zZXJ0SWQoKTsKICB9Cn0K',
  'ofw/base/OEmail.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0VtYWlsewogIHByaXZhdGUgJGRlYnVnX21vZGUgICA9IGZhbHNlOwogIHByaXZhdGUgJGxvZyAgICAgICAgICA9IG51bGw7CiAgcHJpdmF0ZSAkaXNfc210cCAgICAgID0gZmFsc2U7CiAgcHJpdmF0ZSAkc210cF9kYXRhICAgID0gW107CiAgcHJpdmF0ZSAkcmVjaXBpZW50cyAgID0gW107CiAgcHJpdmF0ZSAkc3ViamVjdCAgICAgID0gJyc7CiAgcHJpdmF0ZSAkbWVzc2FnZSAgICAgID0gJyc7CiAgcHJpdmF0ZSAkaXNfaHRtbCAgICAgID0gdHJ1ZTsKICBwcml2YXRlICRmcm9tICAgICAgICAgPSAnJzsKICBwcml2YXRlICRmcm9tX25hbWUgICAgPSBudWxsOwogIHByaXZhdGUgJHJlc3VsdF9vayAgICA9IFtdOwogIHByaXZhdGUgJHJlc3VsdF9lcnJvciA9IFtdOwoKICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpIHsKICAgIGdsb2JhbCAkYywgJHdoZXJlOwogICAgJHRoaXMtPnNldERlYnVnTW9kZSgkYy0+Z2V0RGVidWdNb2RlKCkpOwogICAgJGwgPSBuZXcgT0xvZygpOwogICAgJHRoaXMtPnNldExvZygkbCk7CiAgICAkdGhpcy0+Z2V0TG9nKCktPnNldFNlY3Rpb24oJHdoZXJlKTsKICAgICR0aGlzLT5nZXRMb2coKS0+c2V0TW9kZWwoJ09FbWFpbCcpOwogICAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCdlbWFpbF9zbXRwJykpewogICAgICAkdGhpcy0+c2V0SXNTTVRQKHRydWUpOwogICAgICAkdGhpcy0+c2V0U01UUERhdGEoICRjLT5nZXRTTVRQKCkgKTsKICAgIH0KICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXREZWJ1Z01vZGUoJGRtKXsKICAgICR0aGlzLT5kZWJ1Z19tb2RlID0gJGRtOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVidWdNb2RlKCl7CiAgICByZXR1cm4gJHRoaXMtPmRlYnVnX21vZGU7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TG9nKCRsKXsKICAgICR0aGlzLT5sb2cgPSAkbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldExvZygpewogICAgcmV0dXJuICR0aGlzLT5sb2c7CiAgfQogIAogIHB1YmxpYyBmdW5jdGlvbiBzZXRJc1NNVFAoJGlzKXsKICAgICR0aGlzLT5pc19zbXRwID0gJGlzOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0SXNTTVRQKCl7CiAgICByZXR1cm4gJHRoaXMtPmlzX3NtdHA7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0U01UUERhdGEoJHNkKXsKICAgICR0aGlzLT5zbXRwX2RhdGEgPSAkc2Q7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRTTVRQRGF0YSgpewogICAgcmV0dXJuICR0aGlzLT5zbXRwX2RhdGE7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0UmVjaXBpZW50cygkcil7CiAgICAkdGhpcy0+cmVjaXBpZW50cyA9ICRyOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVjaXBpZW50cygpewogICAgcmV0dXJuICR0aGlzLT5yZWNpcGllbnRzOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZFJlY2lwaWVudCgkcil7CiAgICAkbGlzdCA9ICR0aGlzLT5nZXRSZWNpcGllbnRzKCk7CiAgICBhcnJheV9wdXNoKCRsaXN0LCAkcik7CiAgICAkdGhpcy0+c2V0UmVjaXBpZW50cygkbGlzdCk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0U3ViamVjdCgkcyl7CiAgICAkdGhpcy0+c3ViamVjdCA9ICRzOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3ViamVjdCgpewogICAgcmV0dXJuICR0aGlzLT5zdWJqZWN0OwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldE1lc3NhZ2UoJG0pewogICAgJHRoaXMtPm1lc3NhZ2UgPSAkbTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldE1lc3NhZ2UoKXsKICAgIHJldHVybiAkdGhpcy0+bWVzc2FnZTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRJc0h0bWwoJGloKXsKICAgICR0aGlzLT5pc19odG1sID0gJGloOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0SXNIdG1sKCl7CiAgICByZXR1cm4gJHRoaXMtPmlzX2h0bWw7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0RnJvbSgkZiwgJG5hbWU9bnVsbCl7CiAgICAkdGhpcy0+ZnJvbSA9ICRmOwogICAgaWYgKCFpc19udWxsKCRuYW1lKSl7CiAgICAgICR0aGlzLT5mcm9tX25hbWUgPSAkbmFtZTsKICAgIH0KICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEZyb20oKXsKICAgIHJldHVybiAkdGhpcy0+ZnJvbTsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIHNldEZyb21OYW1lKCRuKXsKICAgICR0aGlzLT5mcm9tX25hbWUgPSAkbjsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEZyb21OYW1lKCl7CiAgICByZXR1cm4gJHRoaXMtPmZyb21fbmFtZTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRSZXN1bHRPaygkcm8pewogICAgJHRoaXMtPnJlc3VsdF9vayA9ICRybzsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFJlc3VsdE9rKCl7CiAgICByZXR1cm4gJHRoaXMtPnJlc3VsdF9vazsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRSZXN1bHRPaygkcm8pewogICAgJGxpc3QgPSAkdGhpcy0+Z2V0UmVzdWx0T2soKTsKICAgIGFycmF5X3B1c2goJGxpc3QsICRybyk7CiAgICAkdGhpcy0+c2V0UmVzdWx0T2soJGxpc3QpOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldFJlc3VsdEVycm9yKCRyZSl7CiAgICAkdGhpcy0+cmVzdWx0X2Vycm9yID0gJHJlOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVzdWx0RXJyb3IoKXsKICAgIHJldHVybiAkdGhpcy0+cmVzdWx0X2Vycm9yOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZFJlc3VsdEVycm9yKCRyZSl7CiAgICAkbGlzdCA9ICR0aGlzLT5nZXRSZXN1bHRFcnJvcigpOwogICAgYXJyYXlfcHVzaCgkbGlzdCwgJHJlKTsKICAgICR0aGlzLT5zZXRSZXN1bHRFcnJvcigkbGlzdCk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2VuZCgpewogICAgJHJldCA9IFsnc3RhdHVzJz0+J29rJywnbWVucyc9PicnXTsKCiAgICAvLyBTaSBubyBoYXkgZGVzdGluYXRhcmlvcyBmdWVyYQogICAgaWYgKGNvdW50KCR0aGlzLT5nZXRSZWNpcGllbnRzKCkpPT0wKXsKICAgICAgJHJldFsnc3RhdHVzJ10gPSAnZXJyb3InOwogICAgICAkcmV0WydtZW5zJ10gPSAnTm8gaGF5IGRlc3RpbmF0YXJpb3MhJzsKICAgIH0KICAgIGVsc2V7CiAgICAgICRsaXN0ID0gJHRoaXMtPmdldFJlY2lwaWVudHMoKTsKCiAgICAgIGlmICghJHRoaXMtPmdldElzU01UUCgpKXsKICAgICAgICBmb3JlYWNoICgkbGlzdCBhcyAkaXRlbSl7CiAgICAgICAgICAkaGVhZGVycyA9ICcnOwogICAgICAgICAgLy8gU2kgZXMgaHRtbCB0aWVuZSBjYWJlY2VyYXMgZXNwZWNpYWxlcwogICAgICAgICAgaWYgKCR0aGlzLT5nZXRJc0h0bWwoKSl7CiAgICAgICAgICAgICRoZWFkZXJzIC49ICJNSU1FLVZlcnNpb246IDEuMFxyXG4iOwogICAgICAgICAgICAkaGVhZGVycyAuPSAiQ29udGVudC10eXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9aXNvLTg4NTktMVxyXG4iOwogICAgICAgICAgfQogICAgICAgICAgJGhlYWRlcnMgLj0gIlRvOiAiLiRpdGVtLiJcclxuIjsKICAgICAgICAgICRoZWFkZXJzIC49ICJGcm9tOiAiLiR0aGlzLT5nZXRGcm9tKCkuKCBpc19udWxsKCR0aGlzLT5nZXRGcm9tTmFtZSgpKSA/ICIiIDogIjwiLiR0aGlzLT5nZXRGcm9tTmFtZSgpLiI+IiApLiJcclxuIjsKICAKICAgICAgICAgIC8vIExvIGVudmlvCiAgICAgICAgICBpZiAobWFpbCgkaXRlbSwgJHRoaXMtPmdldFN1YmplY3QoKSwgJHRoaXMtPmdldE1lc3NhZ2UoKSwgJGhlYWRlcnMpKXsKICAgICAgICAgICAgJHRoaXMtPmFkZFJlc3VsdE9rKCRpdGVtKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICR0aGlzLT5hZGRSZXN1bHRFcnJvcigkaXRlbSk7CiAgICAgICAgICAgICRyZXRbJ3N0YXR1cyddID0gJ2Vycm9yJzsKICAgICAgICAgICAgJHJldFsnbWVucyddIC49ICdFcnJvciBhbCBlbnZpYXIgZW1haWwgYTogJy4kaXRlbS4nIC0gJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICAkc210cF9kYXRhID0gJHRoaXMtPmdldFNNVFBEYXRhKCk7CiAgICAgICAgZm9yZWFjaCAoJGxpc3QgYXMgJGl0ZW0pewogICAgICAgICAgdHJ5ewogICAgICAgICAgICAkbWFpbCA9IG5ldyBcUEhQTWFpbGVyXFBIUE1haWxlclxQSFBNYWlsZXIodHJ1ZSk7CiAgICAgICAgICAgICRtYWlsLT5pc1NNVFAoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICRtYWlsLT5DaGFyU2V0ID0gJ1VURi04JzsKICAgICAgICAgICAgLy8kbWFpbC0+U01UUERlYnVnID0gMTsKICAgICAgICAgICAgJG1haWwtPkhvc3QgPSAkc210cF9kYXRhWydob3N0J107CiAgICAgICAgICAgICRtYWlsLT5Qb3J0ID0gJHNtdHBfZGF0YVsncG9ydCddOwogICAgICAgICAgICAkbWFpbC0+U01UUFNlY3VyZSA9ICRzbXRwX2RhdGFbJ3NlY3VyZSddOwogICAgICAgICAgICAkbWFpbC0+U01UUEF1dGggPSB0cnVlOwogICAgICAgICAgICAkbWFpbC0+VXNlcm5hbWUgPSAkc210cF9kYXRhWyd1c2VyJ107CiAgICAgICAgICAgICRtYWlsLT5QYXNzd29yZCA9ICRzbXRwX2RhdGFbJ3Bhc3MnXTsKICAgICAgICAgICAgaWYgKGlzX251bGwoJHRoaXMtPmdldEZyb21OYW1lKCkpKXsKICAgICAgICAgICAgICAkbWFpbC0+c2V0RnJvbSgkdGhpcy0+Z2V0RnJvbSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICRtYWlsLT5zZXRGcm9tKCR0aGlzLT5nZXRGcm9tKCksICR0aGlzLT5nZXRGcm9tTmFtZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkbWFpbC0+YWRkQWRkcmVzcygkaXRlbSk7CiAgICAgICAgICAgICRtYWlsLT5TdWJqZWN0ID0gJHRoaXMtPmdldFN1YmplY3QoKTsKICAgICAgICAgICAgJG1haWwtPm1zZ0hUTUwoJHRoaXMtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoJG1haWwtPnNlbmQoKSkgewogICAgICAgICAgICAgICR0aGlzLT5hZGRSZXN1bHRPaygkaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgJHRoaXMtPmFkZFJlc3VsdEVycm9yKCRpdGVtKTsKICAgICAgICAgICAgICAkcmV0WydzdGF0dXMnXSA9ICdlcnJvcic7CiAgICAgICAgICAgICAgJHJldFsnbWVucyddIC49ICdFcnJvciBhbCBlbnZpYXIgZW1haWwgYTogJy4kaXRlbS4nIC0gJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgY2F0Y2goRXhjZXB0aW9uICRlKXsKICAgICAgICAgICAgJHRoaXMtPmFkZFJlc3VsdEVycm9yKCRpdGVtKTsKICAgICAgICAgICAgJHJldFsnc3RhdHVzJ10gPSAnZXJyb3InOwogICAgICAgICAgICAkcmV0WydtZW5zJ10gLj0gJ0Vycm9yIGFsIGVudmlhciBlbWFpbCBhOiAnLiRpdGVtLicgLSAnOwogICAgICAgICAgfQoKICAgICAgICAgICRtYWlsID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgCiAgICB9CgogICAgcmV0dXJuICRyZXQ7CiAgfQp9Cg==',
  'ofw/base/OFTP.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIENsYXNlIHBhcmEgZ2VzdGlvbmFyIGxhIEJhc2UgZGUgZGF0b3MKICovCmNsYXNzIE9GVFAgewogIHByaXZhdGUgJHNlcnZlcjsKICBwcml2YXRlICR1c2VyX25hbWU7CiAgcHJpdmF0ZSAkdXNlcl9wYXNzOwogIAogIHByaXZhdGUgJGNvbm47CiAgcHJpdmF0ZSAkY29ubmVjdGVkID0gZmFsc2U7CiAgcHJpdmF0ZSAkbG9nZ2VkID0gZmFsc2U7CiAgcHJpdmF0ZSAkbW9kZSA9IEZUUF9BU0NJSTsKICBwcml2YXRlICRhdXRvX2Rpc2Nvbm5lY3QgPSB0cnVlOwogIAogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRzZXJ2ZXIsICR1c2VyLCAkcGFzcyl7CiAgICAkdGhpcy0+c2VydmVyICAgID0gJHNlcnZlcjsKICAgICR0aGlzLT51c2VyX25hbWUgPSAkdXNlcjsKICAgICR0aGlzLT51c2VyX3Bhc3MgPSAkcGFzczsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIGNvbm5lY3QoKXsKICAgICR0aGlzLT5jb25uID0gZnRwX2Nvbm5lY3QoJHRoaXMtPnNlcnZlcik7CiAgICBpZiAoJHRoaXMtPmNvbm4pewogICAgICAkdGhpcy0+Y29ubmVjdGVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiAkdGhpcy0+Y29ubmVjdGVkOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gZGlzY29ubmVjdCgpewogICAgZnRwX2Nsb3NlKCR0aGlzLT5jb25uKTsKICAgICR0aGlzLT5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICR0aGlzLT5sb2dnZWQgPSBmYWxzZTsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIGxvZ2luKCl7CiAgICAkdGhpcy0+bG9nZ2VkID0gZnRwX2xvZ2luKCR0aGlzLT5jb25uLCAkdGhpcy0+dXNlcl9uYW1lLCAkdGhpcy0+dXNlcl9wYXNzKTsKICAgIHJldHVybiAkdGhpcy0+bG9nZ2VkOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gcGFzc2l2ZSgkcGFzdiA9IHRydWUpewogICAgZnRwX3Bhc3YoJHRoaXMtPmNvbm4sICRwYXN2KTsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIGF1dG9EaXNjb25uZWN0KCRhdXRvKXsKICAgICR0aGlzLT5hdXRvX2Rpc2Nvbm5lY3QgPSAkYXV0bzsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIG1vZGUoJG1vZGUpewogICAgc3dpdGNoICgkbW9kZSl7CiAgICAgIGNhc2UgJ2FzY2lpJzp7CiAgICAgICAgJHRoaXMtPm1vZGUgPSBGVFBfQVNDSUk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2Jpbic6ewogICAgICAgICR0aGlzLT5tb2RlID0gRlRQX0JJTkFSWTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICB9CiAgCiAgcHJpdmF0ZSBmdW5jdGlvbiBjaGVja0Nvbm5lY3Rpb24oKXsKICAgIGlmICghJHRoaXMtPmNvbm5lY3RlZCAmJiAhJHRoaXMtPmNvbm5lY3QoKSl7CiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0Vycm9yIGRlIGNvbmV4acOzbjogIicuJHRoaXMtPnNlcnZlci4nIicpOwogICAgfQogICAgaWYgKCEkdGhpcy0+bG9nZ2VkICYmICEkdGhpcy0+bG9naW4oKSl7CiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0Vycm9yIGFsIGluaWNpYXIgc2VzacOzbjogIicuJHRoaXMtPnVzZXJfbmFtZS4nIicpOwogICAgfQogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gcHV0KCRsb2NhbCwgJHJlbW90ZSl7CiAgICAkdGhpcy0+Y2hlY2tDb25uZWN0aW9uKCk7CiAgICAKICAgICRyZXN1bHQgPSBmdHBfcHV0KCR0aGlzLT5jb25uLCAkcmVtb3RlLCAkbG9jYWwsICR0aGlzLT5tb2RlKTsKICAgIAogICAgaWYgKCR0aGlzLT5hdXRvX2Rpc2Nvbm5lY3QpewogICAgICAkdGhpcy0+ZGlzY29ubmVjdCgpOwogICAgfQogICAgCiAgICByZXR1cm4gJHJlc3VsdDsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIGdldCgkcmVtb3RlLCAkbG9jYWwpewogICAgJHRoaXMtPmNoZWNrQ29ubmVjdGlvbigpOwogICAgCiAgICAkcmVzdWx0ID0gZnRwX2dldCgkdGhpcy0+Y29ubiwgJGxvY2FsLCAkcmVtb3RlLCAkdGhpcy0+bW9kZSk7CiAgICAKICAgIGlmICgkdGhpcy0+YXV0b19kaXNjb25uZWN0KXsKICAgICAgJHRoaXMtPmRpc2Nvbm5lY3QoKTsKICAgIH0KICAgIAogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQogIAogIHB1YmxpYyBmdW5jdGlvbiBkZWxldGUoJHJlbW90ZSl7CiAgICAkdGhpcy0+Y2hlY2tDb25uZWN0aW9uKCk7CiAgICAKICAgICRyZXN1bHQgPSBmdHBfZGVsZXRlKCR0aGlzLT5jb25uLCAkcmVtb3RlKTsKICAgIAogICAgaWYgKCR0aGlzLT5hdXRvX2Rpc2Nvbm5lY3QpewogICAgICAkdGhpcy0+ZGlzY29ubmVjdCgpOwogICAgfQogICAgCiAgICByZXR1cm4gJHJlc3VsdDsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIGNoZGlyKCRkaXIpewogICAgJHRoaXMtPmNoZWNrQ29ubmVjdGlvbigpOwogICAgCiAgICAkcmVzdWx0ID0gZnRwX2NoZGlyKCR0aGlzLT5jb25uLCAkZGlyKTsKICAgIAogICAgaWYgKCR0aGlzLT5hdXRvX2Rpc2Nvbm5lY3QpewogICAgICAkdGhpcy0+ZGlzY29ubmVjdCgpOwogICAgfQogICAgCiAgICByZXR1cm4gJHJlc3VsdDsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIG1rZGlyKCRkaXIpewogICAgJHRoaXMtPmNoZWNrQ29ubmVjdGlvbigpOwogICAgCiAgICAkcmVzdWx0ID0gZnRwX21rZGlyKCR0aGlzLT5jb25uLCAkZGlyKTsKICAgIAogICAgaWYgKCR0aGlzLT5hdXRvX2Rpc2Nvbm5lY3QpewogICAgICAkdGhpcy0+ZGlzY29ubmVjdCgpOwogICAgfQogICAgCiAgICByZXR1cm4gJHJlc3VsdDsKICB9Cn0=',
  'ofw/base/OForm.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIE9Gb3Jtew0KICBjb25zdCBSRVFVSVJFRCA9IDE7DQogIGNvbnN0IFZBTElEX0VNQUlMID0gMjsNCg0KICBjb25zdCBURVhUICAgPSAxOw0KICBjb25zdCBFTUFJTCAgPSAyOw0KICBjb25zdCBOVU1CRVIgPSAzOw0KICBjb25zdCBTRUxFQ1QgPSA0Ow0KICBjb25zdCBDSEVDSyAgPSA1Ow0KICBjb25zdCBSQURJTyAgPSA2Ow0KDQogIC8vIEZpZWxkOiAnbmFtZScgPT4gWyd2YWx1ZScsICd0eXBlJyAsICd2YWxpZGF0aW9uJ10NCiAgcHJpdmF0ZSAkZmllbGRzID0gW107DQoNCiAgcHVibGljIGZ1bmN0aW9uIHNldEZpZWxkcygkZmllbGRzKXsNCiAgICAkdGhpcy0+ZmllbGRzID0gJGZpZWxkczsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RmllbGRzKCl7DQogICAgcmV0dXJuICR0aGlzLT5maWVsZHM7DQogIH0NCiAgcHVibGljIGZ1bmN0aW9uIGFkZEZpZWxkKCRuYW1lLCAkZmllbGQpew0KICAgICR0aGlzLT5maWVsZHNbJG5hbWVdID0gJGZpZWxkOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRGaWVsZCgkbmFtZSl7DQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJG5hbWUsICR0aGlzLT5maWVsZHMpKXsNCiAgICAgIHJldHVybiAkdGhpcy0+ZmllbGRzWyRuYW1lXTsNCiAgICB9DQogICAgcmV0dXJuIGZhbHNlOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRGaWVsZFZhbHVlKCRuYW1lKXsNCiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygkbmFtZSwgJHRoaXMtPmZpZWxkcykpew0KICAgICAgcmV0dXJuICR0aGlzLT5maWVsZHNbJG5hbWVdWyd2YWx1ZSddOw0KICAgIH0NCiAgICByZXR1cm4gZmFsc2U7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gaXNWYWxpZCgpew0KICAgICRpc192YWxpZCA9IHRydWU7DQoNCiAgICBmb3JlYWNoICgkdGhpcy0+ZmllbGRzIGFzICRuYW1lID0+ICRmaWVsZCl7DQogICAgICAkaXNfdmFsaWRfZmllbGQgPSB0cnVlOw0KICAgICAgZm9yZWFjaCAoJHRoaXMtPmZpZWxkc1skbmFtZV1bJ3ZhbGlkYXRpb24nXSBhcyAkdmFsaWRhdGlvbil7DQogICAgICAgIHN3aXRjaCAoJHZhbGlkYXRpb24pew0KICAgICAgICAgIGNhc2Ugc2VsZjo6UkVRVUlSRUQ6IHsNCiAgICAgICAgICAgIGlmICh0cmltKCR0aGlzLT5maWVsZHNbJG5hbWVdWyd2YWx1ZSddKSA9PSAnJyl7DQogICAgICAgICAgICAgICRpc192YWxpZF9maWVsZCA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlIHNlbGY6OlZBTElEX0VNQUlMOnsNCiAgICAgICAgICAgIGlmICghZmlsdGVyX3ZhcigkdGhpcy0+ZmllbGRzWyRuYW1lXVsndmFsdWUnXSwgRklMVEVSX1ZBTElEQVRFX0VNQUlMKSkgew0KICAgICAgICAgICAgICAkaXNfdmFsaWRfZmllbGQgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgICR0aGlzLT5maWVsZHNbJG5hbWVdWyd2YWxpZCddID0gJGlzX3ZhbGlkX2ZpZWxkOw0KICAgICAgaWYgKCEkaXNfdmFsaWRfZmllbGQpeyAkaXNfdmFsaWQgPSBmYWxzZTsgfQ0KICAgIH0NCg0KICAgIHJldHVybiAkaXNfdmFsaWQ7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gbG9hZFZhbHVlcygkbGlzdCl7DQogICAgZWNobyAnPHByZT4nOw0KICAgIHZhcl9kdW1wKCRsaXN0KTsNCiAgICBlY2hvICc8L3ByZT4nOw0KICAgIGZvcmVhY2ggKCR0aGlzLT5maWVsZHMgYXMgJG5hbWUgPT4gJGZpZWxkKXsNCiAgICAgICR0aGlzLT5maWVsZHNbJG5hbWVdWyd2YWx1ZSddID0gJGxpc3RbJG5hbWVdOw0KICAgICAgZWNobyAiTElTVFsiLiRuYW1lLiJdOiAiLiRsaXN0WyRuYW1lXS4iPGJyPlxuIjsNCiAgICB9DQogIH0NCn0NCg==',
  'ofw/base/OImage.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0ltYWdlewogIHByaXZhdGUgJGRiOwogIHByaXZhdGUgJGRlYnVnX21vZGUgID0gZmFsc2U7CiAgcHJpdmF0ZSAkbCAgICAgICAgICAgPSBudWxsOwogIHByaXZhdGUgJHRtcF9kaXIgICAgID0gJyc7CiAgcHJpdmF0ZSAkaW1nX2RpciAgICAgPSAnJzsKICBwcml2YXRlICR0aHVtYl9kaXIgICA9ICcnOwogIHByaXZhdGUgJGltYWdlX3R5cGVzID0gW107CiAgcHJpdmF0ZSAkaW1nX2lkICAgICAgPSAnJzsKICBwcml2YXRlICRzaSAgICAgICAgICA9IG51bGw7CgogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkgewogICAgZ2xvYmFsICRjLCAkd2hlcmU7CiAgICAkdGhpcy0+ZGI9bmV3IE9EQigpOwogICAgJHRoaXMtPnNldERlYnVnTW9kZSgkYy0+Z2V0RGVidWdNb2RlKCkpOwoKICAgICRsID0gbmV3IE9Mb2coKTsKICAgICR0aGlzLT5zZXRMb2coJGwpOwogICAgJHRoaXMtPmdldExvZygpLT5zZXRTZWN0aW9uKCR3aGVyZSk7CiAgICAkdGhpcy0+Z2V0TG9nKCktPnNldE1vZGVsKCdPSW1hZ2UnKTsKCiAgICAkdGhpcy0+c2V0VG1wRGlyKCRjLT5nZXREaXIoJ29md190bXAnKSk7CiAgICAkdGhpcy0+c2V0SW1nRGlyKCRjLT5nZXREaXIoJ3dlYicpLiJpbWcvIik7CiAgICAkdGhpcy0+c2V0VGh1bWJEaXIoJGMtPmdldERpcignd2ViJykuImltZy90aHVtYi8iKTsKICAgICR0aGlzLT5zZXRJbWFnZVR5cGVzKCRjLT5nZXRJbWFnZVR5cGVzKCkpOwoKICAgICRzaSA9IG5ldyBTaW1wbGVJbWFnZSgpOwogICAgJHRoaXMtPnNldFNJKCRzaSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERlYnVnTW9kZSgkZG0pewogICAgJHRoaXMtPmRlYnVnX21vZGUgPSAkZG07Cgl9CglwdWJsaWMgZnVuY3Rpb24gZ2V0RGVidWdNb2RlKCl7CiAgICByZXR1cm4gJHRoaXMtPmRlYnVnX21vZGU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldExvZygkbCl7CiAgICAkdGhpcy0+bCA9ICRsOwoJfQoJcHVibGljIGZ1bmN0aW9uIGdldExvZygpewogICAgcmV0dXJuICR0aGlzLT5sOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRUbXBEaXIoJHRkKXsKICAgICR0aGlzLT50bXBfZGlyID0gJHRkOwoJfQoJcHVibGljIGZ1bmN0aW9uIGdldFRtcERpcigpewogICAgcmV0dXJuICR0aGlzLT50bXBfZGlyOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRJbWdEaXIoJGlkKXsKICAgICR0aGlzLT5pbWdfZGlyID0gJGlkOwoJfQoJcHVibGljIGZ1bmN0aW9uIGdldEltZ0RpcigpewogICAgcmV0dXJuICR0aGlzLT5pbWdfZGlyOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRUaHVtYkRpcigkdGQpewogICAgJHRoaXMtPnRodW1iX2RpciA9ICR0ZDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRUaHVtYkRpcigpewogICAgcmV0dXJuICR0aGlzLT50aHVtYl9kaXI7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldEltYWdlVHlwZXMoJGl0KXsKICAgICR0aGlzLT5pbWFnZV90eXBlcyA9ICRpdDsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRJbWFnZVR5cGVzKCl7CiAgICByZXR1cm4gJHRoaXMtPmltYWdlX3R5cGVzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRJbWdJZCgkaWkpewogICAgJHRoaXMtPmltZ19pZCA9ICRpaTsKCX0KCXB1YmxpYyBmdW5jdGlvbiBnZXRJbWdJZCgpewogICAgcmV0dXJuICR0aGlzLT5pbWdfaWQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldFNJKCRzaSl7CiAgICAkdGhpcy0+c2kgPSAkc2k7Cgl9CglwdWJsaWMgZnVuY3Rpb24gZ2V0U0koKXsKICAgIHJldHVybiAkdGhpcy0+c2k7Cgl9CgogIHB1YmxpYyBmdW5jdGlvbiBjb3B5SW1nKCRpbWFnZSwgJGltZ0lkKXsKCQkkdG1wZmlsZSA9IHRlbXBuYW0oJHRoaXMtPmdldFRtcERpcigpLCAnaW1wb3J0Jyk7CgkJJGltYWdlVHlwZXMgPSAkdGhpcy0+Z2V0SW1hZ2VUeXBlcygpOwoKCQlpZiAoQGNvcHkoJGltYWdlLCAkdG1wZmlsZSkpCgkJewoJCSAgLy8gQ2FyZ28gbGEgaW1hZ2VuCgkJICAkdGhpcy0+Z2V0U0koKS0+bG9hZCgkdG1wZmlsZSk7CgoJCSAgJHNpemUgPSBnZXRpbWFnZXNpemUoJHRtcGZpbGUpOwoKCQkgIC8vIENyZW8gdGh1bWJzCiAgICAJZm9yZWFjaCAoJGltYWdlVHlwZXMgYXMgJGltYWdlVHlwZSl7CiAgICAgICAgaWYgKCRzaXplWzBdID4gJHNpemVbMV0pewogICAgICAgICAgJHRoaXMtPmdldFNJKCktPnJlc2l6ZVRvV2lkdGgoJGltYWdlVHlwZVsnd2lkdGgnXSk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAkdGhpcy0+Z2V0U0koKS0+cmVzaXplVG9IZWlnaHQoJGltYWdlVHlwZVsnaGVpZ2h0J10pOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+Z2V0U0koKS0+c2F2ZSgkdGhpcy0+Z2V0VGh1bWJEaXIoKS4kaW1nSWQuJy0nLiRpbWFnZVR5cGVbJ25hbWUnXS4nLmpwZycpOwogICAgICB9CgogICAgICAvLyBDb3BpbyBlbCBvcmlnaW5hbAogICAgICBjb3B5KCRpbWFnZSwgJHRoaXMtPmdldEltZ0RpcigpLiRpbWdJZC4nLmpwZycpOwogICAgfQogICAgQHVubGluaygkdG1wZmlsZSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgkaWQ9bnVsbCl7CiAgICBpZiAoIWlzX251bGwoJGlkKSl7CiAgICAgICR0aGlzLT5zZXRJbWdJZCgkaWQpOwogICAgfQoKICAgICRpbWFnZVR5cGVzID0gJHRoaXMtPmdldEltYWdlVHlwZXMoKTsKCiAgICAvLyBCb3JybyB0aHVtYnMKICAgIGZvcmVhY2ggKCRpbWFnZVR5cGVzIGFzICRpbWFnZVR5cGUpewogICAgICAkcm91dGVfaW1nID0gJHRoaXMtPmdldFRodW1iRGlyKCkuJHRoaXMtPmdldEltZ0lkKCkuJy0nLiRpbWFnZVR5cGVbJ25hbWUnXS4nLmpwZyc7CiAgICAgIGlmICgkdGhpcy0+Z2V0RGVidWdNb2RlKCkpewogICAgICAgICR0aGlzLT5nZXRMb2coKS0+cHV0TG9nKCdCb3JybyBpbWFnZW4gdGh1bWIgJy4kcm91dGVfaW1nKTsKICAgICAgfQogICAgICB1bmxpbmsoJHJvdXRlX2ltZyk7CiAgICB9CiAgICAvLyBCb3JybyBlbCBvcmlnaW5hbAogICAgJHJvdXRlX2ltZyA9ICR0aGlzLT5nZXRJbWdEaXIoKS4kdGhpcy0+Z2V0SW1nSWQoKS4nLmpwZyc7CiAgICBpZiAoJHRoaXMtPmdldERlYnVnTW9kZSgpKXsKICAgICAgJHRoaXMtPmdldExvZygpLT5wdXRMb2coJ0JvcnJvIGltYWdlbiBvcmlnaW5hbCcuJHJvdXRlX2ltZyk7CiAgICB9CiAgICB1bmxpbmsoJHJvdXRlX2ltZyk7CgogICAgLy8gQm9ycm8gbGEgZm90byBkZSBCRAogICAgJHNxbCA9ICJERUxFVEUgRlJPTSBgcGhvdG9gIFdIRVJFIGBpZGAgPSAiLiR0aGlzLT5nZXRJbWdJZCgpOwoKICAgIGlmICgkdGhpcy0+Z2V0RGVidWdNb2RlKCkpewogICAgICAkdGhpcy0+Z2V0TG9nKCktPnB1dExvZygkc3FsKTsKICAgIH0KICAgICR0aGlzLT5kYi0+cXVlcnkoJHNxbCk7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZVVybCgkaWQsJHR5cGU9J2Z1bGwnKXsKICAgIGdsb2JhbCAkYzsKCiAgICBpZiAoJHR5cGUgPT0gJ2Z1bGwnKXsKICAgICAgcmV0dXJuICcvJy5zdHJfcmVwbGFjZSgkYy0+Z2V0RGlyKCd3ZWInKSwnJywkYy0+Z2V0RGlyKCd3ZWInKS4iaW1nLyIuJGlkLicuanBnJyk7CiAgICB9CiAgICBlbHNlewogICAgICByZXR1cm4gJy8nLnN0cl9yZXBsYWNlKCRjLT5nZXREaXIoJ3dlYicpLCcnLCRjLT5nZXREaXIoJ3dlYicpLiJpbWcvdGh1bWIvIi4kaWQuJy0nLiR0eXBlLicuanBnJyk7CiAgICB9Cgl9Cn0K',
  'ofw/base/OLog.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT0xvZ3sKICBwcml2YXRlICRzZWN0aW9uICA9ICcnOwogIHByaXZhdGUgJG1vZGVsICAgID0gJyc7CiAgcHJpdmF0ZSAkZnVuY3Rpb24gPSAnJzsKICBwcml2YXRlICRsb2dfZGlyICA9ICcnOwogIAogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7CiAgICBnbG9iYWwgJGM7CiAgICAkdGhpcy0+c2V0TG9nRGlyKCRjLT5nZXREaXIoJ2RlYnVnX2xvZycpKTsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIHNldFNlY3Rpb24oJHMpewogICAgJHRoaXMtPnNlY3Rpb24gPSAkczsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFNlY3Rpb24oKXsKICAgIHJldHVybiAkdGhpcy0+c2VjdGlvbjsKICB9CiAgCiAgcHVibGljIGZ1bmN0aW9uIHNldE1vZGVsKCRtKXsKICAgICR0aGlzLT5tb2RlbCA9ICRtOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0TW9kZWwoKXsKICAgIHJldHVybiAkdGhpcy0+bW9kZWw7CiAgfQogIAogIHB1YmxpYyBmdW5jdGlvbiBzZXRGdW5jdGlvbigkZil7CiAgICAkdGhpcy0+ZnVuY3Rpb24gPSAkZjsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEZ1bmN0aW9uKCl7CiAgICByZXR1cm4gJHRoaXMtPmZ1bmN0aW9uOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gc2V0TG9nRGlyKCRsZCl7CiAgICAkdGhpcy0+bG9nX2RpciA9ICRsZDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldExvZ0RpcigpewogICAgcmV0dXJuICR0aGlzLT5sb2dfZGlyOwogIH0KICAKICBwdWJsaWMgZnVuY3Rpb24gcHV0TG9nKCRkYXRhKXsKICAgICRzdHIgPSAiWyIuZGF0ZSgiWS1tLWQgSDppOnMiLHRpbWUoKSkuIl0gLSAiOwogICAgaWYgKCR0aGlzLT5nZXRTZWN0aW9uKCkgIT0gJycpewogICAgICAkc3RyIC49ICJbUzogIi4kdGhpcy0+Z2V0U2VjdGlvbigpLiJdIC0gIjsKICAgIH0KICAgIGlmICgkdGhpcy0+Z2V0TW9kZWwoKSAhPSAnJyl7CiAgICAgICRzdHIgLj0gIltNOiAiLiR0aGlzLT5nZXRNb2RlbCgpLiJdIC0gIjsKICAgIH0KICAgIGlmICgkdGhpcy0+Z2V0RnVuY3Rpb24oKSAhPSAnJyl7CiAgICAgICRzdHIgLj0gIltGOiAiLiR0aGlzLT5nZXRGdW5jdGlvbigpLiJdIC0gIjsKICAgIH0KICAgICRzdHIgLj0gJGRhdGEuIlxuIjsKICAgIGlmICggZmlsZV9wdXRfY29udGVudHMoJHRoaXMtPmdldExvZ0RpcigpLCRzdHIsRklMRV9BUFBFTkQpID09PSBmYWxzZSl7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoJfQp9',
  'ofw/base/OPDF.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIE9QREZ7DQogIHByaXZhdGUgJGNyZWF0b3IgID0gJyc7DQogIHByaXZhdGUgJGF1dGhvciAgID0gJyc7DQogIHByaXZhdGUgJHRpdGxlICAgID0gJyc7DQogIHByaXZhdGUgJHN1YmplY3QgID0gJyc7DQogIHByaXZhdGUgJGtleXdvcmRzID0gJyc7DQogIHByaXZhdGUgJGZvbnQgICAgID0gJ2hlbHZldGljYSc7DQogIHByaXZhdGUgJHBhZ2VzICAgID0gW107DQogIHByaXZhdGUgJHBkZl9vYmogID0gbnVsbDsNCiAgcHJpdmF0ZSAkcGRmX2RpciAgPSAnJzsNCg0KICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkZGF0YT1udWxsKXsNCiAgICBpZiAoIWlzX251bGwoJGRhdGEpICYmIGlzX2FycmF5KCRkYXRhKSl7DQogICAgICAkdGhpcy0+c2V0Q3JlYXRvciggIGFycmF5X2tleV9leGlzdHMoJ2NyZWF0b3InLCAgJGRhdGEpPyRkYXRhWydjcmVhdG9yJ10gIDogJycgKTsNCiAgICAgICR0aGlzLT5zZXRBdXRob3IoICAgYXJyYXlfa2V5X2V4aXN0cygnYXV0aG9yJywgICAkZGF0YSk/JGRhdGFbJ2F1dGhvciddICAgOiAnJyApOw0KICAgICAgJHRoaXMtPnNldFRpdGxlKCAgICBhcnJheV9rZXlfZXhpc3RzKCd0aXRsZScsICAgICRkYXRhKT8kZGF0YVsndGl0bGUnXSAgICA6ICcnICk7DQogICAgICAkdGhpcy0+c2V0U3ViamVjdCggIGFycmF5X2tleV9leGlzdHMoJ3N1YmplY3QnLCAgJGRhdGEpPyRkYXRhWydzdWJqZWN0J10gIDogJycgKTsNCiAgICAgICR0aGlzLT5zZXRLZXl3b3JkcyggYXJyYXlfa2V5X2V4aXN0cygna2V5d29yZHMnLCAkZGF0YSk/JGRhdGFbJ2tleXdvcmRzJ10gOiAnJyApOw0KICAgICAgJHRoaXMtPnNldEZvbnQoICAgICBhcnJheV9rZXlfZXhpc3RzKCdmb250JywgICAgICRkYXRhKT8kZGF0YVsnZm9udCddICAgICA6ICdoZWx2ZXRpY2EnICk7DQogICAgICAkdGhpcy0+c2V0UGRmRGlyKCAgIGFycmF5X2tleV9leGlzdHMoJ3J1dGFfcGRmJywgJGRhdGEpPyRkYXRhWydydXRhX3BkZiddIDogJycgKTsNCiAgICB9DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0Q3JlYXRvcigkYyl7DQogICAgJHRoaXMtPmNyZWF0b3IgPSAkYzsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q3JlYXRvcigpew0KICAgIHJldHVybiAkdGhpcy0+Y3JlYXRvcjsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRBdXRob3IoJGEpew0KICAgICR0aGlzLT5hdXRob3IgPSAkYTsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0QXV0aG9yKCl7DQogICAgcmV0dXJuICR0aGlzLT5hdXRob3I7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0VGl0bGUoJHQpew0KICAgICR0aGlzLT50aXRsZSA9ICR0Ow0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRUaXRsZSgpew0KICAgIHJldHVybiAkdGhpcy0+dGl0bGU7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0U3ViamVjdCgkcyl7DQogICAgJHRoaXMtPnN1YmplY3QgPSAkczsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3ViamVjdCgpew0KICAgIHJldHVybiAkdGhpcy0+c3ViamVjdDsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRLZXl3b3Jkcygkayl7DQogICAgJHRoaXMtPmtleXdvcmRzID0gJGs7DQogIH0NCiAgcHVibGljIGZ1bmN0aW9uIGdldEtleXdvcmRzKCl7DQogICAgcmV0dXJuICR0aGlzLT5rZXl3b3JkczsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRGb250KCRmKXsNCiAgICAkdGhpcy0+Zm9udCA9ICRmOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRGb250KCl7DQogICAgcmV0dXJuICR0aGlzLT5mb250Ow0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIHNldFBhZ2VzKCRwKXsNCiAgICAkdGhpcy0+cGFnZXMgPSAkcDsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFnZXMoKXsNCiAgICByZXR1cm4gJHRoaXMtPnBhZ2VzOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGFkZFBhZ2UoJHApew0KICAgICRwYWdlcyA9ICR0aGlzLT5nZXRQYWdlcygpOw0KICAgIGFycmF5X3B1c2goJHBhZ2VzLCRwKTsNCiAgICAkdGhpcy0+c2V0UGFnZXMoJHBhZ2VzKTsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRQZGZPYmooJHBvKXsNCiAgICAkdGhpcy0+cGRmX29iaiA9ICRwbzsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGRmT2JqKCl7DQogICAgcmV0dXJuICR0aGlzLT5wZGZfb2JqOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIHNldFBkZkRpcigkcGQpew0KICAgICR0aGlzLT5wZGZfZGlyID0gJHBkOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRQZGZEaXIoKXsNCiAgICByZXR1cm4gJHRoaXMtPnBkZl9kaXI7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gcmVuZGVyKCl7DQogICAgJHBkZiA9IG5ldyBUQ1BERihQREZfUEFHRV9PUklFTlRBVElPTiwgUERGX1VOSVQsIFBERl9QQUdFX0ZPUk1BVCwgdHJ1ZSwgJ1VURi04JywgZmFsc2UpOw0KDQogICAgLy8gc2V0IGRvY3VtZW50IGluZm9ybWF0aW9uDQogICAgJHBkZi0+U2V0Q3JlYXRvcigkdGhpcy0+Z2V0Q3JlYXRvcigpKTsNCiAgICAkcGRmLT5TZXRBdXRob3IoJHRoaXMtPmdldEF1dGhvcigpKTsNCiAgICAkcGRmLT5TZXRUaXRsZSgkdGhpcy0+Z2V0VGl0bGUoKSk7DQogICAgJHBkZi0+U2V0U3ViamVjdCgkdGhpcy0+Z2V0U3ViamVjdCgpKTsNCiAgICAkcGRmLT5TZXRLZXl3b3JkcygkdGhpcy0+Z2V0S2V5d29yZHMoKSk7DQoNCiAgICAvLyBzZXQgZGVmYXVsdCBoZWFkZXIgZGF0YQ0KICAgICRwZGYtPlNldEhlYWRlckRhdGEoUERGX0hFQURFUl9MT0dPLCBQREZfSEVBREVSX0xPR09fV0lEVEgsIFBERl9IRUFERVJfVElUTEUuJyAwNjEnLCBQREZfSEVBREVSX1NUUklORyk7DQoNCiAgICAvLyBzZXQgaGVhZGVyIGFuZCBmb290ZXIgZm9udHMNCiAgICAkcGRmLT5zZXRIZWFkZXJGb250KFtQREZfRk9OVF9OQU1FX01BSU4sICcnLCBQREZfRk9OVF9TSVpFX01BSU5dKTsNCiAgICAkcGRmLT5zZXRGb290ZXJGb250KFtQREZfRk9OVF9OQU1FX0RBVEEsICcnLCBQREZfRk9OVF9TSVpFX0RBVEFdKTsNCg0KICAgIC8vIHNldCBkZWZhdWx0IG1vbm9zcGFjZWQgZm9udA0KICAgICRwZGYtPlNldERlZmF1bHRNb25vc3BhY2VkRm9udChQREZfRk9OVF9NT05PU1BBQ0VEKTsNCg0KICAgIC8vIHNldCBtYXJnaW5zDQogICAgJHBkZi0+U2V0TWFyZ2lucyhQREZfTUFSR0lOX0xFRlQsIFBERl9NQVJHSU5fVE9QLCBQREZfTUFSR0lOX1JJR0hUKTsNCiAgICAkcGRmLT5TZXRIZWFkZXJNYXJnaW4oUERGX01BUkdJTl9IRUFERVIpOw0KICAgICRwZGYtPlNldEZvb3Rlck1hcmdpbihQREZfTUFSR0lOX0ZPT1RFUik7DQoNCiAgICAvLyBzZXQgYXV0byBwYWdlIGJyZWFrcw0KICAgICRwZGYtPlNldEF1dG9QYWdlQnJlYWsoVFJVRSwgUERGX01BUkdJTl9CT1RUT00pOw0KDQogICAgLy8gc2V0IGltYWdlIHNjYWxlIGZhY3Rvcg0KICAgICRwZGYtPnNldEltYWdlU2NhbGUoUERGX0lNQUdFX1NDQUxFX1JBVElPKTsNCg0KICAgIC8vIHNldCBmb250DQogICAgJHBkZi0+U2V0Rm9udCgkdGhpcy0+Z2V0Rm9udCgpLCAnJywgMTApOw0KDQogICAgJHBhZ2VzID0gJHRoaXMtPmdldFBhZ2VzKCk7DQogICAgZm9yZWFjaCAoJHBhZ2VzIGFzICRwKXsNCiAgICAgIC8vIGFkZCBhIHBhZ2UNCiAgICAgICRwZGYtPkFkZFBhZ2UoKTsNCg0KICAgICAgLy8gb3V0cHV0IHRoZSBIVE1MIGNvbnRlbnQNCiAgICAgICRwZGYtPndyaXRlSFRNTCgkcCwgdHJ1ZSwgZmFsc2UsIHRydWUsIGZhbHNlLCAnJyk7DQogICAgfQ0KDQogICAgLy8gcmVzZXQgcG9pbnRlciB0byB0aGUgbGFzdCBwYWdlDQogICAgJHBkZi0+bGFzdFBhZ2UoKTsNCg0KICAgICR0aGlzLT5zZXRQZGZPYmooJHBkZik7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGRmKCl7DQogICAgJHRoaXMtPnJlbmRlcigpOw0KICAgICRwZGYgPSAkdGhpcy0+Z2V0UGRmT2JqKCk7DQogICAgJHBkZi0+T3V0cHV0KCR0aGlzLT5nZXRQZGZEaXIoKSwgJ0knKTsNCiAgfQ0KfQ0K',
  'ofw/base/OService.php' => 'data:text/x-php;base64,PD9waHAKICBjbGFzcyBPU2VydmljZXsKICAgIHByb3RlY3RlZCAkY29udHJvbGxlciA9IG51bGw7CgogICAgcHVibGljIGZpbmFsIGZ1bmN0aW9uIHNldENvbnRyb2xsZXIoJGNvbnRyb2xsZXIpewogICAgICAkdGhpcy0+Y29udHJvbGxlciA9ICRjb250cm9sbGVyOwogICAgfQoKICAgIHB1YmxpYyBmaW5hbCBmdW5jdGlvbiBnZXRDb250cm9sbGVyKCl7CiAgICAgIHJldHVybiAkdGhpcy0+Y29udHJvbGxlcjsKICAgIH0KICB9Cg==',
  'ofw/base/OSession.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT1Nlc3Npb257CiAgcHJpdmF0ZSAkZGVidWdfbW9kZSA9IGZhbHNlOwoJcHJpdmF0ZSAkbCA9IG51bGw7CiAgcHJpdmF0ZSAkcGFyYW1zID0gW107CgogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7CiAgICBnbG9iYWwgJGMsICR3aGVyZTsKICAgICR0aGlzLT5zZXREZWJ1Z01vZGUoJGMtPmdldERlYnVnTW9kZSgpKTsKCiAgICAkbCA9IG5ldyBPTG9nKCk7CiAgICAkdGhpcy0+c2V0TG9nKCRsKTsKICAgICR0aGlzLT5nZXRMb2coKS0+c2V0U2VjdGlvbigkd2hlcmUpOwogICAgJHRoaXMtPmdldExvZygpLT5zZXRNb2RlbCgnT1Nlc3Npb24nKTsKCiAgICBpZiAoaXNzZXQoJF9TRVNTSU9OWydwYXJhbXMnXSkpewogICAgICAkdGhpcy0+c2V0UGFyYW1zKHVuc2VyaWFsaXplKCRfU0VTU0lPTlsncGFyYW1zJ10pKTsKICAgIH0KICAgIGVsc2V7CiAgICAgICR0aGlzLT5zZXRQYXJhbXMoW10pOwogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldERlYnVnTW9kZSgkZG0pewogICAgJHRoaXMtPmRlYnVnX21vZGUgPSAkZG07Cgl9CglwdWJsaWMgZnVuY3Rpb24gZ2V0RGVidWdNb2RlKCl7CiAgICByZXR1cm4gJHRoaXMtPmRlYnVnX21vZGU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldExvZygkbCl7CiAgICAkdGhpcy0+bCA9ICRsOwoJfQoJcHVibGljIGZ1bmN0aW9uIGdldExvZygpewogICAgcmV0dXJuICR0aGlzLT5sOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRQYXJhbXMoJHApewogICAgJHRoaXMtPnBhcmFtcyA9ICRwOwogICAgJF9TRVNTSU9OWydwYXJhbXMnXSA9IHNlcmlhbGl6ZSgkcCk7Cgl9CglwdWJsaWMgZnVuY3Rpb24gZ2V0UGFyYW1zKCl7CiAgICByZXR1cm4gJHRoaXMtPnBhcmFtczsKCX0KCglwdWJsaWMgZnVuY3Rpb24gYWRkUGFyYW0oJGtleSwkdmFsdWUpewogICAgJHBhcmFtcyA9ICR0aGlzLT5nZXRQYXJhbXMoKTsKICAgICRwYXJhbXNbJGtleV0gPSAkdmFsdWU7CiAgICAkdGhpcy0+c2V0UGFyYW1zKCRwYXJhbXMpOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFyYW0oJGtleSl7CiAgICAkcGFyYW1zID0gJHRoaXMtPmdldFBhcmFtcygpOwogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGtleSwgJHBhcmFtcykpewogICAgICByZXR1cm4gJHBhcmFtc1ska2V5XTsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHB1YmxpYyBmdW5jdGlvbiByZW1vdmVQYXJhbSgka2V5KXsKICAgICRwYXJhbXMgPSAkdGhpcy0+Z2V0UGFyYW1zKCk7CiAgICB1bnNldCgkcGFyYW1zWyRrZXldKTsKICAgICR0aGlzLT5zZXRQYXJhbXMoJHBhcmFtcyk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gY2xlYW5TZXNzaW9uKCl7CiAgICB1bnNldCgkX1NFU1NJT05bJ3BhcmFtcyddKTsKICAgICR0aGlzLT5zZXRQYXJhbXMoW10pOwogIH0KfQo=',
  'ofw/base/OTemplate.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT1RlbXBsYXRlewogIHByaXZhdGUgJGRlYnVnX21vZGUgICAgPSBmYWxzZTsKICBwcml2YXRlICRsICAgICAgICAgICAgID0gbnVsbDsKICBwcml2YXRlICR0ZW1wbGF0ZXNfZGlyID0gJyc7CiAgcHJpdmF0ZSAkdGVtcGxhdGUgICAgICA9IG51bGw7CiAgcHJpdmF0ZSAkYWN0aW9uICAgICAgICA9ICcnOwogIHByaXZhdGUgJG1vZHVsZSAgICAgICAgPSAnJzsKICBwcml2YXRlICR0eXBlICAgICAgICAgID0gJ2h0bWwnOwogIHByaXZhdGUgJGxheW91dCAgICAgICAgPSAnJzsKICBwcml2YXRlICRwYXJhbXMgICAgICAgID0gYXJyYXkoKTsKICBwcml2YXRlICRmb2xkZXJfdXJsICAgID0gJyc7CiAgcHJpdmF0ZSAkY3NzX2xpc3QgICAgICA9IGFycmF5KCk7CiAgcHJpdmF0ZSAkZXh0X2Nzc19saXN0ICA9IGFycmF5KCk7CiAgcHJpdmF0ZSAkbXFfY3NzX2xpc3QgICA9IGFycmF5KCk7CiAgcHJpdmF0ZSAkanNfbGlzdCAgICAgICA9IGFycmF5KCk7CiAgcHJpdmF0ZSAkZXh0X2pzX2xpc3QgICA9IGFycmF5KCk7CiAgcHJpdmF0ZSAkdGl0bGUgICAgICAgICA9ICcnOwogIHByaXZhdGUgJGpzb24gICAgICAgICAgPSBmYWxzZTsKICBwcml2YXRlICRsYW5nICAgICAgICAgID0gJyc7CiAgcHJpdmF0ZSAkdHJhbnNsYXRvciAgICA9IG51bGw7CiAgcHJpdmF0ZSAkcGFja2FnZSAgICAgICA9IG51bGw7CgogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7CiAgICBnbG9iYWwgJGMsICR3aGVyZTsKICAgICR0aGlzLT5zZXREZWJ1Z01vZGUoJGMtPmdldERlYnVnTW9kZSgpKTsKCiAgICAkbCA9IG5ldyBPTG9nKCk7CiAgICAkdGhpcy0+c2V0TG9nKCRsKTsKICAgICR0aGlzLT5nZXRMb2coKS0+c2V0U2VjdGlvbigkd2hlcmUpOwogICAgJHRoaXMtPmdldExvZygpLT5zZXRNb2RlbCgnT1RlbXBsYXRlJyk7CgogICAgJHRoaXMtPnNldFRlbXBsYXRlc0RpciggJGMtPmdldERpcignYXBwX3RlbXBsYXRlJykgKTsKICAgICR0aGlzLT5zZXRUaXRsZSggJGMtPmdldERlZmF1bHRUaXRsZSgpICk7CiAgICAkdGhpcy0+c2V0Rm9sZGVyVXJsKCAkYy0+Z2V0VXJsKCdmb2xkZXInKSApOwoKICAgICR0aGlzLT5zZXRMYW5nKCAkYy0+Z2V0TGFuZygpICk7CgogICAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCd0cmFuc2xhdGUnKSl7CiAgICAgICR0ciA9IG5ldyBPVHJhbnNsYXRlKCk7CiAgICAgICR0aGlzLT5zZXRUcmFuc2xhdG9yKCR0cik7CiAgICB9CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0RGVidWdNb2RlKCRkbSl7CiAgICAkdGhpcy0+ZGVidWdfbW9kZSA9ICRkbTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldERlYnVnTW9kZSgpewogICAgcmV0dXJuICR0aGlzLT5kZWJ1Z19tb2RlOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldExvZygkbCl7CiAgICAkdGhpcy0+bCA9ICRsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0TG9nKCl7CiAgICByZXR1cm4gJHRoaXMtPmw7CiAgfQoKICBmdW5jdGlvbiBzZXRUZW1wbGF0ZXNEaXIoJHRkKXsKICAgICR0aGlzLT50ZW1wbGF0ZXNfZGlyID0gJHRkOwogIH0KICBmdW5jdGlvbiBnZXRUZW1wbGF0ZXNEaXIoKXsKICAgIHJldHVybiAkdGhpcy0+dGVtcGxhdGVzX2RpcjsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRUZW1wbGF0ZSgkdCl7CiAgICAkdGhpcy0+dGVtcGxhdGUgPSAkdDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFRlbXBsYXRlKCl7CiAgICByZXR1cm4gJHRoaXMtPnRlbXBsYXRlOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldEFjdGlvbigkYSl7CiAgICAkdGhpcy0+YWN0aW9uID0gJGE7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRBY3Rpb24oKXsKICAgIHJldHVybiAkdGhpcy0+YWN0aW9uOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldE1vZHVsZSgkbSl7CiAgICAkdGhpcy0+bW9kdWxlID0gJG07CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRNb2R1bGUoKXsKICAgIHJldHVybiAkdGhpcy0+bW9kdWxlOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldFR5cGUoJHQpewogICAgJHRoaXMtPnR5cGUgPSAkdDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFR5cGUoKXsKICAgIHJldHVybiAkdGhpcy0+dHlwZTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRQYXJhbXMoJHApewogICAgJHRoaXMtPnBhcmFtcyA9ICRwOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFyYW1zKCl7CiAgICByZXR1cm4gJHRoaXMtPnBhcmFtczsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRGb2xkZXJVcmwoJGZ1KXsKICAgICR0aGlzLT5mb2xkZXJfdXJsID0gJGZ1OwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Rm9sZGVyVXJsKCl7CiAgICByZXR1cm4gJHRoaXMtPmZvbGRlcl91cmw7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TGF5b3V0KCRsKXsKICAgIGlmICgkbCA9PT0gZmFsc2UpewogICAgICAkbCA9ICcnOwogICAgfQogICAgJHRoaXMtPmxheW91dCA9ICRsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0TGF5b3V0KCl7CiAgICByZXR1cm4gJHRoaXMtPmxheW91dDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGxvYWRMYXlvdXQoJGxheW91dCl7CiAgICAkdGhpcy0+c2V0TGF5b3V0KCBmaWxlX2dldF9jb250ZW50cygkdGhpcy0+Z2V0VGVtcGxhdGVzRGlyKCkuJ2xheW91dC8nLiRsYXlvdXQuJy5waHAnKSApOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldENzc0xpc3QoJGNsKXsKICAgICR0aGlzLT5jc3NfbGlzdCA9ICRjbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldENzc0xpc3QoKXsKICAgIHJldHVybiAkdGhpcy0+Y3NzX2xpc3Q7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0RXh0Q3NzTGlzdCgkZWNsKXsKICAgICR0aGlzLT5leHRfY3NzX2xpc3QgPSAkZWNsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RXh0Q3NzTGlzdCgpewogICAgcmV0dXJuICR0aGlzLT5leHRfY3NzX2xpc3Q7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TVFDc3NMaXN0KCRlY2wpewogICAgJHRoaXMtPm1xX2Nzc19saXN0ID0gJGVjbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldE1RQ3NzTGlzdCgpewogICAgcmV0dXJuICR0aGlzLT5tcV9jc3NfbGlzdDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRKc0xpc3QoJGpsKXsKICAgICR0aGlzLT5qc19saXN0ID0gJGpsOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0SnNMaXN0KCl7CiAgICByZXR1cm4gJHRoaXMtPmpzX2xpc3Q7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0RXh0SnNMaXN0KCRlamwpewogICAgJHRoaXMtPmV4dF9qc19saXN0ID0gJGVqbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldEV4dEpzTGlzdCgpewogICAgcmV0dXJuICR0aGlzLT5leHRfanNfbGlzdDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRUaXRsZSgkdCl7CiAgICAkdGhpcy0+dGl0bGUgPSAkdDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFRpdGxlKCl7CiAgICByZXR1cm4gJHRoaXMtPnRpdGxlOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldExhbmcoJGwpewogICAgJHRoaXMtPmxhbmcgPSAkbDsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldExhbmcoKXsKICAgIHJldHVybiAkdGhpcy0+bGFuZzsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRUcmFuc2xhdG9yKCR0KXsKICAgICR0aGlzLT50cmFuc2xhdG9yID0gJHQ7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRUcmFuc2xhdG9yKCl7CiAgICByZXR1cm4gJHRoaXMtPnRyYW5zbGF0b3I7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0UGFja2FnZSgkcCl7CiAgICBnbG9iYWwgJGM7CiAgICAkdGhpcy0+cGFja2FnZSA9ICRwOwogICAgJHRoaXMtPnNldFRlbXBsYXRlc0RpcigkYy0+Z2V0RGlyKCdvZndfcGFja2FnZXMnKS4kcC4nL3RlbXBsYXRlcy8nKTsKICB9CiAgcHVibGljIGZ1bmN0aW9uIGdldFBhY2thZ2UoKXsKICAgIHJldHVybiAkdGhpcy0+cGFja2FnZTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGQoJGtleSwkdmFsdWUsJGV4dHJhPW51bGwpewogICAgJHBhcmFtcyA9ICR0aGlzLT5nZXRQYXJhbXMoKTsKICAgICR0ZW1wID0gYXJyYXkoJ25hbWUnID0+ICRrZXksICd2YWx1ZScgPT4gJHZhbHVlKTsKICAgIGlmICghaXNfbnVsbCgkZXh0cmEpKXsKICAgICAgJHRlbXBbJ2V4dHJhJ10gPSAkZXh0cmE7CiAgICB9CiAgICBhcnJheV9wdXNoKCRwYXJhbXMsICR0ZW1wKTsKCiAgICAkdGhpcy0+c2V0UGFyYW1zKCRwYXJhbXMpOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZENzcygkbmV3X2Nzcyl7CiAgICAkY3NzID0gJHRoaXMtPmdldENzc0xpc3QoKTsKICAgIGFycmF5X3B1c2goJGNzcywgJG5ld19jc3MpOwoKICAgICR0aGlzLT5zZXRDc3NMaXN0KCRjc3MpOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZEV4dENzcygkbmV3X2V4dF9jc3MpewogICAgJGV4dF9jc3MgPSAkdGhpcy0+Z2V0RXh0Q3NzTGlzdCgpOwogICAgYXJyYXlfcHVzaCgkZXh0X2NzcywgJG5ld19leHRfY3NzKTsKCiAgICAkdGhpcy0+c2V0RXh0Q3NzTGlzdCgkZXh0X2Nzcyk7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gYWRkTVFDc3MoJG1xLCRuZXdfbXFfY3NzKXsKICAgICRtcV9jc3MgPSAkdGhpcy0+Z2V0TVFDc3NMaXN0KCk7CiAgICAkbXFfY3NzWyRtcV0gPSAkbmV3X21xX2NzczsKCiAgICAkdGhpcy0+c2V0TVFDc3NMaXN0KCRtcV9jc3MpOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGFkZEpzKCRuZXdfanMpewogICAgJGpzID0gJHRoaXMtPmdldEpzTGlzdCgpOwogICAgYXJyYXlfcHVzaCgkanMsICRuZXdfanMpOwoKICAgICR0aGlzLT5zZXRKc0xpc3QoJGpzKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRFeHRKcygkbmV3X2V4dF9qcyl7CiAgICAkZXh0X2pzID0gJHRoaXMtPmdldEV4dEpzTGlzdCgpOwogICAgYXJyYXlfcHVzaCgkZXh0X2pzLCAkbmV3X2V4dF9qcyk7CgogICAgJHRoaXMtPnNldEV4dEpzTGlzdCgkZXh0X2pzKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBhZGRQYXJ0aWFsKCR3aGVyZSwgJG5hbWUsICR2YWx1ZXM9YXJyYXkoKSl7CiAgICAkcGFydGlhbF9maWxlID0gJHRoaXMtPmdldFRlbXBsYXRlc0RpcigpLidwYXJ0aWFscy8nLiRuYW1lLicucGhwJzsKICAgIGlmIChmaWxlX2V4aXN0cygkcGFydGlhbF9maWxlKSl7CiAgICAgIG9iX3N0YXJ0KCk7CiAgICAgIGluY2x1ZGUoJHBhcnRpYWxfZmlsZSk7CiAgICAgICRvdXRwdXQgPSBvYl9nZXRfY29udGVudHMoKTsKICAgICAgb2JfZW5kX2NsZWFuKCk7CiAgICB9CiAgICBlbHNlewogICAgICAkb3V0cHV0ID0gJ0VSUk9SOiBObyBleGlzdGUgZWwgYXJjaGl2byAnLiRuYW1lOwogICAgfQogICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCdleHRyYScsJHZhbHVlcykpewogICAgICAkdGhpcy0+YWRkKCR3aGVyZSwkb3V0cHV0KTsKICAgIH0KICAgIGVsc2V7CiAgICAgICR0aGlzLT5hZGQoJHdoZXJlLCRvdXRwdXQsJHZhbHVlc1snZXh0cmEnXSk7CiAgICB9CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gcmVhZFBhcnRpYWwoJG5hbWUsICR2YWx1ZXMpewogICAgJGZpbGVuYW1lID0gJHRoaXMtPmdldFRlbXBsYXRlc0RpcigpLidwYXJ0aWFscy8nLiRuYW1lLicucGhwJzsKICAgIGlmICghZmlsZV9leGlzdHMoJGZpbGVuYW1lKSl7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICAgIG9iX3N0YXJ0KCk7CiAgICBpbmNsdWRlKCRmaWxlbmFtZSk7CiAgICAkb3V0cHV0ID0gb2JfZ2V0X2NvbnRlbnRzKCk7CiAgICBvYl9lbmRfY2xlYW4oKTsKCiAgICBmb3JlYWNoICgkdmFsdWVzIGFzICRrZXkgPT4gJHZhbHVlKXsKICAgICAgaWYgKCFpc19vYmplY3QoJHZhbHVlKSAmJiAhaXNfYXJyYXkoJHZhbHVlKSl7CiAgICAgICAgJG91dHB1dCA9IHN0cl9yZXBsYWNlKGFycmF5KCd7eycuJGtleS4nfX0nKSwgJHZhbHVlLCAkb3V0cHV0KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkb3V0cHV0OwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHByb2Nlc3MoKXsKICAgIGdsb2JhbCAkYzsKICAgICR0ZW1wbGF0ZSA9ICR0aGlzLT5nZXRUZW1wbGF0ZXNEaXIoKS4kdGhpcy0+Z2V0TW9kdWxlKCkuJy8nLiR0aGlzLT5nZXRBY3Rpb24oKS4nLnBocCc7CgogICAgJHRoaXMtPnNldFRlbXBsYXRlKGZpbGVfZ2V0X2NvbnRlbnRzKCR0ZW1wbGF0ZSkpOwoKICAgICR0aGlzLT5zZXRFeHRDc3NMaXN0KCBhcnJheV9tZXJnZSgkdGhpcy0+Z2V0RXh0Q3NzTGlzdCgpLCRjLT5nZXRFeHRDc3NMaXN0KCkpICk7CiAgICAkdGhpcy0+c2V0Q3NzTGlzdCggYXJyYXlfbWVyZ2UoJHRoaXMtPmdldENzc0xpc3QoKSwkYy0+Z2V0Q3NzTGlzdCgpKSApOwogICAgJHRoaXMtPnNldEpzTGlzdCggYXJyYXlfbWVyZ2UoJHRoaXMtPmdldEpzTGlzdCgpLCRjLT5nZXRKc0xpc3QoKSkgKTsKICAgICR0aGlzLT5zZXRFeHRKc0xpc3QoIGFycmF5X21lcmdlKCR0aGlzLT5nZXRFeHRKc0xpc3QoKSwkYy0+Z2V0RXh0SnNMaXN0KCkpICk7CgogICAgJHN0ciAgICAgID0gJHRoaXMtPmdldExheW91dCgpOwogICAgJHAgICAgICAgID0gJHRoaXMtPmdldFBhcmFtcygpOwogICAgJGNzcyAgICAgID0gJHRoaXMtPmdldENzc0xpc3QoKTsKICAgICRleHRfY3NzICA9ICR0aGlzLT5nZXRFeHRDc3NMaXN0KCk7CiAgICAkbXFfY3NzICAgPSAkdGhpcy0+Z2V0TVFDc3NMaXN0KCk7CiAgICAkanMgICAgICAgPSAkdGhpcy0+Z2V0SnNMaXN0KCk7CiAgICAkZXh0X2pzICAgPSAkdGhpcy0+Z2V0RXh0SnNMaXN0KCk7CiAgICAkdGl0bGUgICAgPSAkdGhpcy0+Z2V0VGl0bGUoKTsKICAgICRzdHJfYm9keSA9ICR0aGlzLT5nZXRUZW1wbGF0ZSgpOwoKICAgIC8vIFNpIG5vIGVzIEpTT04sIHBvciBkZWZlY3RvLCBhw7FhZG8gdGl0dWxvLCBjc3MgeSBqcwogICAgaWYgKCR0aGlzLT5nZXRUeXBlKCk9PT0naHRtbCcpewogICAgICAvLyBBw7FhZG8gdGl0dWxvIGEgbGEgcGFnaW5hCiAgICAgICRzdHIgPSBzdHJfcmVwbGFjZShhcnJheSgne3t0aXRsZX19JyksICR0aXRsZSwgJHN0cik7CgogICAgICAvLyBBw7FhZG8gY3NzCiAgICAgICRzdHJfY3NzID0gJyc7CiAgICAgICRjc3NfYmFzZSA9ICcvJy4kdGhpcy0+Z2V0Rm9sZGVyVXJsKCkuJ2Nzcy8nOwogICAgICBpZiAoIWlzX251bGwoJHRoaXMtPmdldFBhY2thZ2UoKSkpewogICAgICAgICRjc3NfYmFzZSA9ICcvJy4kdGhpcy0+Z2V0Rm9sZGVyVXJsKCkuJ3BrZy8nLiR0aGlzLT5nZXRQYWNrYWdlKCkuJy9jc3MvJzsKICAgICAgfQogICAgICBmb3JlYWNoICgkY3NzIGFzICRjc3NfaXRlbSl7CiAgICAgICAgJGNzc19kYXRhID0gYXJyYXkoKTsKICAgICAgICBpZiAoc3RyaXBvcygkY3NzX2l0ZW0sICcjJykpewogICAgICAgICAgJGNzc19kYXRhID0gZXhwbG9kZSgnIycsICRjc3NfaXRlbSk7CiAgICAgICAgICAkY3NzX2l0ZW0gPSBhcnJheV9zaGlmdCgkY3NzX2RhdGEpOwogICAgICAgIH0KICAgICAgICAkc3RyX2NzcyAuPSAnPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBtZWRpYT0ic2NyZWVuIiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iJy4kY3NzX2Jhc2UuJGNzc19pdGVtLicuY3NzIiAnOwogICAgICAgIGZvcmVhY2ggKCRjc3NfZGF0YSBhcyAkY3NzX2RhdGFfaXRlbSl7CiAgICAgICAgICAkY3NzX2V4dHJhX2RhdGEgPSBleHBsb2RlKCc9JywgJGNzc19kYXRhX2l0ZW0pOwogICAgICAgICAgJHN0cl9jc3MgLj0gJGNzc19leHRyYV9kYXRhWzBdLic9IicuJGNzc19leHRyYV9kYXRhWzFdLiciICc7CiAgICAgICAgfQogICAgICAgICRzdHJfY3NzIC49ICcgLz4nLiJcbiI7CiAgICAgIH0KCiAgICAgIC8vIEHDsWFkbyBjc3MgZXh0ZXJub3MKICAgICAgJHN0cl9leHRfY3NzID0gJyc7CiAgICAgIGZvcmVhY2ggKCRleHRfY3NzIGFzICRleHRfY3NzX2l0ZW0pewogICAgICAgICRzdHJfZXh0X2NzcyAuPSAnPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBtZWRpYT0ic2NyZWVuIiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iJy4kZXh0X2Nzc19pdGVtLiciIC8+Jy4iXG4iOwogICAgICB9CgogICAgICAvLyBBw7FhZG8gYW1ib3MgY3NzCiAgICAgICRzdHJfY3NzIC49ICRzdHJfZXh0X2NzczsKCiAgICAgIC8vIEHDsWFkbyBjc3MgY29uIG1lZGlhIHF1ZXJ5cwogICAgICAkc3RyX21xX2NzcyA9ICcnOwogICAgICBmb3JlYWNoICgkbXFfY3NzIGFzICRtcSA9PiAkY3NzX2l0ZW0pewogICAgICAgICRzdHJfbXFfY3NzIC49ICc8bGluayByZWw9InN0eWxlc2hlZXQiIG1lZGlhPSInLiRtcS4nIiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iLycuJHRoaXMtPmdldEZvbGRlclVybCgpLidjc3MvJy4kY3NzX2l0ZW0uJy5jc3MiIC8+Jy4iXG4iOwogICAgICB9CgogICAgICAvLyBBw7FhZG8gYWwgY3NzCiAgICAgICRzdHJfY3NzIC49ICRzdHJfbXFfY3NzOwoKICAgICAgJHN0ciA9IHN0cl9yZXBsYWNlKGFycmF5KCd7e2Nzc319JyksICRzdHJfY3NzLCAkc3RyKTsKCiAgICAgIC8vIEHDsWFkbyBqcwogICAgICAkc3RyX2pzID0gJyc7CiAgICAgICRqc19iYXNlID0gJy8nLiR0aGlzLT5nZXRGb2xkZXJVcmwoKS4nanMvJzsKICAgICAgaWYgKCFpc19udWxsKCR0aGlzLT5nZXRQYWNrYWdlKCkpKXsKICAgICAgICAkanNfYmFzZSA9ICcvJy4kdGhpcy0+Z2V0Rm9sZGVyVXJsKCkuJ3BrZy8nLiR0aGlzLT5nZXRQYWNrYWdlKCkuJy9qcy8nOwogICAgICB9CiAgICAgIGZvcmVhY2ggKCRqcyBhcyAkanNfaXRlbSl7CiAgICAgICAgJHN0cl9qcyAuPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJy4kanNfYmFzZS4kanNfaXRlbS4nLmpzIj48L3NjcmlwdD4nLiJcbiI7CiAgICAgIH0KCiAgICAgIC8vIEHDsWFkbyBqcyBleHRlcm5vcwogICAgICAkc3RyX2V4dF9qcyA9ICcnOwogICAgICBmb3JlYWNoICgkZXh0X2pzIGFzICRleHRfanNfaXRlbSl7CiAgICAgICAgJHN0cl9leHRfanMgLj0gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9IicuJGV4dF9qc19pdGVtLiciPjwvc2NyaXB0PicuIlxuIjsKICAgICAgfQoKICAgICAgLy8gVW5vIGFtYm9zIGpzCiAgICAgICRzdHJfanMgLj0gJHN0cl9leHRfanM7CgogICAgICAkc3RyID0gc3RyX3JlcGxhY2UoYXJyYXkoJ3t7anN9fScpLCAkc3RyX2pzLCAkc3RyKTsKICAgIH0KCiAgICAvLyBBw7FhZG8gcGFyYW1ldHJvcyBhbCBjdWVycG8KICAgIGZvcmVhY2ggKCRwIGFzICRwYXJhbSl7CiAgICAgICRzdWJfdmFsdWUgPSAoJHRoaXMtPmdldFR5cGUoKSE9PSdodG1sJyk/dXJsZW5jb2RlKCRwYXJhbVsndmFsdWUnXSk6JHBhcmFtWyd2YWx1ZSddOwogICAgICBpZiAoaXNzZXQoJHBhcmFtWydleHRyYSddKSAmJiAkcGFyYW1bJ2V4dHJhJ10gPT09ICdub3VybGVuY29kZScpewogICAgICAgICRzdWJfdmFsdWUgPSAkcGFyYW1bJ3ZhbHVlJ107CiAgICAgIH0KCiAgICAgICRzdHJfYm9keSA9IHN0cl9yZXBsYWNlKGFycmF5KCd7eycuJHBhcmFtWyduYW1lJ10uJ319JyksICRzdWJfdmFsdWUsICRzdHJfYm9keSk7CiAgICAgICRzdHIgPSBzdHJfcmVwbGFjZShhcnJheSgne3snLiRwYXJhbVsnbmFtZSddLid9fScpLCAkc3ViX3ZhbHVlLCAkc3RyKTsKICAgIH0KCiAgICAvLyBBw7FhZG8gY2FycGV0YSBpbcOhZ2VuZXMKICAgIGlmIChzdHJpcG9zKCRzdHJfYm9keSwgJ3t7aW1nfX0nKSl7CiAgICAgICRzdHJfYm9keSA9IHN0cl9yZXBsYWNlKGFycmF5KCd7e2ltZ319JyksICcvJy4kYy0+Z2V0VXJsKCdmb2xkZXInKS4naW1nLycsICRzdHJfYm9keSk7CiAgICAgICRzdHJfYm9keSA9IHN0cl9yZXBsYWNlKGFycmF5KCd7e2ltZ191cmx9fScpLCAnLycuJGMtPmdldFVybCgnZm9sZGVyJykuJ2ltZy8nLCAkc3RyX2JvZHkpOwogICAgfQoKICAgIC8vIEHDsWFkbyBjdWVycG8gYWwgbGF5b3V0CiAgICBpZiAoJHRoaXMtPmdldFR5cGUoKT09PSdodG1sJyl7CiAgICAgICRzdHIgPSBzdHJfcmVwbGFjZShhcnJheSgne3tib2R5fX0nKSwgJHN0cl9ib2R5LCAkc3RyKTsKICAgIH0KICAgIGVsc2V7CiAgICAgICRzdHIgPSAkc3RyX2JvZHk7CiAgICB9CgogICAgLy8gQcOxYWRvIHRyYWR1Y2Npb25lcwogICAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCd0cmFuc2xhdGUnKSAmJiAkdGhpcy0+Z2V0VHJhbnNsYXRvcigpLT5nZXRQYWdlKCkhPScnKXsKICAgICAgLy8gQcOxYWRvIHRyYWR1Y2Npb25lcyBlc3BlY8OtZmljYXMgZGUgbGEgcMOhZ2luYQogICAgICAkdHJhZHMgPSAkdGhpcy0+Z2V0VHJhbnNsYXRvcigpLT5nZXRUcmFuc2xhdGlvbnMoKTsKICAgICAgZm9yZWFjaCAoJHRyYWRzIGFzICR0cmFkPT4kb2JqKXsKICAgICAgICAkc3RyID0gc3RyX3JlcGxhY2UoYXJyYXkoJ3t7dHJhbnNfJy4kdHJhZC4nfX0nKSwgJG9ialskdGhpcy0+Z2V0TGFuZygpXSwgJHN0cik7CiAgICAgIH0KICAgICAgLy8gQcOxYWRvIHRyYWR1Y2Npb25lcyBnZW5lcmFsZXMKICAgICAgJHRoaXMtPmdldFRyYW5zbGF0b3IoKS0+c2V0UGFnZSgnZ2VuZXJhbCcpOwogICAgICAkdHJhZHMgPSAkdGhpcy0+Z2V0VHJhbnNsYXRvcigpLT5nZXRUcmFuc2xhdGlvbnMoKTsKICAgICAgZm9yZWFjaCAoJHRyYWRzIGFzICR0cmFkPT4kb2JqKXsKICAgICAgICAkc3RyID0gc3RyX3JlcGxhY2UoYXJyYXkoJ3t7dHJhbnNfZ2VuZXJhbF8nLiR0cmFkLid9fScpLCAkb2JqWyR0aGlzLT5nZXRMYW5nKCldLCAkc3RyKTsKICAgICAgfQogICAgfQoKICAgIGlmICgkdGhpcy0+Z2V0VHlwZSgpIT09J2h0bWwnKXsKICAgICAgaGVhZGVyKCdDYWNoZS1Db250cm9sOiBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlJyk7CiAgICAgIGhlYWRlcignRXhwaXJlczogTW9uLCAyNiBKdWwgMTk5NyAwNTowMDowMCBHTVQnKTsKICAgIH0KICAgIGhlYWRlcignQ29udGVudC10eXBlOiB0ZXh0LycuJHRoaXMtPmdldFR5cGUoKSk7CgogICAgZWNobyAkc3RyOwogIH0KfQo=',
  'ofw/base/OToken.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIE9Ub2tlbnsNCiAgcHJpdmF0ZSAkc2VjcmV0ID0gbnVsbDsNCiAgcHJpdmF0ZSAkcGFyYW1zID0gW107DQogIHByaXZhdGUgJHRva2VuID0gbnVsbDsNCg0KICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkc2VjcmV0KSB7DQogICAgJHRoaXMtPnNlY3JldCA9ICRzZWNyZXQ7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0UGFyYW1zKCRwYXJhbXMpew0KICAgICR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBhZGRQYXJhbSgka2V5LCAkdmFsdWUpew0KICAgICR0aGlzLT5wYXJhbXNbJGtleV0gPSAkdmFsdWU7DQogIH0NCiAgcHVibGljIGZ1bmN0aW9uIGdldFBhcmFtcygpew0KICAgIHJldHVybiAkdGhpcy0+cGFyYW1zOw0KICB9DQogIHB1YmxpYyBmdW5jdGlvbiBnZXRQYXJhbSgka2V5KXsNCiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygka2V5LCAkdGhpcy0+cGFyYW1zKSl7DQogICAgICByZXR1cm4gJHRoaXMtPnBhcmFtc1ska2V5XTsNCiAgICB9DQogICAgZWxzZXsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW4oKXsNCiAgICBpZiAoIWlzX251bGwoJHRoaXMtPnRva2VuKSl7DQogICAgICByZXR1cm4gJHRoaXMtPnRva2VuOw0KICAgIH0NCiAgICAkaGVhZGVyID0gWyJhbGciPT4gIkhTMjU2IiwgInR5cCI9PiJKV1QiXTsNCiAgICAkaGVhZGVyXzY0ID0gYmFzZTY0X2VuY29kZShqc29uX2VuY29kZSgkaGVhZGVyKSk7DQogICAgJHBheWxvYWQgPSAkdGhpcy0+cGFyYW1zOw0KICAgICRwYXlsb2FkXzY0ID0gYmFzZTY0X2VuY29kZShqc29uX2VuY29kZSgkcGF5bG9hZCkpOw0KDQogICAgJHNpZ25hdHVyZSA9IGhhc2hfaG1hYygnc2hhMjU2JywgJGhlYWRlcl82NC4nLicuJHBheWxvYWRfNjQsICR0aGlzLT5zZWNyZXQpOw0KDQogICAgJHRoaXMtPnRva2VuID0gJGhlYWRlcl82NC4nLicuJHBheWxvYWRfNjQuJy4nLiRzaWduYXR1cmU7DQoNCiAgICByZXR1cm4gJHRoaXMtPnRva2VuOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIGNoZWNrVG9rZW4oJHRva2VuKXsNCiAgICAkcGllY2VzID0gZXhwbG9kZSgnLicsICR0b2tlbik7DQogICAgJGhlYWRlcl82NCAgPSAkcGllY2VzWzBdOw0KICAgICRwYXlsb2FkXzY0ID0gJHBpZWNlc1sxXTsNCiAgICAkc2lnbmF0dXJlICA9ICRwaWVjZXNbMl07DQoNCiAgICAkc2lnbmF0dXJlX2NoZWNrID0gaGFzaF9obWFjKCdzaGEyNTYnLCAkaGVhZGVyXzY0LicuJy4kcGF5bG9hZF82NCwgJHRoaXMtPnNlY3JldCk7DQoNCiAgICBpZiAoJHNpZ25hdHVyZSA9PT0gJHNpZ25hdHVyZV9jaGVjayl7DQogICAgICAkdGhpcy0+cGFyYW1zID0ganNvbl9kZWNvZGUoYmFzZTY0X2RlY29kZSgkcGF5bG9hZF82NCksIHRydWUpOw0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIHJldHVybiBmYWxzZTsNCiAgfQ0KfQ0K',
  'ofw/base/OTranslate.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIE9UcmFuc2xhdGV7DQogIHByaXZhdGUgJHBhZ2UgPSAnJzsNCiAgcHJpdmF0ZSAkZGF0YSA9IG51bGw7DQogIHByaXZhdGUgJHRyYW5zbGF0aW9ucyA9IFtdOw0KDQogIGZ1bmN0aW9uIF9fY29uc3RydWN0KCl7fQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRQYWdlKCRwKXsNCiAgICAkdGhpcy0+cGFnZSA9ICRwOw0KICAgICR0aGlzLT5sb2FkVHJhbnNsYXRpb25zKCk7DQogIH0NCiAgcHVibGljIGZ1bmN0aW9uIGdldFBhZ2UoKXsNCiAgICByZXR1cm4gJHRoaXMtPnBhZ2U7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZCl7DQogICAgJHRoaXMtPmRhdGEgPSAkZDsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpew0KICAgIHJldHVybiAkdGhpcy0+ZGF0YTsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBzZXRUcmFuc2xhdGlvbnMoJHQpew0KICAgICR0aGlzLT50cmFuc2xhdGlvbnMgPSAkdDsNCiAgfQ0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb25zKCl7DQogICAgcmV0dXJuICR0aGlzLT50cmFuc2xhdGlvbnM7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gbG9hZFRyYW5zbGF0aW9ucygpew0KICAgIGlmIChpc19udWxsKCR0aGlzLT5nZXREYXRhKCkpKXsNCiAgICAgIGdsb2JhbCAkYzsNCiAgICAgICR0cmFuc2xhdGlvbnNfZGlyID0gJGMtPmdldERpcignYXBwX2NvbmZpZycpLid0cmFuc2xhdGlvbnMuanNvbic7DQogICAgICAkZGF0YSA9IGpzb25fZGVjb2RlKCBmaWxlX2dldF9jb250ZW50cyggJHRyYW5zbGF0aW9uc19kaXIgKSwgdHJ1ZSApOw0KICAgICAgJHRoaXMtPnNldERhdGEoJGRhdGEpOw0KICAgIH0NCiAgICAkZGF0YSA9ICR0aGlzLT5nZXREYXRhKCk7DQogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJHRoaXMtPmdldFBhZ2UoKSwkZGF0YVsndHJhbnNsYXRpb25zJ10pKXsNCiAgICAgICR0aGlzLT5zZXRUcmFuc2xhdGlvbnMoICRkYXRhWyd0cmFuc2xhdGlvbnMnXVskdGhpcy0+Z2V0UGFnZSgpXSApOw0KICAgIH0NCiAgICBlbHNlew0KICAgICAgJHRoaXMtPnNldFRyYW5zbGF0aW9ucyggW10gKTsNCiAgICB9DQogIH0NCn0NCg==',
  'ofw/base/OUrl.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgT1VybHsKICBwcml2YXRlICRkZWJ1Z19tb2RlICA9IGZhbHNlOwogIHByaXZhdGUgJGwgICAgICAgICAgID0gbnVsbDsKICBwcml2YXRlICR1cmxzICAgICAgICA9IG51bGw7CiAgcHJpdmF0ZSAkY2hlY2tfdXJsICAgPSAnJzsKICBwcml2YXRlICRyb3V0aW5nX2RpciA9ICcnOwogIHByaXZhdGUgJHVybF9wYXJhbXMgID0gYXJyYXkoKTsKICBwcml2YXRlICRtZXRob2QgICAgICA9ICcnOwogIHByaXZhdGUgJHJldF9kYXRhICAgID0gYXJyYXkoKTsKCiAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJG1ldGhvZCl7CiAgICBnbG9iYWwgJGMsICR3aGVyZTsKICAgICR0aGlzLT5zZXREZWJ1Z01vZGUoJGMtPmdldERlYnVnTW9kZSgpKTsKCiAgICAkbCA9IG5ldyBPTG9nKCk7CiAgICAkdGhpcy0+c2V0TG9nKCRsKTsKICAgICR0aGlzLT5nZXRMb2coKS0+c2V0U2VjdGlvbigkd2hlcmUpOwogICAgJHRoaXMtPmdldExvZygpLT5zZXRNb2RlbCgnT1VybCcpOwoKICAgICR0aGlzLT5zZXRNZXRob2QoICRtZXRob2QgKTsKCiAgICAkdGhpcy0+c2V0VXJscygkdGhpcy0+bG9hZFVybHMoKSk7CgogICAgLy8gUm91dGluZyBsaWIgZGlyCiAgICAkdGhpcy0+c2V0Um91dGluZ0RpciggJGMtPmdldERpcignb2Z3X2xpYicpLidyb3V0aW5nLycgKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXREZWJ1Z01vZGUoJGRtKXsKICAgICR0aGlzLT5kZWJ1Z19tb2RlID0gJGRtOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVidWdNb2RlKCl7CiAgICByZXR1cm4gJHRoaXMtPmRlYnVnX21vZGU7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0TG9nKCRsKXsKICAgICR0aGlzLT5sID0gJGw7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRMb2coKXsKICAgIHJldHVybiAkdGhpcy0+bDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRVcmxzKCR1KXsKICAgICR0aGlzLT51cmxzID0gJHU7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRVcmxzKCl7CiAgICByZXR1cm4gJHRoaXMtPnVybHM7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gbG9hZFVybHMoKXsKICAgIGdsb2JhbCAkYzsKICAgICRyZXQgPSBhcnJheSgpOwoKICAgICR1cmxzX2NhY2hlX2ZpbGUgPSAkYy0+Z2V0RGlyKCdhcHBfY2FjaGUnKS4ndXJscy5jYWNoZS5qc29uJzsKICAgIGlmICghZmlsZV9leGlzdHMoJHVybHNfY2FjaGVfZmlsZSkpewogICAgICBCYXNlOjp1cGRhdGVVcmxzKHRydWUpOwogICAgfQoKICAgIC8vIEFwcCB1cmxzCiAgICBpZiAoaXNfbnVsbCgkYy0+Z2V0VXJsTGlzdCgpKSl7CiAgICAgICR1ID0ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJHVybHNfY2FjaGVfZmlsZSksdHJ1ZSk7CiAgICAgICRyZXQgPSAkdTsKICAgIH0KICAgIGVsc2V7CiAgICAgICRyZXQgPSAkYy0+Z2V0VXJsTGlzdCgpOwogICAgfQogICAgLy8gUGFja2FnZSB1cmxzCiAgICBpZiAoY291bnQoJGMtPmdldFBhY2thZ2VzKCkpPjApewogICAgICAkcGFja2FnZXMgPSAkYy0+Z2V0UGFja2FnZXMoKTsKICAgICAgZm9yZWFjaCgkcGFja2FnZXNbJ3BhY2thZ2VzJ10gYXMgJHApewogICAgICAgICRwYWNrYWdlX3VybHMgPSBqc29uX2RlY29kZShmaWxlX2dldF9jb250ZW50cygkYy0+Z2V0RGlyKCdvZndfcGFja2FnZXMnKS4kcFsnbmFtZSddLicvY29uZmlnL3VybHMuanNvbicpLHRydWUpOwogICAgICAgICRyZXRbJ3VybHMnXSAgPSBhcnJheV9tZXJnZSgkcmV0Wyd1cmxzJ10sJHBhY2thZ2VfdXJsc1sndXJscyddKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkcmV0OwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldENoZWNrVXJsKCRjdSwkZz1udWxsLCRwPW51bGwsJGY9bnVsbCl7CiAgICBnbG9iYWwgJGM7CiAgICAvLyBDb21wcm9iYWNpw7NuIGRlIHVybCBjYXJwZXRhCiAgICBpZiAoJGMtPmdldFVybCgnZm9sZGVyJykhPScnKXsKICAgICAgJGN1ID0gc3RyX2lyZXBsYWNlKCRjLT5nZXRVcmwoJ2ZvbGRlcicpLCAnJywgJGN1KTsKICAgIH0KCiAgICAkY2hlY2tfcGFyYW1zID0gc3RyaXBvcygkY3UsJz8nKTsKICAgIGlmICgkY2hlY2tfcGFyYW1zICE9PSBmYWxzZSl7CiAgICAgICRjdSA9IHN1YnN0cigkY3UsIDAsICRjaGVja19wYXJhbXMpOwogICAgfQogICAgaWYgKCFpc19udWxsKCRnKSl7CiAgICAgIGZvcmVhY2ggKCRnIGFzICRrZXkgPT4gJHZhbHVlKXsKICAgICAgICAkdGhpcy0+YWRkVXJsUGFyYW0oJGtleSwkdmFsdWUpOwogICAgICB9CiAgICB9CiAgICBpZiAoIWlzX251bGwoJHApKXsKICAgICAgZm9yZWFjaCAoJHAgYXMgJGtleSA9PiAkdmFsdWUpewogICAgICAgICR0aGlzLT5hZGRVcmxQYXJhbSgka2V5LCR2YWx1ZSk7CiAgICAgIH0KICAgIH0KICAgIGlmICghaXNfbnVsbCgkZikpewogICAgICBmb3JlYWNoICgkZiBhcyAka2V5ID0+ICR2YWx1ZSl7CiAgICAgICAgJHRoaXMtPmFkZFVybFBhcmFtKCRrZXksJHZhbHVlKTsKICAgICAgfQogICAgfQogICAgJGlucHV0ID0ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJ3BocDovL2lucHV0JyksIHRydWUpOwogICAgaWYgKCFpc19udWxsKCRpbnB1dCkpewogICAgICBmb3JlYWNoICgkaW5wdXQgYXMgJGtleSA9PiAkdmFsdWUpewogICAgICAgICR0aGlzLT5hZGRVcmxQYXJhbSgka2V5LCR2YWx1ZSk7CiAgICAgIH0KICAgIH0KICAgICR0aGlzLT5jaGVja191cmwgPSAkY3U7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRDaGVja1VybCgpewogICAgcmV0dXJuICR0aGlzLT5jaGVja191cmw7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gc2V0Um91dGluZ0RpcigkcmQpewogICAgJHRoaXMtPnJvdXRpbmdfZGlyID0gJHJkOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Um91dGluZ0RpcigpewogICAgcmV0dXJuICR0aGlzLT5yb3V0aW5nX2RpcjsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRVcmxQYXJhbXMoJHVwKXsKICAgICR0aGlzLT51cmxfcGFyYW1zID0gJHVwOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0VXJsUGFyYW1zKCl7CiAgICByZXR1cm4gJHRoaXMtPnVybF9wYXJhbXM7CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gYWRkVXJsUGFyYW0oJGtleSwkdmFsdWUpewogICAgJHBhcmFtcyA9ICR0aGlzLT5nZXRVcmxQYXJhbXMoKTsKICAgICRwYXJhbXNbJGtleV0gPSAkdmFsdWU7CgogICAgJHRoaXMtPnNldFVybFBhcmFtcygkcGFyYW1zKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRNZXRob2QoJG0pewogICAgJHRoaXMtPm1ldGhvZCA9ICRtOwogIH0KICBwdWJsaWMgZnVuY3Rpb24gZ2V0TWV0aG9kKCl7CiAgICByZXR1cm4gJHRoaXMtPm1ldGhvZDsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiBzZXRSZXREYXRhKCRyZCl7CiAgICAkdGhpcy0+cmV0X2RhdGEgPSAkcmQ7CiAgfQogIHB1YmxpYyBmdW5jdGlvbiBnZXRSZXREYXRhKCl7CiAgICByZXR1cm4gJHRoaXMtPnJldF9kYXRhOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHByb2Nlc3MoJHVybD1udWxsKXsKICAgIGlmICghaXNfbnVsbCgkdXJsKSl7CiAgICAgICR0aGlzLT5zZXRDaGVja1VybCgkdXJsKTsKICAgIH0KCiAgICAkZW5jID0gZmFsc2U7CiAgICAkaSA9IDA7CiAgICAkdSA9ICR0aGlzLT5nZXRVcmxzKCk7CiAgICAkcmV0ID0gYXJyYXkoCiAgICAgICdpZCcgICAgID0+ICcnLAogICAgICAnbW9kdWxlJyA9PiAnJywKICAgICAgJ2FjdGlvbicgPT4gJycsCiAgICAgICd0eXBlJyAgID0+ICdodG1sJywKICAgICAgJ3BhcmFtcycgPT4gYXJyYXkoKSwKICAgICAgJ2xheW91dCcgPT4gJ2RlZmF1bHQnLAogICAgICAncmVzJyAgICA9PiBmYWxzZQogICAgKTsKCiAgICAvLyBJbmNsdXlvIHJvdXRpbmcgZGUgU3ltZm9ueQogICAgcmVxdWlyZV9vbmNlKCR0aGlzLT5nZXRSb3V0aW5nRGlyKCkuJ3NmUm91dGUuY2xhc3MucGhwJyk7CiAgICB3aGlsZSAoISRlbmMgJiYgJGk8Y291bnQoJHUpKXsKICAgICAgJHJvdXRlID0gbmV3IHNmUm91dGUoJHVbJGldWyd1cmwnXSk7CiAgICAgICRjaGsgPSAkcm91dGUtPm1hdGNoZXNVcmwoJHRoaXMtPmdldENoZWNrVXJsKCkpOwoKICAgICAgLy8gU2kgaGF5IHJlc3VsdGFkbyBkZXZ1ZWx2byB2YWxvcmVzIGRlbCB1cmxzLmpzb24gbWFzIHBhcmFtZXRyb3MgZGV2dWVsdG9zIHBvciBsYSBydXRhCiAgICAgIGlmICgkY2hrICE9PSBmYWxzZSl7CiAgICAgICAgJGVuYyA9IHRydWU7CiAgICAgICAgJHJldFsnaWQnXSA9ICR1WyRpXVsnaWQnXTsKICAgICAgICAkcmV0Wydtb2R1bGUnXSA9ICR1WyRpXVsnbW9kdWxlJ107CiAgICAgICAgJHJldFsnYWN0aW9uJ10gPSAkdVskaV1bJ2FjdGlvbiddOwogICAgICAgICRyZXRbJ3JlcyddID0gdHJ1ZTsKCiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ3BhY2thZ2UnLCAkdVskaV0pKXsKICAgICAgICAgICRyZXRbJ3BhY2thZ2UnXSA9ICR1WyRpXVsncGFja2FnZSddOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ3R5cGUnLCAkdVskaV0pKXsKICAgICAgICAgICRyZXRbJ3R5cGUnXSA9ICR1WyRpXVsndHlwZSddOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2xheW91dCcsICR1WyRpXSkpewogICAgICAgICAgJHJldFsnbGF5b3V0J10gPSAkdVskaV1bJ2xheW91dCddOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ2ZpbHRlcicsICR1WyRpXSkpewogICAgICAgICAgJHJldFsnZmlsdGVyJ10gPSAkdVskaV1bJ2ZpbHRlciddOwogICAgICAgIH0KCiAgICAgICAgJHJldFsncGFyYW1zJ10gPSAkY2hrOwoKICAgICAgICAkcmV0WydwYXJhbXMnXVsndXJsX3BhcmFtcyddID0gJHRoaXMtPmdldFVybFBhcmFtcygpOwogICAgICAgICRyZXRbJ3BhcmFtcyddWydoZWFkZXJzJ10gPSBnZXRhbGxoZWFkZXJzKCk7CiAgICAgIH0KICAgICAgJHJldFsncGFyYW1zJ11bJ21ldGhvZCddID0gc3RydG9sb3dlcigkdGhpcy0+Z2V0TWV0aG9kKCkpOwoKICAgICAgJGkrKzsKICAgIH0KICAgICR0aGlzLT5zZXRSZXREYXRhKCRyZXQpOwogICAgcmV0dXJuICRyZXQ7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlVXJsKCRpZCwkcGFyYW1zPWFycmF5KCksJGFic29sdXRlPW51bGwpewogICAgLy8gQ2FyZ28gbGFzIHVybHMsIGFsIHNlciB1biBtZXRvZG8gZXN0YXRpY28gbm8gdmEgYSBwYXNhciBwb3IgZWwgY29uc3RydWN0b3IKICAgIGdsb2JhbCAkYzsKICAgICR1ID0gc2VsZjo6bG9hZFVybHMoKTsKCiAgICAkZW5jID0gZmFsc2U7CiAgICAkaSAgID0gMDsKICAgICR1cmwgPSAnJzsKCiAgICB3aGlsZSAoISRlbmMgJiYgJGk8Y291bnQoJHUpKXsKICAgICAgaWYgKCR1WyRpXVsnaWQnXSA9PSAkaWQpewogICAgICAgICR1cmwgPSAkdVskaV1bJ3VybCddOwogICAgICAgICRlbmMgPSB0cnVlOwogICAgICB9CiAgICAgICRpKys7CiAgICB9CgogICAgaWYgKCEkZW5jKXsKICAgICAgJHVybCA9ICcnOwogICAgfQogICAgZWxzZXsKICAgICAgZm9yZWFjaCAoJHBhcmFtcyBhcyAka2V5ID0+ICR2YWx1ZSl7CiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCc6Jy4ka2V5LCAkdmFsdWUsICR1cmwpOwogICAgICB9CiAgICB9CgogICAgaWYgKCFpc19udWxsKCRhYnNvbHV0ZSkgJiYgJGFic29sdXRlID09PSB0cnVlKXsKICAgICAgJGJhc2UgPSAkYy0+Z2V0VXJsKCdiYXNlJyk7CiAgICAgICRiYXNlID0gc3Vic3RyKCRiYXNlLDAsc3RybGVuKCRiYXNlKS0xKTsKCiAgICAgICR1cmwgPSAkYmFzZS4kdXJsOwogICAgfQoKICAgIHJldHVybiAkdXJsOwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnb1RvVXJsKCR1cmwpewogICAgaGVhZGVyKCdMb2NhdGlvbjonLiR1cmwpOwogICAgZXhpdCgpOwogIH0KfQo=',
  'ofw/base/base.php' => 'data:text/x-php;base64,PD9waHAKY2xhc3MgQmFzZXsKICAvKgogICAgRmllbGQgdHlwZXMKICAqLwogIGNvbnN0IFBLICAgICAgID0gMTsKICBjb25zdCBDUkVBVEVEICA9IDI7CiAgY29uc3QgVVBEQVRFRCAgPSAzOwogIGNvbnN0IE5VTSAgICAgID0gNDsKICBjb25zdCBURVhUICAgICA9IDU7CiAgY29uc3QgREFURSAgICAgPSA2OwogIGNvbnN0IEJPT0wgICAgID0gNzsKICBjb25zdCBMT05HVEVYVCA9IDg7CiAgY29uc3QgRkxPQVQgICAgPSA5OwoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE1vZGVsTGlzdCgpewogICAgZ2xvYmFsICRjOwogICAgJHJldCA9IGFycmF5KCk7CgogICAgaWYgKCRtb2RlbCA9IG9wZW5kaXIoJGMtPmdldERpcignYXBwX21vZGVsJykpKSB7CiAgICAgIHdoaWxlIChmYWxzZSAhPT0gKCRlbnRyeSA9IHJlYWRkaXIoJG1vZGVsKSkpIHsKICAgICAgICBpZiAoJGVudHJ5ICE9ICIuIiAmJiAkZW50cnkgIT0gIi4uIikgewogICAgICAgICAgJHRhYmxlID0gc3RyX2lyZXBsYWNlKCcucGhwJywnJywkZW50cnkpOwogICAgICAgICAgZXZhbCgiJCIuIm1vZCA9IG5ldyAiLiR0YWJsZS4iKCk7Iik7CiAgICAgICAgICBhcnJheV9wdXNoKCRyZXQsJG1vZCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNsb3NlZGlyKCRtb2RlbCk7CiAgICB9CgogICAgc29ydCgkcmV0KTsKICAgIHJldHVybiAkcmV0OwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRSZXN1bHRzKCR0YWJsZSwkZmllbGQsJGxpc3QpewogICAgJHJldCA9IGFycmF5KCk7CiAgICAkZGIgPSBuZXcgT0RCKCk7CiAgICAkc3FsID0gIlNFTEVDVCAqIEZST00gYCIuJHRhYmxlLiJgIFdIRVJFIGAiLiRmaWVsZC4iYCBJTiAoIi5pbXBsb2RlKCcsJywgJGxpc3QpLiIpIjsKICAgICRkYi0+cXVlcnkoJHNxbCk7CgogICAgd2hpbGUgKCRyZXM9JGRiLT5uZXh0KCkpewogICAgICBhcnJheV9wdXNoKCRyZXQsICRyZXMpOwogICAgfQoKICAgIHJldHVybiAkcmV0OwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRSZWZEYXRhKCRyZWYpewogICAgJHJldCA9IGFycmF5KCdtb2RlbCc9PicnLCd0YWJsZSc9PicnLCdmaWVsZCc9PicnKTsKCiAgICAkcmVmX2RhdGEgPSBleHBsb2RlKCcuJywkcmVmKTsKICAgICRyZXRbJ2ZpZWxkJ10gPSAkcmVmX2RhdGFbMV07CiAgICAkcmVmX29iaiA9IGV4cGxvZGUoJygnLCRyZWZfZGF0YVswXSk7CiAgICAkcmV0Wydtb2RlbCddID0gJHJlZl9vYmpbMF07CiAgICAkcmV0Wyd0YWJsZSddID0gc3RyX2lyZXBsYWNlKCcpJywnJywkcmVmX29ialsxXSk7CgogICAgcmV0dXJuICRyZXQ7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENhY2hlKCRrZXkpewogICAgZ2xvYmFsICRjOwogICAgJHJvdXRlID0gJGMtPmdldERpcignYXBwX2NhY2hlJykuJGtleS4iLmpzb24iOwogICAgaWYgKGZpbGVfZXhpc3RzKCRyb3V0ZSkpewogICAgICAkZGF0YSA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRyb3V0ZSk7CiAgICAgICRqc29uID0ganNvbl9kZWNvZGUoJGRhdGEsdHJ1ZSk7CiAgICAgIHJldHVybiAkanNvbjsKICAgIH0KICAgIGVsc2V7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY2hlY2tDb29raWUoKXsKICAgIGdsb2JhbCAkcywgJGNrOwogICAgJHJldCA9IGZhbHNlOwoKICAgIC8vIFNpIHBpZGUgbG9naW4gbGEgcGFnaW5hIGNvbXBydWVibyBzaSB5YSB0aWVuZSBsb2dpbiBlbiBzZXNpw7NuLCBzaSBubyB0aWVuZSBjb21wcnVlYm8gbGEgY29va2llCiAgICBpZiAoISRzLT5nZXRQYXJhbSgnbG9nZ2VkJykpewogICAgICAkc2Vzc2lvbl9rZXkgPSAkY2stPmdldENvb2tpZSgnc2Vzc2lvbl9rZXknKTsKICAgICAgJGlkX3VzZXIgPSAkY2stPmdldENvb2tpZSgnaWRfdXNlcicpOwogICAgICBpZiAoJHNlc3Npb25fa2V5ICYmICRpZF91c2VyKXsKICAgICAgICAkdSA9IG5ldyBVc2VyKCk7CiAgICAgICAgaWYgKCR1LT5maW5kKGFycmF5KCdzZXNzaW9uX2tleSc9PiRzZXNzaW9uX2tleSkpKXsKICAgICAgICAgIGlmICgkdS0+Z2V0KCdpZCcpID09ICRpZF91c2VyKXsKICAgICAgICAgICAgJHMtPmFkZFBhcmFtKCdsb2dnZWQnLHRydWUpOwogICAgICAgICAgICAkcy0+YWRkUGFyYW0oJ2lkJywkaWRfdXNlcik7CgogICAgICAgICAgICAkcmV0ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgIC8vIEhheSB1c3VhcmlvIHBvciBzZXNzaW9uIGtleSBwZXJvIG5vIGVzIGVsIGlkIGRlIHVzdWFyaW8gcXVlIGVzdGEgZ3VhcmRhZG8gLT4gZnVlcmEhCiAgICAgICAgICAgICRyZXQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGRlbCBpZiBidXNjYXIgdXN1YXJpbyBwb3Igc2Vzc2lvbiBrZXkKICAgICAgICBlbHNlewogICAgICAgICAgLy8gSGF5IHNlc3Npb24ga2V5IHBlcm8gbm8gZXMgZGUgbmluZ8O6biB1c3VhcmlvIC0+IGZ1ZXJhIQogICAgICAgICAgJHJldCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSAvLyBkZWwgaWYgc2Vzc2lvbiBrZXkKICAgICAgZWxzZXsKICAgICAgICAvLyBIYXkgbG9naW4geSBubyBoYXkgc2Vzc2lvbiBrZXkgLT4gZnVlcmEhCiAgICAgICAgJHJldCA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgICBlbHNlewogICAgICAkcmV0ID0gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gJHJldDsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZG9Mb2dvdXQoJG1lbnM9bnVsbCl7CiAgICBnbG9iYWwgJHMsICRjazsKCiAgICAkY2stPmNsZWFuQ29va2llcygpOwogICAgJHMtPmNsZWFuU2Vzc2lvbigpOwogICAgaWYgKCFpc19udWxsKCRtZW5zKSl7CiAgICAgICRzLT5hZGRQYXJhbSgnZmxhc2gnLCRtZW5zKTsKICAgIH0KICAgIGhlYWRlciggJ0xvY2F0aW9uOiAnLk9Vcmw6OmdlbmVyYXRlVXJsKCdob21lJykgKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UmFuZG9tQ2hhcmFjdGVycygkb3B0aW9ucyl7CiAgICAkbnVtICAgICA9IGlzc2V0KCRvcHRpb25zWydudW0nXSkgICAgID8gJG9wdGlvbnNbJ251bSddICAgICA6IDU7CiAgICAkbG93ZXIgICA9IGlzc2V0KCRvcHRpb25zWydsb3dlciddKSAgID8gJG9wdGlvbnNbJ2xvd2VyJ10gICA6IGZhbHNlOwogICAgJHVwcGVyICAgPSBpc3NldCgkb3B0aW9uc1sndXBwZXInXSkgICA/ICRvcHRpb25zWyd1cHBlciddICAgOiBmYWxzZTsKICAgICRudW1iZXJzID0gaXNzZXQoJG9wdGlvbnNbJ251bWJlcnMnXSkgPyAkb3B0aW9uc1snbnVtYmVycyddIDogZmFsc2U7CiAgICAkc3BlY2lhbCA9IGlzc2V0KCRvcHRpb25zWydzcGVjaWFsJ10pID8gJG9wdGlvbnNbJ3NwZWNpYWwnXSA6IGZhbHNlOwoKICAgICRzZWVkID0gJyc7CiAgICBpZiAoJGxvd2VyKXsgJHNlZWQgLj0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JzsgfQogICAgaWYgKCR1cHBlcil7ICRzZWVkIC49ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7IH0KICAgIGlmICgkbnVtYmVycyl7ICRzZWVkIC49ICcwMTIzNDU2Nzg5JzsgfQogICAgaWYgKCRzcGVjaWFsKXsgJHNlZWQgLj0gJyFAIyQlXiYqKCknOyB9CgogICAgJHNlZWQgPSBzdHJfc3BsaXQoJHNlZWQpOwogICAgc2h1ZmZsZSgkc2VlZCk7CiAgICAkcmFuZCA9ICcnOwogICAgZm9yZWFjaCAoYXJyYXlfcmFuZCgkc2VlZCwgJG51bSkgYXMgJGspICRyYW5kIC49ICRzZWVkWyRrXTsKCiAgICByZXR1cm4gJHJhbmQ7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFBhcmFtKCRrZXksJGxpc3QsJGRlZmF1bHQ9ZmFsc2UpewogICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGtleSwgJGxpc3QpKXsKICAgICAgcmV0dXJuICRsaXN0WyRrZXldOwogICAgfQogICAgZWxzZXsKICAgICAgcmV0dXJuICRkZWZhdWx0OwogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQYXJhbUxpc3QoJGtleV9saXN0LCAkbGlzdCl7CiAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgIGZvcmVhY2ggKCRrZXlfbGlzdCBhcyAka2V5KXsKICAgICAgJGNoZWNrID0gc2VsZjo6Z2V0UGFyYW0oJGtleSwgJGxpc3QsIGZhbHNlKTsKICAgICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCRrZXksICRsaXN0KSl7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgICRwYXJhbXNbJGtleV0gPSAkY2hlY2s7CiAgICB9CgogICAgcmV0dXJuICRwYXJhbXM7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFRlbXBsYXRlKCRydXRhLCRodG1sLCRwYXJhbXMpewogICAgaWYgKCRydXRhIT0nJyl7CiAgICAgICRodG1sID0gZmlsZV9nZXRfY29udGVudHMoJHJ1dGEpOwogICAgfQoKICAgIGZvcmVhY2ggKCRwYXJhbXMgYXMgJHBhcmFtX25hbWUgPT4gJHBhcmFtKXsKICAgICAgJGh0bWwgPSBzdHJfaXJlcGxhY2UoJ3t7Jy5zdHJ0b3VwcGVyKCRwYXJhbV9uYW1lKS4nfX0nLCAkcGFyYW0sICRodG1sKTsKICAgIH0KCiAgICByZXR1cm4gJGh0bWw7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZpbGVUb0Jhc2U2NCgkZmlsZW5hbWUpIHsKICAgIGlmIChmaWxlX2V4aXN0cygkZmlsZW5hbWUpKXsKICAgICAgJGZpbmZvID0gZmluZm9fb3BlbihGSUxFSU5GT19NSU1FX1RZUEUpOwogICAgICAkZmlsZWJpbmFyeSA9IChmaWxlc2l6ZSgkZmlsZW5hbWUpPjApID8gZnJlYWQoZm9wZW4oJGZpbGVuYW1lLCAiciIpLCBmaWxlc2l6ZSgkZmlsZW5hbWUpKSA6ICcnOwogICAgICByZXR1cm4gJ2RhdGE6JyAuIGZpbmZvX2ZpbGUoJGZpbmZvLCAkZmlsZW5hbWUpIC4gJztiYXNlNjQsJyAuIGJhc2U2NF9lbmNvZGUoJGZpbGViaW5hcnkpOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBiYXNlNjRUb0ZpbGUoJGJhc2U2NF9zdHJpbmcsICRmaWxlbmFtZSkgewogICAgJGlmcCA9IGZvcGVuKCAkZmlsZW5hbWUsICd3YicgKTsKICAgICRkYXRhID0gZXhwbG9kZSggJywnLCAkYmFzZTY0X3N0cmluZyApOwogICAgZndyaXRlKCAkaWZwLCBiYXNlNjRfZGVjb2RlKCAkZGF0YVsgMSBdICkgKTsKICAgIGZjbG9zZSggJGlmcCApOwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVUaHVtYigkcGF0aFRvSW1hZ2UsJHBhdGhUb1RodW1iLCR0aHVtYldpZHRoKXsKICAgICRzdGF0dXMgPSB0cnVlOwoKICAgIGlmICghZmlsZV9leGlzdHMoJHBhdGhUb0ltYWdlKSl7CiAgICAgICRzdGF0dXMgPSBmYWxzZTsKICAgIH0KICAgIGVsc2V7CiAgICAgIC8vIGxvYWQgaW1hZ2UgYW5kIGdldCBpbWFnZSBzaXplCiAgICAgICRpbWcgICAgPSBpbWFnZWNyZWF0ZWZyb21qcGVnKCRwYXRoVG9JbWFnZSk7CiAgICAgICR3aWR0aCAgPSBpbWFnZXN4KCRpbWcpOwogICAgICAkaGVpZ2h0ID0gaW1hZ2VzeSgkaW1nKTsKCiAgICAgIC8vIGNhbGN1bGF0ZSB0aHVtYm5haWwgc2l6ZQogICAgICAkbmV3X3dpZHRoICA9ICR0aHVtYldpZHRoOwogICAgICAkbmV3X2hlaWdodCA9IGZsb29yKCAkaGVpZ2h0ICogKCAkdGh1bWJXaWR0aCAvICR3aWR0aCApICk7CgogICAgICAvLyBjcmVhdGUgYSBuZXcgdGVtcG9yYXJ5IGltYWdlCiAgICAgICR0bXBfaW1nID0gaW1hZ2VjcmVhdGV0cnVlY29sb3IoICRuZXdfd2lkdGgsICRuZXdfaGVpZ2h0ICk7CgogICAgICAvLyBjb3B5IGFuZCByZXNpemUgb2xkIGltYWdlIGludG8gbmV3IGltYWdlCiAgICAgIGltYWdlY29weXJlc2l6ZWQoICR0bXBfaW1nLCAkaW1nLCAwLCAwLCAwLCAwLCAkbmV3X3dpZHRoLCAkbmV3X2hlaWdodCwgJHdpZHRoLCAkaGVpZ2h0ICk7CgogICAgICAvLyBzYXZlIHRodW1ibmFpbCBpbnRvIGEgZmlsZQogICAgICBpbWFnZWpwZWcoICR0bXBfaW1nLCAkcGF0aFRvVGh1bWIgKTsKICAgIH0KCiAgICByZXR1cm4gJHN0YXR1czsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYmJjb2RlKCR0ZXh0byl7CiAgICAkYmJjb2RlID0gWwogICAgICAiL1w8KC4qPyk+L2lzIiwKICAgICAgIi9cW2lcXSguKj8pXFtcL2lcXS9pcyIsCiAgICAgICIvXFtiXF0oLio/KVxbXC9iXF0vaXMiLAogICAgICAiL1xbdVxdKC4qPylcW1wvdVxdL2lzIiwKICAgICAgIi9cW2dcXSguKj8pXFtcL2dcXS9pcyIsCiAgICAgICIvXFtxdW90ZVxdKC4qPylcW1wvcXVvdGVcXS9pcyIsCiAgICAgICIvXFtpbWdcXSguKj8pXFtcL2ltZ1xdL2lzIiwKICAgICAgIi9cW3VybD0oLio/KVxdKC4qPylcW1wvdXJsXF0vaXMiLAogICAgICAiL1xbbWFpbHRvPSguKj8pXF0oLio/KVxbXC9tYWlsdG9cXS9pcyIsCiAgICAgICIvXFtjb2xvcj0oLio/KVxdKC4qPylcW1wvY29sb3JcXS9pcyIKICAgIF07CiAgICAkaHRtbCA9IFsKICAgICAgIjwkMT4iLAogICAgICAiPGk+JDE8L2k+IiwKICAgICAgIjxiPiQxPC9iPiIsCiAgICAgICI8dT4kMTwvdT4iLAogICAgICAiPHNwYW4gY2xhc3M9XCJncmVlbl90ZXh0XCI+JDE8L3NwYW4+IiwKICAgICAgIjxkaXYgY2xhc3M9XCJxdW90ZV90ZXh0XCI+Q2l0YTo8YnIgLz4kMTwvZGl2PiIsCiAgICAgICI8aW1nIHNyYz1cIiQxXCIgLz4iLAogICAgICAiPGEgaHJlZj1cIiQxXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JDI8L2E+IiwKICAgICAgIjxhIGhyZWY9XCJtYWlsdG86JDFcIj4kMjwvYT4iLAogICAgICAiPHNwYW4gc3R5bGU9XCJjb2xvcjokMVwiPiQyPC9zcGFuPiIKICAgIF07CiAgICAkdGV4dG8gPSBwcmVnX3JlcGxhY2UoJGJiY29kZSwgJGh0bWwsICR0ZXh0byk7CiAgICByZXR1cm4gJHRleHRvOwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjbGVhbkJycygkc3RyKXsKICAgICRzdHIgPSBzdHJfaXJlcGxhY2UoJzxicj4nLCAnJywgJHN0cik7CiAgICAkc3RyID0gc3RyX2lyZXBsYWNlKCc8YnIvPicsICcnLCAkc3RyKTsKICAgICRzdHIgPSBzdHJfaXJlcGxhY2UoJzxiciAvPicsICcnLCAkc3RyKTsKICAgICRzdHIgPSBzdHJfaXJlcGxhY2UoJy1icicsICcnLCAkc3RyKTsKICAgICRzdHIgPSBzdHJfaXJlcGxhY2UoJyZsdDticiZndDsnLCAnJywgJHN0cik7CiAgICByZXR1cm4gJHN0cjsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2hvd0Vycm9yUGFnZSgkcmVzLCRtb2RlKXsKICAgIGdsb2JhbCAkYzsKICAgIGlmICghaXNfbnVsbCgkYy0+Z2V0RXJyb3JQYWdlKCRtb2RlKSkpewogICAgICBoZWFkZXIoJ0xvY2F0aW9uOicuJGMtPmdldEVycm9yUGFnZSgkbW9kZSkpOwogICAgICBleGl0KCk7CiAgICB9CgogICAgaWYgKCRtb2RlPT0nNDAzJyl7IGhlYWRlcigkX1NFUlZFUlsiU0VSVkVSX1BST1RPQ09MIl0uIiA0MDMgRm9yYmlkZGVuIik7IH0KICAgIGlmICgkbW9kZT09JzQwNCcpeyBoZWFkZXIoJF9TRVJWRVJbIlNFUlZFUl9QUk9UT0NPTCJdLiIgNDA0IE5vdCBGb3VuZCIpOyB9CiAgICBlY2hvICI8aHRtbD5cbiI7CiAgICBlY2hvICIgIDxoZWFkPlxuIjsKICAgIGVjaG8gIiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiI7CiAgICBlY2hvICIgICAgPHRpdGxlPkVycm9yPC90aXRsZT5cbiI7CiAgICBlY2hvICIgIDwvaGVhZD5cbiI7CiAgICBlY2hvICIgIDxib2R5PlxuIjsKICAgIGlmICgkbW9kZT09JzQwNCcgfHwgJG1vZGU9PSc0MDMnIHx8ICRtb2RlPT0nZ2VuZXJhbCcpewogICAgICBpZiAoJG1vZGU9PSc0MDMnKXsKICAgICAgICBlY2hvICI0MDMgLSBFcnJvciBkZSBhdXRlbnRpY2FjacOzblxuIjsKICAgICAgfQogICAgICBpZiAoJG1vZGU9PSc0MDQnKXsKICAgICAgICBlY2hvICI0MDQgLSBQw6FnaW5hIG5vIGVuY29udHJhZGFcbiI7CiAgICAgIH0KICAgICAgaWYgKCRtb2RlPT0nZ2VuZXJhbCcpewogICAgICAgIGVjaG8gJHJlc1snbWVzc2FnZSddOwogICAgICB9CiAgICB9CiAgICBlbHNlewogICAgICBpZiAoJG1vZGU9PSdtb2R1bGUnKXsKICAgICAgICBlY2hvICJNJm9hY3V0ZTtkdWxvIDxzdHJvbmc+Ii4kcmVzWydtb2R1bGUnXS4iPC9zdHJvbmc+IG5vIGVuY29udHJhZG9cbiI7CiAgICAgIH0KICAgICAgaWYgKCRtb2RlPT0nYWN0aW9uJyl7CiAgICAgICAgZWNobyAiICAgIEZ1bmNpJm9hY3V0ZTtuIDxzdHJvbmc+Ii51Y2ZpcnN0KCRyZXNbJ2FjdGlvbiddKS4iPC9zdHJvbmc+IG5vIGVuY29udHJhZGEgZW4gPHN0cm9uZz4iLiRyZXNbJ21vZHVsZSddLiI8L3N0cm9uZz5cbiI7CiAgICAgIH0KICAgICAgZWNobyAiICAgIDxiciAvPjxiciAvPlxuIjsKICAgICAgZWNobyAiICAgIDxhIGhyZWY9XCIjXCIgb25jbGljaz1cInNob3dNb3JlKCk7XCIgaWQ9XCJzaG93X21vcmVfbGlua1wiPlxuIjsKICAgICAgZWNobyAiICAgICAgVmVyIG0mYWFjdXRlO3MgZGV0YWxsZXNcbiI7CiAgICAgIGVjaG8gIiAgICA8L2E+XG4iOwogICAgICBlY2hvICIgICAgPGRpdiBpZD1cImRldGFsbGVzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+XG4iOwogICAgICBlY2hvICIgICAgICBSRVM6IDxwcmU+XG4iOwogICAgICB2YXJfZHVtcCgkcmVzKTsKICAgICAgZWNobyAiICAgICAgPC9wcmU+XG4iOwogICAgICBlY2hvICIgICAgPC9kaXY+IjsKICAgICAgZWNobyAiICAgIDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPlxuIjsKICAgICAgZWNobyAiICAgICAgZnVuY3Rpb24gc2hvd01vcmUoKXtcbiI7CiAgICAgIGVjaG8gIiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFsbGVzJykuc3R5bGUuZGlzcGxheT0nYmxvY2snO1xuIjsKICAgICAgZWNobyAiICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd19tb3JlX2xpbmsnKS5zdHlsZS5kaXNwbGF5PSdub25lJztcbiI7CiAgICAgIGVjaG8gIiAgICAgICAgcmV0dXJuIGZhbHNlO1xuIjsKICAgICAgZWNobyAiICAgICAgfVxuIjsKICAgICAgZWNobyAiICAgIDwvc2NyaXB0PiI7CiAgICB9CiAgICBlY2hvICIgIDwvYm9keT5cbiI7CiAgICBlY2hvICI8L2h0bWw+IjsKICAgIGV4aXQoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZG9Qb3N0UmVxdWVzdCgkdXJsLCRkYXRhKXsKICAgICRjaCA9IGN1cmxfaW5pdCgpOwogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJHVybCk7CiAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsKICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAxKTsKICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAkZGF0YSk7CiAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOwogICAgJHJlc3VsdCA9IGN1cmxfZXhlYygkY2gpOwoKICAgIHJldHVybiAkcmVzdWx0OwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBkb0RlbGV0ZVJlcXVlc3QoJHVybCwkZGF0YSl7CiAgICAkY2ggPSBjdXJsX2luaXQoKTsKICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsICR1cmwpOwogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CiAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQ1VTVE9NUkVRVUVTVCwgJ0RFTEVURScpOwogICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICRkYXRhKTsKICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7CiAgICAkcmVzdWx0ID0gY3VybF9leGVjKCRjaCk7CgogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJybWRpcigkZGlyKSB7CiAgICAkZmlsZXMgPSBhcnJheV9kaWZmKHNjYW5kaXIoJGRpciksIGFycmF5KCcuJywnLi4nKSk7CiAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGUpIHsKICAgICAgKGlzX2RpcigiJGRpci8kZmlsZSIpKSA/IHNlbGY6OnJybWRpcigiJGRpci8kZmlsZSIpIDogdW5saW5rKCIkZGlyLyRmaWxlIik7CiAgICB9CiAgICByZXR1cm4gcm1kaXIoJGRpcik7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JCRCgkZCl7CiAgICAkZGF0YSA9IGV4cGxvZGUoIi8iLCRkKTsKICAgIHJldHVybiAkZGF0YVsyXS4nLScuJGRhdGFbMV0uJy0nLiRkYXRhWzBdLicgMDA6MDA6MDAnOwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRIYXNoKCl7CiAgICAkc3RyID0gdGltZSgpOwogICAgJHN0ciA9ICJ2XyIuJHN0ci4iX3YiOwogICAgJHN0ciA9IG1kNSgkc3RyKTsKCiAgICByZXR1cm4gJHN0cjsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2x1Z2lmeSgkdGV4dCwgJHNlcGFyYXRvciA9ICctJykKICB7CiAgICAkYmFkID0gWwogICAgICAnw4AnLCfDoCcsJ8OBJywnw6EnLCfDgicsJ8OiJywnw4MnLCfDoycsJ8OEJywnw6QnLCfDhScsJ8OlJywnxIInLCfEgycsJ8SEJywnxIUnLAogICAgICAnxIYnLCfEhycsJ8SMJywnxI0nLCfDhycsJ8OnJywKICAgICAgJ8SOJywnxI8nLCfEkCcsJ8SRJywKICAgICAgJ8OIJywnw6gnLCfDiScsJ8OpJywnw4onLCfDqicsJ8OLJywnw6snLCfEmicsJ8SbJywnxJgnLCfEmScsCiAgICAgICfEnicsJ8SfJywKICAgICAgJ8OMJywnw6wnLCfDjScsJ8OtJywnw44nLCfDricsJ8OPJywnw68nLAogICAgICAnxLknLCfEuicsJ8S9JywnxL4nLCfFgScsJ8WCJywKICAgICAgJ8ORJywnw7EnLCfFhycsJ8WIJywnxYMnLCfFhCcsCiAgICAgICfDkicsJ8OyJywnw5MnLCfDsycsJ8OUJywnw7QnLCfDlScsJ8O1Jywnw5YnLCfDticsJ8OYJywnw7gnLCfFkScsCiAgICAgICfFmCcsJ8WZJywnxZQnLCfFlScsCiAgICAgICfFoCcsJ8WhJywnxZ4nLCfFnycsJ8WaJywnxZsnLAogICAgICAnxaQnLCfFpScsJ8WkJywnxaUnLCfFoicsJ8WjJywKICAgICAgJ8OZJywnw7knLCfDmicsJ8O6Jywnw5snLCfDuycsJ8OcJywnw7wnLCfFricsJ8WvJywKICAgICAgJ8W4Jywnw78nLCfDvScsJ8OdJywKICAgICAgJ8W9Jywnxb4nLCfFuScsJ8W6JywnxbsnLCfFvCcsCiAgICAgICfDnicsJ8O+Jywnw5AnLCfDsCcsJ8OfJywnxZInLCfFkycsJ8OGJywnw6YnLCfCtScsCiAgICAgICfigJ0nLCfigJwnLCfigJgnLCfigJknLCInIiwiXG4iLCJcciIsJ18nLCfCuicsJ8KqJ107CgogICAgJGdvb2QgPSBbCiAgICAgICdBJywnYScsJ0EnLCdhJywnQScsJ2EnLCdBJywnYScsJ0FlJywnYWUnLCdBJywnYScsJ0EnLCdhJywnQScsJ2EnLAogICAgICAnQycsJ2MnLCdDJywnYycsJ0MnLCdjJywKICAgICAgJ0QnLCdkJywnRCcsJ2QnLAogICAgICAnRScsJ2UnLCdFJywnZScsJ0UnLCdlJywnRScsJ2UnLCdFJywnZScsJ0UnLCdlJywKICAgICAgJ0cnLCdnJywKICAgICAgJ0knLCdpJywnSScsJ2knLCdJJywnaScsJ0knLCdpJywKICAgICAgJ0wnLCdsJywnTCcsJ2wnLCdMJywnbCcsCiAgICAgICdOJywnbicsJ04nLCduJywnTicsJ24nLAogICAgICAnTycsJ28nLCdPJywnbycsJ08nLCdvJywnTycsJ28nLCdPZScsJ29lJywnTycsJ28nLCdvJywKICAgICAgJ1InLCdyJywnUicsJ3InLAogICAgICAnUycsJ3MnLCdTJywncycsJ1MnLCdzJywKICAgICAgJ1QnLCd0JywnVCcsJ3QnLCdUJywndCcsCiAgICAgICdVJywndScsJ1UnLCd1JywnVScsJ3UnLCdVZScsJ3VlJywnVScsJ3UnLAogICAgICAnWScsJ3knLCdZJywneScsCiAgICAgICdaJywneicsJ1onLCd6JywnWicsJ3onLAogICAgICAnVEgnLCd0aCcsJ0RIJywnZGgnLCdzcycsJ09FJywnb2UnLCdBRScsJ2FlJywndScsCiAgICAgICcnLCcnLCcnLCcnLCcnLCcnLCcnLCctJywnJywnJ107CgogICAgLy8gY29udmVydCBzcGVjaWFsIGNoYXJhY3RlcnMKICAgICR0ZXh0ID0gc3RyX3JlcGxhY2UoJGJhZCwgJGdvb2QsICR0ZXh0KTsKCiAgICAvLyBjb252ZXJ0IHNwZWNpYWwgY2hhcmFjdGVycwogICAgJHRleHQgPSB1dGY4X2RlY29kZSgkdGV4dCk7CiAgICAkdGV4dCA9IGh0bWxlbnRpdGllcygkdGV4dCk7CiAgICAkdGV4dCA9IHByZWdfcmVwbGFjZSgnLyYoW2EtekEtWl0pKHVtbHxhY3V0ZXxncmF2ZXxjaXJjfHRpbGRlKTsvJywgJyQxJywgJHRleHQpOwogICAgJHRleHQgPSBodG1sX2VudGl0eV9kZWNvZGUoJHRleHQpOwoKICAgICR0ZXh0ID0gc3RydG9sb3dlcigkdGV4dCk7CgogICAgLy8gc3RyaXAgYWxsIG5vbiB3b3JkIGNoYXJzCiAgICAkdGV4dCA9IHByZWdfcmVwbGFjZSgnL1xXLycsICcgJywgJHRleHQpOwoKICAgIC8vIHJlcGxhY2UgYWxsIHdoaXRlIHNwYWNlIHNlY3Rpb25zIHdpdGggYSBzZXBhcmF0b3IKICAgICR0ZXh0ID0gcHJlZ19yZXBsYWNlKCcvXCArLycsICRzZXBhcmF0b3IsICR0ZXh0KTsKCiAgICAvLyB0cmltIHNlcGFyYXRvcnMKICAgICR0ZXh0ID0gdHJpbSgkdGV4dCwgJHNlcGFyYXRvcik7CiAgICAvLyR0ZXh0ID0gcHJlZ19yZXBsYWNlKCcvXC0kLycsICcnLCAkdGV4dCk7CiAgICAvLyR0ZXh0ID0gcHJlZ19yZXBsYWNlKCcvXlwtLycsICcnLCAkdGV4dCk7CgogICAgcmV0dXJuICR0ZXh0OwogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZU1vZGVsKCl7CiAgICBnbG9iYWwgJGM7CiAgICBlY2hvICJNb2RlbG9cblxuIjsKICAgICRzcWwgPSAiLyohNDAwMTQgU0VUIEBPTERfRk9SRUlHTl9LRVlfQ0hFQ0tTPUBARk9SRUlHTl9LRVlfQ0hFQ0tTLCBGT1JFSUdOX0tFWV9DSEVDS1M9MCAqLztcblxuIjsKICAgICRtb2RlbHMgPSBzZWxmOjpnZXRNb2RlbExpc3QoKTsKCiAgICBmb3JlYWNoICgkbW9kZWxzIGFzICRtb2RlbCkgewogICAgICBpZiAobWV0aG9kX2V4aXN0cygkbW9kZWwsICdnZW5lcmF0ZScpKSB7CiAgICAgICAgJHNxbCAuPSAkbW9kZWwtPmdlbmVyYXRlKCkgLiAiXG5cbiI7CiAgICAgIH0KICAgIH0KICAgIGZvcmVhY2ggKCRtb2RlbHMgYXMgJG1vZGVsKSB7CiAgICAgIGlmIChtZXRob2RfZXhpc3RzKCRtb2RlbCwgJ2dlbmVyYXRlUmVmcycpKSB7CiAgICAgICAgJHNxbCAuPSAkbW9kZWwtPmdlbmVyYXRlUmVmcygpIC4gIlxuXG4iOwogICAgICB9CiAgICB9CgogICAgJHNxbCAuPSAiLyohNDAwMTQgU0VUIEZPUkVJR05fS0VZX0NIRUNLUz1AT0xEX0ZPUkVJR05fS0VZX0NIRUNLUyAqLztcbiI7CiAgICBlY2hvICRzcWw7CgogICAgJHNxbF9maWxlID0gJGMtPmdldERpcignb2Z3X3NxbCcpLidtb2RlbC5zcWwnOwogICAgaWYgKGZpbGVfZXhpc3RzKCRzcWxfZmlsZSkpewogICAgICB1bmxpbmsoJHNxbF9maWxlKTsKICAgIH0KCiAgICBmaWxlX3B1dF9jb250ZW50cygkc3FsX2ZpbGUsJHNxbCk7CiAgfQoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVwZGF0ZVVybHMoJHNpbGVudD1mYWxzZSl7CiAgICBnbG9iYWwgJGM7CiAgICAkdXJsc19maWxlID0ganNvbl9kZWNvZGUoIGZpbGVfZ2V0X2NvbnRlbnRzKCRjLT5nZXREaXIoJ2FwcF9jb25maWcnKS4ndXJscy5qc29uJyksIHRydWUpOwogICAgJHVybHMgPSBzZWxmOjpnZXRVcmxMaXN0KCR1cmxzX2ZpbGUpOwoKICAgICR1cmxzX2NhY2hlX2ZpbGUgPSAkYy0+Z2V0RGlyKCdhcHBfY2FjaGUnKS4ndXJscy5jYWNoZS5qc29uJzsKICAgIGlmIChmaWxlX2V4aXN0cygkdXJsc19jYWNoZV9maWxlKSl7CiAgICAgIHVubGluaygkdXJsc19jYWNoZV9maWxlKTsKICAgIH0KCiAgICBmaWxlX3B1dF9jb250ZW50cygkdXJsc19jYWNoZV9maWxlLCBqc29uX2VuY29kZSgkdXJscywgSlNPTl9VTkVTQ0FQRURfVU5JQ09ERSApKTsKCiAgICBzZWxmOjp1cGRhdGVDb250cm9sbGVycygkc2lsZW50KTsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VXJsTGlzdCgkaXRlbSl7CiAgICAkbGlzdCA9IHNlbGY6OmdldFVybHMoJGl0ZW0pOwogICAgZm9yICgkaT0wOyRpPGNvdW50KCRsaXN0KTskaSsrKXsKICAgICAgJGtleXMgPSBhcnJheV9rZXlzKCRsaXN0WyRpXSk7CiAgICAgIGZvcmVhY2ggKCRrZXlzIGFzICRrZXkpewogICAgICAgIGlmIChpc19udWxsKCRsaXN0WyRpXVska2V5XSkpewogICAgICAgICAgdW5zZXQoJGxpc3RbJGldWyRrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiAkbGlzdDsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VXJscygkaXRlbSl7CiAgICAkbGlzdCA9IGFycmF5KCk7CiAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygndXJscycsICRpdGVtKSl7CiAgICAgIGZvcmVhY2ggKCRpdGVtWyd1cmxzJ10gYXMgJGVsZW0pewogICAgICAgICRsaXN0ID0gYXJyYXlfbWVyZ2UoJGxpc3QsIHNlbGY6OmdldFVybHMoJGVsZW0pKTsKICAgICAgfQogICAgICBmb3IgKCRpPTA7JGk8Y291bnQoJGxpc3QpOyRpKyspewogICAgICAgICRsaXN0WyRpXVsndXJsJ10gICAgPSAoKGFycmF5X2tleV9leGlzdHMoJ3ByZWZpeCcsICRpdGVtKSAmJiAhaXNfbnVsbCgkaXRlbVsncHJlZml4J10pKSA/ICRpdGVtWydwcmVmaXgnXSA6ICcnKSAuICRsaXN0WyRpXVsndXJsJ107CiAgICAgICAgJGxpc3RbJGldWydsYXlvdXQnXSA9IChhcnJheV9rZXlfZXhpc3RzKCdsYXlvdXQnLCAkbGlzdFskaV0pICAmJiAhaXNfbnVsbCgkbGlzdFskaV1bJ2xheW91dCddKSkgPyAkbGlzdFskaV1bJ2xheW91dCddIDogKCAoYXJyYXlfa2V5X2V4aXN0cygnbGF5b3V0JywgJGl0ZW0pICYmICFpc19udWxsKCRpdGVtWydsYXlvdXQnXSkpID8gJGl0ZW1bJ2xheW91dCddIDogbnVsbCk7CiAgICAgICAgJGxpc3RbJGldWydtb2R1bGUnXSA9IChhcnJheV9rZXlfZXhpc3RzKCdtb2R1bGUnLCAkbGlzdFskaV0pICAmJiAhaXNfbnVsbCgkbGlzdFskaV1bJ21vZHVsZSddKSkgPyAkbGlzdFskaV1bJ21vZHVsZSddIDogKCAoYXJyYXlfa2V5X2V4aXN0cygnbW9kdWxlJywgJGl0ZW0pICYmICFpc19udWxsKCRpdGVtWydtb2R1bGUnXSkpID8gJGl0ZW1bJ21vZHVsZSddIDogbnVsbCk7CiAgICAgICAgJGxpc3RbJGldWydmaWx0ZXInXSA9IChhcnJheV9rZXlfZXhpc3RzKCdmaWx0ZXInLCAkbGlzdFskaV0pICAmJiAhaXNfbnVsbCgkbGlzdFskaV1bJ2ZpbHRlciddKSkgPyAkbGlzdFskaV1bJ2ZpbHRlciddIDogKCAoYXJyYXlfa2V5X2V4aXN0cygnZmlsdGVyJywgJGl0ZW0pICYmICFpc19udWxsKCRpdGVtWydmaWx0ZXInXSkpID8gJGl0ZW1bJ2ZpbHRlciddIDogbnVsbCk7CiAgICAgICAgJGxpc3RbJGldWyd0eXBlJ10gICA9IChhcnJheV9rZXlfZXhpc3RzKCd0eXBlJywgICAkbGlzdFskaV0pICAmJiAhaXNfbnVsbCgkbGlzdFskaV1bJ3R5cGUnXSkpICAgPyAkbGlzdFskaV1bJ3R5cGUnXSAgIDogKCAoYXJyYXlfa2V5X2V4aXN0cygndHlwZScsICAgJGl0ZW0pICYmICFpc19udWxsKCRpdGVtWyd0eXBlJ10pKSAgID8gJGl0ZW1bJ3R5cGUnXSAgIDogbnVsbCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgIGFycmF5X3B1c2goJGxpc3QsICRpdGVtKTsKICAgIH0KICAgIHJldHVybiAkbGlzdDsKICB9CgogIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdXBkYXRlQ29udHJvbGxlcnMoJHNpbGVudD1mYWxzZSl7CiAgICBnbG9iYWwgJGM7CiAgICAkdXJscyAgID0ganNvbl9kZWNvZGUoIGZpbGVfZ2V0X2NvbnRlbnRzKCRjLT5nZXREaXIoJ2FwcF9jYWNoZScpLid1cmxzLmNhY2hlLmpzb24nKSwgdHJ1ZSk7CiAgICAkZXJyb3JzID0gZmFsc2U7CiAgICBmb3JlYWNoICgkdXJscyBhcyAkdXJsKXsKICAgICAgaWYgKGluX2FycmF5KCR1cmxbJ21vZHVsZSddLCBbJ3ByaXZhdGUnLCAncHJvdGVjdGVkJywgJ3B1YmxpYyddKSl7CiAgICAgICAgaWYgKCEkc2lsZW50KSB7CiAgICAgICAgICBlY2hvICJFUlJPUjogRWwgbm9tYnJlIGRlbCBtw7NkdWxvIGVzIHVuYSBwYWxhYnJhIHJlc2VydmFkYSAoIi4kdXJsWydtb2R1bGUnXS4iKS4gRWwgbcOzZHVsbyBubyBwdWVkZSBsbGFtYXJzZSBkZSBsYXMgc2lndWllbnRlcyBtYW5lcmFzOlxuIjsKICAgICAgICAgIGVjaG8gIiAgwrcgcHJpdmF0ZVxuIjsKICAgICAgICAgIGVjaG8gIiAgwrcgcHJvdGVjdGVkXG4iOwogICAgICAgICAgZWNobyAiICDCtyBwdWJsaWNcbiI7CiAgICAgICAgICAkZXJyb3JzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmICgkdXJsWydhY3Rpb24nXT09JHVybFsnbW9kdWxlJ10pewogICAgICAgIGlmICghJHNpbGVudCkgewogICAgICAgICAgZWNobyAiRVJST1I6IFVuYSBhY2Npw7NuIG5vIHB1ZWRlIGxsYW1hcnNlIGlndWFsIHF1ZSBlbCBtw7NkdWxvIHF1ZSBsYSBjb250aWVuZTpcbiI7CiAgICAgICAgICBlY2hvICIgIE3Ds2R1bG86ICIuJHVybFsnbW9kdWxlJ10uIlxuIjsKICAgICAgICAgIGVjaG8gIiAgQWNjacOzbjogIi4kdXJsWydhY3Rpb24nXS4iXG4iOwogICAgICAgICAgJGVycm9ycyA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICAkcnV0YV9jb250cm9sbGVyID0gJGMtPmdldERpcignYXBwX2NvbnRyb2xsZXInKSAuICR1cmxbJ21vZHVsZSddIC4gJy5waHAnOwogICAgICBpZiAoIWZpbGVfZXhpc3RzKCRydXRhX2NvbnRyb2xsZXIpKXsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkcnV0YV9jb250cm9sbGVyLCAiPCIuIj9waHBcbmNsYXNzICIuJHVybFsnbW9kdWxlJ10uIiBleHRlbmRzIE9Db250cm9sbGVye1xufSIpOwogICAgICAgIGlmICghJHNpbGVudCkgewogICAgICAgICAgZWNobyAiTnVldm8gY29udHJvbGFkb3IgXCIiIC4gJHVybFsnbW9kdWxlJ10gLiAiXCIgY3JlYWRvIGVuIGVsIGFyY2hpdm8gXCIiIC4gJHJ1dGFfY29udHJvbGxlciAuICJcIlxuIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgICRydXRhX3RlbXBsYXRlcyA9ICRjLT5nZXREaXIoJ2FwcF90ZW1wbGF0ZScpIC4gJHVybFsnbW9kdWxlJ107CiAgICAgIGlmICghZmlsZV9leGlzdHMoJHJ1dGFfdGVtcGxhdGVzKSAmJiAhaXNfZGlyKCRydXRhX3RlbXBsYXRlcykpewogICAgICAgIG1rZGlyKCRydXRhX3RlbXBsYXRlcyk7CiAgICAgICAgaWYgKCEkc2lsZW50KSB7CiAgICAgICAgICBlY2hvICJOdWV2YSBjYXJwZXRhIHBhcmEgdGVtcGxhdGVzIFwiIiAuICRydXRhX3RlbXBsYXRlcyAuICJcIiBjcmVhZGFcbiI7CiAgICAgICAgfQogICAgICB9CgogICAgICAkY29udHJvbGxlcl9zdHIgPSBmaWxlX2dldF9jb250ZW50cygkcnV0YV9jb250cm9sbGVyKTsKICAgICAgaWYgKHN0cmlwb3MoJGNvbnRyb2xsZXJfc3RyLCAiZnVuY3Rpb24gIi4kdXJsWydhY3Rpb24nXSkgPT09IGZhbHNlKXsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkcnV0YV9jb250cm9sbGVyLCBzdWJzdHJfcmVwbGFjZSgkY29udHJvbGxlcl9zdHIsICcnLCBzdHJycG9zKCRjb250cm9sbGVyX3N0ciwgJ30nKSwgMSkpOwoKICAgICAgICAkc3RyID0gIiI7CiAgICAgICAgJHN0ciAuPSAiICAvKlxuIjsKICAgICAgICAkc3RyIC49ICIgICAqICIuJHVybFsnY29tbWVudCddLiJcbiI7CiAgICAgICAgJHN0ciAuPSAiICAgKi9cbiI7CiAgICAgICAgJHN0ciAuPSAiICBmdW5jdGlvbiAiLiR1cmxbJ2FjdGlvbiddLiIoJCIuInJlcSl7fVxuIjsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkcnV0YV9jb250cm9sbGVyLCAkc3RyLiJ9IiwgRklMRV9BUFBFTkQpOwoKICAgICAgICBpZiAoISRzaWxlbnQpIHsKICAgICAgICAgIGVjaG8gIk51ZXZhIGFjY2nDs24gXCIiIC4gJHVybFsnYWN0aW9uJ10gLiAiXCIgY3JlYWRhIGVuIGVsIGNvbnRyb2xhZG9yIFwiIiAuICR1cmxbJ21vZHVsZSddIC4gIlwiXG4iOwogICAgICAgIH0KCiAgICAgICAgJHJ1dGFfdGVtcGxhdGUgPSAkYy0+Z2V0RGlyKCdhcHBfdGVtcGxhdGUnKSAuICR1cmxbJ21vZHVsZSddIC4gJy8nIC4gJHVybFsnYWN0aW9uJ10gLiAnLnBocCc7CiAgICAgICAgaWYgKCFmaWxlX2V4aXN0cygkcnV0YV90ZW1wbGF0ZSkpewogICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJHJ1dGFfdGVtcGxhdGUsICcnKTsKICAgICAgICAgIGlmICghJHNpbGVudCkgewogICAgICAgICAgICBlY2hvICJOdWV2byB0ZW1wbGF0ZSBcIiIgLiAkcnV0YV90ZW1wbGF0ZSAuICJcIiBjcmVhZG9cbiI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKCRlcnJvcnMgJiYgISRzaWxlbnQpewogICAgICBlY2hvICJcbiI7CiAgICAgIGVjaG8gIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iOwogICAgICBlY2hvICIgIE9jdXJyaWVyb24gZXJyb3JlcyBhbCBhY3R1YWxpemFyIG3Ds2R1bG9zIHkgY29udHJvbGFkb3Jlcy4gUmV2aXNhIGxvcyBlcnJvcmVzIHkgdnVlbHZlIGEgZWplY3V0YXIgbGEgdGFyZWEgdXBkYXRlLXVybHNcbiI7CiAgICAgIGVjaG8gIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iOwogICAgfQogIH0KCiAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBydW5UYXNrKCR0YXNrX25hbWUsICRwYXJhbXM9W10pewoJICBnbG9iYWwgJGM7CgkgICR0YXNrX2ZpbGUgPSAkYy0+Z2V0RGlyKCdhcHBfdGFzaycpLiR0YXNrX25hbWUuJy5waHAnOwoJICBpZiAoIWZpbGVfZXhpc3RzKCR0YXNrX2ZpbGUpKXsKCQkgIHJldHVybiBmYWxzZTsKCSAgfQogICAgcmVxdWlyZV9vbmNlICR0YXNrX2ZpbGU7CiAgICAkdHNrID0gbmV3ICR0YXNrX25hbWUoKTsKICAgICR0c2stPnJ1bigkcGFyYW1zKTsKICB9Cn0K',
  'ofw/base/start.php' => 'data:text/x-php;base64,PD9waHAKICAvKiBEYXRvcyBnZW5lcmFsZXMgKi8KICBkYXRlX2RlZmF1bHRfdGltZXpvbmVfc2V0KCdFdXJvcGUvTWFkcmlkJyk7CgogICRiYXNlZGlyID0gcmVhbHBhdGgoZGlybmFtZShfX0ZJTEVfXykpOwogICRiYXNlZGlyID0gc3RyX2lyZXBsYWNlKCdvZncvYmFzZScsJycsJGJhc2VkaXIpOwoKICByZXF1aXJlKCRiYXNlZGlyLidvZncvYmFzZS9PQ29uZmlnLnBocCcpOwogICRjID0gbmV3IE9Db25maWcoJGJhc2VkaXIpOwoKICAvLyBCYXNlCiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPQmFzZS5waHAnKTsKICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ09Db250cm9sbGVyLnBocCcpOwogIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2Jhc2UnKS4nT1NlcnZpY2UucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPREIucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPREJwLnBocCcpOwogIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2Jhc2UnKS4nT0xvZy5waHAnKTsKICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ09VcmwucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPVGVtcGxhdGUucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPU2Vzc2lvbi5waHAnKTsKICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ09Db29raWUucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPQ2FjaGUucGhwJyk7CiAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPRm9ybS5waHAnKTsKICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ09Ub2tlbi5waHAnKTsKCiAgLy8gT3B0aW9uYWxzCiAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCdicm93c2VyJykpewogICAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPQnJvd3Nlci5waHAnKTsKICB9CiAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCdlbWFpbCcpKXsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2Jhc2UnKS4nT0VtYWlsLnBocCcpOwogIH0KICBpZiAoJGMtPmdldERlZmF1bHRNb2R1bGUoJ2VtYWlsX3NtdHAnKSl7CiAgICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19saWInKS4nZW1haWwvRXhjZXB0aW9uLnBocCcpOwogICAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfbGliJykuJ2VtYWlsL1BIUE1haWxlci5waHAnKTsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2xpYicpLidlbWFpbC9TTVRQLnBocCcpOwogIH0KICBpZiAoJGMtPmdldERlZmF1bHRNb2R1bGUoJ2Z0cCcpKXsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2Jhc2UnKS4nT0ZUUC5waHAnKTsKICB9CiAgaWYgKCRjLT5nZXREZWZhdWx0TW9kdWxlKCdpbWFnZScpKXsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2xpYicpLidpbWFnZS9TaW1wbGVJbWFnZS5waHAnKTsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2Jhc2UnKS4nT0ltYWdlLnBocCcpOwogIH0KICBpZiAoJGMtPmdldERlZmF1bHRNb2R1bGUoJ3BkZicpKXsKICAgIHJlcXVpcmUoJGMtPmdldERpcignb2Z3X2xpYicpLidwZGYvdGNwZGYucGhwJyk7CiAgICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ09QREYucGhwJyk7CiAgfQogIGlmICgkYy0+Z2V0RGVmYXVsdE1vZHVsZSgndHJhbnNsYXRlJykpewogICAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfYmFzZScpLidPVHJhbnNsYXRlLnBocCcpOwogIH0KCiAgLy8gQmFzZSBmdW5jdGlvbnMKICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19iYXNlJykuJ2Jhc2UucGhwJyk7CgogIC8vIE9GVyBUYXNrcwogIGlmICgkbW9kZWwgPSBvcGVuZGlyKCRjLT5nZXREaXIoJ29md190YXNrJykpKSB7CiAgICB3aGlsZSAoZmFsc2UgIT09ICgkZW50cnkgPSByZWFkZGlyKCRtb2RlbCkpKSB7CiAgICAgIGlmICgkZW50cnkgIT0gIi4iICYmICRlbnRyeSAhPSAiLi4iKSB7CiAgICAgICAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdvZndfdGFzaycpLiRlbnRyeSk7CiAgICAgIH0KICAgIH0KICAgIGNsb3NlZGlyKCRtb2RlbCk7CiAgfQoKICAvLyBMaWJzCiAgJGxpYl9saXN0ID0gJGMtPmdldExpYnMoKTsKICBmb3JlYWNoICgkbGliX2xpc3QgYXMgJGxpYil7CiAgICByZXF1aXJlKCRjLT5nZXREaXIoJ29md19saWInKS4kbGliLicucGhwJyk7CiAgfQoKICAvLyBVc2VyIHNlcnZpY2VzCiAgaWYgKCRtb2RlbCA9IG9wZW5kaXIoJGMtPmdldERpcignYXBwX3NlcnZpY2UnKSkpIHsKICAgIHdoaWxlIChmYWxzZSAhPT0gKCRlbnRyeSA9IHJlYWRkaXIoJG1vZGVsKSkpIHsKICAgICAgaWYgKCRlbnRyeSAhPSAnLicgJiYgJGVudHJ5ICE9ICcuLicpIHsKICAgICAgICByZXF1aXJlKCRjLT5nZXREaXIoJ2FwcF9zZXJ2aWNlJykuJGVudHJ5KTsKICAgICAgfQogICAgfQogICAgY2xvc2VkaXIoJG1vZGVsKTsKICB9CgogIC8vIEZpbHRlcnMKICBpZiAoJG1vZGVsID0gb3BlbmRpcigkYy0+Z2V0RGlyKCdhcHBfZmlsdGVyJykpKSB7CiAgICB3aGlsZSAoZmFsc2UgIT09ICgkZW50cnkgPSByZWFkZGlyKCRtb2RlbCkpKSB7CiAgICAgIGlmICgkZW50cnkgIT0gIi4iICYmICRlbnRyeSAhPSAiLi4iKSB7CiAgICAgICAgcmVxdWlyZSgkYy0+Z2V0RGlyKCdhcHBfZmlsdGVyJykuJGVudHJ5KTsKICAgICAgfQogICAgfQogICAgY2xvc2VkaXIoJG1vZGVsKTsKICB9CgogIC8vIEFwcAogIGlmICgkbW9kZWwgPSBvcGVuZGlyKCRjLT5nZXREaXIoJ2FwcF9tb2RlbCcpKSkgewogICAgd2hpbGUgKGZhbHNlICE9PSAoJGVudHJ5ID0gcmVhZGRpcigkbW9kZWwpKSkgewogICAgICBpZiAoJGVudHJ5ICE9ICIuIiAmJiAkZW50cnkgIT0gIi4uIikgewogICAgICAgIHJlcXVpcmUoJGMtPmdldERpcignYXBwX21vZGVsJykuJGVudHJ5KTsKICAgICAgfQogICAgfQogICAgY2xvc2VkaXIoJG1vZGVsKTsKICB9Cg==',
  'ofw/lib/another/library.php' => 'data:text/x-php;base64,PD9waHAKICAvLyBUaGlzIHdvdWxkIGJlIGEgdGhpcmQgcGFydHkgbGlicmFyeSB0byBiZSBpbmNsdWRlZA==',
  'ofw/lib/email/.gitignore' => 'data:text/plain;base64,KgohLmdpdGlnbm9yZQohZW1haWwudHh0',
  'ofw/lib/email/Exception.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIFBIUE1haWxlciBFeGNlcHRpb24gY2xhc3MuCiAqIFBIUCBWZXJzaW9uIDUuNS4KICoKICogQHNlZSAgICAgICBodHRwczovL2dpdGh1Yi5jb20vUEhQTWFpbGVyL1BIUE1haWxlci8gVGhlIFBIUE1haWxlciBHaXRIdWIgcHJvamVjdAogKgogKiBAYXV0aG9yICAgIE1hcmN1cyBCb2ludG9uIChTeW5jaHJvL2Nvb2xicnUpIDxwaHBtYWlsZXJAc3luY2hyb21lZGlhLmNvLnVrPgogKiBAYXV0aG9yICAgIEppbSBKYWdpZWxza2kgKGppbWphZykgPGppbWphZ0BnbWFpbC5jb20+CiAqIEBhdXRob3IgICAgQW5keSBQcmV2b3N0IChjb2Rld29yeHRlY2gpIDxjb2Rld29yeHRlY2hAdXNlcnMuc291cmNlZm9yZ2UubmV0PgogKiBAYXV0aG9yICAgIEJyZW50IFIuIE1hdHplbGxlIChvcmlnaW5hbCBmb3VuZGVyKQogKiBAY29weXJpZ2h0IDIwMTIgLSAyMDE3IE1hcmN1cyBCb2ludG9uCiAqIEBjb3B5cmlnaHQgMjAxMCAtIDIwMTIgSmltIEphZ2llbHNraQogKiBAY29weXJpZ2h0IDIwMDQgLSAyMDA5IEFuZHkgUHJldm9zdAogKiBAbGljZW5zZSAgIGh0dHA6Ly93d3cuZ251Lm9yZy9jb3B5bGVmdC9sZXNzZXIuaHRtbCBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKICogQG5vdGUgICAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCAtIFdJVEhPVVQKICogQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yCiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLgogKi8KCm5hbWVzcGFjZSBQSFBNYWlsZXJcUEhQTWFpbGVyOwoKLyoqCiAqIFBIUE1haWxlciBleGNlcHRpb24gaGFuZGxlci4KICoKICogQGF1dGhvciAgTWFyY3VzIEJvaW50b24gPHBocG1haWxlckBzeW5jaHJvbWVkaWEuY28udWs+CiAqLwpjbGFzcyBFeGNlcHRpb24gZXh0ZW5kcyBcRXhjZXB0aW9uCnsKICAgIC8qKgogICAgICogUHJldHRpZnkgZXJyb3IgbWVzc2FnZSBvdXRwdXQuCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGVycm9yTWVzc2FnZSgpCiAgICB7CiAgICAgICAgcmV0dXJuICc8c3Ryb25nPicgLiBodG1sc3BlY2lhbGNoYXJzKCR0aGlzLT5nZXRNZXNzYWdlKCkpIC4gIjwvc3Ryb25nPjxiciAvPlxuIjsKICAgIH0KfQo=',
  'ofw/lib/email/PHPMailer.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIFBIUE1haWxlciAtIFBIUCBlbWFpbCBjcmVhdGlvbiBhbmQgdHJhbnNwb3J0IGNsYXNzLgogKiBQSFAgVmVyc2lvbiA1LjUuCiAqCiAqIEBzZWUgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL1BIUE1haWxlci9QSFBNYWlsZXIvIFRoZSBQSFBNYWlsZXIgR2l0SHViIHByb2plY3QKICoKICogQGF1dGhvciAgICBNYXJjdXMgQm9pbnRvbiAoU3luY2hyby9jb29sYnJ1KSA8cGhwbWFpbGVyQHN5bmNocm9tZWRpYS5jby51az4KICogQGF1dGhvciAgICBKaW0gSmFnaWVsc2tpIChqaW1qYWcpIDxqaW1qYWdAZ21haWwuY29tPgogKiBAYXV0aG9yICAgIEFuZHkgUHJldm9zdCAoY29kZXdvcnh0ZWNoKSA8Y29kZXdvcnh0ZWNoQHVzZXJzLnNvdXJjZWZvcmdlLm5ldD4KICogQGF1dGhvciAgICBCcmVudCBSLiBNYXR6ZWxsZSAob3JpZ2luYWwgZm91bmRlcikKICogQGNvcHlyaWdodCAyMDEyIC0gMjAxNyBNYXJjdXMgQm9pbnRvbgogKiBAY29weXJpZ2h0IDIwMTAgLSAyMDEyIEppbSBKYWdpZWxza2kKICogQGNvcHlyaWdodCAyMDA0IC0gMjAwOSBBbmR5IFByZXZvc3QKICogQGxpY2Vuc2UgICBodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvbGVzc2VyLmh0bWwgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAqIEBub3RlICAgICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwgLSBXSVRIT1VUCiAqIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvcgogKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4KICovCgpuYW1lc3BhY2UgUEhQTWFpbGVyXFBIUE1haWxlcjsKCi8qKgogKiBQSFBNYWlsZXIgLSBQSFAgZW1haWwgY3JlYXRpb24gYW5kIHRyYW5zcG9ydCBjbGFzcy4KICoKICogQGF1dGhvciAgTWFyY3VzIEJvaW50b24gKFN5bmNocm8vY29vbGJydSkgPHBocG1haWxlckBzeW5jaHJvbWVkaWEuY28udWs+CiAqIEBhdXRob3IgIEppbSBKYWdpZWxza2kgKGppbWphZykgPGppbWphZ0BnbWFpbC5jb20+CiAqIEBhdXRob3IgIEFuZHkgUHJldm9zdCAoY29kZXdvcnh0ZWNoKSA8Y29kZXdvcnh0ZWNoQHVzZXJzLnNvdXJjZWZvcmdlLm5ldD4KICogQGF1dGhvciAgQnJlbnQgUi4gTWF0emVsbGUgKG9yaWdpbmFsIGZvdW5kZXIpCiAqLwpjbGFzcyBQSFBNYWlsZXIKewogICAgY29uc3QgQ0hBUlNFVF9JU084ODU5MSA9ICdpc28tODg1OS0xJzsKICAgIGNvbnN0IENIQVJTRVRfVVRGOCA9ICd1dGYtOCc7CgogICAgY29uc3QgQ09OVEVOVF9UWVBFX1BMQUlOVEVYVCA9ICd0ZXh0L3BsYWluJzsKICAgIGNvbnN0IENPTlRFTlRfVFlQRV9URVhUX0NBTEVOREFSID0gJ3RleHQvY2FsZW5kYXInOwogICAgY29uc3QgQ09OVEVOVF9UWVBFX1RFWFRfSFRNTCA9ICd0ZXh0L2h0bWwnOwogICAgY29uc3QgQ09OVEVOVF9UWVBFX01VTFRJUEFSVF9BTFRFUk5BVElWRSA9ICdtdWx0aXBhcnQvYWx0ZXJuYXRpdmUnOwogICAgY29uc3QgQ09OVEVOVF9UWVBFX01VTFRJUEFSVF9NSVhFRCA9ICdtdWx0aXBhcnQvbWl4ZWQnOwogICAgY29uc3QgQ09OVEVOVF9UWVBFX01VTFRJUEFSVF9SRUxBVEVEID0gJ211bHRpcGFydC9yZWxhdGVkJzsKCiAgICBjb25zdCBFTkNPRElOR183QklUID0gJzdiaXQnOwogICAgY29uc3QgRU5DT0RJTkdfOEJJVCA9ICc4Yml0JzsKICAgIGNvbnN0IEVOQ09ESU5HX0JBU0U2NCA9ICdiYXNlNjQnOwogICAgY29uc3QgRU5DT0RJTkdfQklOQVJZID0gJ2JpbmFyeSc7CiAgICBjb25zdCBFTkNPRElOR19RVU9URURfUFJJTlRBQkxFID0gJ3F1b3RlZC1wcmludGFibGUnOwoKICAgIC8qKgogICAgICogRW1haWwgcHJpb3JpdHkuCiAgICAgKiBPcHRpb25zOiBudWxsIChkZWZhdWx0KSwgMSA9IEhpZ2gsIDMgPSBOb3JtYWwsIDUgPSBsb3cuCiAgICAgKiBXaGVuIG51bGwsIHRoZSBoZWFkZXIgaXMgbm90IHNldCBhdCBhbGwuCiAgICAgKgogICAgICogQHZhciBpbnQKICAgICAqLwogICAgcHVibGljICRQcmlvcml0eTsKCiAgICAvKioKICAgICAqIFRoZSBjaGFyYWN0ZXIgc2V0IG9mIHRoZSBtZXNzYWdlLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkQ2hhclNldCA9IHNlbGY6OkNIQVJTRVRfSVNPODg1OTE7CgogICAgLyoqCiAgICAgKiBUaGUgTUlNRSBDb250ZW50LXR5cGUgb2YgdGhlIG1lc3NhZ2UuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRDb250ZW50VHlwZSA9IHNlbGY6OkNPTlRFTlRfVFlQRV9QTEFJTlRFWFQ7CgogICAgLyoqCiAgICAgKiBUaGUgbWVzc2FnZSBlbmNvZGluZy4KICAgICAqIE9wdGlvbnM6ICI4Yml0IiwgIjdiaXQiLCAiYmluYXJ5IiwgImJhc2U2NCIsIGFuZCAicXVvdGVkLXByaW50YWJsZSIuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRFbmNvZGluZyA9IHNlbGY6OkVOQ09ESU5HXzhCSVQ7CgogICAgLyoqCiAgICAgKiBIb2xkcyB0aGUgbW9zdCByZWNlbnQgbWFpbGVyIGVycm9yIG1lc3NhZ2UuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRFcnJvckluZm8gPSAnJzsKCiAgICAvKioKICAgICAqIFRoZSBGcm9tIGVtYWlsIGFkZHJlc3MgZm9yIHRoZSBtZXNzYWdlLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkRnJvbSA9ICdyb290QGxvY2FsaG9zdCc7CgogICAgLyoqCiAgICAgKiBUaGUgRnJvbSBuYW1lIG9mIHRoZSBtZXNzYWdlLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkRnJvbU5hbWUgPSAnUm9vdCBVc2VyJzsKCiAgICAvKioKICAgICAqIFRoZSBlbnZlbG9wZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UuCiAgICAgKiBUaGlzIHdpbGwgdXN1YWxseSBiZSB0dXJuZWQgaW50byBhIFJldHVybi1QYXRoIGhlYWRlciBieSB0aGUgcmVjZWl2ZXIsCiAgICAgKiBhbmQgaXMgdGhlIGFkZHJlc3MgdGhhdCBib3VuY2VzIHdpbGwgYmUgc2VudCB0by4KICAgICAqIElmIG5vdCBlbXB0eSwgd2lsbCBiZSBwYXNzZWQgdmlhIGAtZmAgdG8gc2VuZG1haWwgb3IgYXMgdGhlICdNQUlMIEZST00nIHZhbHVlIG92ZXIgU01UUC4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJFNlbmRlciA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIFN1YmplY3Qgb2YgdGhlIG1lc3NhZ2UuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRTdWJqZWN0ID0gJyc7CgogICAgLyoqCiAgICAgKiBBbiBIVE1MIG9yIHBsYWluIHRleHQgbWVzc2FnZSBib2R5LgogICAgICogSWYgSFRNTCB0aGVuIGNhbGwgaXNIVE1MKHRydWUpLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkQm9keSA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIHBsYWluLXRleHQgbWVzc2FnZSBib2R5LgogICAgICogVGhpcyBib2R5IGNhbiBiZSByZWFkIGJ5IG1haWwgY2xpZW50cyB0aGF0IGRvIG5vdCBoYXZlIEhUTUwgZW1haWwKICAgICAqIGNhcGFiaWxpdHkgc3VjaCBhcyBtdXR0ICYgRXVkb3JhLgogICAgICogQ2xpZW50cyB0aGF0IGNhbiByZWFkIEhUTUwgd2lsbCB2aWV3IHRoZSBub3JtYWwgQm9keS4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJEFsdEJvZHkgPSAnJzsKCiAgICAvKioKICAgICAqIEFuIGlDYWwgbWVzc2FnZSBwYXJ0IGJvZHkuCiAgICAgKiBPbmx5IHN1cHBvcnRlZCBpbiBzaW1wbGUgYWx0IG9yIGFsdF9pbmxpbmUgbWVzc2FnZSB0eXBlcwogICAgICogVG8gZ2VuZXJhdGUgaUNhbCBldmVudCBzdHJ1Y3R1cmVzLCB1c2UgY2xhc3NlcyBsaWtlIEVhc3lQZWFzeUlDUyBvciBpQ2FsY3JlYXRvci4KICAgICAqCiAgICAgKiBAc2VlIGh0dHA6Ly9zcHJhaW4uY2gvYmxvZy9kb3dubG9hZHMvcGhwLWNsYXNzLWVhc3lwZWFzeWljcy1jcmVhdGUtaWNhbC1maWxlcy13aXRoLXBocC8KICAgICAqIEBzZWUgaHR0cDovL2tpZ2tvbnN1bHQuc2UvaUNhbGNyZWF0b3IvCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRJY2FsID0gJyc7CgogICAgLyoqCiAgICAgKiBUaGUgY29tcGxldGUgY29tcGlsZWQgTUlNRSBtZXNzYWdlIGJvZHkuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICRNSU1FQm9keSA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIGNvbXBsZXRlIGNvbXBpbGVkIE1JTUUgbWVzc2FnZSBoZWFkZXJzLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCAkTUlNRUhlYWRlciA9ICcnOwoKICAgIC8qKgogICAgICogRXh0cmEgaGVhZGVycyB0aGF0IGNyZWF0ZUhlYWRlcigpIGRvZXNuJ3QgZm9sZCBpbi4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgJG1haWxIZWFkZXIgPSAnJzsKCiAgICAvKioKICAgICAqIFdvcmQtd3JhcCB0aGUgbWVzc2FnZSBib2R5IHRvIHRoaXMgbnVtYmVyIG9mIGNoYXJzLgogICAgICogU2V0IHRvIDAgdG8gbm90IHdyYXAuIEEgdXNlZnVsIHZhbHVlIGhlcmUgaXMgNzgsIGZvciBSRkMyODIyIHNlY3Rpb24gMi4xLjEgY29tcGxpYW5jZS4KICAgICAqCiAgICAgKiBAc2VlIHN0YXRpYzo6U1REX0xJTkVfTEVOR1RICiAgICAgKgogICAgICogQHZhciBpbnQKICAgICAqLwogICAgcHVibGljICRXb3JkV3JhcCA9IDA7CgogICAgLyoqCiAgICAgKiBXaGljaCBtZXRob2QgdG8gdXNlIHRvIHNlbmQgbWFpbC4KICAgICAqIE9wdGlvbnM6ICJtYWlsIiwgInNlbmRtYWlsIiwgb3IgInNtdHAiLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkTWFpbGVyID0gJ21haWwnOwoKICAgIC8qKgogICAgICogVGhlIHBhdGggdG8gdGhlIHNlbmRtYWlsIHByb2dyYW0uCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRTZW5kbWFpbCA9ICcvdXNyL3NiaW4vc2VuZG1haWwnOwoKICAgIC8qKgogICAgICogV2hldGhlciBtYWlsKCkgdXNlcyBhIGZ1bGx5IHNlbmRtYWlsLWNvbXBhdGlibGUgTVRBLgogICAgICogT25lIHdoaWNoIHN1cHBvcnRzIHNlbmRtYWlsJ3MgIi1vaSAtZiIgb3B0aW9ucy4KICAgICAqCiAgICAgKiBAdmFyIGJvb2wKICAgICAqLwogICAgcHVibGljICRVc2VTZW5kbWFpbE9wdGlvbnMgPSB0cnVlOwoKICAgIC8qKgogICAgICogVGhlIGVtYWlsIGFkZHJlc3MgdGhhdCBhIHJlYWRpbmcgY29uZmlybWF0aW9uIHNob3VsZCBiZSBzZW50IHRvLCBhbHNvIGtub3duIGFzIHJlYWQgcmVjZWlwdC4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJENvbmZpcm1SZWFkaW5nVG8gPSAnJzsKCiAgICAvKioKICAgICAqIFRoZSBob3N0bmFtZSB0byB1c2UgaW4gdGhlIE1lc3NhZ2UtSUQgaGVhZGVyIGFuZCBhcyBkZWZhdWx0IEhFTE8gc3RyaW5nLgogICAgICogSWYgZW1wdHksIFBIUE1haWxlciBhdHRlbXB0cyB0byBmaW5kIG9uZSB3aXRoLCBpbiBvcmRlciwKICAgICAqICRfU0VSVkVSWydTRVJWRVJfTkFNRSddLCBnZXRob3N0bmFtZSgpLCBwaHBfdW5hbWUoJ24nKSwgb3IgdGhlIHZhbHVlCiAgICAgKiAnbG9jYWxob3N0LmxvY2FsZG9tYWluJy4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJEhvc3RuYW1lID0gJyc7CgogICAgLyoqCiAgICAgKiBBbiBJRCB0byBiZSB1c2VkIGluIHRoZSBNZXNzYWdlLUlEIGhlYWRlci4KICAgICAqIElmIGVtcHR5LCBhIHVuaXF1ZSBpZCB3aWxsIGJlIGdlbmVyYXRlZC4KICAgICAqIFlvdSBjYW4gc2V0IHlvdXIgb3duLCBidXQgaXQgbXVzdCBiZSBpbiB0aGUgZm9ybWF0ICI8aWRAZG9tYWluPiIsCiAgICAgKiBhcyBkZWZpbmVkIGluIFJGQzUzMjIgc2VjdGlvbiAzLjYuNCBvciBpdCB3aWxsIGJlIGlnbm9yZWQuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTMyMiNzZWN0aW9uLTMuNi40CiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRNZXNzYWdlSUQgPSAnJzsKCiAgICAvKioKICAgICAqIFRoZSBtZXNzYWdlIERhdGUgdG8gYmUgdXNlZCBpbiB0aGUgRGF0ZSBoZWFkZXIuCiAgICAgKiBJZiBlbXB0eSwgdGhlIGN1cnJlbnQgZGF0ZSB3aWxsIGJlIGFkZGVkLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkTWVzc2FnZURhdGUgPSAnJzsKCiAgICAvKioKICAgICAqIFNNVFAgaG9zdHMuCiAgICAgKiBFaXRoZXIgYSBzaW5nbGUgaG9zdG5hbWUgb3IgbXVsdGlwbGUgc2VtaWNvbG9uLWRlbGltaXRlZCBob3N0bmFtZXMuCiAgICAgKiBZb3UgY2FuIGFsc28gc3BlY2lmeSBhIGRpZmZlcmVudCBwb3J0CiAgICAgKiBmb3IgZWFjaCBob3N0IGJ5IHVzaW5nIHRoaXMgZm9ybWF0OiBbaG9zdG5hbWU6cG9ydF0KICAgICAqIChlLmcuICJzbXRwMS5leGFtcGxlLmNvbToyNTtzbXRwMi5leGFtcGxlLmNvbSIpLgogICAgICogWW91IGNhbiBhbHNvIHNwZWNpZnkgZW5jcnlwdGlvbiB0eXBlLCBmb3IgZXhhbXBsZToKICAgICAqIChlLmcuICJ0bHM6Ly9zbXRwMS5leGFtcGxlLmNvbTo1ODc7c3NsOi8vc210cDIuZXhhbXBsZS5jb206NDY1IikuCiAgICAgKiBIb3N0cyB3aWxsIGJlIHRyaWVkIGluIG9yZGVyLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkSG9zdCA9ICdsb2NhbGhvc3QnOwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgU01UUCBzZXJ2ZXIgcG9ydC4KICAgICAqCiAgICAgKiBAdmFyIGludAogICAgICovCiAgICBwdWJsaWMgJFBvcnQgPSAyNTsKCiAgICAvKioKICAgICAqIFRoZSBTTVRQIEhFTE8gb2YgdGhlIG1lc3NhZ2UuCiAgICAgKiBEZWZhdWx0IGlzICRIb3N0bmFtZS4gSWYgJEhvc3RuYW1lIGlzIGVtcHR5LCBQSFBNYWlsZXIgYXR0ZW1wdHMgdG8gZmluZAogICAgICogb25lIHdpdGggdGhlIHNhbWUgbWV0aG9kIGRlc2NyaWJlZCBhYm92ZSBmb3IgJEhvc3RuYW1lLgogICAgICoKICAgICAqIEBzZWUgUEhQTWFpbGVyOjokSG9zdG5hbWUKICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJEhlbG8gPSAnJzsKCiAgICAvKioKICAgICAqIFdoYXQga2luZCBvZiBlbmNyeXB0aW9uIHRvIHVzZSBvbiB0aGUgU01UUCBjb25uZWN0aW9uLgogICAgICogT3B0aW9uczogJycsICdzc2wnIG9yICd0bHMnLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkU01UUFNlY3VyZSA9ICcnOwoKICAgIC8qKgogICAgICogV2hldGhlciB0byBlbmFibGUgVExTIGVuY3J5cHRpb24gYXV0b21hdGljYWxseSBpZiBhIHNlcnZlciBzdXBwb3J0cyBpdCwKICAgICAqIGV2ZW4gaWYgYFNNVFBTZWN1cmVgIGlzIG5vdCBzZXQgdG8gJ3RscycuCiAgICAgKiBCZSBhd2FyZSB0aGF0IGluIFBIUCA+PSA1LjYgdGhpcyByZXF1aXJlcyB0aGF0IHRoZSBzZXJ2ZXIncyBjZXJ0aWZpY2F0ZXMgYXJlIHZhbGlkLgogICAgICoKICAgICAqIEB2YXIgYm9vbAogICAgICovCiAgICBwdWJsaWMgJFNNVFBBdXRvVExTID0gdHJ1ZTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIFNNVFAgYXV0aGVudGljYXRpb24uCiAgICAgKiBVc2VzIHRoZSBVc2VybmFtZSBhbmQgUGFzc3dvcmQgcHJvcGVydGllcy4KICAgICAqCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JFVzZXJuYW1lCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JFBhc3N3b3JkCiAgICAgKgogICAgICogQHZhciBib29sCiAgICAgKi8KICAgIHB1YmxpYyAkU01UUEF1dGggPSBmYWxzZTsKCiAgICAvKioKICAgICAqIE9wdGlvbnMgYXJyYXkgcGFzc2VkIHRvIHN0cmVhbV9jb250ZXh0X2NyZWF0ZSB3aGVuIGNvbm5lY3RpbmcgdmlhIFNNVFAuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwdWJsaWMgJFNNVFBPcHRpb25zID0gW107CgogICAgLyoqCiAgICAgKiBTTVRQIHVzZXJuYW1lLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkVXNlcm5hbWUgPSAnJzsKCiAgICAvKioKICAgICAqIFNNVFAgcGFzc3dvcmQuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRQYXNzd29yZCA9ICcnOwoKICAgIC8qKgogICAgICogU01UUCBhdXRoIHR5cGUuCiAgICAgKiBPcHRpb25zIGFyZSBDUkFNLU1ENSwgTE9HSU4sIFBMQUlOLCBYT0FVVEgyLCBhdHRlbXB0ZWQgaW4gdGhhdCBvcmRlciBpZiBub3Qgc3BlY2lmaWVkLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkQXV0aFR5cGUgPSAnJzsKCiAgICAvKioKICAgICAqIEFuIGluc3RhbmNlIG9mIHRoZSBQSFBNYWlsZXIgT0F1dGggY2xhc3MuCiAgICAgKgogICAgICogQHZhciBPQXV0aAogICAgICovCiAgICBwcm90ZWN0ZWQgJG9hdXRoOwoKICAgIC8qKgogICAgICogVGhlIFNNVFAgc2VydmVyIHRpbWVvdXQgaW4gc2Vjb25kcy4KICAgICAqIERlZmF1bHQgb2YgNSBtaW51dGVzICgzMDBzZWMpIGlzIGZyb20gUkZDMjgyMSBzZWN0aW9uIDQuNS4zLjIuCiAgICAgKgogICAgICogQHZhciBpbnQKICAgICAqLwogICAgcHVibGljICRUaW1lb3V0ID0gMzAwOwoKICAgIC8qKgogICAgICogU01UUCBjbGFzcyBkZWJ1ZyBvdXRwdXQgbW9kZS4KICAgICAqIERlYnVnIG91dHB1dCBsZXZlbC4KICAgICAqIE9wdGlvbnM6CiAgICAgKiAqIGAwYCBObyBvdXRwdXQKICAgICAqICogYDFgIENvbW1hbmRzCiAgICAgKiAqIGAyYCBEYXRhIGFuZCBjb21tYW5kcwogICAgICogKiBgM2AgQXMgMiBwbHVzIGNvbm5lY3Rpb24gc3RhdHVzCiAgICAgKiAqIGA0YCBMb3ctbGV2ZWwgZGF0YSBvdXRwdXQuCiAgICAgKgogICAgICogQHNlZSBTTVRQOjokZG9fZGVidWcKICAgICAqCiAgICAgKiBAdmFyIGludAogICAgICovCiAgICBwdWJsaWMgJFNNVFBEZWJ1ZyA9IDA7CgogICAgLyoqCiAgICAgKiBIb3cgdG8gaGFuZGxlIGRlYnVnIG91dHB1dC4KICAgICAqIE9wdGlvbnM6CiAgICAgKiAqIGBlY2hvYCBPdXRwdXQgcGxhaW4tdGV4dCBhcy1pcywgYXBwcm9wcmlhdGUgZm9yIENMSQogICAgICogKiBgaHRtbGAgT3V0cHV0IGVzY2FwZWQsIGxpbmUgYnJlYWtzIGNvbnZlcnRlZCB0byBgPGJyPmAsIGFwcHJvcHJpYXRlIGZvciBicm93c2VyIG91dHB1dAogICAgICogKiBgZXJyb3JfbG9nYCBPdXRwdXQgdG8gZXJyb3IgbG9nIGFzIGNvbmZpZ3VyZWQgaW4gcGhwLmluaQogICAgICogQnkgZGVmYXVsdCBQSFBNYWlsZXIgd2lsbCB1c2UgYGVjaG9gIGlmIHJ1biBmcm9tIGEgYGNsaWAgb3IgYGNsaS1zZXJ2ZXJgIFNBUEksIGBodG1sYCBvdGhlcndpc2UuCiAgICAgKiBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHByb3ZpZGUgYSBjYWxsYWJsZSBleHBlY3RpbmcgdHdvIHBhcmFtczogYSBtZXNzYWdlIHN0cmluZyBhbmQgdGhlIGRlYnVnIGxldmVsOgogICAgICoKICAgICAqIGBgYHBocAogICAgICogJG1haWwtPkRlYnVnb3V0cHV0ID0gZnVuY3Rpb24oJHN0ciwgJGxldmVsKSB7ZWNobyAiZGVidWcgbGV2ZWwgJGxldmVsOyBtZXNzYWdlOiAkc3RyIjt9OwogICAgICogYGBgCiAgICAgKgogICAgICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwYXNzIGluIGFuIGluc3RhbmNlIG9mIGEgUFNSLTMgY29tcGF0aWJsZSBsb2dnZXIsIHRob3VnaCBvbmx5IGBkZWJ1Z2AKICAgICAqIGxldmVsIG91dHB1dCBpcyB1c2VkOgogICAgICoKICAgICAqIGBgYHBocAogICAgICogJG1haWwtPkRlYnVnb3V0cHV0ID0gbmV3IG15UHNyM0xvZ2dlcjsKICAgICAqIGBgYAogICAgICoKICAgICAqIEBzZWUgU01UUDo6JERlYnVnb3V0cHV0CiAgICAgKgogICAgICogQHZhciBzdHJpbmd8Y2FsbGFibGV8XFBzclxMb2dcTG9nZ2VySW50ZXJmYWNlCiAgICAgKi8KICAgIHB1YmxpYyAkRGVidWdvdXRwdXQgPSAnZWNobyc7CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGtlZXAgU01UUCBjb25uZWN0aW9uIG9wZW4gYWZ0ZXIgZWFjaCBtZXNzYWdlLgogICAgICogSWYgdGhpcyBpcyBzZXQgdG8gdHJ1ZSB0aGVuIHRvIGNsb3NlIHRoZSBjb25uZWN0aW9uCiAgICAgKiByZXF1aXJlcyBhbiBleHBsaWNpdCBjYWxsIHRvIHNtdHBDbG9zZSgpLgogICAgICoKICAgICAqIEB2YXIgYm9vbAogICAgICovCiAgICBwdWJsaWMgJFNNVFBLZWVwQWxpdmUgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gc3BsaXQgbXVsdGlwbGUgdG8gYWRkcmVzc2VzIGludG8gbXVsdGlwbGUgbWVzc2FnZXMKICAgICAqIG9yIHNlbmQgdGhlbSBhbGwgaW4gb25lIG1lc3NhZ2UuCiAgICAgKiBPbmx5IHN1cHBvcnRlZCBpbiBgbWFpbGAgYW5kIGBzZW5kbWFpbGAgdHJhbnNwb3J0cywgbm90IGluIFNNVFAuCiAgICAgKgogICAgICogQHZhciBib29sCiAgICAgKi8KICAgIHB1YmxpYyAkU2luZ2xlVG8gPSBmYWxzZTsKCiAgICAvKioKICAgICAqIFN0b3JhZ2UgZm9yIGFkZHJlc3NlcyB3aGVuIFNpbmdsZVRvIGlzIGVuYWJsZWQuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJFNpbmdsZVRvQXJyYXkgPSBbXTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gZ2VuZXJhdGUgVkVSUCBhZGRyZXNzZXMgb24gc2VuZC4KICAgICAqIE9ubHkgYXBwbGljYWJsZSB3aGVuIHNlbmRpbmcgdmlhIFNNVFAuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WYXJpYWJsZV9lbnZlbG9wZV9yZXR1cm5fcGF0aAogICAgICogQHNlZSBodHRwOi8vd3d3LnBvc3RmaXgub3JnL1ZFUlBfUkVBRE1FLmh0bWwgUG9zdGZpeCBWRVJQIGluZm8KICAgICAqCiAgICAgKiBAdmFyIGJvb2wKICAgICAqLwogICAgcHVibGljICRkb192ZXJwID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGFsbG93IHNlbmRpbmcgbWVzc2FnZXMgd2l0aCBhbiBlbXB0eSBib2R5LgogICAgICoKICAgICAqIEB2YXIgYm9vbAogICAgICovCiAgICBwdWJsaWMgJEFsbG93RW1wdHkgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIERLSU0gc2VsZWN0b3IuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRES0lNX3NlbGVjdG9yID0gJyc7CgogICAgLyoqCiAgICAgKiBES0lNIElkZW50aXR5LgogICAgICogVXN1YWxseSB0aGUgZW1haWwgYWRkcmVzcyB1c2VkIGFzIHRoZSBzb3VyY2Ugb2YgdGhlIGVtYWlsLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkREtJTV9pZGVudGl0eSA9ICcnOwoKICAgIC8qKgogICAgICogREtJTSBwYXNzcGhyYXNlLgogICAgICogVXNlZCBpZiB5b3VyIGtleSBpcyBlbmNyeXB0ZWQuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRES0lNX3Bhc3NwaHJhc2UgPSAnJzsKCiAgICAvKioKICAgICAqIERLSU0gc2lnbmluZyBkb21haW4gbmFtZS4KICAgICAqCiAgICAgKiBAZXhhbXBsZSAnZXhhbXBsZS5jb20nCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRES0lNX2RvbWFpbiA9ICcnOwoKICAgIC8qKgogICAgICogREtJTSBDb3B5IGhlYWRlciBmaWVsZCB2YWx1ZXMgZm9yIGRpYWdub3N0aWMgdXNlLgogICAgICoKICAgICAqIEB2YXIgYm9vbAogICAgICovCiAgICBwdWJsaWMgJERLSU1fY29weUhlYWRlckZpZWxkcyA9IHRydWU7CgogICAgLyoqCiAgICAgKiBES0lNIEV4dHJhIHNpZ25pbmcgaGVhZGVycy4KICAgICAqCiAgICAgKiBAZXhhbXBsZSBbJ0xpc3QtVW5zdWJzY3JpYmUnLCAnTGlzdC1IZWxwJ10KICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyAkREtJTV9leHRyYUhlYWRlcnMgPSBbXTsKCiAgICAvKioKICAgICAqIERLSU0gcHJpdmF0ZSBrZXkgZmlsZSBwYXRoLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyAkREtJTV9wcml2YXRlID0gJyc7CgogICAgLyoqCiAgICAgKiBES0lNIHByaXZhdGUga2V5IHN0cmluZy4KICAgICAqCiAgICAgKiBJZiBzZXQsIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgJERLSU1fcHJpdmF0ZWAuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHVibGljICRES0lNX3ByaXZhdGVfc3RyaW5nID0gJyc7CgogICAgLyoqCiAgICAgKiBDYWxsYmFjayBBY3Rpb24gZnVuY3Rpb24gbmFtZS4KICAgICAqCiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIHRoZSByZXN1bHQgb2YgdGhlIHNlbmQgZW1haWwgYWN0aW9uLgogICAgICogSXQgaXMgY2FsbGVkIG91dCBieSBzZW5kKCkgZm9yIGVhY2ggZW1haWwgc2VudC4KICAgICAqCiAgICAgKiBWYWx1ZSBjYW4gYmUgYW55IHBocCBjYWxsYWJsZTogaHR0cDovL3d3dy5waHAubmV0L2lzX2NhbGxhYmxlCiAgICAgKgogICAgICogUGFyYW1ldGVyczoKICAgICAqICAgYm9vbCAkcmVzdWx0ICAgICAgICByZXN1bHQgb2YgdGhlIHNlbmQgYWN0aW9uCiAgICAgKiAgIGFycmF5ICAgJHRvICAgICAgICAgICAgZW1haWwgYWRkcmVzc2VzIG9mIHRoZSByZWNpcGllbnRzCiAgICAgKiAgIGFycmF5ICAgJGNjICAgICAgICAgICAgY2MgZW1haWwgYWRkcmVzc2VzCiAgICAgKiAgIGFycmF5ICAgJGJjYyAgICAgICAgICAgYmNjIGVtYWlsIGFkZHJlc3NlcwogICAgICogICBzdHJpbmcgICRzdWJqZWN0ICAgICAgIHRoZSBzdWJqZWN0CiAgICAgKiAgIHN0cmluZyAgJGJvZHkgICAgICAgICAgdGhlIGVtYWlsIGJvZHkKICAgICAqICAgc3RyaW5nICAkZnJvbSAgICAgICAgICBlbWFpbCBhZGRyZXNzIG9mIHNlbmRlcgogICAgICogICBzdHJpbmcgICRleHRyYSAgICAgICAgIGV4dHJhIGluZm9ybWF0aW9uIG9mIHBvc3NpYmxlIHVzZQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICJzbXRwX3RyYW5zYWN0aW9uX2lkJyA9PiBsYXN0IHNtdHAgdHJhbnNhY3Rpb24gaWQKICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJGFjdGlvbl9mdW5jdGlvbiA9ICcnOwoKICAgIC8qKgogICAgICogV2hhdCB0byBwdXQgaW4gdGhlIFgtTWFpbGVyIGhlYWRlci4KICAgICAqIE9wdGlvbnM6IEFuIGVtcHR5IHN0cmluZyBmb3IgUEhQTWFpbGVyIGRlZmF1bHQsIHdoaXRlc3BhY2UgZm9yIG5vbmUsIG9yIGEgc3RyaW5nIHRvIHVzZS4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgJFhNYWlsZXIgPSAnJzsKCiAgICAvKioKICAgICAqIFdoaWNoIHZhbGlkYXRvciB0byB1c2UgYnkgZGVmYXVsdCB3aGVuIHZhbGlkYXRpbmcgZW1haWwgYWRkcmVzc2VzLgogICAgICogTWF5IGJlIGEgY2FsbGFibGUgdG8gaW5qZWN0IHlvdXIgb3duIHZhbGlkYXRvciwgYnV0IHRoZXJlIGFyZSBzZXZlcmFsIGJ1aWx0LWluIHZhbGlkYXRvcnMuCiAgICAgKiBUaGUgZGVmYXVsdCB2YWxpZGF0b3IgdXNlcyBQSFAncyBGSUxURVJfVkFMSURBVEVfRU1BSUwgZmlsdGVyX3ZhciBvcHRpb24uCiAgICAgKgogICAgICogQHNlZSBQSFBNYWlsZXI6OnZhbGlkYXRlQWRkcmVzcygpCiAgICAgKgogICAgICogQHZhciBzdHJpbmd8Y2FsbGFibGUKICAgICAqLwogICAgcHVibGljIHN0YXRpYyAkdmFsaWRhdG9yID0gJ3BocCc7CgogICAgLyoqCiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGUgU01UUCBzZW5kZXIgY2xhc3MuCiAgICAgKgogICAgICogQHZhciBTTVRQCiAgICAgKi8KICAgIHByb3RlY3RlZCAkc210cDsKCiAgICAvKioKICAgICAqIFRoZSBhcnJheSBvZiAndG8nIG5hbWVzIGFuZCBhZGRyZXNzZXMuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJHRvID0gW107CgogICAgLyoqCiAgICAgKiBUaGUgYXJyYXkgb2YgJ2NjJyBuYW1lcyBhbmQgYWRkcmVzc2VzLgogICAgICoKICAgICAqIEB2YXIgYXJyYXkKICAgICAqLwogICAgcHJvdGVjdGVkICRjYyA9IFtdOwoKICAgIC8qKgogICAgICogVGhlIGFycmF5IG9mICdiY2MnIG5hbWVzIGFuZCBhZGRyZXNzZXMuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJGJjYyA9IFtdOwoKICAgIC8qKgogICAgICogVGhlIGFycmF5IG9mIHJlcGx5LXRvIG5hbWVzIGFuZCBhZGRyZXNzZXMuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJFJlcGx5VG8gPSBbXTsKCiAgICAvKioKICAgICAqIEFuIGFycmF5IG9mIGFsbCBraW5kcyBvZiBhZGRyZXNzZXMuCiAgICAgKiBJbmNsdWRlcyBhbGwgb2YgJHRvLCAkY2MsICRiY2MuCiAgICAgKgogICAgICogQHNlZSBQSFBNYWlsZXI6OiR0bwogICAgICogQHNlZSBQSFBNYWlsZXI6OiRjYwogICAgICogQHNlZSBQSFBNYWlsZXI6OiRiY2MKICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCAkYWxsX3JlY2lwaWVudHMgPSBbXTsKCiAgICAvKioKICAgICAqIEFuIGFycmF5IG9mIG5hbWVzIGFuZCBhZGRyZXNzZXMgcXVldWVkIGZvciB2YWxpZGF0aW9uLgogICAgICogSW4gc2VuZCgpLCB2YWxpZCBhbmQgbm9uIGR1cGxpY2F0ZSBlbnRyaWVzIGFyZSBtb3ZlZCB0byAkYWxsX3JlY2lwaWVudHMKICAgICAqIGFuZCBvbmUgb2YgJHRvLCAkY2MsIG9yICRiY2MuCiAgICAgKiBUaGlzIGFycmF5IGlzIHVzZWQgb25seSBmb3IgYWRkcmVzc2VzIHdpdGggSUROLgogICAgICoKICAgICAqIEBzZWUgUEhQTWFpbGVyOjokdG8KICAgICAqIEBzZWUgUEhQTWFpbGVyOjokY2MKICAgICAqIEBzZWUgUEhQTWFpbGVyOjokYmNjCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JGFsbF9yZWNpcGllbnRzCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJFJlY2lwaWVudHNRdWV1ZSA9IFtdOwoKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgcmVwbHktdG8gbmFtZXMgYW5kIGFkZHJlc3NlcyBxdWV1ZWQgZm9yIHZhbGlkYXRpb24uCiAgICAgKiBJbiBzZW5kKCksIHZhbGlkIGFuZCBub24gZHVwbGljYXRlIGVudHJpZXMgYXJlIG1vdmVkIHRvICRSZXBseVRvLgogICAgICogVGhpcyBhcnJheSBpcyB1c2VkIG9ubHkgZm9yIGFkZHJlc3NlcyB3aXRoIElETi4KICAgICAqCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JFJlcGx5VG8KICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCAkUmVwbHlUb1F1ZXVlID0gW107CgogICAgLyoqCiAgICAgKiBUaGUgYXJyYXkgb2YgYXR0YWNobWVudHMuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJGF0dGFjaG1lbnQgPSBbXTsKCiAgICAvKioKICAgICAqIFRoZSBhcnJheSBvZiBjdXN0b20gaGVhZGVycy4KICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCAkQ3VzdG9tSGVhZGVyID0gW107CgogICAgLyoqCiAgICAgKiBUaGUgbW9zdCByZWNlbnQgTWVzc2FnZS1JRCAoaW5jbHVkaW5nIGFuZ3VsYXIgYnJhY2tldHMpLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCAkbGFzdE1lc3NhZ2VJRCA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIG1lc3NhZ2UncyBNSU1FIHR5cGUuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICRtZXNzYWdlX3R5cGUgPSAnJzsKCiAgICAvKioKICAgICAqIFRoZSBhcnJheSBvZiBNSU1FIGJvdW5kYXJ5IHN0cmluZ3MuCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgJGJvdW5kYXJ5ID0gW107CgogICAgLyoqCiAgICAgKiBUaGUgYXJyYXkgb2YgYXZhaWxhYmxlIGxhbmd1YWdlcy4KICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCAkbGFuZ3VhZ2UgPSBbXTsKCiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2YgZXJyb3JzIGVuY291bnRlcmVkLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIHByb3RlY3RlZCAkZXJyb3JfY291bnQgPSAwOwoKICAgIC8qKgogICAgICogVGhlIFMvTUlNRSBjZXJ0aWZpY2F0ZSBmaWxlIHBhdGguCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICRzaWduX2NlcnRfZmlsZSA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIFMvTUlNRSBrZXkgZmlsZSBwYXRoLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCAkc2lnbl9rZXlfZmlsZSA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIG9wdGlvbmFsIFMvTUlNRSBleHRyYSBjZXJ0aWZpY2F0ZXMgKCJDQSBDaGFpbiIpIGZpbGUgcGF0aC4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgJHNpZ25fZXh0cmFjZXJ0c19maWxlID0gJyc7CgogICAgLyoqCiAgICAgKiBUaGUgUy9NSU1FIHBhc3N3b3JkIGZvciB0aGUga2V5LgogICAgICogVXNlZCBvbmx5IGlmIHRoZSBrZXkgaXMgZW5jcnlwdGVkLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCAkc2lnbl9rZXlfcGFzcyA9ICcnOwoKICAgIC8qKgogICAgICogV2hldGhlciB0byB0aHJvdyBleGNlcHRpb25zIGZvciBlcnJvcnMuCiAgICAgKgogICAgICogQHZhciBib29sCiAgICAgKi8KICAgIHByb3RlY3RlZCAkZXhjZXB0aW9ucyA9IGZhbHNlOwoKICAgIC8qKgogICAgICogVW5pcXVlIElEIHVzZWQgZm9yIG1lc3NhZ2UgSUQgYW5kIGJvdW5kYXJpZXMuCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICR1bmlxdWVpZCA9ICcnOwoKICAgIC8qKgogICAgICogVGhlIFBIUE1haWxlciBWZXJzaW9uIG51bWJlci4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBjb25zdCBWRVJTSU9OID0gJzYuMC41JzsKCiAgICAvKioKICAgICAqIEVycm9yIHNldmVyaXR5OiBtZXNzYWdlIG9ubHksIGNvbnRpbnVlIHByb2Nlc3NpbmcuCiAgICAgKgogICAgICogQHZhciBpbnQKICAgICAqLwogICAgY29uc3QgU1RPUF9NRVNTQUdFID0gMDsKCiAgICAvKioKICAgICAqIEVycm9yIHNldmVyaXR5OiBtZXNzYWdlLCBsaWtlbHkgb2sgdG8gY29udGludWUgcHJvY2Vzc2luZy4KICAgICAqCiAgICAgKiBAdmFyIGludAogICAgICovCiAgICBjb25zdCBTVE9QX0NPTlRJTlVFID0gMTsKCiAgICAvKioKICAgICAqIEVycm9yIHNldmVyaXR5OiBtZXNzYWdlLCBwbHVzIGZ1bGwgc3RvcCwgY3JpdGljYWwgZXJyb3IgcmVhY2hlZC4KICAgICAqCiAgICAgKiBAdmFyIGludAogICAgICovCiAgICBjb25zdCBTVE9QX0NSSVRJQ0FMID0gMjsKCiAgICAvKioKICAgICAqIFNNVFAgUkZDIHN0YW5kYXJkIGxpbmUgZW5kaW5nLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgJExFID0gIlxyXG4iOwoKICAgIC8qKgogICAgICogVGhlIG1heGltdW0gbGluZSBsZW5ndGggYWxsb3dlZCBieSBSRkMgMjgyMiBzZWN0aW9uIDIuMS4xLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIGNvbnN0IE1BWF9MSU5FX0xFTkdUSCA9IDk5ODsKCiAgICAvKioKICAgICAqIFRoZSBsb3dlciBtYXhpbXVtIGxpbmUgbGVuZ3RoIGFsbG93ZWQgYnkgUkZDIDI4MjIgc2VjdGlvbiAyLjEuMS4KICAgICAqIFRoaXMgbGVuZ3RoIGRvZXMgTk9UIGluY2x1ZGUgdGhlIGxpbmUgYnJlYWsKICAgICAqIDc2IG1lYW5zIHRoYXQgbGluZXMgd2lsbCBiZSA3NyBvciA3OCBjaGFycyBkZXBlbmRpbmcgb24gd2hldGhlcgogICAgICogdGhlIGxpbmUgYnJlYWsgZm9ybWF0IGlzIExGIG9yIENSTEY7IGJvdGggYXJlIHZhbGlkLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIGNvbnN0IFNURF9MSU5FX0xFTkdUSCA9IDc2OwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIGJvb2wgJGV4Y2VwdGlvbnMgU2hvdWxkIHdlIHRocm93IGV4dGVybmFsIGV4Y2VwdGlvbnM/CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkZXhjZXB0aW9ucyA9IG51bGwpCiAgICB7CiAgICAgICAgaWYgKG51bGwgIT09ICRleGNlcHRpb25zKSB7CiAgICAgICAgICAgICR0aGlzLT5leGNlcHRpb25zID0gKGJvb2wpICRleGNlcHRpb25zOwogICAgICAgIH0KICAgICAgICAvL1BpY2sgYW4gYXBwcm9wcmlhdGUgZGVidWcgb3V0cHV0IGZvcm1hdCBhdXRvbWF0aWNhbGx5CiAgICAgICAgJHRoaXMtPkRlYnVnb3V0cHV0ID0gKHN0cnBvcyhQSFBfU0FQSSwgJ2NsaScpICE9PSBmYWxzZSA/ICdlY2hvJyA6ICdodG1sJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cnVjdG9yLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19kZXN0cnVjdCgpCiAgICB7CiAgICAgICAgLy9DbG9zZSBhbnkgb3BlbiBTTVRQIGNvbm5lY3Rpb24gbmljZWx5CiAgICAgICAgJHRoaXMtPnNtdHBDbG9zZSgpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBtYWlsKCkgaW4gYSBzYWZlX21vZGUtYXdhcmUgZmFzaGlvbi4KICAgICAqIEFsc28sIHVubGVzcyBzZW5kbWFpbF9wYXRoIHBvaW50cyB0byBzZW5kbWFpbCAob3Igc29tZXRoaW5nIHRoYXQKICAgICAqIGNsYWltcyB0byBiZSBzZW5kbWFpbCksIGRvbid0IHBhc3MgcGFyYW1zIChub3QgYSBwZXJmZWN0IGZpeCwKICAgICAqIGJ1dCBpdCB3aWxsIGRvKS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgJHRvICAgICAgVG8KICAgICAqIEBwYXJhbSBzdHJpbmcgICAgICAkc3ViamVjdCBTdWJqZWN0CiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgJGJvZHkgICAgTWVzc2FnZSBCb2R5CiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgJGhlYWRlciAgQWRkaXRpb25hbCBIZWFkZXIocykKICAgICAqIEBwYXJhbSBzdHJpbmd8bnVsbCAkcGFyYW1zICBQYXJhbXMKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBtYWlsUGFzc3RocnUoJHRvLCAkc3ViamVjdCwgJGJvZHksICRoZWFkZXIsICRwYXJhbXMpCiAgICB7CiAgICAgICAgLy9DaGVjayBvdmVybG9hZGluZyBvZiBtYWlsIGZ1bmN0aW9uIHRvIGF2b2lkIGRvdWJsZS1lbmNvZGluZwogICAgICAgIGlmIChpbmlfZ2V0KCdtYnN0cmluZy5mdW5jX292ZXJsb2FkJykgJiAxKSB7CiAgICAgICAgICAgICRzdWJqZWN0ID0gJHRoaXMtPnNlY3VyZUhlYWRlcigkc3ViamVjdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHN1YmplY3QgPSAkdGhpcy0+ZW5jb2RlSGVhZGVyKCR0aGlzLT5zZWN1cmVIZWFkZXIoJHN1YmplY3QpKTsKICAgICAgICB9CiAgICAgICAgLy9DYWxsaW5nIG1haWwoKSB3aXRoIG51bGwgcGFyYW1zIGJyZWFrcwogICAgICAgIGlmICghJHRoaXMtPlVzZVNlbmRtYWlsT3B0aW9ucyBvciBudWxsID09PSAkcGFyYW1zKSB7CiAgICAgICAgICAgICRyZXN1bHQgPSBAbWFpbCgkdG8sICRzdWJqZWN0LCAkYm9keSwgJGhlYWRlcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHJlc3VsdCA9IEBtYWlsKCR0bywgJHN1YmplY3QsICRib2R5LCAkaGVhZGVyLCAkcGFyYW1zKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICogT3V0cHV0IGRlYnVnZ2luZyBpbmZvIHZpYSB1c2VyLWRlZmluZWQgbWV0aG9kLgogICAgICogT25seSBnZW5lcmF0ZXMgb3V0cHV0IGlmIFNNVFAgZGVidWcgb3V0cHV0IGlzIGVuYWJsZWQgKEBzZWUgU01UUDo6JGRvX2RlYnVnKS4KICAgICAqCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JERlYnVnb3V0cHV0CiAgICAgKiBAc2VlIFBIUE1haWxlcjo6JFNNVFBEZWJ1ZwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cgogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZWRlYnVnKCRzdHIpCiAgICB7CiAgICAgICAgaWYgKCR0aGlzLT5TTVRQRGVidWcgPD0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vSXMgdGhpcyBhIFBTUi0zIGxvZ2dlcj8KICAgICAgICBpZiAoJHRoaXMtPkRlYnVnb3V0cHV0IGluc3RhbmNlb2YgXFBzclxMb2dcTG9nZ2VySW50ZXJmYWNlKSB7CiAgICAgICAgICAgICR0aGlzLT5EZWJ1Z291dHB1dC0+ZGVidWcoJHN0cik7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vQXZvaWQgY2xhc2ggd2l0aCBidWlsdC1pbiBmdW5jdGlvbiBuYW1lcwogICAgICAgIGlmICghaW5fYXJyYXkoJHRoaXMtPkRlYnVnb3V0cHV0LCBbJ2Vycm9yX2xvZycsICdodG1sJywgJ2VjaG8nXSkgYW5kIGlzX2NhbGxhYmxlKCR0aGlzLT5EZWJ1Z291dHB1dCkpIHsKICAgICAgICAgICAgY2FsbF91c2VyX2Z1bmMoJHRoaXMtPkRlYnVnb3V0cHV0LCAkc3RyLCAkdGhpcy0+U01UUERlYnVnKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICgkdGhpcy0+RGVidWdvdXRwdXQpIHsKICAgICAgICAgICAgY2FzZSAnZXJyb3JfbG9nJzoKICAgICAgICAgICAgICAgIC8vRG9uJ3Qgb3V0cHV0LCBqdXN0IGxvZwogICAgICAgICAgICAgICAgZXJyb3JfbG9nKCRzdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2h0bWwnOgogICAgICAgICAgICAgICAgLy9DbGVhbnMgdXAgb3V0cHV0IGEgYml0IGZvciBhIGJldHRlciBsb29raW5nLCBIVE1MLXNhZmUgb3V0cHV0CiAgICAgICAgICAgICAgICBlY2hvIGh0bWxlbnRpdGllcygKICAgICAgICAgICAgICAgICAgICBwcmVnX3JlcGxhY2UoJy9bXHJcbl0rLycsICcnLCAkc3RyKSwKICAgICAgICAgICAgICAgICAgICBFTlRfUVVPVEVTLAogICAgICAgICAgICAgICAgICAgICdVVEYtOCcKICAgICAgICAgICAgICAgICksICI8YnI+XG4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2VjaG8nOgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgLy9Ob3JtYWxpemUgbGluZSBicmVha3MKICAgICAgICAgICAgICAgICRzdHIgPSBwcmVnX3JlcGxhY2UoJy9cclxufFxyL21zJywgIlxuIiwgJHN0cik7CiAgICAgICAgICAgICAgICBlY2hvIGdtZGF0ZSgnWS1tLWQgSDppOnMnKSwKICAgICAgICAgICAgICAgICJcdCIsCiAgICAgICAgICAgICAgICAgICAgLy9UcmltIHRyYWlsaW5nIHNwYWNlCiAgICAgICAgICAgICAgICB0cmltKAogICAgICAgICAgICAgICAgLy9JbmRlbnQgZm9yIHJlYWRhYmlsaXR5LCBleGNlcHQgZm9yIHRyYWlsaW5nIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgc3RyX3JlcGxhY2UoCiAgICAgICAgICAgICAgICAgICAgICAgICJcbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJcbiAgICAgICAgICAgICAgICAgICBcdCAgICAgICAgICAgICAgICAgICIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaW0oJHN0cikKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgIlxuIjsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIG1lc3NhZ2UgdHlwZSB0byBIVE1MIG9yIHBsYWluLgogICAgICoKICAgICAqIEBwYXJhbSBib29sICRpc0h0bWwgVHJ1ZSBmb3IgSFRNTCBtb2RlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpc0hUTUwoJGlzSHRtbCA9IHRydWUpCiAgICB7CiAgICAgICAgaWYgKCRpc0h0bWwpIHsKICAgICAgICAgICAgJHRoaXMtPkNvbnRlbnRUeXBlID0gc3RhdGljOjpDT05URU5UX1RZUEVfVEVYVF9IVE1MOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0aGlzLT5Db250ZW50VHlwZSA9IHN0YXRpYzo6Q09OVEVOVF9UWVBFX1BMQUlOVEVYVDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIG1lc3NhZ2VzIHVzaW5nIFNNVFAuCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpc1NNVFAoKQogICAgewogICAgICAgICR0aGlzLT5NYWlsZXIgPSAnc210cCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIG1lc3NhZ2VzIHVzaW5nIFBIUCdzIG1haWwoKSBmdW5jdGlvbi4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGlzTWFpbCgpCiAgICB7CiAgICAgICAgJHRoaXMtPk1haWxlciA9ICdtYWlsJzsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgbWVzc2FnZXMgdXNpbmcgJFNlbmRtYWlsLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaXNTZW5kbWFpbCgpCiAgICB7CiAgICAgICAgJGluaV9zZW5kbWFpbF9wYXRoID0gaW5pX2dldCgnc2VuZG1haWxfcGF0aCcpOwoKICAgICAgICBpZiAoZmFsc2UgPT09IHN0cmlwb3MoJGluaV9zZW5kbWFpbF9wYXRoLCAnc2VuZG1haWwnKSkgewogICAgICAgICAgICAkdGhpcy0+U2VuZG1haWwgPSAnL3Vzci9zYmluL3NlbmRtYWlsJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdGhpcy0+U2VuZG1haWwgPSAkaW5pX3NlbmRtYWlsX3BhdGg7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5NYWlsZXIgPSAnc2VuZG1haWwnOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBtZXNzYWdlcyB1c2luZyBxbWFpbC4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGlzUW1haWwoKQogICAgewogICAgICAgICRpbmlfc2VuZG1haWxfcGF0aCA9IGluaV9nZXQoJ3NlbmRtYWlsX3BhdGgnKTsKCiAgICAgICAgaWYgKGZhbHNlID09PSBzdHJpcG9zKCRpbmlfc2VuZG1haWxfcGF0aCwgJ3FtYWlsJykpIHsKICAgICAgICAgICAgJHRoaXMtPlNlbmRtYWlsID0gJy92YXIvcW1haWwvYmluL3FtYWlsLWluamVjdCc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPlNlbmRtYWlsID0gJGluaV9zZW5kbWFpbF9wYXRoOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+TWFpbGVyID0gJ3FtYWlsJzsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhICJUbyIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzIFRoZSBlbWFpbCBhZGRyZXNzIHRvIHNlbmQgdG8KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBpZiBhZGRyZXNzIGFscmVhZHkgdXNlZCBvciBpbnZhbGlkIGluIHNvbWUgd2F5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRBZGRyZXNzKCRhZGRyZXNzLCAkbmFtZSA9ICcnKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+YWRkT3JFbnF1ZXVlQW5BZGRyZXNzKCd0bycsICRhZGRyZXNzLCAkbmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSAiQ0MiIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkYWRkcmVzcyBUaGUgZW1haWwgYWRkcmVzcyB0byBzZW5kIHRvCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICAgKgogICAgICogQHJldHVybiBib29sIHRydWUgb24gc3VjY2VzcywgZmFsc2UgaWYgYWRkcmVzcyBhbHJlYWR5IHVzZWQgb3IgaW52YWxpZCBpbiBzb21lIHdheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYWRkQ0MoJGFkZHJlc3MsICRuYW1lID0gJycpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5hZGRPckVucXVldWVBbkFkZHJlc3MoJ2NjJywgJGFkZHJlc3MsICRuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhICJCQ0MiIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkYWRkcmVzcyBUaGUgZW1haWwgYWRkcmVzcyB0byBzZW5kIHRvCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICAgKgogICAgICogQHJldHVybiBib29sIHRydWUgb24gc3VjY2VzcywgZmFsc2UgaWYgYWRkcmVzcyBhbHJlYWR5IHVzZWQgb3IgaW52YWxpZCBpbiBzb21lIHdheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYWRkQkNDKCRhZGRyZXNzLCAkbmFtZSA9ICcnKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+YWRkT3JFbnF1ZXVlQW5BZGRyZXNzKCdiY2MnLCAkYWRkcmVzcywgJG5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgIlJlcGx5LVRvIiBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGFkZHJlc3MgVGhlIGVtYWlsIGFkZHJlc3MgdG8gcmVwbHkgdG8KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBpZiBhZGRyZXNzIGFscmVhZHkgdXNlZCBvciBpbnZhbGlkIGluIHNvbWUgd2F5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRSZXBseVRvKCRhZGRyZXNzLCAkbmFtZSA9ICcnKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+YWRkT3JFbnF1ZXVlQW5BZGRyZXNzKCdSZXBseS1UbycsICRhZGRyZXNzLCAkbmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYW4gYWRkcmVzcyB0byBvbmUgb2YgdGhlIHJlY2lwaWVudCBhcnJheXMgb3IgdG8gdGhlIFJlcGx5VG8gYXJyYXkuIEJlY2F1c2UgUEhQTWFpbGVyCiAgICAgKiBjYW4ndCB2YWxpZGF0ZSBhZGRyZXNzZXMgd2l0aCBhbiBJRE4gd2l0aG91dCBrbm93aW5nIHRoZSBQSFBNYWlsZXI6OiRDaGFyU2V0ICh0aGF0IGNhbiBzdGlsbAogICAgICogYmUgbW9kaWZpZWQgYWZ0ZXIgY2FsbGluZyB0aGlzIGZ1bmN0aW9uKSwgYWRkaXRpb24gb2Ygc3VjaCBhZGRyZXNzZXMgaXMgZGVsYXllZCB1bnRpbCBzZW5kKCkuCiAgICAgKiBBZGRyZXNzZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgYWxyZWFkeSByZXR1cm4gZmFsc2UsIGJ1dCBkbyBub3QgdGhyb3cgZXhjZXB0aW9ucy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRraW5kICAgIE9uZSBvZiAndG8nLCAnY2MnLCAnYmNjJywgb3IgJ1JlcGx5VG8nCiAgICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzIFRoZSBlbWFpbCBhZGRyZXNzIHRvIHNlbmQsIHJlc3AuIHRvIHJlcGx5IHRvCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBpZiBhZGRyZXNzIGFscmVhZHkgdXNlZCBvciBpbnZhbGlkIGluIHNvbWUgd2F5CiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBhZGRPckVucXVldWVBbkFkZHJlc3MoJGtpbmQsICRhZGRyZXNzLCAkbmFtZSkKICAgIHsKICAgICAgICAkYWRkcmVzcyA9IHRyaW0oJGFkZHJlc3MpOwogICAgICAgICRuYW1lID0gdHJpbShwcmVnX3JlcGxhY2UoJy9bXHJcbl0rLycsICcnLCAkbmFtZSkpOyAvL1N0cmlwIGJyZWFrcyBhbmQgdHJpbQogICAgICAgICRwb3MgPSBzdHJycG9zKCRhZGRyZXNzLCAnQCcpOwogICAgICAgIGlmIChmYWxzZSA9PT0gJHBvcykgewogICAgICAgICAgICAvLyBBdC1zaWduIGlzIG1pc3NpbmcuCiAgICAgICAgICAgICRlcnJvcl9tZXNzYWdlID0gc3ByaW50ZignJXMgKCVzKTogJXMnLAogICAgICAgICAgICAgICAgJHRoaXMtPmxhbmcoJ2ludmFsaWRfYWRkcmVzcycpLAogICAgICAgICAgICAgICAgJGtpbmQsCiAgICAgICAgICAgICAgICAkYWRkcmVzcyk7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkZXJyb3JfbWVzc2FnZSk7CiAgICAgICAgICAgICR0aGlzLT5lZGVidWcoJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgICRwYXJhbXMgPSBbJGtpbmQsICRhZGRyZXNzLCAkbmFtZV07CiAgICAgICAgLy8gRW5xdWV1ZSBhZGRyZXNzZXMgd2l0aCBJRE4gdW50aWwgd2Uga25vdyB0aGUgUEhQTWFpbGVyOjokQ2hhclNldC4KICAgICAgICBpZiAoJHRoaXMtPmhhczhiaXRDaGFycyhzdWJzdHIoJGFkZHJlc3MsICsrJHBvcykpIGFuZCBzdGF0aWM6OmlkblN1cHBvcnRlZCgpKSB7CiAgICAgICAgICAgIGlmICgnUmVwbHktVG8nICE9ICRraW5kKSB7CiAgICAgICAgICAgICAgICBpZiAoIWFycmF5X2tleV9leGlzdHMoJGFkZHJlc3MsICR0aGlzLT5SZWNpcGllbnRzUXVldWUpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPlJlY2lwaWVudHNRdWV1ZVskYWRkcmVzc10gPSAkcGFyYW1zOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghYXJyYXlfa2V5X2V4aXN0cygkYWRkcmVzcywgJHRoaXMtPlJlcGx5VG9RdWV1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+UmVwbHlUb1F1ZXVlWyRhZGRyZXNzXSA9ICRwYXJhbXM7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBJbW1lZGlhdGVseSBhZGQgc3RhbmRhcmQgYWRkcmVzc2VzIHdpdGhvdXQgSUROLgogICAgICAgIHJldHVybiBjYWxsX3VzZXJfZnVuY19hcnJheShbJHRoaXMsICdhZGRBbkFkZHJlc3MnXSwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYW4gYWRkcmVzcyB0byBvbmUgb2YgdGhlIHJlY2lwaWVudCBhcnJheXMgb3IgdG8gdGhlIFJlcGx5VG8gYXJyYXkuCiAgICAgKiBBZGRyZXNzZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgYWxyZWFkeSByZXR1cm4gZmFsc2UsIGJ1dCBkbyBub3QgdGhyb3cgZXhjZXB0aW9ucy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRraW5kICAgIE9uZSBvZiAndG8nLCAnY2MnLCAnYmNjJywgb3IgJ1JlcGx5VG8nCiAgICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzIFRoZSBlbWFpbCBhZGRyZXNzIHRvIHNlbmQsIHJlc3AuIHRvIHJlcGx5IHRvCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBpZiBhZGRyZXNzIGFscmVhZHkgdXNlZCBvciBpbnZhbGlkIGluIHNvbWUgd2F5CiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBhZGRBbkFkZHJlc3MoJGtpbmQsICRhZGRyZXNzLCAkbmFtZSA9ICcnKQogICAgewogICAgICAgIGlmICghaW5fYXJyYXkoJGtpbmQsIFsndG8nLCAnY2MnLCAnYmNjJywgJ1JlcGx5LVRvJ10pKSB7CiAgICAgICAgICAgICRlcnJvcl9tZXNzYWdlID0gc3ByaW50ZignJXM6ICVzJywKICAgICAgICAgICAgICAgICR0aGlzLT5sYW5nKCdJbnZhbGlkIHJlY2lwaWVudCBraW5kJyksCiAgICAgICAgICAgICAgICAka2luZCk7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkZXJyb3JfbWVzc2FnZSk7CiAgICAgICAgICAgICR0aGlzLT5lZGVidWcoJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICghc3RhdGljOjp2YWxpZGF0ZUFkZHJlc3MoJGFkZHJlc3MpKSB7CiAgICAgICAgICAgICRlcnJvcl9tZXNzYWdlID0gc3ByaW50ZignJXMgKCVzKTogJXMnLAogICAgICAgICAgICAgICAgJHRoaXMtPmxhbmcoJ2ludmFsaWRfYWRkcmVzcycpLAogICAgICAgICAgICAgICAgJGtpbmQsCiAgICAgICAgICAgICAgICAkYWRkcmVzcyk7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkZXJyb3JfbWVzc2FnZSk7CiAgICAgICAgICAgICR0aGlzLT5lZGVidWcoJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICgnUmVwbHktVG8nICE9ICRraW5kKSB7CiAgICAgICAgICAgIGlmICghYXJyYXlfa2V5X2V4aXN0cyhzdHJ0b2xvd2VyKCRhZGRyZXNzKSwgJHRoaXMtPmFsbF9yZWNpcGllbnRzKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnska2luZH1bXSA9IFskYWRkcmVzcywgJG5hbWVdOwogICAgICAgICAgICAgICAgJHRoaXMtPmFsbF9yZWNpcGllbnRzW3N0cnRvbG93ZXIoJGFkZHJlc3MpXSA9IHRydWU7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWFycmF5X2tleV9leGlzdHMoc3RydG9sb3dlcigkYWRkcmVzcyksICR0aGlzLT5SZXBseVRvKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPlJlcGx5VG9bc3RydG9sb3dlcigkYWRkcmVzcyldID0gWyRhZGRyZXNzLCAkbmFtZV07CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIGFuZCB2YWxpZGF0ZSBhIHN0cmluZyBjb250YWluaW5nIG9uZSBvciBtb3JlIFJGQzgyMi1zdHlsZSBjb21tYS1zZXBhcmF0ZWQgZW1haWwgYWRkcmVzc2VzCiAgICAgKiBvZiB0aGUgZm9ybSAiZGlzcGxheSBuYW1lIDxhZGRyZXNzPiIgaW50byBhbiBhcnJheSBvZiBuYW1lL2FkZHJlc3MgcGFpcnMuCiAgICAgKiBVc2VzIHRoZSBpbWFwX3JmYzgyMl9wYXJzZV9hZHJsaXN0IGZ1bmN0aW9uIGlmIHRoZSBJTUFQIGV4dGVuc2lvbiBpcyBhdmFpbGFibGUuCiAgICAgKiBOb3RlIHRoYXQgcXVvdGVzIGluIHRoZSBuYW1lIHBhcnQgYXJlIHJlbW92ZWQuCiAgICAgKgogICAgICogQHNlZSAgICBodHRwOi8vd3d3LmFuZHJldy5jbXUuZWR1L3VzZXIvYWdyZWVuMS90ZXN0aW5nL21yYnMvd2ViL01haWwvUkZDODIyLnBocCBBIG1vcmUgY2FyZWZ1bCBpbXBsZW1lbnRhdGlvbgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGFkZHJzdHIgVGhlIGFkZHJlc3MgbGlzdCBzdHJpbmcKICAgICAqIEBwYXJhbSBib29sICAgJHVzZWltYXAgV2hldGhlciB0byB1c2UgdGhlIElNQVAgZXh0ZW5zaW9uIHRvIHBhcnNlIHRoZSBsaXN0CiAgICAgKgogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBhcnNlQWRkcmVzc2VzKCRhZGRyc3RyLCAkdXNlaW1hcCA9IHRydWUpCiAgICB7CiAgICAgICAgJGFkZHJlc3NlcyA9IFtdOwogICAgICAgIGlmICgkdXNlaW1hcCBhbmQgZnVuY3Rpb25fZXhpc3RzKCdpbWFwX3JmYzgyMl9wYXJzZV9hZHJsaXN0JykpIHsKICAgICAgICAgICAgLy9Vc2UgdGhpcyBidWlsdC1pbiBwYXJzZXIgaWYgaXQncyBhdmFpbGFibGUKICAgICAgICAgICAgJGxpc3QgPSBpbWFwX3JmYzgyMl9wYXJzZV9hZHJsaXN0KCRhZGRyc3RyLCAnJyk7CiAgICAgICAgICAgIGZvcmVhY2ggKCRsaXN0IGFzICRhZGRyZXNzKSB7CiAgICAgICAgICAgICAgICBpZiAoJy5TWU5UQVgtRVJST1IuJyAhPSAkYWRkcmVzcy0+aG9zdCkgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0aWM6OnZhbGlkYXRlQWRkcmVzcygkYWRkcmVzcy0+bWFpbGJveCAuICdAJyAuICRhZGRyZXNzLT5ob3N0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAkYWRkcmVzc2VzW10gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScgPT4gKHByb3BlcnR5X2V4aXN0cygkYWRkcmVzcywgJ3BlcnNvbmFsJykgPyAkYWRkcmVzcy0+cGVyc29uYWwgOiAnJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkcmVzcycgPT4gJGFkZHJlc3MtPm1haWxib3ggLiAnQCcgLiAkYWRkcmVzcy0+aG9zdCwKICAgICAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL1VzZSB0aGlzIHNpbXBsZXIgcGFyc2VyCiAgICAgICAgICAgICRsaXN0ID0gZXhwbG9kZSgnLCcsICRhZGRyc3RyKTsKICAgICAgICAgICAgZm9yZWFjaCAoJGxpc3QgYXMgJGFkZHJlc3MpIHsKICAgICAgICAgICAgICAgICRhZGRyZXNzID0gdHJpbSgkYWRkcmVzcyk7CiAgICAgICAgICAgICAgICAvL0lzIHRoZXJlIGEgc2VwYXJhdGUgbmFtZSBwYXJ0PwogICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkYWRkcmVzcywgJzwnKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAvL05vIHNlcGFyYXRlIG5hbWUsIGp1c3QgdXNlIHRoZSB3aG9sZSB0aGluZwogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0aWM6OnZhbGlkYXRlQWRkcmVzcygkYWRkcmVzcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGFkZHJlc3Nlc1tdID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkZHJlc3MnID0+ICRhZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGlzdCgkbmFtZSwgJGVtYWlsKSA9IGV4cGxvZGUoJzwnLCAkYWRkcmVzcyk7CiAgICAgICAgICAgICAgICAgICAgJGVtYWlsID0gdHJpbShzdHJfcmVwbGFjZSgnPicsICcnLCAkZW1haWwpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGljOjp2YWxpZGF0ZUFkZHJlc3MoJGVtYWlsKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkYWRkcmVzc2VzW10gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScgPT4gdHJpbShzdHJfcmVwbGFjZShbJyInLCAiJyJdLCAnJywgJG5hbWUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRyZXNzJyA9PiAkZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGFkZHJlc3NlczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgRnJvbSBhbmQgRnJvbU5hbWUgcHJvcGVydGllcy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICAgKiBAcGFyYW0gYm9vbCAgICRhdXRvICAgIFdoZXRoZXIgdG8gYWxzbyBzZXQgdGhlIFNlbmRlciBhZGRyZXNzLCBkZWZhdWx0cyB0byB0cnVlCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldEZyb20oJGFkZHJlc3MsICRuYW1lID0gJycsICRhdXRvID0gdHJ1ZSkKICAgIHsKICAgICAgICAkYWRkcmVzcyA9IHRyaW0oJGFkZHJlc3MpOwogICAgICAgICRuYW1lID0gdHJpbShwcmVnX3JlcGxhY2UoJy9bXHJcbl0rLycsICcnLCAkbmFtZSkpOyAvL1N0cmlwIGJyZWFrcyBhbmQgdHJpbQogICAgICAgIC8vIERvbid0IHZhbGlkYXRlIG5vdyBhZGRyZXNzZXMgd2l0aCBJRE4uIFdpbGwgYmUgZG9uZSBpbiBzZW5kKCkuCiAgICAgICAgJHBvcyA9IHN0cnJwb3MoJGFkZHJlc3MsICdAJyk7CiAgICAgICAgaWYgKGZhbHNlID09PSAkcG9zIG9yCiAgICAgICAgICAgICghJHRoaXMtPmhhczhiaXRDaGFycyhzdWJzdHIoJGFkZHJlc3MsICsrJHBvcykpIG9yICFzdGF0aWM6OmlkblN1cHBvcnRlZCgpKSBhbmQKICAgICAgICAgICAgIXN0YXRpYzo6dmFsaWRhdGVBZGRyZXNzKCRhZGRyZXNzKSkgewogICAgICAgICAgICAkZXJyb3JfbWVzc2FnZSA9IHNwcmludGYoJyVzIChGcm9tKTogJXMnLAogICAgICAgICAgICAgICAgJHRoaXMtPmxhbmcoJ2ludmFsaWRfYWRkcmVzcycpLAogICAgICAgICAgICAgICAgJGFkZHJlc3MpOwogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoJGVycm9yX21lc3NhZ2UpOwogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCRlcnJvcl9tZXNzYWdlKTsKICAgICAgICAgICAgaWYgKCR0aGlzLT5leGNlcHRpb25zKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCRlcnJvcl9tZXNzYWdlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+RnJvbSA9ICRhZGRyZXNzOwogICAgICAgICR0aGlzLT5Gcm9tTmFtZSA9ICRuYW1lOwogICAgICAgIGlmICgkYXV0bykgewogICAgICAgICAgICBpZiAoZW1wdHkoJHRoaXMtPlNlbmRlcikpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5TZW5kZXIgPSAkYWRkcmVzczsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIE1lc3NhZ2UtSUQgaGVhZGVyIG9mIHRoZSBsYXN0IGVtYWlsLgogICAgICogVGVjaG5pY2FsbHkgdGhpcyBpcyB0aGUgdmFsdWUgZnJvbSB0aGUgbGFzdCB0aW1lIHRoZSBoZWFkZXJzIHdlcmUgY3JlYXRlZCwKICAgICAqIGJ1dCBpdCdzIGFsc28gdGhlIG1lc3NhZ2UgSUQgb2YgdGhlIGxhc3Qgc2VudCBtZXNzYWdlIGV4Y2VwdCBpbgogICAgICogcGF0aG9sb2dpY2FsIGNhc2VzLgogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TWVzc2FnZUlEKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmxhc3RNZXNzYWdlSUQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayB0aGF0IGEgc3RyaW5nIGxvb2tzIGxpa2UgYW4gZW1haWwgYWRkcmVzcy4KICAgICAqIFZhbGlkYXRpb24gcGF0dGVybnMgc3VwcG9ydGVkOgogICAgICogKiBgYXV0b2AgUGljayBiZXN0IHBhdHRlcm4gYXV0b21hdGljYWxseTsKICAgICAqICogYHBjcmU4YCBVc2UgdGhlIHNxdWlsb29wbGUuY29tIHBhdHRlcm4sIHJlcXVpcmVzIFBDUkUgPiA4LjA7CiAgICAgKiAqIGBwY3JlYCBVc2Ugb2xkIFBDUkUgaW1wbGVtZW50YXRpb247CiAgICAgKiAqIGBwaHBgIFVzZSBQSFAgYnVpbHQtaW4gRklMVEVSX1ZBTElEQVRFX0VNQUlMOwogICAgICogKiBgaHRtbDVgIFVzZSB0aGUgcGF0dGVybiBnaXZlbiBieSB0aGUgSFRNTDUgc3BlYyBmb3IgJ2VtYWlsJyB0eXBlIGZvcm0gaW5wdXQgZWxlbWVudHMuCiAgICAgKiAqIGBub3JlZ2V4YCBEb24ndCB1c2UgYSByZWdleDogc3VwZXIgZmFzdCwgcmVhbGx5IGR1bWIuCiAgICAgKiBBbHRlcm5hdGl2ZWx5IHlvdSBtYXkgcGFzcyBpbiBhIGNhbGxhYmxlIHRvIGluamVjdCB5b3VyIG93biB2YWxpZGF0b3IsIGZvciBleGFtcGxlOgogICAgICoKICAgICAqIGBgYHBocAogICAgICogUEhQTWFpbGVyOjp2YWxpZGF0ZUFkZHJlc3MoJ3VzZXJAZXhhbXBsZS5jb20nLCBmdW5jdGlvbigkYWRkcmVzcykgewogICAgICogICAgIHJldHVybiAoc3RycG9zKCRhZGRyZXNzLCAnQCcpICE9PSBmYWxzZSk7CiAgICAgKiB9KTsKICAgICAqIGBgYAogICAgICoKICAgICAqIFlvdSBjYW4gYWxzbyBzZXQgdGhlIFBIUE1haWxlcjo6JHZhbGlkYXRvciBzdGF0aWMgdG8gYSBjYWxsYWJsZSwgYWxsb3dpbmcgYnVpbHQtaW4gbWV0aG9kcyB0byB1c2UgeW91ciB2YWxpZGF0b3IuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAgICAgICAgICAkYWRkcmVzcyAgICAgICBUaGUgZW1haWwgYWRkcmVzcyB0byBjaGVjawogICAgICogQHBhcmFtIHN0cmluZ3xjYWxsYWJsZSAkcGF0dGVybnNlbGVjdCBXaGljaCBwYXR0ZXJuIHRvIHVzZQogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHZhbGlkYXRlQWRkcmVzcygkYWRkcmVzcywgJHBhdHRlcm5zZWxlY3QgPSBudWxsKQogICAgewogICAgICAgIGlmIChudWxsID09PSAkcGF0dGVybnNlbGVjdCkgewogICAgICAgICAgICAkcGF0dGVybnNlbGVjdCA9IHN0YXRpYzo6JHZhbGlkYXRvcjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzX2NhbGxhYmxlKCRwYXR0ZXJuc2VsZWN0KSkgewogICAgICAgICAgICByZXR1cm4gY2FsbF91c2VyX2Z1bmMoJHBhdHRlcm5zZWxlY3QsICRhZGRyZXNzKTsKICAgICAgICB9CiAgICAgICAgLy9SZWplY3QgbGluZSBicmVha3MgaW4gYWRkcmVzc2VzOyBpdCdzIHZhbGlkIFJGQzUzMjIsIGJ1dCBub3QgUkZDNTMyMQogICAgICAgIGlmIChzdHJwb3MoJGFkZHJlc3MsICJcbiIpICE9PSBmYWxzZSBvciBzdHJwb3MoJGFkZHJlc3MsICJcciIpICE9PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAoJHBhdHRlcm5zZWxlY3QpIHsKICAgICAgICAgICAgY2FzZSAncGNyZSc6IC8vS2VwdCBmb3IgQkMKICAgICAgICAgICAgY2FzZSAncGNyZTgnOgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAqIEEgbW9yZSBjb21wbGV4IGFuZCBtb3JlIHBlcm1pc3NpdmUgdmVyc2lvbiBvZiB0aGUgUkZDNTMyMiByZWdleCBvbiB3aGljaCBGSUxURVJfVkFMSURBVEVfRU1BSUwKICAgICAgICAgICAgICAgICAqIGlzIGJhc2VkLgogICAgICAgICAgICAgICAgICogSW4gYWRkaXRpb24gdG8gdGhlIGFkZHJlc3NlcyBhbGxvd2VkIGJ5IGZpbHRlcl92YXIsIGFsc28gcGVybWl0czoKICAgICAgICAgICAgICAgICAqICAqIGRvdGxlc3MgZG9tYWluczogYGFAYmAKICAgICAgICAgICAgICAgICAqICAqIGNvbW1lbnRzOiBgMTIzNCBAIGxvY2FsKGJsYWgpIC5tYWNoaW5lIC5leGFtcGxlYAogICAgICAgICAgICAgICAgICogICogcXVvdGVkIGVsZW1lbnRzOiBgJyJ0ZXN0IGJsYWgiQGV4YW1wbGUub3JnJ2AKICAgICAgICAgICAgICAgICAqICAqIG51bWVyaWMgVExEczogYGFAYi4xMjNgCiAgICAgICAgICAgICAgICAgKiAgKiB1bmJyYWNrZXRlZCBJUHY0IGxpdGVyYWxzOiBgYUAxOTIuMTY4LjAuMWAKICAgICAgICAgICAgICAgICAqICAqIElQdjYgbGl0ZXJhbHM6ICdmaXJzdC5sYXN0QFtJUHY2OmExOjpdJwogICAgICAgICAgICAgICAgICogTm90IGFsbCBvZiB0aGVzZSB3aWxsIG5lY2Vzc2FyaWx5IHdvcmsgZm9yIHNlbmRpbmchCiAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICogQHNlZSAgICAgICBodHRwOi8vc3F1aWxvb3BsZS5jb20vMjAwOS8xMi8yMC9lbWFpbC1hZGRyZXNzLXZhbGlkYXRpb24vCiAgICAgICAgICAgICAgICAgKiBAY29weXJpZ2h0IDIwMDktMjAxMCBNaWNoYWVsIFJ1c2h0b24KICAgICAgICAgICAgICAgICAqIEZlZWwgZnJlZSB0byB1c2UgYW5kIHJlZGlzdHJpYnV0ZSB0aGlzIGNvZGUuIEJ1dCBwbGVhc2Uga2VlcCB0aGlzIGNvcHlyaWdodCBub3RpY2UuCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHJldHVybiAoYm9vbCkgcHJlZ19tYXRjaCgKICAgICAgICAgICAgICAgICAgICAnL14oPyEoPz4oPzEpIj8oPz5cXFxbIC1+XXxbXiJdKSI/KD8xKSl7MjU1LH0pKD8hKD8+KD8xKSI/KD8+XFxcWyAtfl18W14iXSkiPyg/MSkpezY1LH1AKScgLgogICAgICAgICAgICAgICAgICAgICcoKD8+KD8+KD8+KCg/Pig/Pig/Plx4MERceDBBKT9bXHQgXSkrfCg/PltcdCBdKlx4MERceDBBKT9bXHQgXSspPykoXCgoPz4oPzIpJyAuCiAgICAgICAgICAgICAgICAgICAgJyg/PltceDAxLVx4MDhceDBCXHgwQ1x4MEUtXCcqLVxbXF0tXHg3Rl18XFxcW1x4MDAtXHg3Rl18KD8zKSkpKig/MilcKSkpKyg/MikpfCg/MikpPyknIC4KICAgICAgICAgICAgICAgICAgICAnKFshIy1cJyorXC8tOT0/Xi1+LV0rfCIoPz4oPzIpKD8+W1x4MDEtXHgwOFx4MEJceDBDXHgwRS0hIy1cW1xdLVx4N0ZdfFxcXFtceDAwLVx4N0ZdKSkqJyAuCiAgICAgICAgICAgICAgICAgICAgJyg/MikiKSg/Pig/MSlcLig/MSkoPzQpKSooPzEpQCg/ISg/MSlbYS16MC05LV17NjQsfSkoPzEpKD8+KFthLXowLTldKD8+W2EtejAtOS1dKlthLXowLTldKT8pJyAuCiAgICAgICAgICAgICAgICAgICAgJyg/Pig/MSlcLig/ISg/MSlbYS16MC05LV17NjQsfSkoPzEpKD81KSl7MCwxMjZ9fFxbKD86KD8+SVB2NjooPz4oW2EtZjAtOV17MSw0fSkoPz46KD82KSl7N30nIC4KICAgICAgICAgICAgICAgICAgICAnfCg/ISg/Oi4qW2EtZjAtOV1bOlxdXSl7OCx9KSgoPzYpKD8+Oig/NikpezAsNn0pPzo6KD83KT8pKXwoPz4oPz5JUHY2Oig/Pig/NikoPz46KD82KSl7NX06JyAuCiAgICAgICAgICAgICAgICAgICAgJ3woPyEoPzouKlthLWYwLTldOil7Nix9KSg/OCk/OjooPz4oKD82KSg/PjooPzYpKXswLDR9KTopPykpPygyNVswLTVdfDJbMC00XVswLTldfDFbMC05XXsyfScgLgogICAgICAgICAgICAgICAgICAgICd8WzEtOV0/WzAtOV0pKD8+XC4oPzkpKXszfSkpXF0pKD8xKSQvaXNEJywKICAgICAgICAgICAgICAgICAgICAkYWRkcmVzcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgY2FzZSAnaHRtbDUnOgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAqIFRoaXMgaXMgdGhlIHBhdHRlcm4gdXNlZCBpbiB0aGUgSFRNTDUgc3BlYyBmb3IgdmFsaWRhdGlvbiBvZiAnZW1haWwnIHR5cGUgZm9ybSBpbnB1dCBlbGVtZW50cy4KICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgKiBAc2VlIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvI2UtbWFpbC1zdGF0ZS0odHlwZT1lbWFpbCkKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcmV0dXJuIChib29sKSBwcmVnX21hdGNoKAogICAgICAgICAgICAgICAgICAgICcvXlthLXpBLVowLTkuISMkJSZcJyorXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX0nIC4KICAgICAgICAgICAgICAgICAgICAnW2EtekEtWjAtOV0pPyg/OlwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokL3NEJywKICAgICAgICAgICAgICAgICAgICAkYWRkcmVzcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgY2FzZSAncGhwJzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAoYm9vbCkgZmlsdGVyX3ZhcigkYWRkcmVzcywgRklMVEVSX1ZBTElEQVRFX0VNQUlMKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUZWxscyB3aGV0aGVyIElETnMgKEludGVybmF0aW9uYWxpemVkIERvbWFpbiBOYW1lcykgYXJlIHN1cHBvcnRlZCBvciBub3QuIFRoaXMgcmVxdWlyZXMgdGhlCiAgICAgKiBgaW50bGAgYW5kIGBtYnN0cmluZ2AgUEhQIGV4dGVuc2lvbnMuCiAgICAgKgogICAgICogQHJldHVybiBib29sIGB0cnVlYCBpZiByZXF1aXJlZCBmdW5jdGlvbnMgZm9yIElETiBzdXBwb3J0IGFyZSBwcmVzZW50CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaWRuU3VwcG9ydGVkKCkKICAgIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb25fZXhpc3RzKCdpZG5fdG9fYXNjaWknKSBhbmQgZnVuY3Rpb25fZXhpc3RzKCdtYl9jb252ZXJ0X2VuY29kaW5nJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBJRE4gaW4gZ2l2ZW4gZW1haWwgYWRkcmVzcyB0byBpdHMgQVNDSUkgZm9ybSwgYWxzbyBrbm93biBhcyBwdW55Y29kZSwgaWYgcG9zc2libGUuCiAgICAgKiBJbXBvcnRhbnQ6IEFkZHJlc3MgbXVzdCBiZSBwYXNzZWQgaW4gc2FtZSBlbmNvZGluZyBhcyBjdXJyZW50bHkgc2V0IGluIFBIUE1haWxlcjo6JENoYXJTZXQuCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHNpbGVudGx5IHJldHVybnMgdW5tb2RpZmllZCBhZGRyZXNzIGlmOgogICAgICogLSBObyBjb252ZXJzaW9uIGlzIG5lY2Vzc2FyeSAoaS5lLiBkb21haW4gbmFtZSBpcyBub3QgYW4gSUROLCBvciBpcyBhbHJlYWR5IGluIEFTQ0lJIGZvcm0pCiAgICAgKiAtIENvbnZlcnNpb24gdG8gcHVueWNvZGUgaXMgaW1wb3NzaWJsZSAoZS5nLiByZXF1aXJlZCBQSFAgZnVuY3Rpb25zIGFyZSBub3QgYXZhaWxhYmxlKQogICAgICogICBvciBmYWlscyBmb3IgYW55IHJlYXNvbiAoZS5nLiBkb21haW4gY29udGFpbnMgY2hhcmFjdGVycyBub3QgYWxsb3dlZCBpbiBhbiBJRE4pLgogICAgICoKICAgICAqIEBzZWUgICAgUEhQTWFpbGVyOjokQ2hhclNldAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGFkZHJlc3MgVGhlIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydAogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nIFRoZSBlbmNvZGVkIGFkZHJlc3MgaW4gQVNDSUkgZm9ybQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcHVueWVuY29kZUFkZHJlc3MoJGFkZHJlc3MpCiAgICB7CiAgICAgICAgLy8gVmVyaWZ5IHdlIGhhdmUgcmVxdWlyZWQgZnVuY3Rpb25zLCBDaGFyU2V0LCBhbmQgYXQtc2lnbi4KICAgICAgICAkcG9zID0gc3RycnBvcygkYWRkcmVzcywgJ0AnKTsKICAgICAgICBpZiAoc3RhdGljOjppZG5TdXBwb3J0ZWQoKSBhbmQKICAgICAgICAgICAgIWVtcHR5KCR0aGlzLT5DaGFyU2V0KSBhbmQKICAgICAgICAgICAgZmFsc2UgIT09ICRwb3MKICAgICAgICApIHsKICAgICAgICAgICAgJGRvbWFpbiA9IHN1YnN0cigkYWRkcmVzcywgKyskcG9zKTsKICAgICAgICAgICAgLy8gVmVyaWZ5IENoYXJTZXQgc3RyaW5nIGlzIGEgdmFsaWQgb25lLCBhbmQgZG9tYWluIHByb3Blcmx5IGVuY29kZWQgaW4gdGhpcyBDaGFyU2V0LgogICAgICAgICAgICBpZiAoJHRoaXMtPmhhczhiaXRDaGFycygkZG9tYWluKSBhbmQgQG1iX2NoZWNrX2VuY29kaW5nKCRkb21haW4sICR0aGlzLT5DaGFyU2V0KSkgewogICAgICAgICAgICAgICAgJGRvbWFpbiA9IG1iX2NvbnZlcnRfZW5jb2RpbmcoJGRvbWFpbiwgJ1VURi04JywgJHRoaXMtPkNoYXJTZXQpOwogICAgICAgICAgICAgICAgLy9JZ25vcmUgSURFIGNvbXBsYWludHMgYWJvdXQgdGhpcyBsaW5lIC0gbWV0aG9kIHNpZ25hdHVyZSBjaGFuZ2VkIGluIFBIUCA1LjQKICAgICAgICAgICAgICAgICRlcnJvcmNvZGUgPSAwOwogICAgICAgICAgICAgICAgJHB1bnljb2RlID0gaWRuX3RvX2FzY2lpKCRkb21haW4sICRlcnJvcmNvZGUsIElOVExfSUROQV9WQVJJQU5UX1VUUzQ2KTsKICAgICAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gJHB1bnljb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnN0cigkYWRkcmVzcywgMCwgJHBvcykgLiAkcHVueWNvZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkYWRkcmVzczsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG1lc3NhZ2UgYW5kIHNlbmQgaXQuCiAgICAgKiBVc2VzIHRoZSBzZW5kaW5nIG1ldGhvZCBzcGVjaWZpZWQgYnkgJE1haWxlci4KICAgICAqCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbCBmYWxzZSBvbiBlcnJvciAtIFNlZSB0aGUgRXJyb3JJbmZvIHByb3BlcnR5IGZvciBkZXRhaWxzIG9mIHRoZSBlcnJvcgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2VuZCgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKCEkdGhpcy0+cHJlU2VuZCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cG9zdFNlbmQoKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGV4YykgewogICAgICAgICAgICAkdGhpcy0+bWFpbEhlYWRlciA9ICcnOwogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoJGV4Yy0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgaWYgKCR0aGlzLT5leGNlcHRpb25zKSB7CiAgICAgICAgICAgICAgICB0aHJvdyAkZXhjOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUHJlcGFyZSBhIG1lc3NhZ2UgZm9yIHNlbmRpbmcuCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHByZVNlbmQoKQogICAgewogICAgICAgIGlmICgnc210cCcgPT0gJHRoaXMtPk1haWxlciBvcgogICAgICAgICAgICAoJ21haWwnID09ICR0aGlzLT5NYWlsZXIgYW5kIHN0cmlwb3MoUEhQX09TLCAnV0lOJykgPT09IDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIC8vU01UUCBtYW5kYXRlcyBSRkMtY29tcGxpYW50IGxpbmUgZW5kaW5ncwogICAgICAgICAgICAvL2FuZCBpdCdzIGFsc28gdXNlZCB3aXRoIG1haWwoKSBvbiBXaW5kb3dzCiAgICAgICAgICAgIHN0YXRpYzo6c2V0TEUoIlxyXG4iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL01haW50YWluIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBsZWdhY3kgTGludXggY29tbWFuZCBsaW5lIG1haWxlcnMKICAgICAgICAgICAgc3RhdGljOjpzZXRMRShQSFBfRU9MKTsKICAgICAgICB9CiAgICAgICAgLy9DaGVjayBmb3IgYnVnZ3kgUEhQIHZlcnNpb25zIHRoYXQgYWRkIGEgaGVhZGVyIHdpdGggYW4gaW5jb3JyZWN0IGxpbmUgYnJlYWsKICAgICAgICBpZiAoaW5pX2dldCgnbWFpbC5hZGRfeF9oZWFkZXInKSA9PSAxCiAgICAgICAgICAgIGFuZCAnbWFpbCcgPT0gJHRoaXMtPk1haWxlcgogICAgICAgICAgICBhbmQgc3RyaXBvcyhQSFBfT1MsICdXSU4nKSA9PT0gMAogICAgICAgICAgICBhbmQgKCh2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc3LjAuMCcsICc+PScpCiAgICAgICAgICAgICAgICAgICAgYW5kIHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzcuMC4xNycsICc8JykpCiAgICAgICAgICAgICAgICBvciAodmVyc2lvbl9jb21wYXJlKFBIUF9WRVJTSU9OLCAnNy4xLjAnLCAnPj0nKQogICAgICAgICAgICAgICAgICAgIGFuZCB2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc3LjEuMycsICc8JykpKQogICAgICAgICkgewogICAgICAgICAgICB0cmlnZ2VyX2Vycm9yKAogICAgICAgICAgICAgICAgJ1lvdXIgdmVyc2lvbiBvZiBQSFAgaXMgYWZmZWN0ZWQgYnkgYSBidWcgdGhhdCBtYXkgcmVzdWx0IGluIGNvcnJ1cHRlZCBtZXNzYWdlcy4nIC4KICAgICAgICAgICAgICAgICcgVG8gZml4IGl0LCBzd2l0Y2ggdG8gc2VuZGluZyB1c2luZyBTTVRQLCBkaXNhYmxlIHRoZSBtYWlsLmFkZF94X2hlYWRlciBvcHRpb24gaW4nIC4KICAgICAgICAgICAgICAgICcgeW91ciBwaHAuaW5pLCBzd2l0Y2ggdG8gTWFjT1Mgb3IgTGludXgsIG9yIHVwZ3JhZGUgeW91ciBQSFAgdG8gdmVyc2lvbiA3LjAuMTcrIG9yIDcuMS4zKy4nLAogICAgICAgICAgICAgICAgRV9VU0VSX1dBUk5JTkcKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgICR0aGlzLT5lcnJvcl9jb3VudCA9IDA7IC8vIFJlc2V0IGVycm9ycwogICAgICAgICAgICAkdGhpcy0+bWFpbEhlYWRlciA9ICcnOwoKICAgICAgICAgICAgLy8gRGVxdWV1ZSByZWNpcGllbnQgYW5kIFJlcGx5LVRvIGFkZHJlc3NlcyB3aXRoIElETgogICAgICAgICAgICBmb3JlYWNoIChhcnJheV9tZXJnZSgkdGhpcy0+UmVjaXBpZW50c1F1ZXVlLCAkdGhpcy0+UmVwbHlUb1F1ZXVlKSBhcyAkcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAkcGFyYW1zWzFdID0gJHRoaXMtPnB1bnllbmNvZGVBZGRyZXNzKCRwYXJhbXNbMV0pOwogICAgICAgICAgICAgICAgY2FsbF91c2VyX2Z1bmNfYXJyYXkoWyR0aGlzLCAnYWRkQW5BZGRyZXNzJ10sICRwYXJhbXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb3VudCgkdGhpcy0+dG8pICsgY291bnQoJHRoaXMtPmNjKSArIGNvdW50KCR0aGlzLT5iY2MpIDwgMSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+bGFuZygncHJvdmlkZV9hZGRyZXNzJyksIHNlbGY6OlNUT1BfQ1JJVElDQUwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBWYWxpZGF0ZSBGcm9tLCBTZW5kZXIsIGFuZCBDb25maXJtUmVhZGluZ1RvIGFkZHJlc3NlcwogICAgICAgICAgICBmb3JlYWNoIChbJ0Zyb20nLCAnU2VuZGVyJywgJ0NvbmZpcm1SZWFkaW5nVG8nXSBhcyAkYWRkcmVzc19raW5kKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+JGFkZHJlc3Nfa2luZCA9IHRyaW0oJHRoaXMtPiRhZGRyZXNzX2tpbmQpOwogICAgICAgICAgICAgICAgaWYgKGVtcHR5KCR0aGlzLT4kYWRkcmVzc19raW5kKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHRoaXMtPiRhZGRyZXNzX2tpbmQgPSAkdGhpcy0+cHVueWVuY29kZUFkZHJlc3MoJHRoaXMtPiRhZGRyZXNzX2tpbmQpOwogICAgICAgICAgICAgICAgaWYgKCFzdGF0aWM6OnZhbGlkYXRlQWRkcmVzcygkdGhpcy0+JGFkZHJlc3Nfa2luZCkpIHsKICAgICAgICAgICAgICAgICAgICAkZXJyb3JfbWVzc2FnZSA9IHNwcmludGYoJyVzICglcyk6ICVzJywKICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmxhbmcoJ2ludmFsaWRfYWRkcmVzcycpLAogICAgICAgICAgICAgICAgICAgICAgICAkYWRkcmVzc19raW5kLAogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+JGFkZHJlc3Nfa2luZCk7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCRlcnJvcl9tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCRlcnJvcl9tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkZXJyb3JfbWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNldCB3aGV0aGVyIHRoZSBtZXNzYWdlIGlzIG11bHRpcGFydC9hbHRlcm5hdGl2ZQogICAgICAgICAgICBpZiAoJHRoaXMtPmFsdGVybmF0aXZlRXhpc3RzKCkpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5Db250ZW50VHlwZSA9IHN0YXRpYzo6Q09OVEVOVF9UWVBFX01VTFRJUEFSVF9BTFRFUk5BVElWRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRoaXMtPnNldE1lc3NhZ2VUeXBlKCk7CiAgICAgICAgICAgIC8vIFJlZnVzZSB0byBzZW5kIGFuIGVtcHR5IG1lc3NhZ2UgdW5sZXNzIHdlIGFyZSBzcGVjaWZpY2FsbHkgYWxsb3dpbmcgaXQKICAgICAgICAgICAgaWYgKCEkdGhpcy0+QWxsb3dFbXB0eSBhbmQgZW1wdHkoJHRoaXMtPkJvZHkpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdlbXB0eV9tZXNzYWdlJyksIHNlbGY6OlNUT1BfQ1JJVElDQUwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL1RyaW0gc3ViamVjdCBjb25zaXN0ZW50bHkKICAgICAgICAgICAgJHRoaXMtPlN1YmplY3QgPSB0cmltKCR0aGlzLT5TdWJqZWN0KTsKICAgICAgICAgICAgLy8gQ3JlYXRlIGJvZHkgYmVmb3JlIGhlYWRlcnMgaW4gY2FzZSBib2R5IG1ha2VzIGNoYW5nZXMgdG8gaGVhZGVycyAoZS5nLiBhbHRlcmluZyB0cmFuc2ZlciBlbmNvZGluZykKICAgICAgICAgICAgJHRoaXMtPk1JTUVIZWFkZXIgPSAnJzsKICAgICAgICAgICAgJHRoaXMtPk1JTUVCb2R5ID0gJHRoaXMtPmNyZWF0ZUJvZHkoKTsKICAgICAgICAgICAgLy8gY3JlYXRlQm9keSBtYXkgaGF2ZSBhZGRlZCBzb21lIGhlYWRlcnMsIHNvIHJldGFpbiB0aGVtCiAgICAgICAgICAgICR0ZW1waGVhZGVycyA9ICR0aGlzLT5NSU1FSGVhZGVyOwogICAgICAgICAgICAkdGhpcy0+TUlNRUhlYWRlciA9ICR0aGlzLT5jcmVhdGVIZWFkZXIoKTsKICAgICAgICAgICAgJHRoaXMtPk1JTUVIZWFkZXIgLj0gJHRlbXBoZWFkZXJzOwoKICAgICAgICAgICAgLy8gVG8gY2FwdHVyZSB0aGUgY29tcGxldGUgbWVzc2FnZSB3aGVuIHVzaW5nIG1haWwoKSwgY3JlYXRlCiAgICAgICAgICAgIC8vIGFuIGV4dHJhIGhlYWRlciBsaXN0IHdoaWNoIGNyZWF0ZUhlYWRlcigpIGRvZXNuJ3QgZm9sZCBpbgogICAgICAgICAgICBpZiAoJ21haWwnID09ICR0aGlzLT5NYWlsZXIpIHsKICAgICAgICAgICAgICAgIGlmIChjb3VudCgkdGhpcy0+dG8pID4gMCkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5tYWlsSGVhZGVyIC49ICR0aGlzLT5hZGRyQXBwZW5kKCdUbycsICR0aGlzLT50byk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5tYWlsSGVhZGVyIC49ICR0aGlzLT5oZWFkZXJMaW5lKCdUbycsICd1bmRpc2Nsb3NlZC1yZWNpcGllbnRzOjsnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0aGlzLT5tYWlsSGVhZGVyIC49ICR0aGlzLT5oZWFkZXJMaW5lKAogICAgICAgICAgICAgICAgICAgICdTdWJqZWN0JywKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZW5jb2RlSGVhZGVyKCR0aGlzLT5zZWN1cmVIZWFkZXIoJHRoaXMtPlN1YmplY3QpKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gU2lnbiB3aXRoIERLSU0gaWYgZW5hYmxlZAogICAgICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5ES0lNX2RvbWFpbikKICAgICAgICAgICAgICAgIGFuZCAhZW1wdHkoJHRoaXMtPkRLSU1fc2VsZWN0b3IpCiAgICAgICAgICAgICAgICBhbmQgKCFlbXB0eSgkdGhpcy0+REtJTV9wcml2YXRlX3N0cmluZykKICAgICAgICAgICAgICAgICAgICBvciAoIWVtcHR5KCR0aGlzLT5ES0lNX3ByaXZhdGUpIGFuZCBmaWxlX2V4aXN0cygkdGhpcy0+REtJTV9wcml2YXRlKSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAkaGVhZGVyX2RraW0gPSAkdGhpcy0+REtJTV9BZGQoCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPk1JTUVIZWFkZXIgLiAkdGhpcy0+bWFpbEhlYWRlciwKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZW5jb2RlSGVhZGVyKCR0aGlzLT5zZWN1cmVIZWFkZXIoJHRoaXMtPlN1YmplY3QpKSwKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+TUlNRUJvZHkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAkdGhpcy0+TUlNRUhlYWRlciA9IHJ0cmltKCR0aGlzLT5NSU1FSGVhZGVyLCAiXHJcbiAiKSAuIHN0YXRpYzo6JExFIC4KICAgICAgICAgICAgICAgICAgICBzdGF0aWM6Om5vcm1hbGl6ZUJyZWFrcygkaGVhZGVyX2RraW0pIC4gc3RhdGljOjokTEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZXhjKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkZXhjLT5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93ICRleGM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBY3R1YWxseSBzZW5kIGEgbWVzc2FnZSB2aWEgdGhlIHNlbGVjdGVkIG1lY2hhbmlzbS4KICAgICAqCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcG9zdFNlbmQoKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIENob29zZSB0aGUgbWFpbGVyIGFuZCBzZW5kIHRocm91Z2ggaXQKICAgICAgICAgICAgc3dpdGNoICgkdGhpcy0+TWFpbGVyKSB7CiAgICAgICAgICAgICAgICBjYXNlICdzZW5kbWFpbCc6CiAgICAgICAgICAgICAgICBjYXNlICdxbWFpbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5zZW5kbWFpbFNlbmQoJHRoaXMtPk1JTUVIZWFkZXIsICR0aGlzLT5NSU1FQm9keSk7CiAgICAgICAgICAgICAgICBjYXNlICdzbXRwJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMtPnNtdHBTZW5kKCR0aGlzLT5NSU1FSGVhZGVyLCAkdGhpcy0+TUlNRUJvZHkpOwogICAgICAgICAgICAgICAgY2FzZSAnbWFpbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5tYWlsU2VuZCgkdGhpcy0+TUlNRUhlYWRlciwgJHRoaXMtPk1JTUVCb2R5KTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgJHNlbmRNZXRob2QgPSAkdGhpcy0+TWFpbGVyIC4gJ1NlbmQnOwogICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2RfZXhpc3RzKCR0aGlzLCAkc2VuZE1ldGhvZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT4kc2VuZE1ldGhvZCgkdGhpcy0+TUlNRUhlYWRlciwgJHRoaXMtPk1JTUVCb2R5KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+bWFpbFNlbmQoJHRoaXMtPk1JTUVIZWFkZXIsICR0aGlzLT5NSU1FQm9keSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGV4YykgewogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoJGV4Yy0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgJHRoaXMtPmVkZWJ1ZygkZXhjLT5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93ICRleGM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgbWFpbCB1c2luZyB0aGUgJFNlbmRtYWlsIHByb2dyYW0uCiAgICAgKgogICAgICogQHNlZSAgICBQSFBNYWlsZXI6OiRTZW5kbWFpbAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGhlYWRlciBUaGUgbWVzc2FnZSBoZWFkZXJzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRib2R5ICAgVGhlIG1lc3NhZ2UgYm9keQogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZW5kbWFpbFNlbmQoJGhlYWRlciwgJGJvZHkpCiAgICB7CiAgICAgICAgLy8gQ1ZFLTIwMTYtMTAwMzMsIENWRS0yMDE2LTEwMDQ1OiBEb24ndCBwYXNzIC1mIGlmIGNoYXJhY3RlcnMgd2lsbCBiZSBlc2NhcGVkLgogICAgICAgIGlmICghZW1wdHkoJHRoaXMtPlNlbmRlcikgYW5kIHNlbGY6OmlzU2hlbGxTYWZlKCR0aGlzLT5TZW5kZXIpKSB7CiAgICAgICAgICAgIGlmICgncW1haWwnID09ICR0aGlzLT5NYWlsZXIpIHsKICAgICAgICAgICAgICAgICRzZW5kbWFpbEZtdCA9ICclcyAtZiVzJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRzZW5kbWFpbEZtdCA9ICclcyAtb2kgLWYlcyAtdCc7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoJ3FtYWlsJyA9PSAkdGhpcy0+TWFpbGVyKSB7CiAgICAgICAgICAgICAgICAkc2VuZG1haWxGbXQgPSAnJXMnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHNlbmRtYWlsRm10ID0gJyVzIC1vaSAtdCc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRzZW5kbWFpbCA9IHNwcmludGYoJHNlbmRtYWlsRm10LCBlc2NhcGVzaGVsbGNtZCgkdGhpcy0+U2VuZG1haWwpLCAkdGhpcy0+U2VuZGVyKTsKCiAgICAgICAgaWYgKCR0aGlzLT5TaW5nbGVUbykgewogICAgICAgICAgICBmb3JlYWNoICgkdGhpcy0+U2luZ2xlVG9BcnJheSBhcyAkdG9BZGRyKSB7CiAgICAgICAgICAgICAgICAkbWFpbCA9IEBwb3Blbigkc2VuZG1haWwsICd3Jyk7CiAgICAgICAgICAgICAgICBpZiAoISRtYWlsKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+bGFuZygnZXhlY3V0ZScpIC4gJHRoaXMtPlNlbmRtYWlsLCBzZWxmOjpTVE9QX0NSSVRJQ0FMKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ3cml0ZSgkbWFpbCwgJ1RvOiAnIC4gJHRvQWRkciAuICJcbiIpOwogICAgICAgICAgICAgICAgZndyaXRlKCRtYWlsLCAkaGVhZGVyKTsKICAgICAgICAgICAgICAgIGZ3cml0ZSgkbWFpbCwgJGJvZHkpOwogICAgICAgICAgICAgICAgJHJlc3VsdCA9IHBjbG9zZSgkbWFpbCk7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZG9DYWxsYmFjaygKICAgICAgICAgICAgICAgICAgICAoJHJlc3VsdCA9PSAwKSwKICAgICAgICAgICAgICAgICAgICBbJHRvQWRkcl0sCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNjLAogICAgICAgICAgICAgICAgICAgICR0aGlzLT5iY2MsCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPlN1YmplY3QsCiAgICAgICAgICAgICAgICAgICAgJGJvZHksCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPkZyb20sCiAgICAgICAgICAgICAgICAgICAgW10KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gJHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ2V4ZWN1dGUnKSAuICR0aGlzLT5TZW5kbWFpbCwgc2VsZjo6U1RPUF9DUklUSUNBTCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkbWFpbCA9IEBwb3Blbigkc2VuZG1haWwsICd3Jyk7CiAgICAgICAgICAgIGlmICghJG1haWwpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ2V4ZWN1dGUnKSAuICR0aGlzLT5TZW5kbWFpbCwgc2VsZjo6U1RPUF9DUklUSUNBTCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZndyaXRlKCRtYWlsLCAkaGVhZGVyKTsKICAgICAgICAgICAgZndyaXRlKCRtYWlsLCAkYm9keSk7CiAgICAgICAgICAgICRyZXN1bHQgPSBwY2xvc2UoJG1haWwpOwogICAgICAgICAgICAkdGhpcy0+ZG9DYWxsYmFjaygKICAgICAgICAgICAgICAgICgkcmVzdWx0ID09IDApLAogICAgICAgICAgICAgICAgJHRoaXMtPnRvLAogICAgICAgICAgICAgICAgJHRoaXMtPmNjLAogICAgICAgICAgICAgICAgJHRoaXMtPmJjYywKICAgICAgICAgICAgICAgICR0aGlzLT5TdWJqZWN0LAogICAgICAgICAgICAgICAgJGJvZHksCiAgICAgICAgICAgICAgICAkdGhpcy0+RnJvbSwKICAgICAgICAgICAgICAgIFtdCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICgwICE9PSAkcmVzdWx0KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdleGVjdXRlJykgLiAkdGhpcy0+U2VuZG1haWwsIHNlbGY6OlNUT1BfQ1JJVElDQUwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEZpeCBDVkUtMjAxNi0xMDAzMyBhbmQgQ1ZFLTIwMTYtMTAwNDUgYnkgZGlzYWxsb3dpbmcgcG90ZW50aWFsbHkgdW5zYWZlIHNoZWxsIGNoYXJhY3RlcnMuCiAgICAgKiBOb3RlIHRoYXQgZXNjYXBlc2hlbGxhcmcgYW5kIGVzY2FwZXNoZWxsY21kIGFyZSBpbmFkZXF1YXRlIGZvciBvdXIgcHVycG9zZXMsIGVzcGVjaWFsbHkgb24gV2luZG93cy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9QSFBNYWlsZXIvUEhQTWFpbGVyL2lzc3Vlcy85MjQgQ1ZFLTIwMTYtMTAwNDUgYnVnIHJlcG9ydAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cmluZyBUaGUgc3RyaW5nIHRvIGJlIHZhbGlkYXRlZAogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIGlzU2hlbGxTYWZlKCRzdHJpbmcpCiAgICB7CiAgICAgICAgLy8gRnV0dXJlLXByb29mCiAgICAgICAgaWYgKGVzY2FwZXNoZWxsY21kKCRzdHJpbmcpICE9PSAkc3RyaW5nCiAgICAgICAgICAgIG9yICFpbl9hcnJheShlc2NhcGVzaGVsbGFyZygkc3RyaW5nKSwgWyInJHN0cmluZyciLCAiXCIkc3RyaW5nXCIiXSkKICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJGxlbmd0aCA9IHN0cmxlbigkc3RyaW5nKTsKCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJGxlbmd0aDsgKyskaSkgewogICAgICAgICAgICAkYyA9ICRzdHJpbmdbJGldOwoKICAgICAgICAgICAgLy8gQWxsIG90aGVyIGNoYXJhY3RlcnMgaGF2ZSBhIHNwZWNpYWwgbWVhbmluZyBpbiBhdCBsZWFzdCBvbmUgY29tbW9uIHNoZWxsLCBpbmNsdWRpbmcgPSBhbmQgKy4KICAgICAgICAgICAgLy8gRnVsbCBzdG9wICguKSBoYXMgYSBzcGVjaWFsIG1lYW5pbmcgaW4gY21kLmV4ZSwgYnV0IGl0cyBpbXBhY3Qgc2hvdWxkIGJlIG5lZ2xpZ2libGUgaGVyZS4KICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgZG9lcyBwZXJtaXQgbm9uLUxhdGluIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxvY2FsZS4KICAgICAgICAgICAgaWYgKCFjdHlwZV9hbG51bSgkYykgJiYgc3RycG9zKCdAXy0uJywgJGMpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgbWFpbCB1c2luZyB0aGUgUEhQIG1haWwoKSBmdW5jdGlvbi4KICAgICAqCiAgICAgKiBAc2VlICAgIGh0dHA6Ly93d3cucGhwLm5ldC9tYW51YWwvZW4vYm9vay5tYWlsLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGhlYWRlciBUaGUgbWVzc2FnZSBoZWFkZXJzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRib2R5ICAgVGhlIG1lc3NhZ2UgYm9keQogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBtYWlsU2VuZCgkaGVhZGVyLCAkYm9keSkKICAgIHsKICAgICAgICAkdG9BcnIgPSBbXTsKICAgICAgICBmb3JlYWNoICgkdGhpcy0+dG8gYXMgJHRvYWRkcikgewogICAgICAgICAgICAkdG9BcnJbXSA9ICR0aGlzLT5hZGRyRm9ybWF0KCR0b2FkZHIpOwogICAgICAgIH0KICAgICAgICAkdG8gPSBpbXBsb2RlKCcsICcsICR0b0Fycik7CgogICAgICAgICRwYXJhbXMgPSBudWxsOwogICAgICAgIC8vVGhpcyBzZXRzIHRoZSBTTVRQIGVudmVsb3BlIHNlbmRlciB3aGljaCBnZXRzIHR1cm5lZCBpbnRvIGEgcmV0dXJuLXBhdGggaGVhZGVyIGJ5IHRoZSByZWNlaXZlcgogICAgICAgIGlmICghZW1wdHkoJHRoaXMtPlNlbmRlcikgYW5kIHN0YXRpYzo6dmFsaWRhdGVBZGRyZXNzKCR0aGlzLT5TZW5kZXIpKSB7CiAgICAgICAgICAgIC8vQSBzcGFjZSBhZnRlciBgLWZgIGlzIG9wdGlvbmFsLCBidXQgdGhlcmUgaXMgYSBsb25nIGhpc3Rvcnkgb2YgaXRzIHByZXNlbmNlCiAgICAgICAgICAgIC8vY2F1c2luZyBwcm9ibGVtcywgc28gd2UgZG9uJ3QgdXNlIG9uZQogICAgICAgICAgICAvL0V4aW0gZG9jczogaHR0cDovL3d3dy5leGltLm9yZy9leGltLWh0bWwtY3VycmVudC9kb2MvaHRtbC9zcGVjX2h0bWwvY2gtdGhlX2V4aW1fY29tbWFuZF9saW5lLmh0bWwKICAgICAgICAgICAgLy9TZW5kbWFpbCBkb2NzOiBodHRwOi8vd3d3LnNlbmRtYWlsLm9yZy9+Y2EvZW1haWwvbWFuL3NlbmRtYWlsLmh0bWwKICAgICAgICAgICAgLy9RbWFpbCBkb2NzOiBodHRwOi8vd3d3LnFtYWlsLm9yZy9tYW4vbWFuOC9xbWFpbC1pbmplY3QuaHRtbAogICAgICAgICAgICAvL0V4YW1wbGUgcHJvYmxlbTogaHR0cHM6Ly93d3cuZHJ1cGFsLm9yZy9ub2RlLzEwNTc5NTQKICAgICAgICAgICAgLy8gQ1ZFLTIwMTYtMTAwMzMsIENWRS0yMDE2LTEwMDQ1OiBEb24ndCBwYXNzIC1mIGlmIGNoYXJhY3RlcnMgd2lsbCBiZSBlc2NhcGVkLgogICAgICAgICAgICBpZiAoc2VsZjo6aXNTaGVsbFNhZmUoJHRoaXMtPlNlbmRlcikpIHsKICAgICAgICAgICAgICAgICRwYXJhbXMgPSBzcHJpbnRmKCctZiVzJywgJHRoaXMtPlNlbmRlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFlbXB0eSgkdGhpcy0+U2VuZGVyKSBhbmQgc3RhdGljOjp2YWxpZGF0ZUFkZHJlc3MoJHRoaXMtPlNlbmRlcikpIHsKICAgICAgICAgICAgJG9sZF9mcm9tID0gaW5pX2dldCgnc2VuZG1haWxfZnJvbScpOwogICAgICAgICAgICBpbmlfc2V0KCdzZW5kbWFpbF9mcm9tJywgJHRoaXMtPlNlbmRlcik7CiAgICAgICAgfQogICAgICAgICRyZXN1bHQgPSBmYWxzZTsKICAgICAgICBpZiAoJHRoaXMtPlNpbmdsZVRvIGFuZCBjb3VudCgkdG9BcnIpID4gMSkgewogICAgICAgICAgICBmb3JlYWNoICgkdG9BcnIgYXMgJHRvQWRkcikgewogICAgICAgICAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT5tYWlsUGFzc3RocnUoJHRvQWRkciwgJHRoaXMtPlN1YmplY3QsICRib2R5LCAkaGVhZGVyLCAkcGFyYW1zKTsKICAgICAgICAgICAgICAgICR0aGlzLT5kb0NhbGxiYWNrKCRyZXN1bHQsIFskdG9BZGRyXSwgJHRoaXMtPmNjLCAkdGhpcy0+YmNjLCAkdGhpcy0+U3ViamVjdCwgJGJvZHksICR0aGlzLT5Gcm9tLCBbXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPm1haWxQYXNzdGhydSgkdG8sICR0aGlzLT5TdWJqZWN0LCAkYm9keSwgJGhlYWRlciwgJHBhcmFtcyk7CiAgICAgICAgICAgICR0aGlzLT5kb0NhbGxiYWNrKCRyZXN1bHQsICR0aGlzLT50bywgJHRoaXMtPmNjLCAkdGhpcy0+YmNjLCAkdGhpcy0+U3ViamVjdCwgJGJvZHksICR0aGlzLT5Gcm9tLCBbXSk7CiAgICAgICAgfQogICAgICAgIGlmIChpc3NldCgkb2xkX2Zyb20pKSB7CiAgICAgICAgICAgIGluaV9zZXQoJ3NlbmRtYWlsX2Zyb20nLCAkb2xkX2Zyb20pOwogICAgICAgIH0KICAgICAgICBpZiAoISRyZXN1bHQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+bGFuZygnaW5zdGFudGlhdGUnKSwgc2VsZjo6U1RPUF9DUklUSUNBTCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBpbnN0YW5jZSB0byB1c2UgZm9yIFNNVFAgb3BlcmF0aW9ucy4KICAgICAqIE92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gbG9hZCB5b3VyIG93biBTTVRQIGltcGxlbWVudGF0aW9uLAogICAgICogb3Igc2V0IG9uZSB3aXRoIHNldFNNVFBJbnN0YW5jZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFNNVFAKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFNNVFBJbnN0YW5jZSgpCiAgICB7CiAgICAgICAgaWYgKCFpc19vYmplY3QoJHRoaXMtPnNtdHApKSB7CiAgICAgICAgICAgICR0aGlzLT5zbXRwID0gbmV3IFNNVFAoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+c210cDsKICAgIH0KCiAgICAvKioKICAgICAqIFByb3ZpZGUgYW4gaW5zdGFuY2UgdG8gdXNlIGZvciBTTVRQIG9wZXJhdGlvbnMuCiAgICAgKgogICAgICogQHBhcmFtIFNNVFAgJHNtdHAKICAgICAqCiAgICAgKiBAcmV0dXJuIFNNVFAKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldFNNVFBJbnN0YW5jZShTTVRQICRzbXRwKQogICAgewogICAgICAgICR0aGlzLT5zbXRwID0gJHNtdHA7CgogICAgICAgIHJldHVybiAkdGhpcy0+c210cDsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgbWFpbCB2aWEgU01UUC4KICAgICAqIFJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYSBiYWQgTUFJTCBGUk9NLCBSQ1BULCBvciBEQVRBIGlucHV0LgogICAgICoKICAgICAqIEBzZWUgUEhQTWFpbGVyOjpzZXRTTVRQSW5zdGFuY2UoKSB0byB1c2UgYSBkaWZmZXJlbnQgY2xhc3MuCiAgICAgKgogICAgICogQHVzZXMgXFBIUE1haWxlclxQSFBNYWlsZXJcU01UUAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGhlYWRlciBUaGUgbWVzc2FnZSBoZWFkZXJzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRib2R5ICAgVGhlIG1lc3NhZ2UgYm9keQogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzbXRwU2VuZCgkaGVhZGVyLCAkYm9keSkKICAgIHsKICAgICAgICAkYmFkX3JjcHQgPSBbXTsKICAgICAgICBpZiAoISR0aGlzLT5zbXRwQ29ubmVjdCgkdGhpcy0+U01UUE9wdGlvbnMpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ3NtdHBfY29ubmVjdF9mYWlsZWQnKSwgc2VsZjo6U1RPUF9DUklUSUNBTCk7CiAgICAgICAgfQogICAgICAgIC8vU2VuZGVyIGFscmVhZHkgdmFsaWRhdGVkIGluIHByZVNlbmQoKQogICAgICAgIGlmICgnJyA9PSAkdGhpcy0+U2VuZGVyKSB7CiAgICAgICAgICAgICRzbXRwX2Zyb20gPSAkdGhpcy0+RnJvbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkc210cF9mcm9tID0gJHRoaXMtPlNlbmRlcjsKICAgICAgICB9CiAgICAgICAgaWYgKCEkdGhpcy0+c210cC0+bWFpbCgkc210cF9mcm9tKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoJHRoaXMtPmxhbmcoJ2Zyb21fZmFpbGVkJykgLiAkc210cF9mcm9tIC4gJyA6ICcgLiBpbXBsb2RlKCcsJywgJHRoaXMtPnNtdHAtPmdldEVycm9yKCkpKTsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+RXJyb3JJbmZvLCBzZWxmOjpTVE9QX0NSSVRJQ0FMKTsKICAgICAgICB9CgogICAgICAgICRjYWxsYmFja3MgPSBbXTsKICAgICAgICAvLyBBdHRlbXB0IHRvIHNlbmQgdG8gYWxsIHJlY2lwaWVudHMKICAgICAgICBmb3JlYWNoIChbJHRoaXMtPnRvLCAkdGhpcy0+Y2MsICR0aGlzLT5iY2NdIGFzICR0b2dyb3VwKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCR0b2dyb3VwIGFzICR0bykgewogICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+c210cC0+cmVjaXBpZW50KCR0b1swXSkpIHsKICAgICAgICAgICAgICAgICAgICAkZXJyb3IgPSAkdGhpcy0+c210cC0+Z2V0RXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAkYmFkX3JjcHRbXSA9IFsndG8nID0+ICR0b1swXSwgJ2Vycm9yJyA9PiAkZXJyb3JbJ2RldGFpbCddXTsKICAgICAgICAgICAgICAgICAgICAkaXNTZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRpc1NlbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRjYWxsYmFja3NbXSA9IFsnaXNzZW50Jz0+JGlzU2VudCwgJ3RvJz0+JHRvWzBdXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gT25seSBzZW5kIHRoZSBEQVRBIGNvbW1hbmQgaWYgd2UgaGF2ZSB2aWFibGUgcmVjaXBpZW50cwogICAgICAgIGlmICgoY291bnQoJHRoaXMtPmFsbF9yZWNpcGllbnRzKSA+IGNvdW50KCRiYWRfcmNwdCkpIGFuZCAhJHRoaXMtPnNtdHAtPmRhdGEoJGhlYWRlciAuICRib2R5KSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdkYXRhX25vdF9hY2NlcHRlZCcpLCBzZWxmOjpTVE9QX0NSSVRJQ0FMKTsKICAgICAgICB9CgogICAgICAgICRzbXRwX3RyYW5zYWN0aW9uX2lkID0gJHRoaXMtPnNtdHAtPmdldExhc3RUcmFuc2FjdGlvbklEKCk7CgogICAgICAgIGlmICgkdGhpcy0+U01UUEtlZXBBbGl2ZSkgewogICAgICAgICAgICAkdGhpcy0+c210cC0+cmVzZXQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdGhpcy0+c210cC0+cXVpdCgpOwogICAgICAgICAgICAkdGhpcy0+c210cC0+Y2xvc2UoKTsKICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCRjYWxsYmFja3MgYXMgJGNiKSB7CiAgICAgICAgICAgICR0aGlzLT5kb0NhbGxiYWNrKAogICAgICAgICAgICAgICAgJGNiWydpc3NlbnQnXSwKICAgICAgICAgICAgICAgIFskY2JbJ3RvJ11dLAogICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgICR0aGlzLT5TdWJqZWN0LAogICAgICAgICAgICAgICAgJGJvZHksCiAgICAgICAgICAgICAgICAkdGhpcy0+RnJvbSwKICAgICAgICAgICAgICAgIFsnc210cF90cmFuc2FjdGlvbl9pZCcgPT4gJHNtdHBfdHJhbnNhY3Rpb25faWRdCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAvL0NyZWF0ZSBlcnJvciBtZXNzYWdlIGZvciBhbnkgYmFkIGFkZHJlc3NlcwogICAgICAgIGlmIChjb3VudCgkYmFkX3JjcHQpID4gMCkgewogICAgICAgICAgICAkZXJyc3RyID0gJyc7CiAgICAgICAgICAgIGZvcmVhY2ggKCRiYWRfcmNwdCBhcyAkYmFkKSB7CiAgICAgICAgICAgICAgICAkZXJyc3RyIC49ICRiYWRbJ3RvJ10gLiAnOiAnIC4gJGJhZFsnZXJyb3InXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgJHRoaXMtPmxhbmcoJ3JlY2lwaWVudHNfZmFpbGVkJykgLiAkZXJyc3RyLAogICAgICAgICAgICAgICAgc2VsZjo6U1RPUF9DT05USU5VRQogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbml0aWF0ZSBhIGNvbm5lY3Rpb24gdG8gYW4gU01UUCBzZXJ2ZXIuCiAgICAgKiBSZXR1cm5zIGZhbHNlIGlmIHRoZSBvcGVyYXRpb24gZmFpbGVkLgogICAgICoKICAgICAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucyBBbiBhcnJheSBvZiBvcHRpb25zIGNvbXBhdGlibGUgd2l0aCBzdHJlYW1fY29udGV4dF9jcmVhdGUoKQogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKgogICAgICogQHVzZXMgXFBIUE1haWxlclxQSFBNYWlsZXJcU01UUAogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc210cENvbm5lY3QoJG9wdGlvbnMgPSBudWxsKQogICAgewogICAgICAgIGlmIChudWxsID09PSAkdGhpcy0+c210cCkgewogICAgICAgICAgICAkdGhpcy0+c210cCA9ICR0aGlzLT5nZXRTTVRQSW5zdGFuY2UoKTsKICAgICAgICB9CgogICAgICAgIC8vSWYgbm8gb3B0aW9ucyBhcmUgcHJvdmlkZWQsIHVzZSB3aGF0ZXZlciBpcyBzZXQgaW4gdGhlIGluc3RhbmNlCiAgICAgICAgaWYgKG51bGwgPT09ICRvcHRpb25zKSB7CiAgICAgICAgICAgICRvcHRpb25zID0gJHRoaXMtPlNNVFBPcHRpb25zOwogICAgICAgIH0KCiAgICAgICAgLy8gQWxyZWFkeSBjb25uZWN0ZWQ/CiAgICAgICAgaWYgKCR0aGlzLT5zbXRwLT5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5zbXRwLT5zZXRUaW1lb3V0KCR0aGlzLT5UaW1lb3V0KTsKICAgICAgICAkdGhpcy0+c210cC0+c2V0RGVidWdMZXZlbCgkdGhpcy0+U01UUERlYnVnKTsKICAgICAgICAkdGhpcy0+c210cC0+c2V0RGVidWdPdXRwdXQoJHRoaXMtPkRlYnVnb3V0cHV0KTsKICAgICAgICAkdGhpcy0+c210cC0+c2V0VmVycCgkdGhpcy0+ZG9fdmVycCk7CiAgICAgICAgJGhvc3RzID0gZXhwbG9kZSgnOycsICR0aGlzLT5Ib3N0KTsKICAgICAgICAkbGFzdGV4Y2VwdGlvbiA9IG51bGw7CgogICAgICAgIGZvcmVhY2ggKCRob3N0cyBhcyAkaG9zdGVudHJ5KSB7CiAgICAgICAgICAgICRob3N0aW5mbyA9IFtdOwogICAgICAgICAgICBpZiAoIXByZWdfbWF0Y2goCiAgICAgICAgICAgICAgICAnL14oKHNzbHx0bHMpOlwvXC8pKihbYS16QS1aMC05XC4tXSp8XFtbYS1mQS1GMC05Ol0rXF0pOj8oWzAtOV0qKSQvJywKICAgICAgICAgICAgICAgIHRyaW0oJGhvc3RlbnRyeSksCiAgICAgICAgICAgICAgICAkaG9zdGluZm8KICAgICAgICAgICAgKSkgewogICAgICAgICAgICAgICAgc3RhdGljOjplZGVidWcoJHRoaXMtPmxhbmcoJ2Nvbm5lY3RfaG9zdCcpIC4gJyAnIC4gJGhvc3RlbnRyeSk7CiAgICAgICAgICAgICAgICAvLyBOb3QgYSB2YWxpZCBob3N0IGVudHJ5CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAkaG9zdGluZm9bMl06IG9wdGlvbmFsIHNzbCBvciB0bHMgcHJlZml4CiAgICAgICAgICAgIC8vICRob3N0aW5mb1szXTogdGhlIGhvc3RuYW1lCiAgICAgICAgICAgIC8vICRob3N0aW5mb1s0XTogb3B0aW9uYWwgcG9ydCBudW1iZXIKICAgICAgICAgICAgLy8gVGhlIGhvc3Qgc3RyaW5nIHByZWZpeCBjYW4gdGVtcG9yYXJpbHkgb3ZlcnJpZGUgdGhlIGN1cnJlbnQgc2V0dGluZyBmb3IgU01UUFNlY3VyZQogICAgICAgICAgICAvLyBJZiBpdCdzIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHVzZWQKCiAgICAgICAgICAgIC8vQ2hlY2sgdGhlIGhvc3QgbmFtZSBpcyBhIHZhbGlkIG5hbWUgb3IgSVAgYWRkcmVzcyBiZWZvcmUgdHJ5aW5nIHRvIHVzZSBpdAogICAgICAgICAgICBpZiAoIXN0YXRpYzo6aXNWYWxpZEhvc3QoJGhvc3RpbmZvWzNdKSkgewogICAgICAgICAgICAgICAgc3RhdGljOjplZGVidWcoJHRoaXMtPmxhbmcoJ2Nvbm5lY3RfaG9zdCcpIC4gJyAnIC4gJGhvc3RlbnRyeSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkcHJlZml4ID0gJyc7CiAgICAgICAgICAgICRzZWN1cmUgPSAkdGhpcy0+U01UUFNlY3VyZTsKICAgICAgICAgICAgJHRscyA9ICgndGxzJyA9PSAkdGhpcy0+U01UUFNlY3VyZSk7CiAgICAgICAgICAgIGlmICgnc3NsJyA9PSAkaG9zdGluZm9bMl0gb3IgKCcnID09ICRob3N0aW5mb1syXSBhbmQgJ3NzbCcgPT0gJHRoaXMtPlNNVFBTZWN1cmUpKSB7CiAgICAgICAgICAgICAgICAkcHJlZml4ID0gJ3NzbDovLyc7CiAgICAgICAgICAgICAgICAkdGxzID0gZmFsc2U7IC8vIENhbid0IGhhdmUgU1NMIGFuZCBUTFMgYXQgdGhlIHNhbWUgdGltZQogICAgICAgICAgICAgICAgJHNlY3VyZSA9ICdzc2wnOwogICAgICAgICAgICB9IGVsc2VpZiAoJ3RscycgPT0gJGhvc3RpbmZvWzJdKSB7CiAgICAgICAgICAgICAgICAkdGxzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIC8vIHRscyBkb2Vzbid0IHVzZSBhIHByZWZpeAogICAgICAgICAgICAgICAgJHNlY3VyZSA9ICd0bHMnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vRG8gd2UgbmVlZCB0aGUgT3BlblNTTCBleHRlbnNpb24/CiAgICAgICAgICAgICRzc2xleHQgPSBkZWZpbmVkKCdPUEVOU1NMX0FMR09fU0hBMjU2Jyk7CiAgICAgICAgICAgIGlmICgndGxzJyA9PT0gJHNlY3VyZSBvciAnc3NsJyA9PT0gJHNlY3VyZSkgewogICAgICAgICAgICAgICAgLy9DaGVjayBmb3IgYW4gT3BlblNTTCBjb25zdGFudCByYXRoZXIgdGhhbiB1c2luZyBleHRlbnNpb25fbG9hZGVkLCB3aGljaCBpcyBzb21ldGltZXMgZGlzYWJsZWQKICAgICAgICAgICAgICAgIGlmICghJHNzbGV4dCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ2V4dGVuc2lvbl9taXNzaW5nJykgLiAnb3BlbnNzbCcsIHNlbGY6OlNUT1BfQ1JJVElDQUwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICRob3N0ID0gJGhvc3RpbmZvWzNdOwogICAgICAgICAgICAkcG9ydCA9ICR0aGlzLT5Qb3J0OwogICAgICAgICAgICAkdHBvcnQgPSAoaW50KSAkaG9zdGluZm9bNF07CiAgICAgICAgICAgIGlmICgkdHBvcnQgPiAwIGFuZCAkdHBvcnQgPCA2NTUzNikgewogICAgICAgICAgICAgICAgJHBvcnQgPSAkdHBvcnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCR0aGlzLT5zbXRwLT5jb25uZWN0KCRwcmVmaXggLiAkaG9zdCwgJHBvcnQsICR0aGlzLT5UaW1lb3V0LCAkb3B0aW9ucykpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5IZWxvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRoZWxsbyA9ICR0aGlzLT5IZWxvOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRoZWxsbyA9ICR0aGlzLT5zZXJ2ZXJIb3N0bmFtZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c210cC0+aGVsbG8oJGhlbGxvKTsKICAgICAgICAgICAgICAgICAgICAvL0F1dG9tYXRpY2FsbHkgZW5hYmxlIFRMUyBlbmNyeXB0aW9uIGlmOgogICAgICAgICAgICAgICAgICAgIC8vICogaXQncyBub3QgZGlzYWJsZWQKICAgICAgICAgICAgICAgICAgICAvLyAqIHdlIGhhdmUgb3BlbnNzbCBleHRlbnNpb24KICAgICAgICAgICAgICAgICAgICAvLyAqIHdlIGFyZSBub3QgYWxyZWFkeSB1c2luZyBTU0wKICAgICAgICAgICAgICAgICAgICAvLyAqIHRoZSBzZXJ2ZXIgb2ZmZXJzIFNUQVJUVExTCiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5TTVRQQXV0b1RMUyBhbmQgJHNzbGV4dCBhbmQgJ3NzbCcgIT0gJHNlY3VyZSBhbmQgJHRoaXMtPnNtdHAtPmdldFNlcnZlckV4dCgnU1RBUlRUTFMnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkdGxzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCR0bHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+c210cC0+c3RhcnRUTFMoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+bGFuZygnY29ubmVjdF9ob3N0JykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgcmVzZW5kIEVITE8gYWZ0ZXIgVExTIG5lZ290aWF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5zbXRwLT5oZWxsbygkaGVsbG8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMtPlNNVFBBdXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMtPnNtdHAtPmF1dGhlbnRpY2F0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5Vc2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5QYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5BdXRoVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5vYXV0aAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigkdGhpcy0+bGFuZygnYXV0aGVudGljYXRlJykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZXhjKSB7CiAgICAgICAgICAgICAgICAgICAgJGxhc3RleGNlcHRpb24gPSAkZXhjOwogICAgICAgICAgICAgICAgICAgICR0aGlzLT5lZGVidWcoJGV4Yy0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IGhhdmUgY29ubmVjdGVkLCBidXQgdGhlbiBmYWlsZWQgVExTIG9yIEF1dGgsIHNvIGNsb3NlIGNvbm5lY3Rpb24gbmljZWx5CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnNtdHAtPnF1aXQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBJZiB3ZSBnZXQgaGVyZSwgYWxsIGNvbm5lY3Rpb24gYXR0ZW1wdHMgaGF2ZSBmYWlsZWQsIHNvIGNsb3NlIGNvbm5lY3Rpb24gaGFyZAogICAgICAgICR0aGlzLT5zbXRwLT5jbG9zZSgpOwogICAgICAgIC8vIEFzIHdlJ3ZlIGNhdWdodCBhbGwgZXhjZXB0aW9ucywganVzdCByZXBvcnQgd2hhdGV2ZXIgdGhlIGxhc3Qgb25lIHdhcwogICAgICAgIGlmICgkdGhpcy0+ZXhjZXB0aW9ucyBhbmQgbnVsbCAhPT0gJGxhc3RleGNlcHRpb24pIHsKICAgICAgICAgICAgdGhyb3cgJGxhc3RleGNlcHRpb247CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9zZSB0aGUgYWN0aXZlIFNNVFAgc2Vzc2lvbiBpZiBvbmUgZXhpc3RzLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc210cENsb3NlKCkKICAgIHsKICAgICAgICBpZiAobnVsbCAhPT0gJHRoaXMtPnNtdHApIHsKICAgICAgICAgICAgaWYgKCR0aGlzLT5zbXRwLT5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnNtdHAtPnF1aXQoKTsKICAgICAgICAgICAgICAgICR0aGlzLT5zbXRwLT5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBsYW5ndWFnZSBmb3IgZXJyb3IgbWVzc2FnZXMuCiAgICAgKiBSZXR1cm5zIGZhbHNlIGlmIGl0IGNhbm5vdCBsb2FkIHRoZSBsYW5ndWFnZSBmaWxlLgogICAgICogVGhlIGRlZmF1bHQgbGFuZ3VhZ2UgaXMgRW5nbGlzaC4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRsYW5nY29kZSAgSVNPIDYzOS0xIDItY2hhcmFjdGVyIGxhbmd1YWdlIGNvZGUgKGUuZy4gRnJlbmNoIGlzICJmciIpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRsYW5nX3BhdGggUGF0aCB0byB0aGUgbGFuZ3VhZ2UgZmlsZSBkaXJlY3RvcnksIHdpdGggdHJhaWxpbmcgc2VwYXJhdG9yIChzbGFzaCkKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldExhbmd1YWdlKCRsYW5nY29kZSA9ICdlbicsICRsYW5nX3BhdGggPSAnJykKICAgIHsKICAgICAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgcmVuYW1lZCBsYW5ndWFnZSBjb2RlcwogICAgICAgICRyZW5hbWVkX2xhbmdjb2RlcyA9IFsKICAgICAgICAgICAgJ2JyJyA9PiAncHRfYnInLAogICAgICAgICAgICAnY3onID0+ICdjcycsCiAgICAgICAgICAgICdkaycgPT4gJ2RhJywKICAgICAgICAgICAgJ25vJyA9PiAnbmInLAogICAgICAgICAgICAnc2UnID0+ICdzdicsCiAgICAgICAgICAgICdzcicgPT4gJ3JzJywKICAgICAgICAgICAgJ3RnJyA9PiAndGwnLAogICAgICAgIF07CgogICAgICAgIGlmIChpc3NldCgkcmVuYW1lZF9sYW5nY29kZXNbJGxhbmdjb2RlXSkpIHsKICAgICAgICAgICAgJGxhbmdjb2RlID0gJHJlbmFtZWRfbGFuZ2NvZGVzWyRsYW5nY29kZV07CiAgICAgICAgfQoKICAgICAgICAvLyBEZWZpbmUgZnVsbCBzZXQgb2YgdHJhbnNsYXRhYmxlIHN0cmluZ3MgaW4gRW5nbGlzaAogICAgICAgICRQSFBNQUlMRVJfTEFORyA9IFsKICAgICAgICAgICAgJ2F1dGhlbnRpY2F0ZScgPT4gJ1NNVFAgRXJyb3I6IENvdWxkIG5vdCBhdXRoZW50aWNhdGUuJywKICAgICAgICAgICAgJ2Nvbm5lY3RfaG9zdCcgPT4gJ1NNVFAgRXJyb3I6IENvdWxkIG5vdCBjb25uZWN0IHRvIFNNVFAgaG9zdC4nLAogICAgICAgICAgICAnZGF0YV9ub3RfYWNjZXB0ZWQnID0+ICdTTVRQIEVycm9yOiBkYXRhIG5vdCBhY2NlcHRlZC4nLAogICAgICAgICAgICAnZW1wdHlfbWVzc2FnZScgPT4gJ01lc3NhZ2UgYm9keSBlbXB0eScsCiAgICAgICAgICAgICdlbmNvZGluZycgPT4gJ1Vua25vd24gZW5jb2Rpbmc6ICcsCiAgICAgICAgICAgICdleGVjdXRlJyA9PiAnQ291bGQgbm90IGV4ZWN1dGU6ICcsCiAgICAgICAgICAgICdmaWxlX2FjY2VzcycgPT4gJ0NvdWxkIG5vdCBhY2Nlc3MgZmlsZTogJywKICAgICAgICAgICAgJ2ZpbGVfb3BlbicgPT4gJ0ZpbGUgRXJyb3I6IENvdWxkIG5vdCBvcGVuIGZpbGU6ICcsCiAgICAgICAgICAgICdmcm9tX2ZhaWxlZCcgPT4gJ1RoZSBmb2xsb3dpbmcgRnJvbSBhZGRyZXNzIGZhaWxlZDogJywKICAgICAgICAgICAgJ2luc3RhbnRpYXRlJyA9PiAnQ291bGQgbm90IGluc3RhbnRpYXRlIG1haWwgZnVuY3Rpb24uJywKICAgICAgICAgICAgJ2ludmFsaWRfYWRkcmVzcycgPT4gJ0ludmFsaWQgYWRkcmVzczogJywKICAgICAgICAgICAgJ21haWxlcl9ub3Rfc3VwcG9ydGVkJyA9PiAnIG1haWxlciBpcyBub3Qgc3VwcG9ydGVkLicsCiAgICAgICAgICAgICdwcm92aWRlX2FkZHJlc3MnID0+ICdZb3UgbXVzdCBwcm92aWRlIGF0IGxlYXN0IG9uZSByZWNpcGllbnQgZW1haWwgYWRkcmVzcy4nLAogICAgICAgICAgICAncmVjaXBpZW50c19mYWlsZWQnID0+ICdTTVRQIEVycm9yOiBUaGUgZm9sbG93aW5nIHJlY2lwaWVudHMgZmFpbGVkOiAnLAogICAgICAgICAgICAnc2lnbmluZycgPT4gJ1NpZ25pbmcgRXJyb3I6ICcsCiAgICAgICAgICAgICdzbXRwX2Nvbm5lY3RfZmFpbGVkJyA9PiAnU01UUCBjb25uZWN0KCkgZmFpbGVkLicsCiAgICAgICAgICAgICdzbXRwX2Vycm9yJyA9PiAnU01UUCBzZXJ2ZXIgZXJyb3I6ICcsCiAgICAgICAgICAgICd2YXJpYWJsZV9zZXQnID0+ICdDYW5ub3Qgc2V0IG9yIHJlc2V0IHZhcmlhYmxlOiAnLAogICAgICAgICAgICAnZXh0ZW5zaW9uX21pc3NpbmcnID0+ICdFeHRlbnNpb24gbWlzc2luZzogJywKICAgICAgICBdOwogICAgICAgIGlmIChlbXB0eSgkbGFuZ19wYXRoKSkgewogICAgICAgICAgICAvLyBDYWxjdWxhdGUgYW4gYWJzb2x1dGUgcGF0aCBzbyBpdCBjYW4gd29yayBpZiBDV0QgaXMgbm90IGhlcmUKICAgICAgICAgICAgJGxhbmdfcGF0aCA9IGRpcm5hbWUoX19ESVJfXykgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ2xhbmd1YWdlJyAuIERJUkVDVE9SWV9TRVBBUkFUT1I7CiAgICAgICAgfQogICAgICAgIC8vVmFsaWRhdGUgJGxhbmdjb2RlCiAgICAgICAgaWYgKCFwcmVnX21hdGNoKCcvXlthLXpdezJ9KD86X1thLXpBLVpdezJ9KT8kLycsICRsYW5nY29kZSkpIHsKICAgICAgICAgICAgJGxhbmdjb2RlID0gJ2VuJzsKICAgICAgICB9CiAgICAgICAgJGZvdW5kbGFuZyA9IHRydWU7CiAgICAgICAgJGxhbmdfZmlsZSA9ICRsYW5nX3BhdGggLiAncGhwbWFpbGVyLmxhbmctJyAuICRsYW5nY29kZSAuICcucGhwJzsKICAgICAgICAvLyBUaGVyZSBpcyBubyBFbmdsaXNoIHRyYW5zbGF0aW9uIGZpbGUKICAgICAgICBpZiAoJ2VuJyAhPSAkbGFuZ2NvZGUpIHsKICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGxhbmd1YWdlIGZpbGUgcGF0aCBpcyByZWFkYWJsZQogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRsYW5nX2ZpbGUpKSB7CiAgICAgICAgICAgICAgICAkZm91bmRsYW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBPdmVyd3JpdGUgbGFuZ3VhZ2Utc3BlY2lmaWMgc3RyaW5ncy4KICAgICAgICAgICAgICAgIC8vIFRoaXMgd2F5IHdlJ2xsIG5ldmVyIGhhdmUgbWlzc2luZyB0cmFuc2xhdGlvbiBrZXlzLgogICAgICAgICAgICAgICAgJGZvdW5kbGFuZyA9IGluY2x1ZGUgJGxhbmdfZmlsZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkdGhpcy0+bGFuZ3VhZ2UgPSAkUEhQTUFJTEVSX0xBTkc7CgogICAgICAgIHJldHVybiAoYm9vbCkgJGZvdW5kbGFuZzsgLy8gUmV0dXJucyBmYWxzZSBpZiBsYW5ndWFnZSBub3QgZm91bmQKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgYXJyYXkgb2Ygc3RyaW5ncyBmb3IgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UuCiAgICAgKgogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb25zKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmxhbmd1YWdlOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIHJlY2lwaWVudCBoZWFkZXJzLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUKICAgICAqIEBwYXJhbSBhcnJheSAgJGFkZHIgQW4gYXJyYXkgb2YgcmVjaXBpZW50cywKICAgICAqICAgICAgICAgICAgICAgICAgICAgd2hlcmUgZWFjaCByZWNpcGllbnQgaXMgYSAyLWVsZW1lbnQgaW5kZXhlZCBhcnJheSB3aXRoIGVsZW1lbnQgMCBjb250YWluaW5nIGFuIGFkZHJlc3MKICAgICAqICAgICAgICAgICAgICAgICAgICAgYW5kIGVsZW1lbnQgMSBjb250YWluaW5nIGEgbmFtZSwgbGlrZToKICAgICAqICAgICAgICAgICAgICAgICAgICAgW1snam9lQGV4YW1wbGUuY29tJywgJ0pvZSBVc2VyJ10sIFsnem9lQGV4YW1wbGUuY29tJywgJ1pvZSBVc2VyJ11dCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFkZHJBcHBlbmQoJHR5cGUsICRhZGRyKQogICAgewogICAgICAgICRhZGRyZXNzZXMgPSBbXTsKICAgICAgICBmb3JlYWNoICgkYWRkciBhcyAkYWRkcmVzcykgewogICAgICAgICAgICAkYWRkcmVzc2VzW10gPSAkdGhpcy0+YWRkckZvcm1hdCgkYWRkcmVzcyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHR5cGUgLiAnOiAnIC4gaW1wbG9kZSgnLCAnLCAkYWRkcmVzc2VzKSAuIHN0YXRpYzo6JExFOwogICAgfQoKICAgIC8qKgogICAgICogRm9ybWF0IGFuIGFkZHJlc3MgZm9yIHVzZSBpbiBhIG1lc3NhZ2UgaGVhZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBhcnJheSAkYWRkciBBIDItZWxlbWVudCBpbmRleGVkIGFycmF5LCBlbGVtZW50IDAgY29udGFpbmluZyBhbiBhZGRyZXNzLCBlbGVtZW50IDEgY29udGFpbmluZyBhIG5hbWUgbGlrZQogICAgICogICAgICAgICAgICAgICAgICAgIFsnam9lQGV4YW1wbGUuY29tJywgJ0pvZSBVc2VyJ10KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYWRkckZvcm1hdCgkYWRkcikKICAgIHsKICAgICAgICBpZiAoZW1wdHkoJGFkZHJbMV0pKSB7IC8vIE5vIG5hbWUgcHJvdmlkZWQKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5zZWN1cmVIZWFkZXIoJGFkZHJbMF0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5lbmNvZGVIZWFkZXIoJHRoaXMtPnNlY3VyZUhlYWRlcigkYWRkclsxXSksICdwaHJhc2UnKSAuICcgPCcgLiAkdGhpcy0+c2VjdXJlSGVhZGVyKAogICAgICAgICAgICAgICAgJGFkZHJbMF0KICAgICAgICAgICAgKSAuICc+JzsKICAgIH0KCiAgICAvKioKICAgICAqIFdvcmQtd3JhcCBtZXNzYWdlLgogICAgICogRm9yIHVzZSB3aXRoIG1haWxlcnMgdGhhdCBkbyBub3QgYXV0b21hdGljYWxseSBwZXJmb3JtIHdyYXBwaW5nCiAgICAgKiBhbmQgZm9yIHF1b3RlZC1wcmludGFibGUgZW5jb2RlZCBtZXNzYWdlcy4KICAgICAqIE9yaWdpbmFsIHdyaXR0ZW4gYnkgcGhpbGlwcGUuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbWVzc2FnZSBUaGUgbWVzc2FnZSB0byB3cmFwCiAgICAgKiBAcGFyYW0gaW50ICAgICRsZW5ndGggIFRoZSBsaW5lIGxlbmd0aCB0byB3cmFwIHRvCiAgICAgKiBAcGFyYW0gYm9vbCAgICRxcF9tb2RlIFdoZXRoZXIgdG8gcnVuIGluIFF1b3RlZC1QcmludGFibGUgbW9kZQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB3cmFwVGV4dCgkbWVzc2FnZSwgJGxlbmd0aCwgJHFwX21vZGUgPSBmYWxzZSkKICAgIHsKICAgICAgICBpZiAoJHFwX21vZGUpIHsKICAgICAgICAgICAgJHNvZnRfYnJlYWsgPSBzcHJpbnRmKCcgPSVzJywgc3RhdGljOjokTEUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRzb2Z0X2JyZWFrID0gc3RhdGljOjokTEU7CiAgICAgICAgfQogICAgICAgIC8vIElmIHV0Zi04IGVuY29kaW5nIGlzIHVzZWQsIHdlIHdpbGwgbmVlZCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QKICAgICAgICAvLyBzcGxpdCBtdWx0aWJ5dGUgY2hhcmFjdGVycyB3aGVuIHdlIHdyYXAKICAgICAgICAkaXNfdXRmOCA9ICd1dGYtOCcgPT0gc3RydG9sb3dlcigkdGhpcy0+Q2hhclNldCk7CiAgICAgICAgJGxlbGVuID0gc3RybGVuKHN0YXRpYzo6JExFKTsKICAgICAgICAkY3JsZmxlbiA9IHN0cmxlbihzdGF0aWM6OiRMRSk7CgogICAgICAgICRtZXNzYWdlID0gc3RhdGljOjpub3JtYWxpemVCcmVha3MoJG1lc3NhZ2UpOwogICAgICAgIC8vUmVtb3ZlIGEgdHJhaWxpbmcgbGluZSBicmVhawogICAgICAgIGlmIChzdWJzdHIoJG1lc3NhZ2UsIC0kbGVsZW4pID09IHN0YXRpYzo6JExFKSB7CiAgICAgICAgICAgICRtZXNzYWdlID0gc3Vic3RyKCRtZXNzYWdlLCAwLCAtJGxlbGVuKTsKICAgICAgICB9CgogICAgICAgIC8vU3BsaXQgbWVzc2FnZSBpbnRvIGxpbmVzCiAgICAgICAgJGxpbmVzID0gZXhwbG9kZShzdGF0aWM6OiRMRSwgJG1lc3NhZ2UpOwogICAgICAgIC8vTWVzc2FnZSB3aWxsIGJlIHJlYnVpbHQgaW4gaGVyZQogICAgICAgICRtZXNzYWdlID0gJyc7CiAgICAgICAgZm9yZWFjaCAoJGxpbmVzIGFzICRsaW5lKSB7CiAgICAgICAgICAgICR3b3JkcyA9IGV4cGxvZGUoJyAnLCAkbGluZSk7CiAgICAgICAgICAgICRidWYgPSAnJzsKICAgICAgICAgICAgJGZpcnN0d29yZCA9IHRydWU7CiAgICAgICAgICAgIGZvcmVhY2ggKCR3b3JkcyBhcyAkd29yZCkgewogICAgICAgICAgICAgICAgaWYgKCRxcF9tb2RlIGFuZCAoc3RybGVuKCR3b3JkKSA+ICRsZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgJHNwYWNlX2xlZnQgPSAkbGVuZ3RoIC0gc3RybGVuKCRidWYpIC0gJGNybGZsZW47CiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZmlyc3R3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc3BhY2VfbGVmdCA+IDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGVuID0gJHNwYWNlX2xlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGlzX3V0ZjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGVuID0gJHRoaXMtPnV0ZjhDaGFyQm91bmRhcnkoJHdvcmQsICRsZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlaWYgKCc9JyA9PSBzdWJzdHIoJHdvcmQsICRsZW4gLSAxLCAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tJGxlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmICgnPScgPT0gc3Vic3RyKCR3b3JkLCAkbGVuIC0gMiwgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGVuIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFydCA9IHN1YnN0cigkd29yZCwgMCwgJGxlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd29yZCA9IHN1YnN0cigkd29yZCwgJGxlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnVmIC49ICcgJyAuICRwYXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2UgLj0gJGJ1ZiAuIHNwcmludGYoJz0lcycsIHN0YXRpYzo6JExFKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWYgLiAkc29mdF9icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAkYnVmID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHdoaWxlIChzdHJsZW4oJHdvcmQpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGxlbmd0aCA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAkbGVuID0gJGxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpc191dGY4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGVuID0gJHRoaXMtPnV0ZjhDaGFyQm91bmRhcnkoJHdvcmQsICRsZW4pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJz0nID09IHN1YnN0cigkd29yZCwgJGxlbiAtIDEsIDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSRsZW47CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmICgnPScgPT0gc3Vic3RyKCR3b3JkLCAkbGVuIC0gMiwgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsZW4gLT0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAkcGFydCA9IHN1YnN0cigkd29yZCwgMCwgJGxlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICR3b3JkID0gc3Vic3RyKCR3b3JkLCAkbGVuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJHdvcmQpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2UgLj0gJHBhcnQgLiBzcHJpbnRmKCc9JXMnLCBzdGF0aWM6OiRMRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnVmID0gJHBhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRidWZfbyA9ICRidWY7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZmlyc3R3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRidWYgLj0gJyAnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkYnVmIC49ICR3b3JkOwoKICAgICAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCRidWYpID4gJGxlbmd0aCBhbmQgJycgIT0gJGJ1Zl9vKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWZfbyAuICRzb2Z0X2JyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAkYnVmID0gJHdvcmQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGZpcnN0d29yZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWYgLiBzdGF0aWM6OiRMRTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkbWVzc2FnZTsKICAgIH0KCiAgICAvKioKICAgICAqIEZpbmQgdGhlIGxhc3QgY2hhcmFjdGVyIGJvdW5kYXJ5IHByaW9yIHRvICRtYXhMZW5ndGggaW4gYSB1dGYtOAogICAgICogcXVvdGVkLXByaW50YWJsZSBlbmNvZGVkIHN0cmluZy4KICAgICAqIE9yaWdpbmFsIHdyaXR0ZW4gYnkgQ29saW4gQnJvd24uCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkZW5jb2RlZFRleHQgdXRmLTggUVAgdGV4dAogICAgICogQHBhcmFtIGludCAgICAkbWF4TGVuZ3RoICAgRmluZCB0aGUgbGFzdCBjaGFyYWN0ZXIgYm91bmRhcnkgcHJpb3IgdG8gdGhpcyBsZW5ndGgKICAgICAqCiAgICAgKiBAcmV0dXJuIGludAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXRmOENoYXJCb3VuZGFyeSgkZW5jb2RlZFRleHQsICRtYXhMZW5ndGgpCiAgICB7CiAgICAgICAgJGZvdW5kU3BsaXRQb3MgPSBmYWxzZTsKICAgICAgICAkbG9va0JhY2sgPSAzOwogICAgICAgIHdoaWxlICghJGZvdW5kU3BsaXRQb3MpIHsKICAgICAgICAgICAgJGxhc3RDaHVuayA9IHN1YnN0cigkZW5jb2RlZFRleHQsICRtYXhMZW5ndGggLSAkbG9va0JhY2ssICRsb29rQmFjayk7CiAgICAgICAgICAgICRlbmNvZGVkQ2hhclBvcyA9IHN0cnBvcygkbGFzdENodW5rLCAnPScpOwogICAgICAgICAgICBpZiAoZmFsc2UgIT09ICRlbmNvZGVkQ2hhclBvcykgewogICAgICAgICAgICAgICAgLy8gRm91bmQgc3RhcnQgb2YgZW5jb2RlZCBjaGFyYWN0ZXIgYnl0ZSB3aXRoaW4gJGxvb2tCYWNrIGJsb2NrLgogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGVuY29kZWQgYnl0ZSB2YWx1ZSAodGhlIDIgY2hhcnMgYWZ0ZXIgdGhlICc9JykKICAgICAgICAgICAgICAgICRoZXggPSBzdWJzdHIoJGVuY29kZWRUZXh0LCAkbWF4TGVuZ3RoIC0gJGxvb2tCYWNrICsgJGVuY29kZWRDaGFyUG9zICsgMSwgMik7CiAgICAgICAgICAgICAgICAkZGVjID0gaGV4ZGVjKCRoZXgpOwogICAgICAgICAgICAgICAgaWYgKCRkZWMgPCAxMjgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBTaW5nbGUgYnl0ZSBjaGFyYWN0ZXIuCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVuY29kZWQgY2hhciB3YXMgZm91bmQgYXQgcG9zIDAsIGl0IHdpbGwgZml0CiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHJlZHVjZSBtYXhMZW5ndGggdG8gc3RhcnQgb2YgdGhlIGVuY29kZWQgY2hhcgogICAgICAgICAgICAgICAgICAgIGlmICgkZW5jb2RlZENoYXJQb3MgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRtYXhMZW5ndGggLT0gJGxvb2tCYWNrIC0gJGVuY29kZWRDaGFyUG9zOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkZm91bmRTcGxpdFBvcyA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGRlYyA+PSAxOTIpIHsKICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBieXRlIG9mIGEgbXVsdGkgYnl0ZSBjaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAvLyBSZWR1Y2UgbWF4TGVuZ3RoIHRvIHNwbGl0IGF0IHN0YXJ0IG9mIGNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICRtYXhMZW5ndGggLT0gJGxvb2tCYWNrIC0gJGVuY29kZWRDaGFyUG9zOwogICAgICAgICAgICAgICAgICAgICRmb3VuZFNwbGl0UG9zID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkZGVjIDwgMTkyKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTWlkZGxlIGJ5dGUgb2YgYSBtdWx0aSBieXRlIGNoYXJhY3RlciwgbG9vayBmdXJ0aGVyIGJhY2sKICAgICAgICAgICAgICAgICAgICAkbG9va0JhY2sgKz0gMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIE5vIGVuY29kZWQgY2hhcmFjdGVyIGZvdW5kCiAgICAgICAgICAgICAgICAkZm91bmRTcGxpdFBvcyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkbWF4TGVuZ3RoOwogICAgfQoKICAgIC8qKgogICAgICogQXBwbHkgd29yZCB3cmFwcGluZyB0byB0aGUgbWVzc2FnZSBib2R5LgogICAgICogV3JhcHMgdGhlIG1lc3NhZ2UgYm9keSB0byB0aGUgbnVtYmVyIG9mIGNoYXJzIHNldCBpbiB0aGUgV29yZFdyYXAgcHJvcGVydHkuCiAgICAgKiBZb3Ugc2hvdWxkIG9ubHkgZG8gdGhpcyB0byBwbGFpbi10ZXh0IGJvZGllcyBhcyB3cmFwcGluZyBIVE1MIHRhZ3MgbWF5IGJyZWFrIHRoZW0uCiAgICAgKiBUaGlzIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IGNyZWF0ZUJvZHkoKSwgc28geW91IGRvbid0IG5lZWQgdG8gY2FsbCBpdCB5b3Vyc2VsZi4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldFdvcmRXcmFwKCkKICAgIHsKICAgICAgICBpZiAoJHRoaXMtPldvcmRXcmFwIDwgMSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKCR0aGlzLT5tZXNzYWdlX3R5cGUpIHsKICAgICAgICAgICAgY2FzZSAnYWx0JzoKICAgICAgICAgICAgY2FzZSAnYWx0X2lubGluZSc6CiAgICAgICAgICAgIGNhc2UgJ2FsdF9hdHRhY2gnOgogICAgICAgICAgICBjYXNlICdhbHRfaW5saW5lX2F0dGFjaCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+QWx0Qm9keSA9ICR0aGlzLT53cmFwVGV4dCgkdGhpcy0+QWx0Qm9keSwgJHRoaXMtPldvcmRXcmFwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgJHRoaXMtPkJvZHkgPSAkdGhpcy0+d3JhcFRleHQoJHRoaXMtPkJvZHksICR0aGlzLT5Xb3JkV3JhcCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3NlbWJsZSBtZXNzYWdlIGhlYWRlcnMuCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcgVGhlIGFzc2VtYmxlZCBoZWFkZXJzCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGVIZWFkZXIoKQogICAgewogICAgICAgICRyZXN1bHQgPSAnJzsKCiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnRGF0ZScsICcnID09ICR0aGlzLT5NZXNzYWdlRGF0ZSA/IHNlbGY6OnJmY0RhdGUoKSA6ICR0aGlzLT5NZXNzYWdlRGF0ZSk7CgogICAgICAgIC8vIFRvIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBieSBtYWlsKCkKICAgICAgICBpZiAoJHRoaXMtPlNpbmdsZVRvKSB7CiAgICAgICAgICAgIGlmICgnbWFpbCcgIT0gJHRoaXMtPk1haWxlcikgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJHRoaXMtPnRvIGFzICR0b2FkZHIpIHsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+U2luZ2xlVG9BcnJheVtdID0gJHRoaXMtPmFkZHJGb3JtYXQoJHRvYWRkcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoY291bnQoJHRoaXMtPnRvKSA+IDApIHsKICAgICAgICAgICAgICAgIGlmICgnbWFpbCcgIT0gJHRoaXMtPk1haWxlcikgewogICAgICAgICAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmFkZHJBcHBlbmQoJ1RvJywgJHRoaXMtPnRvKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlaWYgKGNvdW50KCR0aGlzLT5jYykgPT0gMCkgewogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnVG8nLCAndW5kaXNjbG9zZWQtcmVjaXBpZW50czo7Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmFkZHJBcHBlbmQoJ0Zyb20nLCBbW3RyaW0oJHRoaXMtPkZyb20pLCAkdGhpcy0+RnJvbU5hbWVdXSk7CgogICAgICAgIC8vIHNlbmRtYWlsIGFuZCBtYWlsKCkgZXh0cmFjdCBDYyBmcm9tIHRoZSBoZWFkZXIgYmVmb3JlIHNlbmRpbmcKICAgICAgICBpZiAoY291bnQoJHRoaXMtPmNjKSA+IDApIHsKICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+YWRkckFwcGVuZCgnQ2MnLCAkdGhpcy0+Y2MpOwogICAgICAgIH0KCiAgICAgICAgLy8gc2VuZG1haWwgYW5kIG1haWwoKSBleHRyYWN0IEJjYyBmcm9tIHRoZSBoZWFkZXIgYmVmb3JlIHNlbmRpbmcKICAgICAgICBpZiAoKAogICAgICAgICAgICAgICAgJ3NlbmRtYWlsJyA9PSAkdGhpcy0+TWFpbGVyIG9yICdxbWFpbCcgPT0gJHRoaXMtPk1haWxlciBvciAnbWFpbCcgPT0gJHRoaXMtPk1haWxlcgogICAgICAgICAgICApCiAgICAgICAgICAgIGFuZCBjb3VudCgkdGhpcy0+YmNjKSA+IDAKICAgICAgICApIHsKICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+YWRkckFwcGVuZCgnQmNjJywgJHRoaXMtPmJjYyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY291bnQoJHRoaXMtPlJlcGx5VG8pID4gMCkgewogICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5hZGRyQXBwZW5kKCdSZXBseS1UbycsICR0aGlzLT5SZXBseVRvKTsKICAgICAgICB9CgogICAgICAgIC8vIG1haWwoKSBzZXRzIHRoZSBzdWJqZWN0IGl0c2VsZgogICAgICAgIGlmICgnbWFpbCcgIT0gJHRoaXMtPk1haWxlcikgewogICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5oZWFkZXJMaW5lKCdTdWJqZWN0JywgJHRoaXMtPmVuY29kZUhlYWRlcigkdGhpcy0+c2VjdXJlSGVhZGVyKCR0aGlzLT5TdWJqZWN0KSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gT25seSBhbGxvdyBhIGN1c3RvbSBtZXNzYWdlIElEIGlmIGl0IGNvbmZvcm1zIHRvIFJGQyA1MzIyIHNlY3Rpb24gMy42LjQKICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTMyMiNzZWN0aW9uLTMuNi40CiAgICAgICAgaWYgKCcnICE9ICR0aGlzLT5NZXNzYWdlSUQgYW5kIHByZWdfbWF0Y2goJy9ePC4qQC4qPiQvJywgJHRoaXMtPk1lc3NhZ2VJRCkpIHsKICAgICAgICAgICAgJHRoaXMtPmxhc3RNZXNzYWdlSUQgPSAkdGhpcy0+TWVzc2FnZUlEOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0aGlzLT5sYXN0TWVzc2FnZUlEID0gc3ByaW50ZignPCVzQCVzPicsICR0aGlzLT51bmlxdWVpZCwgJHRoaXMtPnNlcnZlckhvc3RuYW1lKCkpOwogICAgICAgIH0KICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5oZWFkZXJMaW5lKCdNZXNzYWdlLUlEJywgJHRoaXMtPmxhc3RNZXNzYWdlSUQpOwogICAgICAgIGlmIChudWxsICE9PSAkdGhpcy0+UHJpb3JpdHkpIHsKICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnWC1Qcmlvcml0eScsICR0aGlzLT5Qcmlvcml0eSk7CiAgICAgICAgfQogICAgICAgIGlmICgnJyA9PSAkdGhpcy0+WE1haWxlcikgewogICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5oZWFkZXJMaW5lKAogICAgICAgICAgICAgICAgJ1gtTWFpbGVyJywKICAgICAgICAgICAgICAgICdQSFBNYWlsZXIgJyAuIHNlbGY6OlZFUlNJT04gLiAnIChodHRwczovL2dpdGh1Yi5jb20vUEhQTWFpbGVyL1BIUE1haWxlciknCiAgICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG15WG1haWxlciA9IHRyaW0oJHRoaXMtPlhNYWlsZXIpOwogICAgICAgICAgICBpZiAoJG15WG1haWxlcikgewogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnWC1NYWlsZXInLCAkbXlYbWFpbGVyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCcnICE9ICR0aGlzLT5Db25maXJtUmVhZGluZ1RvKSB7CiAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmhlYWRlckxpbmUoJ0Rpc3Bvc2l0aW9uLU5vdGlmaWNhdGlvbi1UbycsICc8JyAuICR0aGlzLT5Db25maXJtUmVhZGluZ1RvIC4gJz4nKTsKICAgICAgICB9CgogICAgICAgIC8vIEFkZCBjdXN0b20gaGVhZGVycwogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5DdXN0b21IZWFkZXIgYXMgJGhlYWRlcikgewogICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5oZWFkZXJMaW5lKAogICAgICAgICAgICAgICAgdHJpbSgkaGVhZGVyWzBdKSwKICAgICAgICAgICAgICAgICR0aGlzLT5lbmNvZGVIZWFkZXIodHJpbSgkaGVhZGVyWzFdKSkKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgaWYgKCEkdGhpcy0+c2lnbl9rZXlfZmlsZSkgewogICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5oZWFkZXJMaW5lKCdNSU1FLVZlcnNpb24nLCAnMS4wJyk7CiAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmdldE1haWxNSU1FKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWVzc2FnZSBNSU1FIHR5cGUgaGVhZGVycy4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TWFpbE1JTUUoKQogICAgewogICAgICAgICRyZXN1bHQgPSAnJzsKICAgICAgICAkaXNtdWx0aXBhcnQgPSB0cnVlOwogICAgICAgIHN3aXRjaCAoJHRoaXMtPm1lc3NhZ2VfdHlwZSkgewogICAgICAgICAgICBjYXNlICdpbmxpbmUnOgogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UeXBlJywgc3RhdGljOjpDT05URU5UX1RZUEVfTVVMVElQQVJUX1JFTEFURUQgLiAnOycpOwogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+dGV4dExpbmUoIlx0Ym91bmRhcnk9XCIiIC4gJHRoaXMtPmJvdW5kYXJ5WzFdIC4gJyInKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhdHRhY2gnOgogICAgICAgICAgICBjYXNlICdpbmxpbmVfYXR0YWNoJzoKICAgICAgICAgICAgY2FzZSAnYWx0X2F0dGFjaCc6CiAgICAgICAgICAgIGNhc2UgJ2FsdF9pbmxpbmVfYXR0YWNoJzoKICAgICAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmhlYWRlckxpbmUoJ0NvbnRlbnQtVHlwZScsIHN0YXRpYzo6Q09OVEVOVF9UWVBFX01VTFRJUEFSVF9NSVhFRCAuICc7Jyk7CiAgICAgICAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT50ZXh0TGluZSgiXHRib3VuZGFyeT1cIiIgLiAkdGhpcy0+Ym91bmRhcnlbMV0gLiAnIicpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2FsdCc6CiAgICAgICAgICAgIGNhc2UgJ2FsdF9pbmxpbmUnOgogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UeXBlJywgc3RhdGljOjpDT05URU5UX1RZUEVfTVVMVElQQVJUX0FMVEVSTkFUSVZFIC4gJzsnKTsKICAgICAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPnRleHRMaW5lKCJcdGJvdW5kYXJ5PVwiIiAuICR0aGlzLT5ib3VuZGFyeVsxXSAuICciJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIC8vIENhdGNoZXMgY2FzZSAncGxhaW4nOiBhbmQgY2FzZSAnJzoKICAgICAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPnRleHRMaW5lKCdDb250ZW50LVR5cGU6ICcgLiAkdGhpcy0+Q29udGVudFR5cGUgLiAnOyBjaGFyc2V0PScgLiAkdGhpcy0+Q2hhclNldCk7CiAgICAgICAgICAgICAgICAkaXNtdWx0aXBhcnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLyBSRkMxMzQxIHBhcnQgNSBzYXlzIDdiaXQgaXMgYXNzdW1lZCBpZiBub3Qgc3BlY2lmaWVkCiAgICAgICAgaWYgKHN0YXRpYzo6RU5DT0RJTkdfN0JJVCAhPSAkdGhpcy0+RW5jb2RpbmcpIHsKICAgICAgICAgICAgLy8gUkZDIDIwNDUgc2VjdGlvbiA2LjQgc2F5cyBtdWx0aXBhcnQgTUlNRSBwYXJ0cyBtYXkgb25seSB1c2UgN2JpdCwgOGJpdCBvciBiaW5hcnkgQ1RFCiAgICAgICAgICAgIGlmICgkaXNtdWx0aXBhcnQpIHsKICAgICAgICAgICAgICAgIGlmIChzdGF0aWM6OkVOQ09ESU5HXzhCSVQgPT0gJHRoaXMtPkVuY29kaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZycsIHN0YXRpYzo6RU5DT0RJTkdfOEJJVCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBUaGUgb25seSByZW1haW5pbmcgYWx0ZXJuYXRpdmVzIGFyZSBxdW90ZWQtcHJpbnRhYmxlIGFuZCBiYXNlNjQsIHdoaWNoIGFyZSBib3RoIDdiaXQgY29tcGF0aWJsZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZycsICR0aGlzLT5FbmNvZGluZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgnbWFpbCcgIT0gJHRoaXMtPk1haWxlcikgewogICAgICAgICAgICAkcmVzdWx0IC49IHN0YXRpYzo6JExFOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRyZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB3aG9sZSBNSU1FIG1lc3NhZ2UuCiAgICAgKiBJbmNsdWRlcyBjb21wbGV0ZSBoZWFkZXJzIGFuZCBib2R5LgogICAgICogT25seSB2YWxpZCBwb3N0IHByZVNlbmQoKS4KICAgICAqCiAgICAgKiBAc2VlIFBIUE1haWxlcjo6cHJlU2VuZCgpCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFNlbnRNSU1FTWVzc2FnZSgpCiAgICB7CiAgICAgICAgcmV0dXJuIHJ0cmltKCR0aGlzLT5NSU1FSGVhZGVyIC4gJHRoaXMtPm1haWxIZWFkZXIsICJcblxyIikgLiBzdGF0aWM6OiRMRSAuIHN0YXRpYzo6JExFIC4gJHRoaXMtPk1JTUVCb2R5OwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgdW5pcXVlIElEIHRvIHVzZSBmb3IgYm91bmRhcmllcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2VuZXJhdGVJZCgpCiAgICB7CiAgICAgICAgJGxlbiA9IDMyOyAvLzMyIGJ5dGVzID0gMjU2IGJpdHMKICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdyYW5kb21fYnl0ZXMnKSkgewogICAgICAgICAgICAkYnl0ZXMgPSByYW5kb21fYnl0ZXMoJGxlbik7CiAgICAgICAgfSBlbHNlaWYgKGZ1bmN0aW9uX2V4aXN0cygnb3BlbnNzbF9yYW5kb21fcHNldWRvX2J5dGVzJykpIHsKICAgICAgICAgICAgJGJ5dGVzID0gb3BlbnNzbF9yYW5kb21fcHNldWRvX2J5dGVzKCRsZW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vVXNlIGEgaGFzaCB0byBmb3JjZSB0aGUgbGVuZ3RoIHRvIHRoZSBzYW1lIGFzIHRoZSBvdGhlciBtZXRob2RzCiAgICAgICAgICAgICRieXRlcyA9IGhhc2goJ3NoYTI1NicsIHVuaXFpZCgoc3RyaW5nKSBtdF9yYW5kKCksIHRydWUpLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIC8vV2UgZG9uJ3QgY2FyZSBhYm91dCBtZXNzaW5nIHVwIGJhc2U2NCBmb3JtYXQgaGVyZSwganVzdCB3YW50IGEgcmFuZG9tIHN0cmluZwogICAgICAgIHJldHVybiBzdHJfcmVwbGFjZShbJz0nLCAnKycsICcvJ10sICcnLCBiYXNlNjRfZW5jb2RlKGhhc2goJ3NoYTI1NicsICRieXRlcywgdHJ1ZSkpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VtYmxlIHRoZSBtZXNzYWdlIGJvZHkuCiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlLgogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcgVGhlIGFzc2VtYmxlZCBtZXNzYWdlIGJvZHkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZUJvZHkoKQogICAgewogICAgICAgICRib2R5ID0gJyc7CiAgICAgICAgLy9DcmVhdGUgdW5pcXVlIElEcyBhbmQgcHJlc2V0IGJvdW5kYXJpZXMKICAgICAgICAkdGhpcy0+dW5pcXVlaWQgPSAkdGhpcy0+Z2VuZXJhdGVJZCgpOwogICAgICAgICR0aGlzLT5ib3VuZGFyeVsxXSA9ICdiMV8nIC4gJHRoaXMtPnVuaXF1ZWlkOwogICAgICAgICR0aGlzLT5ib3VuZGFyeVsyXSA9ICdiMl8nIC4gJHRoaXMtPnVuaXF1ZWlkOwogICAgICAgICR0aGlzLT5ib3VuZGFyeVszXSA9ICdiM18nIC4gJHRoaXMtPnVuaXF1ZWlkOwoKICAgICAgICBpZiAoJHRoaXMtPnNpZ25fa2V5X2ZpbGUpIHsKICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmdldE1haWxNSU1FKCkgLiBzdGF0aWM6OiRMRTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5zZXRXb3JkV3JhcCgpOwoKICAgICAgICAkYm9keUVuY29kaW5nID0gJHRoaXMtPkVuY29kaW5nOwogICAgICAgICRib2R5Q2hhclNldCA9ICR0aGlzLT5DaGFyU2V0OwogICAgICAgIC8vQ2FuIHdlIGRvIGEgNy1iaXQgZG93bmdyYWRlPwogICAgICAgIGlmIChzdGF0aWM6OkVOQ09ESU5HXzhCSVQgPT0gJGJvZHlFbmNvZGluZyBhbmQgISR0aGlzLT5oYXM4Yml0Q2hhcnMoJHRoaXMtPkJvZHkpKSB7CiAgICAgICAgICAgICRib2R5RW5jb2RpbmcgPSBzdGF0aWM6OkVOQ09ESU5HXzdCSVQ7CiAgICAgICAgICAgIC8vQWxsIElTTyA4ODU5LCBXaW5kb3dzIGNvZGVwYWdlIGFuZCBVVEYtOCBjaGFyc2V0cyBhcmUgYXNjaWkgY29tcGF0aWJsZSB1cCB0byA3LWJpdAogICAgICAgICAgICAkYm9keUNoYXJTZXQgPSAndXMtYXNjaWknOwogICAgICAgIH0KICAgICAgICAvL0lmIGxpbmVzIGFyZSB0b28gbG9uZywgYW5kIHdlJ3JlIG5vdCBhbHJlYWR5IHVzaW5nIGFuIGVuY29kaW5nIHRoYXQgd2lsbCBzaG9ydGVuIHRoZW0sCiAgICAgICAgLy9jaGFuZ2UgdG8gcXVvdGVkLXByaW50YWJsZSB0cmFuc2ZlciBlbmNvZGluZyBmb3IgdGhlIGJvZHkgcGFydCBvbmx5CiAgICAgICAgaWYgKHN0YXRpYzo6RU5DT0RJTkdfQkFTRTY0ICE9ICR0aGlzLT5FbmNvZGluZyBhbmQgc3RhdGljOjpoYXNMaW5lTG9uZ2VyVGhhbk1heCgkdGhpcy0+Qm9keSkpIHsKICAgICAgICAgICAgJGJvZHlFbmNvZGluZyA9IHN0YXRpYzo6RU5DT0RJTkdfUVVPVEVEX1BSSU5UQUJMRTsKICAgICAgICB9CgogICAgICAgICRhbHRCb2R5RW5jb2RpbmcgPSAkdGhpcy0+RW5jb2Rpbmc7CiAgICAgICAgJGFsdEJvZHlDaGFyU2V0ID0gJHRoaXMtPkNoYXJTZXQ7CiAgICAgICAgLy9DYW4gd2UgZG8gYSA3LWJpdCBkb3duZ3JhZGU/CiAgICAgICAgaWYgKHN0YXRpYzo6RU5DT0RJTkdfOEJJVCA9PSAkYWx0Qm9keUVuY29kaW5nIGFuZCAhJHRoaXMtPmhhczhiaXRDaGFycygkdGhpcy0+QWx0Qm9keSkpIHsKICAgICAgICAgICAgJGFsdEJvZHlFbmNvZGluZyA9IHN0YXRpYzo6RU5DT0RJTkdfN0JJVDsKICAgICAgICAgICAgLy9BbGwgSVNPIDg4NTksIFdpbmRvd3MgY29kZXBhZ2UgYW5kIFVURi04IGNoYXJzZXRzIGFyZSBhc2NpaSBjb21wYXRpYmxlIHVwIHRvIDctYml0CiAgICAgICAgICAgICRhbHRCb2R5Q2hhclNldCA9ICd1cy1hc2NpaSc7CiAgICAgICAgfQogICAgICAgIC8vSWYgbGluZXMgYXJlIHRvbyBsb25nLCBhbmQgd2UncmUgbm90IGFscmVhZHkgdXNpbmcgYW4gZW5jb2RpbmcgdGhhdCB3aWxsIHNob3J0ZW4gdGhlbSwKICAgICAgICAvL2NoYW5nZSB0byBxdW90ZWQtcHJpbnRhYmxlIHRyYW5zZmVyIGVuY29kaW5nIGZvciB0aGUgYWx0IGJvZHkgcGFydCBvbmx5CiAgICAgICAgaWYgKHN0YXRpYzo6RU5DT0RJTkdfQkFTRTY0ICE9ICRhbHRCb2R5RW5jb2RpbmcgYW5kIHN0YXRpYzo6aGFzTGluZUxvbmdlclRoYW5NYXgoJHRoaXMtPkFsdEJvZHkpKSB7CiAgICAgICAgICAgICRhbHRCb2R5RW5jb2RpbmcgPSBzdGF0aWM6OkVOQ09ESU5HX1FVT1RFRF9QUklOVEFCTEU7CiAgICAgICAgfQogICAgICAgIC8vVXNlIHRoaXMgYXMgYSBwcmVhbWJsZSBpbiBhbGwgbXVsdGlwYXJ0IG1lc3NhZ2UgdHlwZXMKICAgICAgICAkbWltZXByZSA9ICdUaGlzIGlzIGEgbXVsdGktcGFydCBtZXNzYWdlIGluIE1JTUUgZm9ybWF0LicgLiBzdGF0aWM6OiRMRTsKICAgICAgICBzd2l0Y2ggKCR0aGlzLT5tZXNzYWdlX3R5cGUpIHsKICAgICAgICAgICAgY2FzZSAnaW5saW5lJzoKICAgICAgICAgICAgICAgICRib2R5IC49ICRtaW1lcHJlOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsxXSwgJGJvZHlDaGFyU2V0LCAnJywgJGJvZHlFbmNvZGluZyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+ZW5jb2RlU3RyaW5nKCR0aGlzLT5Cb2R5LCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49IHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmF0dGFjaEFsbCgnaW5saW5lJywgJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhdHRhY2gnOgogICAgICAgICAgICAgICAgJGJvZHkgLj0gJG1pbWVwcmU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+Z2V0Qm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzFdLCAkYm9keUNoYXJTZXQsICcnLCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkJvZHksICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdhdHRhY2htZW50JywgJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdpbmxpbmVfYXR0YWNoJzoKICAgICAgICAgICAgICAgICRib2R5IC49ICRtaW1lcHJlOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPnRleHRMaW5lKCctLScgLiAkdGhpcy0+Ym91bmRhcnlbMV0pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmhlYWRlckxpbmUoJ0NvbnRlbnQtVHlwZScsIHN0YXRpYzo6Q09OVEVOVF9UWVBFX01VTFRJUEFSVF9SRUxBVEVEIC4gJzsnKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT50ZXh0TGluZSgiXHRib3VuZGFyeT1cIiIgLiAkdGhpcy0+Ym91bmRhcnlbMl0gLiAnIicpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+Z2V0Qm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzJdLCAkYm9keUNoYXJTZXQsICcnLCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkJvZHksICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdpbmxpbmUnLCAkdGhpcy0+Ym91bmRhcnlbMl0pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdhdHRhY2htZW50JywgJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhbHQnOgogICAgICAgICAgICAgICAgJGJvZHkgLj0gJG1pbWVwcmU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+Z2V0Qm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzFdLCAkYWx0Qm9keUNoYXJTZXQsIHN0YXRpYzo6Q09OVEVOVF9UWVBFX1BMQUlOVEVYVCwgJGFsdEJvZHlFbmNvZGluZyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+ZW5jb2RlU3RyaW5nKCR0aGlzLT5BbHRCb2R5LCAkYWx0Qm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49IHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsxXSwgJGJvZHlDaGFyU2V0LCBzdGF0aWM6OkNPTlRFTlRfVFlQRV9URVhUX0hUTUwsICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmVuY29kZVN0cmluZygkdGhpcy0+Qm9keSwgJGJvZHlFbmNvZGluZyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgIGlmICghZW1wdHkoJHRoaXMtPkljYWwpKSB7CiAgICAgICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsxXSwgJycsIHN0YXRpYzo6Q09OVEVOVF9UWVBFX1RFWFRfQ0FMRU5EQVIgLiAnOyBtZXRob2Q9UkVRVUVTVCcsICcnKTsKICAgICAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+ZW5jb2RlU3RyaW5nKCR0aGlzLT5JY2FsLCAkdGhpcy0+RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgICAgICRib2R5IC49IHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmVuZEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsxXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYWx0X2lubGluZSc6CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkbWltZXByZTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMV0sICRhbHRCb2R5Q2hhclNldCwgc3RhdGljOjpDT05URU5UX1RZUEVfUExBSU5URVhULCAkYWx0Qm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkFsdEJvZHksICRhbHRCb2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+dGV4dExpbmUoJy0tJyAuICR0aGlzLT5ib3VuZGFyeVsxXSk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UeXBlJywgc3RhdGljOjpDT05URU5UX1RZUEVfTVVMVElQQVJUX1JFTEFURUQgLiAnOycpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPnRleHRMaW5lKCJcdGJvdW5kYXJ5PVwiIiAuICR0aGlzLT5ib3VuZGFyeVsyXSAuICciJyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0sICRib2R5Q2hhclNldCwgc3RhdGljOjpDT05URU5UX1RZUEVfVEVYVF9IVE1MLCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkJvZHksICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdpbmxpbmUnLCAkdGhpcy0+Ym91bmRhcnlbMl0pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+ZW5kQm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhbHRfYXR0YWNoJzoKICAgICAgICAgICAgICAgICRib2R5IC49ICRtaW1lcHJlOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPnRleHRMaW5lKCctLScgLiAkdGhpcy0+Ym91bmRhcnlbMV0pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmhlYWRlckxpbmUoJ0NvbnRlbnQtVHlwZScsIHN0YXRpYzo6Q09OVEVOVF9UWVBFX01VTFRJUEFSVF9BTFRFUk5BVElWRSAuICc7Jyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+dGV4dExpbmUoIlx0Ym91bmRhcnk9XCIiIC4gJHRoaXMtPmJvdW5kYXJ5WzJdIC4gJyInKTsKICAgICAgICAgICAgICAgICRib2R5IC49IHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsyXSwgJGFsdEJvZHlDaGFyU2V0LCBzdGF0aWM6OkNPTlRFTlRfVFlQRV9QTEFJTlRFWFQsICRhbHRCb2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmVuY29kZVN0cmluZygkdGhpcy0+QWx0Qm9keSwgJGFsdEJvZHlFbmNvZGluZyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0sICRib2R5Q2hhclNldCwgc3RhdGljOjpDT05URU5UX1RZUEVfVEVYVF9IVE1MLCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkJvZHksICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5JY2FsKSkgewogICAgICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0sICcnLCBzdGF0aWM6OkNPTlRFTlRfVFlQRV9URVhUX0NBTEVOREFSIC4gJzsgbWV0aG9kPVJFUVVFU1QnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmVuY29kZVN0cmluZygkdGhpcy0+SWNhbCwgJHRoaXMtPkVuY29kaW5nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdhdHRhY2htZW50JywgJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhbHRfaW5saW5lX2F0dGFjaCc6CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkbWltZXByZTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT50ZXh0TGluZSgnLS0nIC4gJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5oZWFkZXJMaW5lKCdDb250ZW50LVR5cGUnLCBzdGF0aWM6OkNPTlRFTlRfVFlQRV9NVUxUSVBBUlRfQUxURVJOQVRJVkUgLiAnOycpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPnRleHRMaW5lKCJcdGJvdW5kYXJ5PVwiIiAuICR0aGlzLT5ib3VuZGFyeVsyXSAuICciJyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0sICRhbHRCb2R5Q2hhclNldCwgc3RhdGljOjpDT05URU5UX1RZUEVfUExBSU5URVhULCAkYWx0Qm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkFsdEJvZHksICRhbHRCb2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+dGV4dExpbmUoJy0tJyAuICR0aGlzLT5ib3VuZGFyeVsyXSk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+aGVhZGVyTGluZSgnQ29udGVudC1UeXBlJywgc3RhdGljOjpDT05URU5UX1RZUEVfTVVMVElQQVJUX1JFTEFURUQgLiAnOycpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPnRleHRMaW5lKCJcdGJvdW5kYXJ5PVwiIiAuICR0aGlzLT5ib3VuZGFyeVszXSAuICciJyk7CiAgICAgICAgICAgICAgICAkYm9keSAuPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5nZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbM10sICRib2R5Q2hhclNldCwgc3RhdGljOjpDT05URU5UX1RZUEVfVEVYVF9IVE1MLCAkYm9keUVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRib2R5IC49ICR0aGlzLT5lbmNvZGVTdHJpbmcoJHRoaXMtPkJvZHksICRib2R5RW5jb2RpbmcpOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+YXR0YWNoQWxsKCdpbmxpbmUnLCAkdGhpcy0+Ym91bmRhcnlbM10pOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICAkYm9keSAuPSAkdGhpcy0+ZW5kQm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzJdKTsKICAgICAgICAgICAgICAgICRib2R5IC49IHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmF0dGFjaEFsbCgnYXR0YWNobWVudCcsICR0aGlzLT5ib3VuZGFyeVsxXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIC8vIENhdGNoIGNhc2UgJ3BsYWluJyBhbmQgY2FzZSAnJywgYXBwbGllcyB0byBzaW1wbGUgYHRleHQvcGxhaW5gIGFuZCBgdGV4dC9odG1sYCBib2R5IGNvbnRlbnQgdHlwZXMKICAgICAgICAgICAgICAgIC8vUmVzZXQgdGhlIGBFbmNvZGluZ2AgcHJvcGVydHkgaW4gY2FzZSB3ZSBjaGFuZ2VkIGl0IGZvciBsaW5lIGxlbmd0aCByZWFzb25zCiAgICAgICAgICAgICAgICAkdGhpcy0+RW5jb2RpbmcgPSAkYm9keUVuY29kaW5nOwogICAgICAgICAgICAgICAgJGJvZHkgLj0gJHRoaXMtPmVuY29kZVN0cmluZygkdGhpcy0+Qm9keSwgJHRoaXMtPkVuY29kaW5nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKCR0aGlzLT5pc0Vycm9yKCkpIHsKICAgICAgICAgICAgJGJvZHkgPSAnJzsKICAgICAgICAgICAgaWYgKCR0aGlzLT5leGNlcHRpb25zKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdlbXB0eV9tZXNzYWdlJyksIHNlbGY6OlNUT1BfQ1JJVElDQUwpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlaWYgKCR0aGlzLT5zaWduX2tleV9maWxlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoIWRlZmluZWQoJ1BLQ1M3X1RFWFQnKSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ2V4dGVuc2lvbl9taXNzaW5nJykgLiAnb3BlbnNzbCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gQFRPRE8gd291bGQgYmUgbmljZSB0byB1c2UgcGhwOi8vdGVtcCBzdHJlYW1zIGhlcmUKICAgICAgICAgICAgICAgICRmaWxlID0gdGVtcG5hbShzeXNfZ2V0X3RlbXBfZGlyKCksICdtYWlsJyk7CiAgICAgICAgICAgICAgICBpZiAoZmFsc2UgPT09IGZpbGVfcHV0X2NvbnRlbnRzKCRmaWxlLCAkYm9keSkpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdzaWduaW5nJykgLiAnIENvdWxkIG5vdCB3cml0ZSB0ZW1wIGZpbGUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRzaWduZWQgPSB0ZW1wbmFtKHN5c19nZXRfdGVtcF9kaXIoKSwgJ3NpZ25lZCcpOwogICAgICAgICAgICAgICAgLy9Xb3JrYXJvdW5kIGZvciBQSFAgYnVnIGh0dHBzOi8vYnVncy5waHAubmV0L2J1Zy5waHA/aWQ9NjkxOTcKICAgICAgICAgICAgICAgIGlmIChlbXB0eSgkdGhpcy0+c2lnbl9leHRyYWNlcnRzX2ZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgJHNpZ24gPSBAb3BlbnNzbF9wa2NzN19zaWduKAogICAgICAgICAgICAgICAgICAgICAgICAkZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgJHNpZ25lZCwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpbGU6Ly8nIC4gcmVhbHBhdGgoJHRoaXMtPnNpZ25fY2VydF9maWxlKSwKICAgICAgICAgICAgICAgICAgICAgICAgWydmaWxlOi8vJyAuIHJlYWxwYXRoKCR0aGlzLT5zaWduX2tleV9maWxlKSwgJHRoaXMtPnNpZ25fa2V5X3Bhc3NdLAogICAgICAgICAgICAgICAgICAgICAgICBbXQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRzaWduID0gQG9wZW5zc2xfcGtjczdfc2lnbigKICAgICAgICAgICAgICAgICAgICAgICAgJGZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICRzaWduZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICdmaWxlOi8vJyAuIHJlYWxwYXRoKCR0aGlzLT5zaWduX2NlcnRfZmlsZSksCiAgICAgICAgICAgICAgICAgICAgICAgIFsnZmlsZTovLycgLiByZWFscGF0aCgkdGhpcy0+c2lnbl9rZXlfZmlsZSksICR0aGlzLT5zaWduX2tleV9wYXNzXSwKICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgICAgIFBLQ1M3X0RFVEFDSEVELAogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c2lnbl9leHRyYWNlcnRzX2ZpbGUKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgQHVubGluaygkZmlsZSk7CiAgICAgICAgICAgICAgICBpZiAoJHNpZ24pIHsKICAgICAgICAgICAgICAgICAgICAkYm9keSA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRzaWduZWQpOwogICAgICAgICAgICAgICAgICAgIEB1bmxpbmsoJHNpZ25lZCk7CiAgICAgICAgICAgICAgICAgICAgLy9UaGUgbWVzc2FnZSByZXR1cm5lZCBieSBvcGVuc3NsIGNvbnRhaW5zIGJvdGggaGVhZGVycyBhbmQgYm9keSwgc28gbmVlZCB0byBzcGxpdCB0aGVtIHVwCiAgICAgICAgICAgICAgICAgICAgJHBhcnRzID0gZXhwbG9kZSgiXG5cbiIsICRib2R5LCAyKTsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+TUlNRUhlYWRlciAuPSAkcGFydHNbMF0gLiBzdGF0aWM6OiRMRSAuIHN0YXRpYzo6JExFOwogICAgICAgICAgICAgICAgICAgICRib2R5ID0gJHBhcnRzWzFdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBAdW5saW5rKCRzaWduZWQpOwogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ3NpZ25pbmcnKSAuIG9wZW5zc2xfZXJyb3Jfc3RyaW5nKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGV4YykgewogICAgICAgICAgICAgICAgJGJvZHkgPSAnJzsKICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+ZXhjZXB0aW9ucykgewogICAgICAgICAgICAgICAgICAgIHRocm93ICRleGM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkYm9keTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBtZXNzYWdlIGJvdW5kYXJ5LgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGJvdW5kYXJ5CiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaGFyU2V0CiAgICAgKiBAcGFyYW0gc3RyaW5nICRjb250ZW50VHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkZW5jb2RpbmcKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Qm91bmRhcnkoJGJvdW5kYXJ5LCAkY2hhclNldCwgJGNvbnRlbnRUeXBlLCAkZW5jb2RpbmcpCiAgICB7CiAgICAgICAgJHJlc3VsdCA9ICcnOwogICAgICAgIGlmICgnJyA9PSAkY2hhclNldCkgewogICAgICAgICAgICAkY2hhclNldCA9ICR0aGlzLT5DaGFyU2V0OwogICAgICAgIH0KICAgICAgICBpZiAoJycgPT0gJGNvbnRlbnRUeXBlKSB7CiAgICAgICAgICAgICRjb250ZW50VHlwZSA9ICR0aGlzLT5Db250ZW50VHlwZTsKICAgICAgICB9CiAgICAgICAgaWYgKCcnID09ICRlbmNvZGluZykgewogICAgICAgICAgICAkZW5jb2RpbmcgPSAkdGhpcy0+RW5jb2Rpbmc7CiAgICAgICAgfQogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPnRleHRMaW5lKCctLScgLiAkYm91bmRhcnkpOwogICAgICAgICRyZXN1bHQgLj0gc3ByaW50ZignQ29udGVudC1UeXBlOiAlczsgY2hhcnNldD0lcycsICRjb250ZW50VHlwZSwgJGNoYXJTZXQpOwogICAgICAgICRyZXN1bHQgLj0gc3RhdGljOjokTEU7CiAgICAgICAgLy8gUkZDMTM0MSBwYXJ0IDUgc2F5cyA3Yml0IGlzIGFzc3VtZWQgaWYgbm90IHNwZWNpZmllZAogICAgICAgIGlmIChzdGF0aWM6OkVOQ09ESU5HXzdCSVQgIT0gJGVuY29kaW5nKSB7CiAgICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPmhlYWRlckxpbmUoJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcnLCAkZW5jb2RpbmcpOwogICAgICAgIH0KICAgICAgICAkcmVzdWx0IC49IHN0YXRpYzo6JExFOwoKICAgICAgICByZXR1cm4gJHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZW5kIG9mIGEgbWVzc2FnZSBib3VuZGFyeS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRib3VuZGFyeQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBlbmRCb3VuZGFyeSgkYm91bmRhcnkpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0YXRpYzo6JExFIC4gJy0tJyAuICRib3VuZGFyeSAuICctLScgLiBzdGF0aWM6OiRMRTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgbWVzc2FnZSB0eXBlLgogICAgICogUEhQTWFpbGVyIG9ubHkgc3VwcG9ydHMgc29tZSBwcmVzZXQgbWVzc2FnZSB0eXBlcywgbm90IGFyYml0cmFyeSBNSU1FIHN0cnVjdHVyZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZXRNZXNzYWdlVHlwZSgpCiAgICB7CiAgICAgICAgJHR5cGUgPSBbXTsKICAgICAgICBpZiAoJHRoaXMtPmFsdGVybmF0aXZlRXhpc3RzKCkpIHsKICAgICAgICAgICAgJHR5cGVbXSA9ICdhbHQnOwogICAgICAgIH0KICAgICAgICBpZiAoJHRoaXMtPmlubGluZUltYWdlRXhpc3RzKCkpIHsKICAgICAgICAgICAgJHR5cGVbXSA9ICdpbmxpbmUnOwogICAgICAgIH0KICAgICAgICBpZiAoJHRoaXMtPmF0dGFjaG1lbnRFeGlzdHMoKSkgewogICAgICAgICAgICAkdHlwZVtdID0gJ2F0dGFjaCc7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5tZXNzYWdlX3R5cGUgPSBpbXBsb2RlKCdfJywgJHR5cGUpOwogICAgICAgIGlmICgnJyA9PSAkdGhpcy0+bWVzc2FnZV90eXBlKSB7CiAgICAgICAgICAgIC8vVGhlICdwbGFpbicgbWVzc2FnZV90eXBlIHJlZmVycyB0byB0aGUgbWVzc2FnZSBoYXZpbmcgYSBzaW5nbGUgYm9keSBlbGVtZW50LCBub3QgdGhhdCBpdCBpcyBwbGFpbi10ZXh0CiAgICAgICAgICAgICR0aGlzLT5tZXNzYWdlX3R5cGUgPSAncGxhaW4nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZvcm1hdCBhIGhlYWRlciBsaW5lLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgICAgICRuYW1lCiAgICAgKiBAcGFyYW0gc3RyaW5nfGludCAkdmFsdWUKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaGVhZGVyTGluZSgkbmFtZSwgJHZhbHVlKQogICAgewogICAgICAgIHJldHVybiAkbmFtZSAuICc6ICcgLiAkdmFsdWUgLiBzdGF0aWM6OiRMRTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIGZvcm1hdHRlZCBtYWlsIGxpbmUuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdmFsdWUKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdGV4dExpbmUoJHZhbHVlKQogICAgewogICAgICAgIHJldHVybiAkdmFsdWUgLiBzdGF0aWM6OiRMRTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhbiBhdHRhY2htZW50IGZyb20gYSBwYXRoIG9uIHRoZSBmaWxlc3lzdGVtLgogICAgICogTmV2ZXIgdXNlIGEgdXNlci1zdXBwbGllZCBwYXRoIHRvIGEgZmlsZSEKICAgICAqIFJldHVybnMgZmFsc2UgaWYgdGhlIGZpbGUgY291bGQgbm90IGJlIGZvdW5kIG9yIHJlYWQuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkcGF0aCAgICAgICAgUGF0aCB0byB0aGUgYXR0YWNobWVudAogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSAgICAgICAgT3ZlcnJpZGVzIHRoZSBhdHRhY2htZW50IG5hbWUKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVuY29kaW5nICAgIEZpbGUgZW5jb2RpbmcgKHNlZSAkRW5jb2RpbmcpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlICAgICAgICBGaWxlIGV4dGVuc2lvbiAoTUlNRSkgdHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkZGlzcG9zaXRpb24gRGlzcG9zaXRpb24gdG8gdXNlCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFkZEF0dGFjaG1lbnQoJHBhdGgsICRuYW1lID0gJycsICRlbmNvZGluZyA9IHNlbGY6OkVOQ09ESU5HX0JBU0U2NCwgJHR5cGUgPSAnJywgJGRpc3Bvc2l0aW9uID0gJ2F0dGFjaG1lbnQnKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghQGlzX2ZpbGUoJHBhdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdmaWxlX2FjY2VzcycpIC4gJHBhdGgsIHNlbGY6OlNUT1BfQ09OVElOVUUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiBhIE1JTUUgdHlwZSBpcyBub3Qgc3BlY2lmaWVkLCB0cnkgdG8gd29yayBpdCBvdXQgZnJvbSB0aGUgZmlsZSBuYW1lCiAgICAgICAgICAgIGlmICgnJyA9PSAkdHlwZSkgewogICAgICAgICAgICAgICAgJHR5cGUgPSBzdGF0aWM6OmZpbGVuYW1lVG9UeXBlKCRwYXRoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGZpbGVuYW1lID0gYmFzZW5hbWUoJHBhdGgpOwogICAgICAgICAgICBpZiAoJycgPT0gJG5hbWUpIHsKICAgICAgICAgICAgICAgICRuYW1lID0gJGZpbGVuYW1lOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkdGhpcy0+YXR0YWNobWVudFtdID0gWwogICAgICAgICAgICAgICAgMCA9PiAkcGF0aCwKICAgICAgICAgICAgICAgIDEgPT4gJGZpbGVuYW1lLAogICAgICAgICAgICAgICAgMiA9PiAkbmFtZSwKICAgICAgICAgICAgICAgIDMgPT4gJGVuY29kaW5nLAogICAgICAgICAgICAgICAgNCA9PiAkdHlwZSwKICAgICAgICAgICAgICAgIDUgPT4gZmFsc2UsIC8vIGlzU3RyaW5nQXR0YWNobWVudAogICAgICAgICAgICAgICAgNiA9PiAkZGlzcG9zaXRpb24sCiAgICAgICAgICAgICAgICA3ID0+ICRuYW1lLAogICAgICAgICAgICBdOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZXhjKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkZXhjLT5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCRleGMtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIGlmICgkdGhpcy0+ZXhjZXB0aW9ucykgewogICAgICAgICAgICAgICAgdGhyb3cgJGV4YzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGFycmF5IG9mIGF0dGFjaG1lbnRzLgogICAgICoKICAgICAqIEByZXR1cm4gYXJyYXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmF0dGFjaG1lbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBBdHRhY2ggYWxsIGZpbGUsIHN0cmluZywgYW5kIGJpbmFyeSBhdHRhY2htZW50cyB0byB0aGUgbWVzc2FnZS4KICAgICAqIFJldHVybnMgYW4gZW1wdHkgc3RyaW5nIG9uIGZhaWx1cmUuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkZGlzcG9zaXRpb25fdHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkYm91bmRhcnkKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gYXR0YWNoQWxsKCRkaXNwb3NpdGlvbl90eXBlLCAkYm91bmRhcnkpCiAgICB7CiAgICAgICAgLy8gUmV0dXJuIHRleHQgb2YgYm9keQogICAgICAgICRtaW1lID0gW107CiAgICAgICAgJGNpZFVuaXEgPSBbXTsKICAgICAgICAkaW5jbCA9IFtdOwoKICAgICAgICAvLyBBZGQgYWxsIGF0dGFjaG1lbnRzCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmF0dGFjaG1lbnQgYXMgJGF0dGFjaG1lbnQpIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgYSB2YWxpZCBkaXNwb3NpdGlvbl9maWx0ZXIKICAgICAgICAgICAgaWYgKCRhdHRhY2htZW50WzZdID09ICRkaXNwb3NpdGlvbl90eXBlKSB7CiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc3RyaW5nIGF0dGFjaG1lbnQKICAgICAgICAgICAgICAgICRzdHJpbmcgPSAnJzsKICAgICAgICAgICAgICAgICRwYXRoID0gJyc7CiAgICAgICAgICAgICAgICAkYlN0cmluZyA9ICRhdHRhY2htZW50WzVdOwogICAgICAgICAgICAgICAgaWYgKCRiU3RyaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgJHN0cmluZyA9ICRhdHRhY2htZW50WzBdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkcGF0aCA9ICRhdHRhY2htZW50WzBdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRpbmNsaGFzaCA9IGhhc2goJ3NoYTI1NicsIHNlcmlhbGl6ZSgkYXR0YWNobWVudCkpOwogICAgICAgICAgICAgICAgaWYgKGluX2FycmF5KCRpbmNsaGFzaCwgJGluY2wpKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkaW5jbFtdID0gJGluY2xoYXNoOwogICAgICAgICAgICAgICAgJG5hbWUgPSAkYXR0YWNobWVudFsyXTsKICAgICAgICAgICAgICAgICRlbmNvZGluZyA9ICRhdHRhY2htZW50WzNdOwogICAgICAgICAgICAgICAgJHR5cGUgPSAkYXR0YWNobWVudFs0XTsKICAgICAgICAgICAgICAgICRkaXNwb3NpdGlvbiA9ICRhdHRhY2htZW50WzZdOwogICAgICAgICAgICAgICAgJGNpZCA9ICRhdHRhY2htZW50WzddOwogICAgICAgICAgICAgICAgaWYgKCdpbmxpbmUnID09ICRkaXNwb3NpdGlvbiBhbmQgYXJyYXlfa2V5X2V4aXN0cygkY2lkLCAkY2lkVW5pcSkpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRjaWRVbmlxWyRjaWRdID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAkbWltZVtdID0gc3ByaW50ZignLS0lcyVzJywgJGJvdW5kYXJ5LCBzdGF0aWM6OiRMRSk7CiAgICAgICAgICAgICAgICAvL09ubHkgaW5jbHVkZSBhIGZpbGVuYW1lIHByb3BlcnR5IGlmIHdlIGhhdmUgb25lCiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KCRuYW1lKSkgewogICAgICAgICAgICAgICAgICAgICRtaW1lW10gPSBzcHJpbnRmKAogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlOiAlczsgbmFtZT0iJXMiJXMnLAogICAgICAgICAgICAgICAgICAgICAgICAkdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmVuY29kZUhlYWRlcigkdGhpcy0+c2VjdXJlSGVhZGVyKCRuYW1lKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYzo6JExFCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJG1pbWVbXSA9IHNwcmludGYoCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGU6ICVzJXMnLAogICAgICAgICAgICAgICAgICAgICAgICAkdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljOjokTEUKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gUkZDMTM0MSBwYXJ0IDUgc2F5cyA3Yml0IGlzIGFzc3VtZWQgaWYgbm90IHNwZWNpZmllZAogICAgICAgICAgICAgICAgaWYgKHN0YXRpYzo6RU5DT0RJTkdfN0JJVCAhPSAkZW5jb2RpbmcpIHsKICAgICAgICAgICAgICAgICAgICAkbWltZVtdID0gc3ByaW50ZignQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogJXMlcycsICRlbmNvZGluZywgc3RhdGljOjokTEUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghZW1wdHkoJGNpZCkpIHsKICAgICAgICAgICAgICAgICAgICAkbWltZVtdID0gc3ByaW50ZignQ29udGVudC1JRDogPCVzPiVzJywgJGNpZCwgc3RhdGljOjokTEUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIElmIGEgZmlsZW5hbWUgY29udGFpbnMgYW55IG9mIHRoZXNlIGNoYXJzLCBpdCBzaG91bGQgYmUgcXVvdGVkLAogICAgICAgICAgICAgICAgLy8gYnV0IG5vdCBvdGhlcndpc2U6IFJGQzIxODMgJiBSRkMyMDQ1IDUuMQogICAgICAgICAgICAgICAgLy8gRml4ZXMgYSB3YXJuaW5nIGluIElFVEYncyBtc2dsaW50IE1JTUUgY2hlY2tlcgogICAgICAgICAgICAgICAgLy8gQWxsb3cgZm9yIGJ5cGFzc2luZyB0aGUgQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIgdG90YWxseQogICAgICAgICAgICAgICAgaWYgKCEoZW1wdHkoJGRpc3Bvc2l0aW9uKSkpIHsKICAgICAgICAgICAgICAgICAgICAkZW5jb2RlZF9uYW1lID0gJHRoaXMtPmVuY29kZUhlYWRlcigkdGhpcy0+c2VjdXJlSGVhZGVyKCRuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHByZWdfbWF0Y2goJy9bIFwoXCk8PkAsOzpcXCJcL1xbXF1cPz1dLycsICRlbmNvZGVkX25hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRtaW1lW10gPSBzcHJpbnRmKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb246ICVzOyBmaWxlbmFtZT0iJXMiJXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRpc3Bvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVuY29kZWRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYzo6JExFIC4gc3RhdGljOjokTEUKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KCRlbmNvZGVkX25hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWltZVtdID0gc3ByaW50ZigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbjogJXM7IGZpbGVuYW1lPSVzJXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkaXNwb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZW5jb2RlZF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYzo6JExFIC4gc3RhdGljOjokTEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWltZVtdID0gc3ByaW50ZigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbjogJXMlcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRpc3Bvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYzo6JExFIC4gc3RhdGljOjokTEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRtaW1lW10gPSBzdGF0aWM6OiRMRTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBFbmNvZGUgYXMgc3RyaW5nIGF0dGFjaG1lbnQKICAgICAgICAgICAgICAgIGlmICgkYlN0cmluZykgewogICAgICAgICAgICAgICAgICAgICRtaW1lW10gPSAkdGhpcy0+ZW5jb2RlU3RyaW5nKCRzdHJpbmcsICRlbmNvZGluZyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRtaW1lW10gPSAkdGhpcy0+ZW5jb2RlRmlsZSgkcGF0aCwgJGVuY29kaW5nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+aXNFcnJvcigpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJG1pbWVbXSA9IHN0YXRpYzo6JExFOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkbWltZVtdID0gc3ByaW50ZignLS0lcy0tJXMnLCAkYm91bmRhcnksIHN0YXRpYzo6JExFKTsKCiAgICAgICAgcmV0dXJuIGltcGxvZGUoJycsICRtaW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVuY29kZSBhIGZpbGUgYXR0YWNobWVudCBpbiByZXF1ZXN0ZWQgZm9ybWF0LgogICAgICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgb24gZmFpbHVyZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXRoICAgICBUaGUgZnVsbCBwYXRoIHRvIHRoZSBmaWxlCiAgICAgKiBAcGFyYW0gc3RyaW5nICRlbmNvZGluZyBUaGUgZW5jb2RpbmcgdG8gdXNlOyBvbmUgb2YgJ2Jhc2U2NCcsICc3Yml0JywgJzhiaXQnLCAnYmluYXJ5JywgJ3F1b3RlZC1wcmludGFibGUnCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZW5jb2RlRmlsZSgkcGF0aCwgJGVuY29kaW5nID0gc2VsZjo6RU5DT0RJTkdfQkFTRTY0KQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghZmlsZV9leGlzdHMoJHBhdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdmaWxlX29wZW4nKSAuICRwYXRoLCBzZWxmOjpTVE9QX0NPTlRJTlVFKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZmlsZV9idWZmZXIgPSBmaWxlX2dldF9jb250ZW50cygkcGF0aCk7CiAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gJGZpbGVfYnVmZmVyKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCR0aGlzLT5sYW5nKCdmaWxlX29wZW4nKSAuICRwYXRoLCBzZWxmOjpTVE9QX0NPTlRJTlVFKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZmlsZV9idWZmZXIgPSAkdGhpcy0+ZW5jb2RlU3RyaW5nKCRmaWxlX2J1ZmZlciwgJGVuY29kaW5nKTsKCiAgICAgICAgICAgIHJldHVybiAkZmlsZV9idWZmZXI7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRleGMpIHsKICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCRleGMtPmdldE1lc3NhZ2UoKSk7CgogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRW5jb2RlIGEgc3RyaW5nIGluIHJlcXVlc3RlZCBmb3JtYXQuCiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0ciAgICAgIFRoZSB0ZXh0IHRvIGVuY29kZQogICAgICogQHBhcmFtIHN0cmluZyAkZW5jb2RpbmcgVGhlIGVuY29kaW5nIHRvIHVzZTsgb25lIG9mICdiYXNlNjQnLCAnN2JpdCcsICc4Yml0JywgJ2JpbmFyeScsICdxdW90ZWQtcHJpbnRhYmxlJwogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlbmNvZGVTdHJpbmcoJHN0ciwgJGVuY29kaW5nID0gc2VsZjo6RU5DT0RJTkdfQkFTRTY0KQogICAgewogICAgICAgICRlbmNvZGVkID0gJyc7CiAgICAgICAgc3dpdGNoIChzdHJ0b2xvd2VyKCRlbmNvZGluZykpIHsKICAgICAgICAgICAgY2FzZSBzdGF0aWM6OkVOQ09ESU5HX0JBU0U2NDoKICAgICAgICAgICAgICAgICRlbmNvZGVkID0gY2h1bmtfc3BsaXQoCiAgICAgICAgICAgICAgICAgICAgYmFzZTY0X2VuY29kZSgkc3RyKSwKICAgICAgICAgICAgICAgICAgICBzdGF0aWM6OlNURF9MSU5FX0xFTkdUSCwKICAgICAgICAgICAgICAgICAgICBzdGF0aWM6OiRMRQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIHN0YXRpYzo6RU5DT0RJTkdfN0JJVDoKICAgICAgICAgICAgY2FzZSBzdGF0aWM6OkVOQ09ESU5HXzhCSVQ6CiAgICAgICAgICAgICAgICAkZW5jb2RlZCA9IHN0YXRpYzo6bm9ybWFsaXplQnJlYWtzKCRzdHIpOwogICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGl0IGVuZHMgd2l0aCBhIGxpbmUgYnJlYWsKICAgICAgICAgICAgICAgIGlmIChzdWJzdHIoJGVuY29kZWQsIC0oc3RybGVuKHN0YXRpYzo6JExFKSkpICE9IHN0YXRpYzo6JExFKSB7CiAgICAgICAgICAgICAgICAgICAgJGVuY29kZWQgLj0gc3RhdGljOjokTEU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBzdGF0aWM6OkVOQ09ESU5HX0JJTkFSWToKICAgICAgICAgICAgICAgICRlbmNvZGVkID0gJHN0cjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIHN0YXRpYzo6RU5DT0RJTkdfUVVPVEVEX1BSSU5UQUJMRToKICAgICAgICAgICAgICAgICRlbmNvZGVkID0gJHRoaXMtPmVuY29kZVFQKCRzdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoJHRoaXMtPmxhbmcoJ2VuY29kaW5nJykgLiAkZW5jb2RpbmcpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGVuY29kZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbmNvZGUgYSBoZWFkZXIgdmFsdWUgKG5vdCBpbmNsdWRpbmcgaXRzIGxhYmVsKSBvcHRpbWFsbHkuCiAgICAgKiBQaWNrcyBzaG9ydGVzdCBvZiBRLCBCLCBvciBub25lLiBSZXN1bHQgaW5jbHVkZXMgZm9sZGluZyBpZiBuZWVkZWQuCiAgICAgKiBTZWUgUkZDODIyIGRlZmluaXRpb25zIGZvciBwaHJhc2UsIGNvbW1lbnQgYW5kIHRleHQgcG9zaXRpb25zLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0ciAgICAgIFRoZSBoZWFkZXIgdmFsdWUgdG8gZW5jb2RlCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwb3NpdGlvbiBXaGF0IGNvbnRleHQgdGhlIHN0cmluZyB3aWxsIGJlIHVzZWQgaW4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZW5jb2RlSGVhZGVyKCRzdHIsICRwb3NpdGlvbiA9ICd0ZXh0JykKICAgIHsKICAgICAgICAkbWF0Y2hjb3VudCA9IDA7CiAgICAgICAgc3dpdGNoIChzdHJ0b2xvd2VyKCRwb3NpdGlvbikpIHsKICAgICAgICAgICAgY2FzZSAncGhyYXNlJzoKICAgICAgICAgICAgICAgIGlmICghcHJlZ19tYXRjaCgnL1tcMjAwLVwzNzddLycsICRzdHIpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgdXNlIGFkZHNsYXNoZXMgYXMgd2UgZG9uJ3Qga25vdyB0aGUgdmFsdWUgb2YgbWFnaWNfcXVvdGVzX3N5YmFzZQogICAgICAgICAgICAgICAgICAgICRlbmNvZGVkID0gYWRkY3NsYXNoZXMoJHN0ciwgIlwwLi5cMzdcMTc3XFxcIiIpOwogICAgICAgICAgICAgICAgICAgIGlmICgoJHN0ciA9PSAkZW5jb2RlZCkgYW5kICFwcmVnX21hdGNoKCcvW15BLVphLXowLTkhIyQlJlwnKitcLz0/Xl9ge3x9fiAtXS8nLCAkc3RyKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGVuY29kZWQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIlwiJGVuY29kZWRcIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkbWF0Y2hjb3VudCA9IHByZWdfbWF0Y2hfYWxsKCcvW15cMDQwXDA0MVwwNDMtXDEzM1wxMzUtXDE3Nl0vJywgJHN0ciwgJG1hdGNoZXMpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIC8qIEBub2luc3BlY3Rpb24gUGhwTWlzc2luZ0JyZWFrU3RhdGVtZW50SW5zcGVjdGlvbiAqLwogICAgICAgICAgICBjYXNlICdjb21tZW50JzoKICAgICAgICAgICAgICAgICRtYXRjaGNvdW50ID0gcHJlZ19tYXRjaF9hbGwoJy9bKCkiXS8nLCAkc3RyLCAkbWF0Y2hlcyk7CiAgICAgICAgICAgIC8vZmFsbHRocm91Z2gKICAgICAgICAgICAgY2FzZSAndGV4dCc6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAkbWF0Y2hjb3VudCArPSBwcmVnX21hdGNoX2FsbCgnL1tcMDAwLVwwMTBcMDEzXDAxNFwwMTYtXDAzN1wxNzctXDM3N10vJywgJHN0ciwgJG1hdGNoZXMpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICAvL1JGQ3Mgc3BlY2lmeSBhIG1heGltdW0gbGluZSBsZW5ndGggb2YgNzggY2hhcnMsIGhvd2V2ZXIgbWFpbCgpIHdpbGwgc29tZXRpbWVzCiAgICAgICAgLy9jb3JydXB0IG1lc3NhZ2VzIHdpdGggaGVhZGVycyBsb25nZXIgdGhhbiA2NSBjaGFycy4gU2VlICM4MTgKICAgICAgICAkbGVuZ3Roc3ViID0gJ21haWwnID09ICR0aGlzLT5NYWlsZXIgPyAxMyA6IDA7CiAgICAgICAgJG1heGxlbiA9IHN0YXRpYzo6U1REX0xJTkVfTEVOR1RIIC0gJGxlbmd0aHN1YjsKICAgICAgICAvLyBUcnkgdG8gc2VsZWN0IHRoZSBlbmNvZGluZyB3aGljaCBzaG91bGQgcHJvZHVjZSB0aGUgc2hvcnRlc3Qgb3V0cHV0CiAgICAgICAgaWYgKCRtYXRjaGNvdW50ID4gc3RybGVuKCRzdHIpIC8gMykgewogICAgICAgICAgICAvLyBNb3JlIHRoYW4gYSB0aGlyZCBvZiB0aGUgY29udGVudCB3aWxsIG5lZWQgZW5jb2RpbmcsIHNvIEIgZW5jb2Rpbmcgd2lsbCBiZSBtb3N0IGVmZmljaWVudAogICAgICAgICAgICAkZW5jb2RpbmcgPSAnQic7CiAgICAgICAgICAgIC8vVGhpcyBjYWxjdWxhdGlvbiBpczoKICAgICAgICAgICAgLy8gbWF4IGxpbmUgbGVuZ3RoCiAgICAgICAgICAgIC8vIC0gc2hvcnRlbiB0byBhdm9pZCBtYWlsKCkgY29ycnVwdGlvbgogICAgICAgICAgICAvLyAtIFEvQiBlbmNvZGluZyBjaGFyIG92ZXJoZWFkICgiYCA9PzxjaGFyc2V0Pj9bUUJdPzxjb250ZW50Pj89YCIpCiAgICAgICAgICAgIC8vIC0gY2hhcnNldCBuYW1lIGxlbmd0aAogICAgICAgICAgICAkbWF4bGVuID0gc3RhdGljOjpTVERfTElORV9MRU5HVEggLSAkbGVuZ3Roc3ViIC0gOCAtIHN0cmxlbigkdGhpcy0+Q2hhclNldCk7CiAgICAgICAgICAgIGlmICgkdGhpcy0+aGFzTXVsdGlCeXRlcygkc3RyKSkgewogICAgICAgICAgICAgICAgLy8gVXNlIGEgY3VzdG9tIGZ1bmN0aW9uIHdoaWNoIGNvcnJlY3RseSBlbmNvZGVzIGFuZCB3cmFwcyBsb25nCiAgICAgICAgICAgICAgICAvLyBtdWx0aWJ5dGUgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGxpbmVzIHdpdGhpbiBhIGNoYXJhY3RlcgogICAgICAgICAgICAgICAgJGVuY29kZWQgPSAkdGhpcy0+YmFzZTY0RW5jb2RlV3JhcE1CKCRzdHIsICJcbiIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJGVuY29kZWQgPSBiYXNlNjRfZW5jb2RlKCRzdHIpOwogICAgICAgICAgICAgICAgJG1heGxlbiAtPSAkbWF4bGVuICUgNDsKICAgICAgICAgICAgICAgICRlbmNvZGVkID0gdHJpbShjaHVua19zcGxpdCgkZW5jb2RlZCwgJG1heGxlbiwgIlxuIikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRlbmNvZGVkID0gcHJlZ19yZXBsYWNlKCcvXiguKikkL20nLCAnID0/JyAuICR0aGlzLT5DaGFyU2V0IC4gIj8kZW5jb2Rpbmc/XFwxPz0iLCAkZW5jb2RlZCk7CiAgICAgICAgfSBlbHNlaWYgKCRtYXRjaGNvdW50ID4gMCkgewogICAgICAgICAgICAvLzEgb3IgbW9yZSBjaGFycyBuZWVkIGVuY29kaW5nLCB1c2UgUS1lbmNvZGUKICAgICAgICAgICAgJGVuY29kaW5nID0gJ1EnOwogICAgICAgICAgICAvL1JlY2FsYyBtYXggbGluZSBsZW5ndGggZm9yIFEgZW5jb2RpbmcgLSBzZWUgY29tbWVudHMgb24gQiBlbmNvZGUKICAgICAgICAgICAgJG1heGxlbiA9IHN0YXRpYzo6U1REX0xJTkVfTEVOR1RIIC0gJGxlbmd0aHN1YiAtIDggLSBzdHJsZW4oJHRoaXMtPkNoYXJTZXQpOwogICAgICAgICAgICAkZW5jb2RlZCA9ICR0aGlzLT5lbmNvZGVRKCRzdHIsICRwb3NpdGlvbik7CiAgICAgICAgICAgICRlbmNvZGVkID0gJHRoaXMtPndyYXBUZXh0KCRlbmNvZGVkLCAkbWF4bGVuLCB0cnVlKTsKICAgICAgICAgICAgJGVuY29kZWQgPSBzdHJfcmVwbGFjZSgnPScgLiBzdGF0aWM6OiRMRSwgIlxuIiwgdHJpbSgkZW5jb2RlZCkpOwogICAgICAgICAgICAkZW5jb2RlZCA9IHByZWdfcmVwbGFjZSgnL14oLiopJC9tJywgJyA9PycgLiAkdGhpcy0+Q2hhclNldCAuICI/JGVuY29kaW5nP1xcMT89IiwgJGVuY29kZWQpOwogICAgICAgIH0gZWxzZWlmIChzdHJsZW4oJHN0cikgPiAkbWF4bGVuKSB7CiAgICAgICAgICAgIC8vTm8gY2hhcnMgbmVlZCBlbmNvZGluZywgYnV0IGxpbmUgaXMgdG9vIGxvbmcsIHNvIGZvbGQgaXQKICAgICAgICAgICAgJGVuY29kZWQgPSB0cmltKCR0aGlzLT53cmFwVGV4dCgkc3RyLCAkbWF4bGVuLCBmYWxzZSkpOwogICAgICAgICAgICBpZiAoJHN0ciA9PSAkZW5jb2RlZCkgewogICAgICAgICAgICAgICAgLy9XcmFwcGluZyBuaWNlbHkgZGlkbid0IHdvcmssIHdyYXAgaGFyZCBpbnN0ZWFkCiAgICAgICAgICAgICAgICAkZW5jb2RlZCA9IHRyaW0oY2h1bmtfc3BsaXQoJHN0ciwgc3RhdGljOjpTVERfTElORV9MRU5HVEgsIHN0YXRpYzo6JExFKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGVuY29kZWQgPSBzdHJfcmVwbGFjZShzdGF0aWM6OiRMRSwgIlxuIiwgdHJpbSgkZW5jb2RlZCkpOwogICAgICAgICAgICAkZW5jb2RlZCA9IHByZWdfcmVwbGFjZSgnL14oLiopJC9tJywgJyBcXDEnLCAkZW5jb2RlZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9ObyByZWZvcm1hdHRpbmcgbmVlZGVkCiAgICAgICAgICAgIHJldHVybiAkc3RyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRyaW0oc3RhdGljOjpub3JtYWxpemVCcmVha3MoJGVuY29kZWQpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgc3RyaW5nIGNvbnRhaW5zIG11bHRpLWJ5dGUgY2hhcmFjdGVycy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzdHIgbXVsdGktYnl0ZSB0ZXh0IHRvIHdyYXAgZW5jb2RlCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBoYXNNdWx0aUJ5dGVzKCRzdHIpCiAgICB7CiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3RybGVuJykpIHsKICAgICAgICAgICAgcmV0dXJuIHN0cmxlbigkc3RyKSA+IG1iX3N0cmxlbigkc3RyLCAkdGhpcy0+Q2hhclNldCk7CiAgICAgICAgfQoKICAgICAgICAvLyBBc3N1bWUgbm8gbXVsdGlieXRlcyAod2UgY2FuJ3QgaGFuZGxlIHdpdGhvdXQgbWJzdHJpbmcgZnVuY3Rpb25zIGFueXdheSkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBEb2VzIGEgc3RyaW5nIGNvbnRhaW4gYW55IDgtYml0IGNoYXJzIChpbiBhbnkgY2hhcnNldCk/CiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdGV4dAogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaGFzOGJpdENoYXJzKCR0ZXh0KQogICAgewogICAgICAgIHJldHVybiAoYm9vbCkgcHJlZ19tYXRjaCgnL1tceDgwLVx4RkZdLycsICR0ZXh0KTsKICAgIH0KCiAgICAvKioKICAgICAqIEVuY29kZSBhbmQgd3JhcCBsb25nIG11bHRpYnl0ZSBzdHJpbmdzIGZvciBtYWlsIGhlYWRlcnMKICAgICAqIHdpdGhvdXQgYnJlYWtpbmcgbGluZXMgd2l0aGluIGEgY2hhcmFjdGVyLgogICAgICogQWRhcHRlZCBmcm9tIGEgZnVuY3Rpb24gYnkgcGFyYXZvaWQuCiAgICAgKgogICAgICogQHNlZSBodHRwOi8vd3d3LnBocC5uZXQvbWFudWFsL2VuL2Z1bmN0aW9uLm1iLWVuY29kZS1taW1laGVhZGVyLnBocCM2MDI4MwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0ciAgICAgICBtdWx0aS1ieXRlIHRleHQgdG8gd3JhcCBlbmNvZGUKICAgICAqIEBwYXJhbSBzdHJpbmcgJGxpbmVicmVhayBzdHJpbmcgdG8gdXNlIGFzIGxpbmVmZWVkL2VuZC1vZi1saW5lCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGJhc2U2NEVuY29kZVdyYXBNQigkc3RyLCAkbGluZWJyZWFrID0gbnVsbCkKICAgIHsKICAgICAgICAkc3RhcnQgPSAnPT8nIC4gJHRoaXMtPkNoYXJTZXQgLiAnP0I/JzsKICAgICAgICAkZW5kID0gJz89JzsKICAgICAgICAkZW5jb2RlZCA9ICcnOwogICAgICAgIGlmIChudWxsID09PSAkbGluZWJyZWFrKSB7CiAgICAgICAgICAgICRsaW5lYnJlYWsgPSBzdGF0aWM6OiRMRTsKICAgICAgICB9CgogICAgICAgICRtYl9sZW5ndGggPSBtYl9zdHJsZW4oJHN0ciwgJHRoaXMtPkNoYXJTZXQpOwogICAgICAgIC8vIEVhY2ggbGluZSBtdXN0IGhhdmUgbGVuZ3RoIDw9IDc1LCBpbmNsdWRpbmcgJHN0YXJ0IGFuZCAkZW5kCiAgICAgICAgJGxlbmd0aCA9IDc1IC0gc3RybGVuKCRzdGFydCkgLSBzdHJsZW4oJGVuZCk7CiAgICAgICAgLy8gQXZlcmFnZSBtdWx0aS1ieXRlIHJhdGlvCiAgICAgICAgJHJhdGlvID0gJG1iX2xlbmd0aCAvIHN0cmxlbigkc3RyKTsKICAgICAgICAvLyBCYXNlNjQgaGFzIGEgNDozIHJhdGlvCiAgICAgICAgJGF2Z0xlbmd0aCA9IGZsb29yKCRsZW5ndGggKiAkcmF0aW8gKiAuNzUpOwoKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkbWJfbGVuZ3RoOyAkaSArPSAkb2Zmc2V0KSB7CiAgICAgICAgICAgICRsb29rQmFjayA9IDA7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICRvZmZzZXQgPSAkYXZnTGVuZ3RoIC0gJGxvb2tCYWNrOwogICAgICAgICAgICAgICAgJGNodW5rID0gbWJfc3Vic3RyKCRzdHIsICRpLCAkb2Zmc2V0LCAkdGhpcy0+Q2hhclNldCk7CiAgICAgICAgICAgICAgICAkY2h1bmsgPSBiYXNlNjRfZW5jb2RlKCRjaHVuayk7CiAgICAgICAgICAgICAgICArKyRsb29rQmFjazsKICAgICAgICAgICAgfSB3aGlsZSAoc3RybGVuKCRjaHVuaykgPiAkbGVuZ3RoKTsKICAgICAgICAgICAgJGVuY29kZWQgLj0gJGNodW5rIC4gJGxpbmVicmVhazsKICAgICAgICB9CgogICAgICAgIC8vIENob21wIHRoZSBsYXN0IGxpbmVmZWVkCiAgICAgICAgcmV0dXJuIHN1YnN0cigkZW5jb2RlZCwgMCwgLXN0cmxlbigkbGluZWJyZWFrKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbmNvZGUgYSBzdHJpbmcgaW4gcXVvdGVkLXByaW50YWJsZSBmb3JtYXQuCiAgICAgKiBBY2NvcmRpbmcgdG8gUkZDMjA0NSBzZWN0aW9uIDYuNy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzdHJpbmcgVGhlIHRleHQgdG8gZW5jb2RlCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGVuY29kZVFQKCRzdHJpbmcpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0YXRpYzo6bm9ybWFsaXplQnJlYWtzKHF1b3RlZF9wcmludGFibGVfZW5jb2RlKCRzdHJpbmcpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVuY29kZSBhIHN0cmluZyB1c2luZyBRIGVuY29kaW5nLgogICAgICoKICAgICAqIEBzZWUgaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMjA0NyNzZWN0aW9uLTQuMgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0ciAgICAgIHRoZSB0ZXh0IHRvIGVuY29kZQogICAgICogQHBhcmFtIHN0cmluZyAkcG9zaXRpb24gV2hlcmUgdGhlIHRleHQgaXMgZ29pbmcgdG8gYmUgdXNlZCwgc2VlIHRoZSBSRkMgZm9yIHdoYXQgdGhhdCBtZWFucwogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlbmNvZGVRKCRzdHIsICRwb3NpdGlvbiA9ICd0ZXh0JykKICAgIHsKICAgICAgICAvLyBUaGVyZSBzaG91bGQgbm90IGJlIGFueSBFT0wgaW4gdGhlIHN0cmluZwogICAgICAgICRwYXR0ZXJuID0gJyc7CiAgICAgICAgJGVuY29kZWQgPSBzdHJfcmVwbGFjZShbIlxyIiwgIlxuIl0sICcnLCAkc3RyKTsKICAgICAgICBzd2l0Y2ggKHN0cnRvbG93ZXIoJHBvc2l0aW9uKSkgewogICAgICAgICAgICBjYXNlICdwaHJhc2UnOgogICAgICAgICAgICAgICAgLy8gUkZDIDIwNDcgc2VjdGlvbiA1LjMKICAgICAgICAgICAgICAgICRwYXR0ZXJuID0gJ15BLVphLXowLTkhKitcLyAtJzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAvKgogICAgICAgICAgICAgKiBSRkMgMjA0NyBzZWN0aW9uIDUuMi4KICAgICAgICAgICAgICogQnVpbGQgJHBhdHRlcm4gd2l0aG91dCBpbmNsdWRpbmcgZGVsaW1pdGVycyBhbmQgW10KICAgICAgICAgICAgICovCiAgICAgICAgICAgIC8qIEBub2luc3BlY3Rpb24gUGhwTWlzc2luZ0JyZWFrU3RhdGVtZW50SW5zcGVjdGlvbiAqLwogICAgICAgICAgICBjYXNlICdjb21tZW50JzoKICAgICAgICAgICAgICAgICRwYXR0ZXJuID0gJ1woXCkiJzsKICAgICAgICAgICAgLyogSW50ZW50aW9uYWwgZmFsbCB0aHJvdWdoICovCiAgICAgICAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgLy8gUkZDIDIwNDcgc2VjdGlvbiA1LjEKICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgZXZlcnkgaGlnaCBhc2NpaSwgY29udHJvbCwgPSwgPyBhbmQgXyBjaGFyYWN0ZXJzCiAgICAgICAgICAgICAgICAvKiogQG5vaW5zcGVjdGlvbiBTdXNwaWNpb3VzQXNzaWdubWVudHNJbnNwZWN0aW9uICovCiAgICAgICAgICAgICAgICAkcGF0dGVybiA9ICdcMDAwLVwwMTFcMDEzXDAxNFwwMTYtXDAzN1wwNzVcMDc3XDEzN1wxNzctXDM3NycgLiAkcGF0dGVybjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAkbWF0Y2hlcyA9IFtdOwogICAgICAgIGlmIChwcmVnX21hdGNoX2FsbCgiL1t7JHBhdHRlcm59XS8iLCAkZW5jb2RlZCwgJG1hdGNoZXMpKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBzdHJpbmcgY29udGFpbnMgYW4gJz0nLCBtYWtlIHN1cmUgaXQncyB0aGUgZmlyc3QgdGhpbmcgd2UgcmVwbGFjZQogICAgICAgICAgICAvLyBzbyBhcyB0byBhdm9pZCBkb3VibGUtZW5jb2RpbmcKICAgICAgICAgICAgJGVxa2V5ID0gYXJyYXlfc2VhcmNoKCc9JywgJG1hdGNoZXNbMF0pOwogICAgICAgICAgICBpZiAoZmFsc2UgIT09ICRlcWtleSkgewogICAgICAgICAgICAgICAgdW5zZXQoJG1hdGNoZXNbMF1bJGVxa2V5XSk7CiAgICAgICAgICAgICAgICBhcnJheV91bnNoaWZ0KCRtYXRjaGVzWzBdLCAnPScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcmVhY2ggKGFycmF5X3VuaXF1ZSgkbWF0Y2hlc1swXSkgYXMgJGNoYXIpIHsKICAgICAgICAgICAgICAgICRlbmNvZGVkID0gc3RyX3JlcGxhY2UoJGNoYXIsICc9JyAuIHNwcmludGYoJyUwMlgnLCBvcmQoJGNoYXIpKSwgJGVuY29kZWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggXyAobW9yZSByZWFkYWJsZSB0aGFuID0yMCkKICAgICAgICAvLyBSRkMgMjA0NyBzZWN0aW9uIDQuMigyKQogICAgICAgIHJldHVybiBzdHJfcmVwbGFjZSgnICcsICdfJywgJGVuY29kZWQpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgc3RyaW5nIG9yIGJpbmFyeSBhdHRhY2htZW50IChub24tZmlsZXN5c3RlbSkuCiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBhdHRhY2ggYXNjaWkgb3IgYmluYXJ5IGRhdGEsCiAgICAgKiBzdWNoIGFzIGEgQkxPQiByZWNvcmQgZnJvbSBhIGRhdGFiYXNlLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cmluZyAgICAgIFN0cmluZyBhdHRhY2htZW50IGRhdGEKICAgICAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lICAgIE5hbWUgb2YgdGhlIGF0dGFjaG1lbnQKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVuY29kaW5nICAgIEZpbGUgZW5jb2RpbmcgKHNlZSAkRW5jb2RpbmcpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlICAgICAgICBGaWxlIGV4dGVuc2lvbiAoTUlNRSkgdHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkZGlzcG9zaXRpb24gRGlzcG9zaXRpb24gdG8gdXNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRTdHJpbmdBdHRhY2htZW50KAogICAgICAgICRzdHJpbmcsCiAgICAgICAgJGZpbGVuYW1lLAogICAgICAgICRlbmNvZGluZyA9IHNlbGY6OkVOQ09ESU5HX0JBU0U2NCwKICAgICAgICAkdHlwZSA9ICcnLAogICAgICAgICRkaXNwb3NpdGlvbiA9ICdhdHRhY2htZW50JwogICAgKSB7CiAgICAgICAgLy8gSWYgYSBNSU1FIHR5cGUgaXMgbm90IHNwZWNpZmllZCwgdHJ5IHRvIHdvcmsgaXQgb3V0IGZyb20gdGhlIGZpbGUgbmFtZQogICAgICAgIGlmICgnJyA9PSAkdHlwZSkgewogICAgICAgICAgICAkdHlwZSA9IHN0YXRpYzo6ZmlsZW5hbWVUb1R5cGUoJGZpbGVuYW1lKTsKICAgICAgICB9CiAgICAgICAgLy8gQXBwZW5kIHRvICRhdHRhY2htZW50IGFycmF5CiAgICAgICAgJHRoaXMtPmF0dGFjaG1lbnRbXSA9IFsKICAgICAgICAgICAgMCA9PiAkc3RyaW5nLAogICAgICAgICAgICAxID0+ICRmaWxlbmFtZSwKICAgICAgICAgICAgMiA9PiBiYXNlbmFtZSgkZmlsZW5hbWUpLAogICAgICAgICAgICAzID0+ICRlbmNvZGluZywKICAgICAgICAgICAgNCA9PiAkdHlwZSwKICAgICAgICAgICAgNSA9PiB0cnVlLCAvLyBpc1N0cmluZ0F0dGFjaG1lbnQKICAgICAgICAgICAgNiA9PiAkZGlzcG9zaXRpb24sCiAgICAgICAgICAgIDcgPT4gMCwKICAgICAgICBdOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFuIGVtYmVkZGVkIChpbmxpbmUpIGF0dGFjaG1lbnQgZnJvbSBhIGZpbGUuCiAgICAgKiBUaGlzIGNhbiBpbmNsdWRlIGltYWdlcywgc291bmRzLCBhbmQganVzdCBhYm91dCBhbnkgb3RoZXIgZG9jdW1lbnQgdHlwZS4KICAgICAqIFRoZXNlIGRpZmZlciBmcm9tICdyZWd1bGFyJyBhdHRhY2htZW50cyBpbiB0aGF0IHRoZXkgYXJlIGludGVuZGVkIHRvIGJlCiAgICAgKiBkaXNwbGF5ZWQgaW5saW5lIHdpdGggdGhlIG1lc3NhZ2UsIG5vdCBqdXN0IGF0dGFjaGVkIGZvciBkb3dubG9hZC4KICAgICAqIFRoaXMgaXMgdXNlZCBpbiBIVE1MIG1lc3NhZ2VzIHRoYXQgZW1iZWQgdGhlIGltYWdlcwogICAgICogdGhlIEhUTUwgcmVmZXJzIHRvIHVzaW5nIHRoZSAkY2lkIHZhbHVlLgogICAgICogTmV2ZXIgdXNlIGEgdXNlci1zdXBwbGllZCBwYXRoIHRvIGEgZmlsZSEKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXRoICAgICAgICBQYXRoIHRvIHRoZSBhdHRhY2htZW50CiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgICAgICAgICBDb250ZW50IElEIG9mIHRoZSBhdHRhY2htZW50OyBVc2UgdGhpcyB0byByZWZlcmVuY2UKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBjb250ZW50IHdoZW4gdXNpbmcgYW4gZW1iZWRkZWQgaW1hZ2UgaW4gSFRNTAogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSAgICAgICAgT3ZlcnJpZGVzIHRoZSBhdHRhY2htZW50IG5hbWUKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVuY29kaW5nICAgIEZpbGUgZW5jb2RpbmcgKHNlZSAkRW5jb2RpbmcpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlICAgICAgICBGaWxlIE1JTUUgdHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkZGlzcG9zaXRpb24gRGlzcG9zaXRpb24gdG8gdXNlCiAgICAgKgogICAgICogQHJldHVybiBib29sIFRydWUgb24gc3VjY2Vzc2Z1bGx5IGFkZGluZyBhbiBhdHRhY2htZW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRFbWJlZGRlZEltYWdlKCRwYXRoLCAkY2lkLCAkbmFtZSA9ICcnLCAkZW5jb2RpbmcgPSBzZWxmOjpFTkNPRElOR19CQVNFNjQsICR0eXBlID0gJycsICRkaXNwb3NpdGlvbiA9ICdpbmxpbmUnKQogICAgewogICAgICAgIGlmICghQGlzX2ZpbGUoJHBhdGgpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigkdGhpcy0+bGFuZygnZmlsZV9hY2Nlc3MnKSAuICRwYXRoKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIElmIGEgTUlNRSB0eXBlIGlzIG5vdCBzcGVjaWZpZWQsIHRyeSB0byB3b3JrIGl0IG91dCBmcm9tIHRoZSBmaWxlIG5hbWUKICAgICAgICBpZiAoJycgPT0gJHR5cGUpIHsKICAgICAgICAgICAgJHR5cGUgPSBzdGF0aWM6OmZpbGVuYW1lVG9UeXBlKCRwYXRoKTsKICAgICAgICB9CgogICAgICAgICRmaWxlbmFtZSA9IGJhc2VuYW1lKCRwYXRoKTsKICAgICAgICBpZiAoJycgPT0gJG5hbWUpIHsKICAgICAgICAgICAgJG5hbWUgPSAkZmlsZW5hbWU7CiAgICAgICAgfQoKICAgICAgICAvLyBBcHBlbmQgdG8gJGF0dGFjaG1lbnQgYXJyYXkKICAgICAgICAkdGhpcy0+YXR0YWNobWVudFtdID0gWwogICAgICAgICAgICAwID0+ICRwYXRoLAogICAgICAgICAgICAxID0+ICRmaWxlbmFtZSwKICAgICAgICAgICAgMiA9PiAkbmFtZSwKICAgICAgICAgICAgMyA9PiAkZW5jb2RpbmcsCiAgICAgICAgICAgIDQgPT4gJHR5cGUsCiAgICAgICAgICAgIDUgPT4gZmFsc2UsIC8vIGlzU3RyaW5nQXR0YWNobWVudAogICAgICAgICAgICA2ID0+ICRkaXNwb3NpdGlvbiwKICAgICAgICAgICAgNyA9PiAkY2lkLAogICAgICAgIF07CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFuIGVtYmVkZGVkIHN0cmluZ2lmaWVkIGF0dGFjaG1lbnQuCiAgICAgKiBUaGlzIGNhbiBpbmNsdWRlIGltYWdlcywgc291bmRzLCBhbmQganVzdCBhYm91dCBhbnkgb3RoZXIgZG9jdW1lbnQgdHlwZS4KICAgICAqIElmIHlvdXIgZmlsZW5hbWUgZG9lc24ndCBjb250YWluIGFuIGV4dGVuc2lvbiwgYmUgc3VyZSB0byBzZXQgdGhlICR0eXBlIHRvIGFuIGFwcHJvcHJpYXRlIE1JTUUgdHlwZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzdHJpbmcgICAgICBUaGUgYXR0YWNobWVudCBiaW5hcnkgZGF0YQogICAgICogQHBhcmFtIHN0cmluZyAkY2lkICAgICAgICAgQ29udGVudCBJRCBvZiB0aGUgYXR0YWNobWVudDsgVXNlIHRoaXMgdG8gcmVmZXJlbmNlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgY29udGVudCB3aGVuIHVzaW5nIGFuIGVtYmVkZGVkIGltYWdlIGluIEhUTUwKICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgICAgICAgIEEgZmlsZW5hbWUgZm9yIHRoZSBhdHRhY2htZW50LiBJZiB0aGlzIGNvbnRhaW5zIGFuIGV4dGVuc2lvbiwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUE1haWxlciB3aWxsIGF0dGVtcHQgdG8gc2V0IGEgTUlNRSB0eXBlIGZvciB0aGUgYXR0YWNobWVudC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvciBleGFtcGxlICdmaWxlLmpwZycgd291bGQgZ2V0IGFuICdpbWFnZS9qcGVnJyBNSU1FIHR5cGUuCiAgICAgKiBAcGFyYW0gc3RyaW5nICRlbmNvZGluZyAgICBGaWxlIGVuY29kaW5nIChzZWUgJEVuY29kaW5nKSwgZGVmYXVsdHMgdG8gJ2Jhc2U2NCcKICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgICAgICAgIE1JTUUgdHlwZSAtIHdpbGwgYmUgdXNlZCBpbiBwcmVmZXJlbmNlIHRvIGFueSBhdXRvbWF0aWNhbGx5IGRlcml2ZWQgdHlwZQogICAgICogQHBhcmFtIHN0cmluZyAkZGlzcG9zaXRpb24gRGlzcG9zaXRpb24gdG8gdXNlCiAgICAgKgogICAgICogQHJldHVybiBib29sIFRydWUgb24gc3VjY2Vzc2Z1bGx5IGFkZGluZyBhbiBhdHRhY2htZW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRTdHJpbmdFbWJlZGRlZEltYWdlKAogICAgICAgICRzdHJpbmcsCiAgICAgICAgJGNpZCwKICAgICAgICAkbmFtZSA9ICcnLAogICAgICAgICRlbmNvZGluZyA9IHNlbGY6OkVOQ09ESU5HX0JBU0U2NCwKICAgICAgICAkdHlwZSA9ICcnLAogICAgICAgICRkaXNwb3NpdGlvbiA9ICdpbmxpbmUnCiAgICApIHsKICAgICAgICAvLyBJZiBhIE1JTUUgdHlwZSBpcyBub3Qgc3BlY2lmaWVkLCB0cnkgdG8gd29yayBpdCBvdXQgZnJvbSB0aGUgbmFtZQogICAgICAgIGlmICgnJyA9PSAkdHlwZSBhbmQgIWVtcHR5KCRuYW1lKSkgewogICAgICAgICAgICAkdHlwZSA9IHN0YXRpYzo6ZmlsZW5hbWVUb1R5cGUoJG5hbWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gQXBwZW5kIHRvICRhdHRhY2htZW50IGFycmF5CiAgICAgICAgJHRoaXMtPmF0dGFjaG1lbnRbXSA9IFsKICAgICAgICAgICAgMCA9PiAkc3RyaW5nLAogICAgICAgICAgICAxID0+ICRuYW1lLAogICAgICAgICAgICAyID0+ICRuYW1lLAogICAgICAgICAgICAzID0+ICRlbmNvZGluZywKICAgICAgICAgICAgNCA9PiAkdHlwZSwKICAgICAgICAgICAgNSA9PiB0cnVlLCAvLyBpc1N0cmluZ0F0dGFjaG1lbnQKICAgICAgICAgICAgNiA9PiAkZGlzcG9zaXRpb24sCiAgICAgICAgICAgIDcgPT4gJGNpZCwKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGVtYmVkZGVkIGF0dGFjaG1lbnQgaXMgcHJlc2VudCB3aXRoIHRoaXMgY2lkLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZAogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gY2lkRXhpc3RzKCRjaWQpCiAgICB7CiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmF0dGFjaG1lbnQgYXMgJGF0dGFjaG1lbnQpIHsKICAgICAgICAgICAgaWYgKCdpbmxpbmUnID09ICRhdHRhY2htZW50WzZdIGFuZCAkY2lkID09ICRhdHRhY2htZW50WzddKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gaW5saW5lIGF0dGFjaG1lbnQgaXMgcHJlc2VudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGlubGluZUltYWdlRXhpc3RzKCkKICAgIHsKICAgICAgICBmb3JlYWNoICgkdGhpcy0+YXR0YWNobWVudCBhcyAkYXR0YWNobWVudCkgewogICAgICAgICAgICBpZiAoJ2lubGluZScgPT0gJGF0dGFjaG1lbnRbNl0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbiBhdHRhY2htZW50IChub24taW5saW5lKSBpcyBwcmVzZW50LgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYXR0YWNobWVudEV4aXN0cygpCiAgICB7CiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmF0dGFjaG1lbnQgYXMgJGF0dGFjaG1lbnQpIHsKICAgICAgICAgICAgaWYgKCdhdHRhY2htZW50JyA9PSAkYXR0YWNobWVudFs2XSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoaXMgbWVzc2FnZSBoYXMgYW4gYWx0ZXJuYXRpdmUgYm9keSBzZXQuCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbHRlcm5hdGl2ZUV4aXN0cygpCiAgICB7CiAgICAgICAgcmV0dXJuICFlbXB0eSgkdGhpcy0+QWx0Qm9keSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBxdWV1ZWQgYWRkcmVzc2VzIG9mIGdpdmVuIGtpbmQuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAka2luZCAndG8nLCAnY2MnLCBvciAnYmNjJwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJRdWV1ZWRBZGRyZXNzZXMoJGtpbmQpCiAgICB7CiAgICAgICAgJHRoaXMtPlJlY2lwaWVudHNRdWV1ZSA9IGFycmF5X2ZpbHRlcigKICAgICAgICAgICAgJHRoaXMtPlJlY2lwaWVudHNRdWV1ZSwKICAgICAgICAgICAgZnVuY3Rpb24gKCRwYXJhbXMpIHVzZSAoJGtpbmQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkcGFyYW1zWzBdICE9ICRraW5kOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIENsZWFyIGFsbCBUbyByZWNpcGllbnRzLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJBZGRyZXNzZXMoKQogICAgewogICAgICAgIGZvcmVhY2ggKCR0aGlzLT50byBhcyAkdG8pIHsKICAgICAgICAgICAgdW5zZXQoJHRoaXMtPmFsbF9yZWNpcGllbnRzW3N0cnRvbG93ZXIoJHRvWzBdKV0pOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+dG8gPSBbXTsKICAgICAgICAkdGhpcy0+Y2xlYXJRdWV1ZWRBZGRyZXNzZXMoJ3RvJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBhbGwgQ0MgcmVjaXBpZW50cy4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNsZWFyQ0NzKCkKICAgIHsKICAgICAgICBmb3JlYWNoICgkdGhpcy0+Y2MgYXMgJGNjKSB7CiAgICAgICAgICAgIHVuc2V0KCR0aGlzLT5hbGxfcmVjaXBpZW50c1tzdHJ0b2xvd2VyKCRjY1swXSldKTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPmNjID0gW107CiAgICAgICAgJHRoaXMtPmNsZWFyUXVldWVkQWRkcmVzc2VzKCdjYycpOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgYWxsIEJDQyByZWNpcGllbnRzLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJCQ0NzKCkKICAgIHsKICAgICAgICBmb3JlYWNoICgkdGhpcy0+YmNjIGFzICRiY2MpIHsKICAgICAgICAgICAgdW5zZXQoJHRoaXMtPmFsbF9yZWNpcGllbnRzW3N0cnRvbG93ZXIoJGJjY1swXSldKTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPmJjYyA9IFtdOwogICAgICAgICR0aGlzLT5jbGVhclF1ZXVlZEFkZHJlc3NlcygnYmNjJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBhbGwgUmVwbHlUbyByZWNpcGllbnRzLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJSZXBseVRvcygpCiAgICB7CiAgICAgICAgJHRoaXMtPlJlcGx5VG8gPSBbXTsKICAgICAgICAkdGhpcy0+UmVwbHlUb1F1ZXVlID0gW107CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBhbGwgcmVjaXBpZW50IHR5cGVzLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJBbGxSZWNpcGllbnRzKCkKICAgIHsKICAgICAgICAkdGhpcy0+dG8gPSBbXTsKICAgICAgICAkdGhpcy0+Y2MgPSBbXTsKICAgICAgICAkdGhpcy0+YmNjID0gW107CiAgICAgICAgJHRoaXMtPmFsbF9yZWNpcGllbnRzID0gW107CiAgICAgICAgJHRoaXMtPlJlY2lwaWVudHNRdWV1ZSA9IFtdOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgYWxsIGZpbGVzeXN0ZW0sIHN0cmluZywgYW5kIGJpbmFyeSBhdHRhY2htZW50cy4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNsZWFyQXR0YWNobWVudHMoKQogICAgewogICAgICAgICR0aGlzLT5hdHRhY2htZW50ID0gW107CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBhbGwgY3VzdG9tIGhlYWRlcnMuCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjbGVhckN1c3RvbUhlYWRlcnMoKQogICAgewogICAgICAgICR0aGlzLT5DdXN0b21IZWFkZXIgPSBbXTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBlcnJvciBjb250YWluZXIuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbXNnCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZXRFcnJvcigkbXNnKQogICAgewogICAgICAgICsrJHRoaXMtPmVycm9yX2NvdW50OwogICAgICAgIGlmICgnc210cCcgPT0gJHRoaXMtPk1haWxlciBhbmQgbnVsbCAhPT0gJHRoaXMtPnNtdHApIHsKICAgICAgICAgICAgJGxhc3RlcnJvciA9ICR0aGlzLT5zbXRwLT5nZXRFcnJvcigpOwogICAgICAgICAgICBpZiAoIWVtcHR5KCRsYXN0ZXJyb3JbJ2Vycm9yJ10pKSB7CiAgICAgICAgICAgICAgICAkbXNnIC49ICR0aGlzLT5sYW5nKCdzbXRwX2Vycm9yJykgLiAkbGFzdGVycm9yWydlcnJvciddOwogICAgICAgICAgICAgICAgaWYgKCFlbXB0eSgkbGFzdGVycm9yWydkZXRhaWwnXSkpIHsKICAgICAgICAgICAgICAgICAgICAkbXNnIC49ICcgRGV0YWlsOiAnIC4gJGxhc3RlcnJvclsnZGV0YWlsJ107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KCRsYXN0ZXJyb3JbJ3NtdHBfY29kZSddKSkgewogICAgICAgICAgICAgICAgICAgICRtc2cgLj0gJyBTTVRQIGNvZGU6ICcgLiAkbGFzdGVycm9yWydzbXRwX2NvZGUnXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZW1wdHkoJGxhc3RlcnJvclsnc210cF9jb2RlX2V4J10pKSB7CiAgICAgICAgICAgICAgICAgICAgJG1zZyAuPSAnIEFkZGl0aW9uYWwgU01UUCBpbmZvOiAnIC4gJGxhc3RlcnJvclsnc210cF9jb2RlX2V4J107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHRoaXMtPkVycm9ySW5mbyA9ICRtc2c7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gUkZDIDgyMiBmb3JtYXR0ZWQgZGF0ZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJmY0RhdGUoKQogICAgewogICAgICAgIC8vIFNldCB0aGUgdGltZSB6b25lIHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGlzIHRvIGF2b2lkIDUwMCBlcnJvcnMKICAgICAgICAvLyBXaWxsIGRlZmF1bHQgdG8gVVRDIGlmIGl0J3Mgbm90IHNldCBwcm9wZXJseSBpbiBwaHAuaW5pCiAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldChAZGF0ZV9kZWZhdWx0X3RpbWV6b25lX2dldCgpKTsKCiAgICAgICAgcmV0dXJuIGRhdGUoJ0QsIGogTSBZIEg6aTpzIE8nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2VydmVyIGhvc3RuYW1lLgogICAgICogUmV0dXJucyAnbG9jYWxob3N0LmxvY2FsZG9tYWluJyBpZiB1bmtub3duLgogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZXJ2ZXJIb3N0bmFtZSgpCiAgICB7CiAgICAgICAgJHJlc3VsdCA9ICcnOwogICAgICAgIGlmICghZW1wdHkoJHRoaXMtPkhvc3RuYW1lKSkgewogICAgICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPkhvc3RuYW1lOwogICAgICAgIH0gZWxzZWlmIChpc3NldCgkX1NFUlZFUikgYW5kIGFycmF5X2tleV9leGlzdHMoJ1NFUlZFUl9OQU1FJywgJF9TRVJWRVIpKSB7CiAgICAgICAgICAgICRyZXN1bHQgPSAkX1NFUlZFUlsnU0VSVkVSX05BTUUnXTsKICAgICAgICB9IGVsc2VpZiAoZnVuY3Rpb25fZXhpc3RzKCdnZXRob3N0bmFtZScpIGFuZCBnZXRob3N0bmFtZSgpICE9PSBmYWxzZSkgewogICAgICAgICAgICAkcmVzdWx0ID0gZ2V0aG9zdG5hbWUoKTsKICAgICAgICB9IGVsc2VpZiAocGhwX3VuYW1lKCduJykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICRyZXN1bHQgPSBwaHBfdW5hbWUoJ24nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzdGF0aWM6OmlzVmFsaWRIb3N0KCRyZXN1bHQpKSB7CiAgICAgICAgICAgIHJldHVybiAnbG9jYWxob3N0LmxvY2FsZG9tYWluJzsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRhdGUgd2hldGhlciBhIHN0cmluZyBjb250YWlucyBhIHZhbGlkIHZhbHVlIHRvIHVzZSBhcyBhIGhvc3RuYW1lIG9yIElQIGFkZHJlc3MuCiAgICAgKiBJUHY2IGFkZHJlc3NlcyBtdXN0IGluY2x1ZGUgW10sIGUuZy4gYFs6OjFdYCwgbm90IGp1c3QgYDo6MWAuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaG9zdCBUaGUgaG9zdCBuYW1lIG9yIElQIGFkZHJlc3MgdG8gY2hlY2sKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1ZhbGlkSG9zdCgkaG9zdCkKICAgIHsKICAgICAgICAvL1NpbXBsZSBzeW50YXggbGltaXRzCiAgICAgICAgaWYgKGVtcHR5KCRob3N0KQogICAgICAgICAgICBvciAhaXNfc3RyaW5nKCRob3N0KQogICAgICAgICAgICBvciBzdHJsZW4oJGhvc3QpID4gMjU2CiAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgLy9Mb29rcyBsaWtlIGEgYnJhY2tldGVkIElQdjYgYWRkcmVzcwogICAgICAgIGlmICh0cmltKCRob3N0LCAnW10nKSAhPSAkaG9zdCkgewogICAgICAgICAgICByZXR1cm4gKGJvb2wpIGZpbHRlcl92YXIodHJpbSgkaG9zdCwgJ1tdJyksIEZJTFRFUl9WQUxJREFURV9JUCwgRklMVEVSX0ZMQUdfSVBWNik7CiAgICAgICAgfQogICAgICAgIC8vSWYgcmVtb3ZpbmcgYWxsIHRoZSBkb3RzIHJlc3VsdHMgaW4gYSBudW1lcmljIHN0cmluZywgaXQgbXVzdCBiZSBhbiBJUHY0IGFkZHJlc3MuCiAgICAgICAgLy9OZWVkIHRvIGNoZWNrIHRoaXMgZmlyc3QgYmVjYXVzZSBvdGhlcndpc2UgdGhpbmdzIGxpa2UgYDk5OS4wLjAuMGAgYXJlIGNvbnNpZGVyZWQgdmFsaWQgaG9zdCBuYW1lcwogICAgICAgIGlmIChpc19udW1lcmljKHN0cl9yZXBsYWNlKCcuJywgJycsICRob3N0KSkpIHsKICAgICAgICAgICAgLy9JcyBpdCBhIHZhbGlkIElQdjQgYWRkcmVzcz8KICAgICAgICAgICAgcmV0dXJuIChib29sKSBmaWx0ZXJfdmFyKCRob3N0LCBGSUxURVJfVkFMSURBVEVfSVAsIEZJTFRFUl9GTEFHX0lQVjQpOwogICAgICAgIH0KICAgICAgICBpZiAoZmlsdGVyX3ZhcignaHR0cDovLycgLiAkaG9zdCwgRklMVEVSX1ZBTElEQVRFX1VSTCkpIHsKICAgICAgICAgICAgLy9JcyBpdCBhIHN5bnRhY3RpY2FsbHkgdmFsaWQgaG9zdG5hbWU/CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGFuIGVycm9yIG1lc3NhZ2UgaW4gdGhlIGN1cnJlbnQgbGFuZ3VhZ2UuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAka2V5CiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGxhbmcoJGtleSkKICAgIHsKICAgICAgICBpZiAoY291bnQoJHRoaXMtPmxhbmd1YWdlKSA8IDEpIHsKICAgICAgICAgICAgJHRoaXMtPnNldExhbmd1YWdlKCdlbicpOyAvLyBzZXQgdGhlIGRlZmF1bHQgbGFuZ3VhZ2UKICAgICAgICB9CgogICAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRrZXksICR0aGlzLT5sYW5ndWFnZSkpIHsKICAgICAgICAgICAgaWYgKCdzbXRwX2Nvbm5lY3RfZmFpbGVkJyA9PSAka2V5KSB7CiAgICAgICAgICAgICAgICAvL0luY2x1ZGUgYSBsaW5rIHRvIHRyb3VibGVzaG9vdGluZyBkb2NzIG9uIFNNVFAgY29ubmVjdGlvbiBmYWlsdXJlCiAgICAgICAgICAgICAgICAvL3RoaXMgaXMgYnkgZmFyIHRoZSBiaWdnZXN0IGNhdXNlIG9mIHN1cHBvcnQgcXVlc3Rpb25zCiAgICAgICAgICAgICAgICAvL2J1dCBpdCdzIHVzdWFsbHkgbm90IFBIUE1haWxlcidzIGZhdWx0LgogICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5sYW5ndWFnZVska2V5XSAuICcgaHR0cHM6Ly9naXRodWIuY29tL1BIUE1haWxlci9QSFBNYWlsZXIvd2lraS9Ucm91Ymxlc2hvb3RpbmcnOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmxhbmd1YWdlWyRrZXldOwogICAgICAgIH0KCiAgICAgICAgLy9SZXR1cm4gdGhlIGtleSBhcyBhIGZhbGxiYWNrCiAgICAgICAgcmV0dXJuICRrZXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbiBlcnJvciBvY2N1cnJlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBhbiBlcnJvciBkaWQgb2NjdXIKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGlzRXJyb3IoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZXJyb3JfY291bnQgPiAwOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgY3VzdG9tIGhlYWRlci4KICAgICAqICRuYW1lIHZhbHVlIGNhbiBiZSBvdmVybG9hZGVkIHRvIGNvbnRhaW4KICAgICAqIGJvdGggaGVhZGVyIG5hbWUgYW5kIHZhbHVlIChuYW1lOnZhbHVlKS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgJG5hbWUgIEN1c3RvbSBoZWFkZXIgbmFtZQogICAgICogQHBhcmFtIHN0cmluZ3xudWxsICR2YWx1ZSBIZWFkZXIgdmFsdWUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFkZEN1c3RvbUhlYWRlcigkbmFtZSwgJHZhbHVlID0gbnVsbCkKICAgIHsKICAgICAgICBpZiAobnVsbCA9PT0gJHZhbHVlKSB7CiAgICAgICAgICAgIC8vIFZhbHVlIHBhc3NlZCBpbiBhcyBuYW1lOnZhbHVlCiAgICAgICAgICAgICR0aGlzLT5DdXN0b21IZWFkZXJbXSA9IGV4cGxvZGUoJzonLCAkbmFtZSwgMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPkN1c3RvbUhlYWRlcltdID0gWyRuYW1lLCAkdmFsdWVdOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIGN1c3RvbSBoZWFkZXJzLgogICAgICoKICAgICAqIEByZXR1cm4gYXJyYXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEN1c3RvbUhlYWRlcnMoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Q3VzdG9tSGVhZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbWVzc2FnZSBib2R5IGZyb20gYW4gSFRNTCBzdHJpbmcuCiAgICAgKiBBdXRvbWF0aWNhbGx5IGlubGluZXMgaW1hZ2VzIGFuZCBjcmVhdGVzIGEgcGxhaW4tdGV4dCB2ZXJzaW9uIGJ5IGNvbnZlcnRpbmcgdGhlIEhUTUwsCiAgICAgKiBvdmVyd3JpdGluZyBhbnkgZXhpc3RpbmcgdmFsdWVzIGluIEJvZHkgYW5kIEFsdEJvZHkuCiAgICAgKiBEbyBub3Qgc291cmNlICRtZXNzYWdlIGNvbnRlbnQgZnJvbSB1c2VyIGlucHV0IQogICAgICogJGJhc2VkaXIgaXMgcHJlcGVuZGVkIHdoZW4gaGFuZGxpbmcgcmVsYXRpdmUgVVJMcywgZS5nLiA8aW1nIHNyYz0iL2ltYWdlcy9hLnBuZyI+IGFuZCBtdXN0IG5vdCBiZSBlbXB0eQogICAgICogd2lsbCBsb29rIGZvciBhbiBpbWFnZSBmaWxlIGluICRiYXNlZGlyL2ltYWdlcy9hLnBuZyBhbmQgY29udmVydCBpdCB0byBpbmxpbmUuCiAgICAgKiBJZiB5b3UgZG9uJ3QgcHJvdmlkZSBhICRiYXNlZGlyLCByZWxhdGl2ZSBwYXRocyB3aWxsIGJlIGxlZnQgdW50b3VjaGVkIChhbmQgdGh1cyBwcm9iYWJseSBicmVhayBpbiBlbWFpbCkKICAgICAqIENvbnZlcnRzIGRhdGEtdXJpIGltYWdlcyBpbnRvIGVtYmVkZGVkIGF0dGFjaG1lbnRzLgogICAgICogSWYgeW91IGRvbid0IHdhbnQgdG8gYXBwbHkgdGhlc2UgdHJhbnNmb3JtYXRpb25zIHRvIHlvdXIgSFRNTCwganVzdCBzZXQgQm9keSBhbmQgQWx0Qm9keSBkaXJlY3RseS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgICAkbWVzc2FnZSAgSFRNTCBtZXNzYWdlIHN0cmluZwogICAgICogQHBhcmFtIHN0cmluZyAgICAgICAgJGJhc2VkaXIgIEFic29sdXRlIHBhdGggdG8gYSBiYXNlIGRpcmVjdG9yeSB0byBwcmVwZW5kIHRvIHJlbGF0aXZlIHBhdGhzIHRvIGltYWdlcwogICAgICogQHBhcmFtIGJvb2x8Y2FsbGFibGUgJGFkdmFuY2VkIFdoZXRoZXIgdG8gdXNlIHRoZSBpbnRlcm5hbCBIVE1MIHRvIHRleHQgY29udmVydGVyCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgeW91ciBvd24gY3VzdG9tIGNvbnZlcnRlciBAc2VlIFBIUE1haWxlcjo6aHRtbDJ0ZXh0KCkKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZyAkbWVzc2FnZSBUaGUgdHJhbnNmb3JtZWQgbWVzc2FnZSBCb2R5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBtc2dIVE1MKCRtZXNzYWdlLCAkYmFzZWRpciA9ICcnLCAkYWR2YW5jZWQgPSBmYWxzZSkKICAgIHsKICAgICAgICBwcmVnX21hdGNoX2FsbCgnLyhzcmN8YmFja2dyb3VuZCk9WyJcJ10oLiopWyJcJ10vVWknLCAkbWVzc2FnZSwgJGltYWdlcyk7CiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoMiwgJGltYWdlcykpIHsKICAgICAgICAgICAgaWYgKHN0cmxlbigkYmFzZWRpcikgPiAxICYmICcvJyAhPSBzdWJzdHIoJGJhc2VkaXIsIC0xKSkgewogICAgICAgICAgICAgICAgLy8gRW5zdXJlICRiYXNlZGlyIGhhcyBhIHRyYWlsaW5nIC8KICAgICAgICAgICAgICAgICRiYXNlZGlyIC49ICcvJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3JlYWNoICgkaW1hZ2VzWzJdIGFzICRpbWdpbmRleCA9PiAkdXJsKSB7CiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGRhdGEgVVJJcyBpbnRvIGVtYmVkZGVkIGltYWdlcwogICAgICAgICAgICAgICAgLy9lLmcuICJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PSIKICAgICAgICAgICAgICAgIGlmIChwcmVnX21hdGNoKCcjXmRhdGE6KGltYWdlLyg/OmpwZT9nfGdpZnxwbmcpKTs/KGJhc2U2NCk/LCguKykjJywgJHVybCwgJG1hdGNoKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCgkbWF0Y2gpID09IDQgYW5kIHN0YXRpYzo6RU5DT0RJTkdfQkFTRTY0ID09ICRtYXRjaFsyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAkZGF0YSA9IGJhc2U2NF9kZWNvZGUoJG1hdGNoWzNdKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJycgPT0gJG1hdGNoWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhID0gcmF3dXJsZGVjb2RlKCRtYXRjaFszXSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3QgcmVjb2duaXNlZCBzbyBsZWF2ZSBpdCBhbG9uZQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy9IYXNoIHRoZSBkZWNvZGVkIGRhdGEsIG5vdCB0aGUgVVJMIHNvIHRoYXQgdGhlIHNhbWUgZGF0YS1VUkkgaW1hZ2UgdXNlZCBpbiBtdWx0aXBsZSBwbGFjZXMKICAgICAgICAgICAgICAgICAgICAvL3dpbGwgb25seSBiZSBlbWJlZGRlZCBvbmNlLCBldmVuIGlmIGl0IHVzZWQgYSBkaWZmZXJlbnQgZW5jb2RpbmcKICAgICAgICAgICAgICAgICAgICAkY2lkID0gaGFzaCgnc2hhMjU2JywgJGRhdGEpIC4gJ0BwaHBtYWlsZXIuMCc7IC8vIFJGQzIzOTIgUyAyCgogICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMtPmNpZEV4aXN0cygkY2lkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+YWRkU3RyaW5nRW1iZWRkZWRJbWFnZSgkZGF0YSwgJGNpZCwgJ2VtYmVkJyAuICRpbWdpbmRleCwgc3RhdGljOjpFTkNPRElOR19CQVNFNjQsICRtYXRjaFsxXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRtZXNzYWdlID0gc3RyX3JlcGxhY2UoCiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZXNbMF1bJGltZ2luZGV4XSwKICAgICAgICAgICAgICAgICAgICAgICAgJGltYWdlc1sxXVskaW1naW5kZXhdIC4gJz0iY2lkOicgLiAkY2lkIC4gJyInLAogICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoLy8gT25seSBwcm9jZXNzIHJlbGF0aXZlIFVSTHMgaWYgYSBiYXNlZGlyIGlzIHByb3ZpZGVkIChpLmUuIG5vIGFic29sdXRlIGxvY2FsIHBhdGhzKQogICAgICAgICAgICAgICAgICAgICFlbXB0eSgkYmFzZWRpcikKICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgVVJMcyBjb250YWluaW5nIHBhcmVudCBkaXIgdHJhdmVyc2FsICguLikKICAgICAgICAgICAgICAgICAgICBhbmQgKHN0cnBvcygkdXJsLCAnLi4nKSA9PT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNoYW5nZSB1cmxzIHRoYXQgYXJlIGFscmVhZHkgaW5saW5lIGltYWdlcwogICAgICAgICAgICAgICAgICAgIGFuZCAwICE9PSBzdHJwb3MoJHVybCwgJ2NpZDonKQogICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjaGFuZ2UgYWJzb2x1dGUgVVJMcywgaW5jbHVkaW5nIGFub255bW91cyBwcm90b2NvbAogICAgICAgICAgICAgICAgICAgIGFuZCAhcHJlZ19tYXRjaCgnI15bYS16XVthLXowLTkrLi1dKjo/Ly8jaScsICR1cmwpCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAkZmlsZW5hbWUgPSBiYXNlbmFtZSgkdXJsKTsKICAgICAgICAgICAgICAgICAgICAkZGlyZWN0b3J5ID0gZGlybmFtZSgkdXJsKTsKICAgICAgICAgICAgICAgICAgICBpZiAoJy4nID09ICRkaXJlY3RvcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGRpcmVjdG9yeSA9ICcnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkY2lkID0gaGFzaCgnc2hhMjU2JywgJHVybCkgLiAnQHBocG1haWxlci4wJzsgLy8gUkZDMjM5MiBTIDIKICAgICAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCRiYXNlZGlyKSA+IDEgYW5kICcvJyAhPSBzdWJzdHIoJGJhc2VkaXIsIC0xKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkYmFzZWRpciAuPSAnLyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJGRpcmVjdG9yeSkgPiAxIGFuZCAnLycgIT0gc3Vic3RyKCRkaXJlY3RvcnksIC0xKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkZGlyZWN0b3J5IC49ICcvJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5hZGRFbWJlZGRlZEltYWdlKAogICAgICAgICAgICAgICAgICAgICAgICAkYmFzZWRpciAuICRkaXJlY3RvcnkgLiAkZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICRjaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICRmaWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljOjpFTkNPRElOR19CQVNFNjQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYzo6X21pbWVfdHlwZXMoKHN0cmluZykgc3RhdGljOjptYl9wYXRoaW5mbygkZmlsZW5hbWUsIFBBVEhJTkZPX0VYVEVOU0lPTikpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZSA9IHByZWdfcmVwbGFjZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcvJyAuICRpbWFnZXNbMV1bJGltZ2luZGV4XSAuICc9WyJcJ10nIC4gcHJlZ19xdW90ZSgkdXJsLCAnLycpIC4gJ1siXCddL1VpJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZXNbMV1bJGltZ2luZGV4XSAuICc9ImNpZDonIC4gJGNpZCAuICciJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICR0aGlzLT5pc0hUTUwodHJ1ZSk7CiAgICAgICAgLy8gQ29udmVydCBhbGwgbWVzc2FnZSBib2R5IGxpbmUgYnJlYWtzIHRvIExFLCBtYWtlcyBxdW90ZWQtcHJpbnRhYmxlIGVuY29kaW5nIHdvcmsgbXVjaCBiZXR0ZXIKICAgICAgICAkdGhpcy0+Qm9keSA9IHN0YXRpYzo6bm9ybWFsaXplQnJlYWtzKCRtZXNzYWdlKTsKICAgICAgICAkdGhpcy0+QWx0Qm9keSA9IHN0YXRpYzo6bm9ybWFsaXplQnJlYWtzKCR0aGlzLT5odG1sMnRleHQoJG1lc3NhZ2UsICRhZHZhbmNlZCkpOwogICAgICAgIGlmICghJHRoaXMtPmFsdGVybmF0aXZlRXhpc3RzKCkpIHsKICAgICAgICAgICAgJHRoaXMtPkFsdEJvZHkgPSAnVGhpcyBpcyBhbiBIVE1MLW9ubHkgbWVzc2FnZS4gVG8gdmlldyBpdCwgYWN0aXZhdGUgSFRNTCBpbiB5b3VyIGVtYWlsIGFwcGxpY2F0aW9uLicKICAgICAgICAgICAgICAgIC4gc3RhdGljOjokTEU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHRoaXMtPkJvZHk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IGFuIEhUTUwgc3RyaW5nIGludG8gcGxhaW4gdGV4dC4KICAgICAqIFRoaXMgaXMgdXNlZCBieSBtc2dIVE1MKCkuCiAgICAgKiBOb3RlIC0gb2xkZXIgdmVyc2lvbnMgb2YgdGhpcyBmdW5jdGlvbiB1c2VkIGEgYnVuZGxlZCBhZHZhbmNlZCBjb252ZXJ0ZXIKICAgICAqIHdoaWNoIHdhcyByZW1vdmVkIGZvciBsaWNlbnNlIHJlYXNvbnMgaW4gIzIzMi4KICAgICAqIEV4YW1wbGUgdXNhZ2U6CiAgICAgKgogICAgICogYGBgcGhwCiAgICAgKiAvLyBVc2UgZGVmYXVsdCBjb252ZXJzaW9uCiAgICAgKiAkcGxhaW4gPSAkbWFpbC0+aHRtbDJ0ZXh0KCRodG1sKTsKICAgICAqIC8vIFVzZSB5b3VyIG93biBjdXN0b20gY29udmVydGVyCiAgICAgKiAkcGxhaW4gPSAkbWFpbC0+aHRtbDJ0ZXh0KCRodG1sLCBmdW5jdGlvbigkaHRtbCkgewogICAgICogICAgICRjb252ZXJ0ZXIgPSBuZXcgTXlIdG1sMnRleHQoJGh0bWwpOwogICAgICogICAgIHJldHVybiAkY29udmVydGVyLT5nZXRfdGV4dCgpOwogICAgICogfSk7CiAgICAgKiBgYGAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICAgICAkaHRtbCAgICAgVGhlIEhUTUwgdGV4dCB0byBjb252ZXJ0CiAgICAgKiBAcGFyYW0gYm9vbHxjYWxsYWJsZSAkYWR2YW5jZWQgQW55IGJvb2xlYW4gdmFsdWUgdG8gdXNlIHRoZSBpbnRlcm5hbCBjb252ZXJ0ZXIsCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgcHJvdmlkZSB5b3VyIG93biBjYWxsYWJsZSBmb3IgY3VzdG9tIGNvbnZlcnNpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaHRtbDJ0ZXh0KCRodG1sLCAkYWR2YW5jZWQgPSBmYWxzZSkKICAgIHsKICAgICAgICBpZiAoaXNfY2FsbGFibGUoJGFkdmFuY2VkKSkgewogICAgICAgICAgICByZXR1cm4gY2FsbF91c2VyX2Z1bmMoJGFkdmFuY2VkLCAkaHRtbCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaHRtbF9lbnRpdHlfZGVjb2RlKAogICAgICAgICAgICB0cmltKHN0cmlwX3RhZ3MocHJlZ19yZXBsYWNlKCcvPChoZWFkfHRpdGxlfHN0eWxlfHNjcmlwdClbXj5dKj4uKj88XC9cXDE+L3NpJywgJycsICRodG1sKSkpLAogICAgICAgICAgICBFTlRfUVVPVEVTLAogICAgICAgICAgICAkdGhpcy0+Q2hhclNldAogICAgICAgICk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIE1JTUUgdHlwZSBmb3IgYSBmaWxlIGV4dGVuc2lvbi4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRleHQgRmlsZSBleHRlbnNpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZyBNSU1FIHR5cGUgb2YgZmlsZQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIF9taW1lX3R5cGVzKCRleHQgPSAnJykKICAgIHsKICAgICAgICAkbWltZXMgPSBbCiAgICAgICAgICAgICd4bCcgPT4gJ2FwcGxpY2F0aW9uL2V4Y2VsJywKICAgICAgICAgICAgJ2pzJyA9PiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsCiAgICAgICAgICAgICdocXgnID0+ICdhcHBsaWNhdGlvbi9tYWMtYmluaGV4NDAnLAogICAgICAgICAgICAnY3B0JyA9PiAnYXBwbGljYXRpb24vbWFjLWNvbXBhY3Rwcm8nLAogICAgICAgICAgICAnYmluJyA9PiAnYXBwbGljYXRpb24vbWFjYmluYXJ5JywKICAgICAgICAgICAgJ2RvYycgPT4gJ2FwcGxpY2F0aW9uL21zd29yZCcsCiAgICAgICAgICAgICd3b3JkJyA9PiAnYXBwbGljYXRpb24vbXN3b3JkJywKICAgICAgICAgICAgJ3hsc3gnID0+ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsCiAgICAgICAgICAgICd4bHR4JyA9PiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwudGVtcGxhdGUnLAogICAgICAgICAgICAncG90eCcgPT4gJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC50ZW1wbGF0ZScsCiAgICAgICAgICAgICdwcHN4JyA9PiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnNsaWRlc2hvdycsCiAgICAgICAgICAgICdwcHR4JyA9PiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnByZXNlbnRhdGlvbicsCiAgICAgICAgICAgICdzbGR4JyA9PiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnNsaWRlJywKICAgICAgICAgICAgJ2RvY3gnID0+ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCcsCiAgICAgICAgICAgICdkb3R4JyA9PiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwudGVtcGxhdGUnLAogICAgICAgICAgICAneGxhbScgPT4gJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5hZGRpbi5tYWNyb0VuYWJsZWQuMTInLAogICAgICAgICAgICAneGxzYicgPT4gJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9FbmFibGVkLjEyJywKICAgICAgICAgICAgJ2NsYXNzJyA9PiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgICAgICAgJ2RsbCcgPT4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICAgICAgICdkbXMnID0+ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLAogICAgICAgICAgICAnZXhlJyA9PiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgICAgICAgJ2xoYScgPT4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICAgICAgICdsemgnID0+ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLAogICAgICAgICAgICAncHNkJyA9PiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgICAgICAgJ3NlYScgPT4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICAgICAgICdzbycgPT4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICAgICAgICdvZGEnID0+ICdhcHBsaWNhdGlvbi9vZGEnLAogICAgICAgICAgICAncGRmJyA9PiAnYXBwbGljYXRpb24vcGRmJywKICAgICAgICAgICAgJ2FpJyA9PiAnYXBwbGljYXRpb24vcG9zdHNjcmlwdCcsCiAgICAgICAgICAgICdlcHMnID0+ICdhcHBsaWNhdGlvbi9wb3N0c2NyaXB0JywKICAgICAgICAgICAgJ3BzJyA9PiAnYXBwbGljYXRpb24vcG9zdHNjcmlwdCcsCiAgICAgICAgICAgICdzbWknID0+ICdhcHBsaWNhdGlvbi9zbWlsJywKICAgICAgICAgICAgJ3NtaWwnID0+ICdhcHBsaWNhdGlvbi9zbWlsJywKICAgICAgICAgICAgJ21pZicgPT4gJ2FwcGxpY2F0aW9uL3ZuZC5taWYnLAogICAgICAgICAgICAneGxzJyA9PiAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJywKICAgICAgICAgICAgJ3BwdCcgPT4gJ2FwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50JywKICAgICAgICAgICAgJ3dieG1sJyA9PiAnYXBwbGljYXRpb24vdm5kLndhcC53YnhtbCcsCiAgICAgICAgICAgICd3bWxjJyA9PiAnYXBwbGljYXRpb24vdm5kLndhcC53bWxjJywKICAgICAgICAgICAgJ2RjcicgPT4gJ2FwcGxpY2F0aW9uL3gtZGlyZWN0b3InLAogICAgICAgICAgICAnZGlyJyA9PiAnYXBwbGljYXRpb24veC1kaXJlY3RvcicsCiAgICAgICAgICAgICdkeHInID0+ICdhcHBsaWNhdGlvbi94LWRpcmVjdG9yJywKICAgICAgICAgICAgJ2R2aScgPT4gJ2FwcGxpY2F0aW9uL3gtZHZpJywKICAgICAgICAgICAgJ2d0YXInID0+ICdhcHBsaWNhdGlvbi94LWd0YXInLAogICAgICAgICAgICAncGhwMycgPT4gJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgICAgICAgJ3BocDQnID0+ICdhcHBsaWNhdGlvbi94LWh0dHBkLXBocCcsCiAgICAgICAgICAgICdwaHAnID0+ICdhcHBsaWNhdGlvbi94LWh0dHBkLXBocCcsCiAgICAgICAgICAgICdwaHRtbCcgPT4gJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgICAgICAgJ3BocHMnID0+ICdhcHBsaWNhdGlvbi94LWh0dHBkLXBocC1zb3VyY2UnLAogICAgICAgICAgICAnc3dmJyA9PiAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnLAogICAgICAgICAgICAnc2l0JyA9PiAnYXBwbGljYXRpb24veC1zdHVmZml0JywKICAgICAgICAgICAgJ3RhcicgPT4gJ2FwcGxpY2F0aW9uL3gtdGFyJywKICAgICAgICAgICAgJ3RneicgPT4gJ2FwcGxpY2F0aW9uL3gtdGFyJywKICAgICAgICAgICAgJ3hodCcgPT4gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcsCiAgICAgICAgICAgICd4aHRtbCcgPT4gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcsCiAgICAgICAgICAgICd6aXAnID0+ICdhcHBsaWNhdGlvbi96aXAnLAogICAgICAgICAgICAnbWlkJyA9PiAnYXVkaW8vbWlkaScsCiAgICAgICAgICAgICdtaWRpJyA9PiAnYXVkaW8vbWlkaScsCiAgICAgICAgICAgICdtcDInID0+ICdhdWRpby9tcGVnJywKICAgICAgICAgICAgJ21wMycgPT4gJ2F1ZGlvL21wZWcnLAogICAgICAgICAgICAnbTRhJyA9PiAnYXVkaW8vbXA0JywKICAgICAgICAgICAgJ21wZ2EnID0+ICdhdWRpby9tcGVnJywKICAgICAgICAgICAgJ2FpZicgPT4gJ2F1ZGlvL3gtYWlmZicsCiAgICAgICAgICAgICdhaWZjJyA9PiAnYXVkaW8veC1haWZmJywKICAgICAgICAgICAgJ2FpZmYnID0+ICdhdWRpby94LWFpZmYnLAogICAgICAgICAgICAncmFtJyA9PiAnYXVkaW8veC1wbi1yZWFsYXVkaW8nLAogICAgICAgICAgICAncm0nID0+ICdhdWRpby94LXBuLXJlYWxhdWRpbycsCiAgICAgICAgICAgICdycG0nID0+ICdhdWRpby94LXBuLXJlYWxhdWRpby1wbHVnaW4nLAogICAgICAgICAgICAncmEnID0+ICdhdWRpby94LXJlYWxhdWRpbycsCiAgICAgICAgICAgICd3YXYnID0+ICdhdWRpby94LXdhdicsCiAgICAgICAgICAgICdta2EnID0+ICdhdWRpby94LW1hdHJvc2thJywKICAgICAgICAgICAgJ2JtcCcgPT4gJ2ltYWdlL2JtcCcsCiAgICAgICAgICAgICdnaWYnID0+ICdpbWFnZS9naWYnLAogICAgICAgICAgICAnanBlZycgPT4gJ2ltYWdlL2pwZWcnLAogICAgICAgICAgICAnanBlJyA9PiAnaW1hZ2UvanBlZycsCiAgICAgICAgICAgICdqcGcnID0+ICdpbWFnZS9qcGVnJywKICAgICAgICAgICAgJ3BuZycgPT4gJ2ltYWdlL3BuZycsCiAgICAgICAgICAgICd0aWZmJyA9PiAnaW1hZ2UvdGlmZicsCiAgICAgICAgICAgICd0aWYnID0+ICdpbWFnZS90aWZmJywKICAgICAgICAgICAgJ3dlYnAnID0+ICdpbWFnZS93ZWJwJywKICAgICAgICAgICAgJ2hlaWYnID0+ICdpbWFnZS9oZWlmJywKICAgICAgICAgICAgJ2hlaWZzJyA9PiAnaW1hZ2UvaGVpZi1zZXF1ZW5jZScsCiAgICAgICAgICAgICdoZWljJyA9PiAnaW1hZ2UvaGVpYycsCiAgICAgICAgICAgICdoZWljcycgPT4gJ2ltYWdlL2hlaWMtc2VxdWVuY2UnLAogICAgICAgICAgICAnZW1sJyA9PiAnbWVzc2FnZS9yZmM4MjInLAogICAgICAgICAgICAnY3NzJyA9PiAndGV4dC9jc3MnLAogICAgICAgICAgICAnaHRtbCcgPT4gJ3RleHQvaHRtbCcsCiAgICAgICAgICAgICdodG0nID0+ICd0ZXh0L2h0bWwnLAogICAgICAgICAgICAnc2h0bWwnID0+ICd0ZXh0L2h0bWwnLAogICAgICAgICAgICAnbG9nJyA9PiAndGV4dC9wbGFpbicsCiAgICAgICAgICAgICd0ZXh0JyA9PiAndGV4dC9wbGFpbicsCiAgICAgICAgICAgICd0eHQnID0+ICd0ZXh0L3BsYWluJywKICAgICAgICAgICAgJ3J0eCcgPT4gJ3RleHQvcmljaHRleHQnLAogICAgICAgICAgICAncnRmJyA9PiAndGV4dC9ydGYnLAogICAgICAgICAgICAndmNmJyA9PiAndGV4dC92Y2FyZCcsCiAgICAgICAgICAgICd2Y2FyZCcgPT4gJ3RleHQvdmNhcmQnLAogICAgICAgICAgICAnaWNzJyA9PiAndGV4dC9jYWxlbmRhcicsCiAgICAgICAgICAgICd4bWwnID0+ICd0ZXh0L3htbCcsCiAgICAgICAgICAgICd4c2wnID0+ICd0ZXh0L3htbCcsCiAgICAgICAgICAgICd3bXYnID0+ICd2aWRlby94LW1zLXdtdicsCiAgICAgICAgICAgICdtcGVnJyA9PiAndmlkZW8vbXBlZycsCiAgICAgICAgICAgICdtcGUnID0+ICd2aWRlby9tcGVnJywKICAgICAgICAgICAgJ21wZycgPT4gJ3ZpZGVvL21wZWcnLAogICAgICAgICAgICAnbXA0JyA9PiAndmlkZW8vbXA0JywKICAgICAgICAgICAgJ200dicgPT4gJ3ZpZGVvL21wNCcsCiAgICAgICAgICAgICdtb3YnID0+ICd2aWRlby9xdWlja3RpbWUnLAogICAgICAgICAgICAncXQnID0+ICd2aWRlby9xdWlja3RpbWUnLAogICAgICAgICAgICAncnYnID0+ICd2aWRlby92bmQucm4tcmVhbHZpZGVvJywKICAgICAgICAgICAgJ2F2aScgPT4gJ3ZpZGVvL3gtbXN2aWRlbycsCiAgICAgICAgICAgICdtb3ZpZScgPT4gJ3ZpZGVvL3gtc2dpLW1vdmllJywKICAgICAgICAgICAgJ3dlYm0nID0+ICd2aWRlby93ZWJtJywKICAgICAgICAgICAgJ21rdicgPT4gJ3ZpZGVvL3gtbWF0cm9za2EnLAogICAgICAgIF07CiAgICAgICAgJGV4dCA9IHN0cnRvbG93ZXIoJGV4dCk7CiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJGV4dCwgJG1pbWVzKSkgewogICAgICAgICAgICByZXR1cm4gJG1pbWVzWyRleHRdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nOwogICAgfQoKICAgIC8qKgogICAgICogTWFwIGEgZmlsZSBuYW1lIHRvIGEgTUlNRSB0eXBlLgogICAgICogRGVmYXVsdHMgdG8gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsIGkuZS4uIGFyYml0cmFyeSBiaW5hcnkgZGF0YS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRmaWxlbmFtZSBBIGZpbGUgbmFtZSBvciBmdWxsIHBhdGgsIGRvZXMgbm90IG5lZWQgdG8gZXhpc3QgYXMgYSBmaWxlCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBmaWxlbmFtZVRvVHlwZSgkZmlsZW5hbWUpCiAgICB7CiAgICAgICAgLy8gSW4gY2FzZSB0aGUgcGF0aCBpcyBhIFVSTCwgc3RyaXAgYW55IHF1ZXJ5IHN0cmluZyBiZWZvcmUgZ2V0dGluZyBleHRlbnNpb24KICAgICAgICAkcXBvcyA9IHN0cnBvcygkZmlsZW5hbWUsICc/Jyk7CiAgICAgICAgaWYgKGZhbHNlICE9PSAkcXBvcykgewogICAgICAgICAgICAkZmlsZW5hbWUgPSBzdWJzdHIoJGZpbGVuYW1lLCAwLCAkcXBvcyk7CiAgICAgICAgfQogICAgICAgICRleHQgPSBzdGF0aWM6Om1iX3BhdGhpbmZvKCRmaWxlbmFtZSwgUEFUSElORk9fRVhURU5TSU9OKTsKCiAgICAgICAgcmV0dXJuIHN0YXRpYzo6X21pbWVfdHlwZXMoJGV4dCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNdWx0aS1ieXRlLXNhZmUgcGF0aGluZm8gcmVwbGFjZW1lbnQuCiAgICAgKiBEcm9wLWluIHJlcGxhY2VtZW50IGZvciBwYXRoaW5mbygpLCBidXQgbXVsdGlieXRlLSBhbmQgY3Jvc3MtcGxhdGZvcm0tc2FmZS4KICAgICAqCiAgICAgKiBAc2VlICAgIGh0dHA6Ly93d3cucGhwLm5ldC9tYW51YWwvZW4vZnVuY3Rpb24ucGF0aGluZm8ucGhwIzEwNzQ2MQogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgICAgICRwYXRoICAgIEEgZmlsZW5hbWUgb3IgcGF0aCwgZG9lcyBub3QgbmVlZCB0byBleGlzdCBhcyBhIGZpbGUKICAgICAqIEBwYXJhbSBpbnR8c3RyaW5nICRvcHRpb25zIEVpdGhlciBhIFBBVEhJTkZPXyogY29uc3RhbnQsCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhIHN0cmluZyBuYW1lIHRvIHJldHVybiBvbmx5IHRoZSBzcGVjaWZpZWQgcGllY2UKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZ3xhcnJheQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1iX3BhdGhpbmZvKCRwYXRoLCAkb3B0aW9ucyA9IG51bGwpCiAgICB7CiAgICAgICAgJHJldCA9IFsnZGlybmFtZScgPT4gJycsICdiYXNlbmFtZScgPT4gJycsICdleHRlbnNpb24nID0+ICcnLCAnZmlsZW5hbWUnID0+ICcnXTsKICAgICAgICAkcGF0aGluZm8gPSBbXTsKICAgICAgICBpZiAocHJlZ19tYXRjaCgnI14oLio/KVtcXFxcL10qKChbXi9cXFxcXSo/KShcLihbXlwuXFxcXC9dKz8pfCkpW1xcXFwvXC5dKiQjaW0nLCAkcGF0aCwgJHBhdGhpbmZvKSkgewogICAgICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygxLCAkcGF0aGluZm8pKSB7CiAgICAgICAgICAgICAgICAkcmV0WydkaXJuYW1lJ10gPSAkcGF0aGluZm9bMV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoMiwgJHBhdGhpbmZvKSkgewogICAgICAgICAgICAgICAgJHJldFsnYmFzZW5hbWUnXSA9ICRwYXRoaW5mb1syXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cyg1LCAkcGF0aGluZm8pKSB7CiAgICAgICAgICAgICAgICAkcmV0WydleHRlbnNpb24nXSA9ICRwYXRoaW5mb1s1XTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygzLCAkcGF0aGluZm8pKSB7CiAgICAgICAgICAgICAgICAkcmV0WydmaWxlbmFtZSddID0gJHBhdGhpbmZvWzNdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAoJG9wdGlvbnMpIHsKICAgICAgICAgICAgY2FzZSBQQVRISU5GT19ESVJOQU1FOgogICAgICAgICAgICBjYXNlICdkaXJuYW1lJzoKICAgICAgICAgICAgICAgIHJldHVybiAkcmV0WydkaXJuYW1lJ107CiAgICAgICAgICAgIGNhc2UgUEFUSElORk9fQkFTRU5BTUU6CiAgICAgICAgICAgIGNhc2UgJ2Jhc2VuYW1lJzoKICAgICAgICAgICAgICAgIHJldHVybiAkcmV0WydiYXNlbmFtZSddOwogICAgICAgICAgICBjYXNlIFBBVEhJTkZPX0VYVEVOU0lPTjoKICAgICAgICAgICAgY2FzZSAnZXh0ZW5zaW9uJzoKICAgICAgICAgICAgICAgIHJldHVybiAkcmV0WydleHRlbnNpb24nXTsKICAgICAgICAgICAgY2FzZSBQQVRISU5GT19GSUxFTkFNRToKICAgICAgICAgICAgY2FzZSAnZmlsZW5hbWUnOgogICAgICAgICAgICAgICAgcmV0dXJuICRyZXRbJ2ZpbGVuYW1lJ107CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gJHJldDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgb3IgcmVzZXQgaW5zdGFuY2UgcHJvcGVydGllcy4KICAgICAqIFlvdSBzaG91bGQgYXZvaWQgdGhpcyBmdW5jdGlvbiAtIGl0J3MgbW9yZSB2ZXJib3NlLCBsZXNzIGVmZmljaWVudCwgbW9yZSBlcnJvci1wcm9uZSBhbmQKICAgICAqIGhhcmRlciB0byBkZWJ1ZyB0aGFuIHNldHRpbmcgcHJvcGVydGllcyBkaXJlY3RseS4KICAgICAqIFVzYWdlIEV4YW1wbGU6CiAgICAgKiBgJG1haWwtPnNldCgnU01UUFNlY3VyZScsICd0bHMnKTtgCiAgICAgKiAgIGlzIHRoZSBzYW1lIGFzOgogICAgICogYCRtYWlsLT5TTVRQU2VjdXJlID0gJ3Rscyc7YC4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lICBUaGUgcHJvcGVydHkgbmFtZSB0byBzZXQKICAgICAqIEBwYXJhbSBtaXhlZCAgJHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQgdGhlIHByb3BlcnR5IHRvCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXQoJG5hbWUsICR2YWx1ZSA9ICcnKQogICAgewogICAgICAgIGlmIChwcm9wZXJ0eV9leGlzdHMoJHRoaXMsICRuYW1lKSkgewogICAgICAgICAgICAkdGhpcy0+JG5hbWUgPSAkdmFsdWU7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnNldEVycm9yKCR0aGlzLT5sYW5nKCd2YXJpYWJsZV9zZXQnKSAuICRuYW1lKTsKCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogU3RyaXAgbmV3bGluZXMgdG8gcHJldmVudCBoZWFkZXIgaW5qZWN0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cgogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZWN1cmVIZWFkZXIoJHN0cikKICAgIHsKICAgICAgICByZXR1cm4gdHJpbShzdHJfcmVwbGFjZShbIlxyIiwgIlxuIl0sICcnLCAkc3RyKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgbGluZSBicmVha3MgaW4gYSBzdHJpbmcuCiAgICAgKiBDb252ZXJ0cyBVTklYIExGLCBNYWMgQ1IgYW5kIFdpbmRvd3MgQ1JMRiBsaW5lIGJyZWFrcyBpbnRvIGEgc2luZ2xlIGxpbmUgYnJlYWsgZm9ybWF0LgogICAgICogRGVmYXVsdHMgdG8gQ1JMRiAoZm9yIG1lc3NhZ2UgYm9kaWVzKSBhbmQgcHJlc2VydmVzIGNvbnNlY3V0aXZlIGJyZWFrcy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0ZXh0CiAgICAgKiBAcGFyYW0gc3RyaW5nICRicmVha3R5cGUgV2hhdCBraW5kIG9mIGxpbmUgYnJlYWsgdG8gdXNlOyBkZWZhdWx0cyB0byBzdGF0aWM6OiRMRQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbm9ybWFsaXplQnJlYWtzKCR0ZXh0LCAkYnJlYWt0eXBlID0gbnVsbCkKICAgIHsKICAgICAgICBpZiAobnVsbCA9PT0gJGJyZWFrdHlwZSkgewogICAgICAgICAgICAkYnJlYWt0eXBlID0gc3RhdGljOjokTEU7CiAgICAgICAgfQogICAgICAgIC8vIE5vcm1hbGlzZSB0byBcbgogICAgICAgICR0ZXh0ID0gc3RyX3JlcGxhY2UoWyJcclxuIiwgIlxyIl0sICJcbiIsICR0ZXh0KTsKICAgICAgICAvLyBOb3cgY29udmVydCBMRSBhcyBuZWVkZWQKICAgICAgICBpZiAoIlxuIiAhPT0gJGJyZWFrdHlwZSkgewogICAgICAgICAgICAkdGV4dCA9IHN0cl9yZXBsYWNlKCJcbiIsICRicmVha3R5cGUsICR0ZXh0KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGV4dDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY3VycmVudCBsaW5lIGJyZWFrIGZvcm1hdCBzdHJpbmcuCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRMRSgpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0YXRpYzo6JExFOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBsaW5lIGJyZWFrIGZvcm1hdCBzdHJpbmcsIGUuZy4gIlxyXG4iLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGxlCiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gc2V0TEUoJGxlKQogICAgewogICAgICAgIHN0YXRpYzo6JExFID0gJGxlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBwdWJsaWMgYW5kIHByaXZhdGUga2V5IGZpbGVzIGFuZCBwYXNzd29yZCBmb3IgUy9NSU1FIHNpZ25pbmcuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2VydF9maWxlbmFtZQogICAgICogQHBhcmFtIHN0cmluZyAka2V5X2ZpbGVuYW1lCiAgICAgKiBAcGFyYW0gc3RyaW5nICRrZXlfcGFzcyAgICAgICAgICAgIFBhc3N3b3JkIGZvciBwcml2YXRlIGtleQogICAgICogQHBhcmFtIHN0cmluZyAkZXh0cmFjZXJ0c19maWxlbmFtZSBPcHRpb25hbCBwYXRoIHRvIGNoYWluIGNlcnRpZmljYXRlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzaWduKCRjZXJ0X2ZpbGVuYW1lLCAka2V5X2ZpbGVuYW1lLCAka2V5X3Bhc3MsICRleHRyYWNlcnRzX2ZpbGVuYW1lID0gJycpCiAgICB7CiAgICAgICAgJHRoaXMtPnNpZ25fY2VydF9maWxlID0gJGNlcnRfZmlsZW5hbWU7CiAgICAgICAgJHRoaXMtPnNpZ25fa2V5X2ZpbGUgPSAka2V5X2ZpbGVuYW1lOwogICAgICAgICR0aGlzLT5zaWduX2tleV9wYXNzID0gJGtleV9wYXNzOwogICAgICAgICR0aGlzLT5zaWduX2V4dHJhY2VydHNfZmlsZSA9ICRleHRyYWNlcnRzX2ZpbGVuYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUXVvdGVkLVByaW50YWJsZS1lbmNvZGUgYSBES0lNIGhlYWRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eHQKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gREtJTV9RUCgkdHh0KQogICAgewogICAgICAgICRsaW5lID0gJyc7CiAgICAgICAgJGxlbiA9IHN0cmxlbigkdHh0KTsKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkbGVuOyArKyRpKSB7CiAgICAgICAgICAgICRvcmQgPSBvcmQoJHR4dFskaV0pOwogICAgICAgICAgICBpZiAoKCgweDIxIDw9ICRvcmQpIGFuZCAoJG9yZCA8PSAweDNBKSkgb3IgJG9yZCA9PSAweDNDIG9yICgoMHgzRSA8PSAkb3JkKSBhbmQgKCRvcmQgPD0gMHg3RSkpKSB7CiAgICAgICAgICAgICAgICAkbGluZSAuPSAkdHh0WyRpXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRsaW5lIC49ICc9JyAuIHNwcmludGYoJyUwMlgnLCAkb3JkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRsaW5lOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGUgYSBES0lNIHNpZ25hdHVyZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzaWduSGVhZGVyCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZyBUaGUgREtJTSBzaWduYXR1cmUgdmFsdWUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIERLSU1fU2lnbigkc2lnbkhlYWRlcikKICAgIHsKICAgICAgICBpZiAoIWRlZmluZWQoJ1BLQ1M3X1RFWFQnKSkgewogICAgICAgICAgICBpZiAoJHRoaXMtPmV4Y2VwdGlvbnMpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJHRoaXMtPmxhbmcoJ2V4dGVuc2lvbl9taXNzaW5nJykgLiAnb3BlbnNzbCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgICAgICRwcml2S2V5U3RyID0gIWVtcHR5KCR0aGlzLT5ES0lNX3ByaXZhdGVfc3RyaW5nKSA/CiAgICAgICAgICAgICR0aGlzLT5ES0lNX3ByaXZhdGVfc3RyaW5nIDoKICAgICAgICAgICAgZmlsZV9nZXRfY29udGVudHMoJHRoaXMtPkRLSU1fcHJpdmF0ZSk7CiAgICAgICAgaWYgKCcnICE9ICR0aGlzLT5ES0lNX3Bhc3NwaHJhc2UpIHsKICAgICAgICAgICAgJHByaXZLZXkgPSBvcGVuc3NsX3BrZXlfZ2V0X3ByaXZhdGUoJHByaXZLZXlTdHIsICR0aGlzLT5ES0lNX3Bhc3NwaHJhc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRwcml2S2V5ID0gb3BlbnNzbF9wa2V5X2dldF9wcml2YXRlKCRwcml2S2V5U3RyKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wZW5zc2xfc2lnbigkc2lnbkhlYWRlciwgJHNpZ25hdHVyZSwgJHByaXZLZXksICdzaGEyNTZXaXRoUlNBRW5jcnlwdGlvbicpKSB7CiAgICAgICAgICAgIG9wZW5zc2xfcGtleV9mcmVlKCRwcml2S2V5KTsKCiAgICAgICAgICAgIHJldHVybiBiYXNlNjRfZW5jb2RlKCRzaWduYXR1cmUpOwogICAgICAgIH0KICAgICAgICBvcGVuc3NsX3BrZXlfZnJlZSgkcHJpdktleSk7CgogICAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICAvKioKICAgICAqIEdlbmVyYXRlIGEgREtJTSBjYW5vbmljYWxpemF0aW9uIGhlYWRlci4KICAgICAqIFVzZXMgdGhlICdyZWxheGVkJyBhbGdvcml0aG0gZnJvbSBSRkM2Mzc2IHNlY3Rpb24gMy40LjIuCiAgICAgKiBDYW5vbmljYWxpemVkIGhlYWRlcnMgc2hvdWxkICphbHdheXMqIHVzZSBDUkxGLCByZWdhcmRsZXNzIG9mIG1haWxlciBzZXR0aW5nLgogICAgICoKICAgICAqIEBzZWUgICAgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzNzYjc2VjdGlvbi0zLjQuMgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHNpZ25IZWFkZXIgSGVhZGVyCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIERLSU1fSGVhZGVyQygkc2lnbkhlYWRlcikKICAgIHsKICAgICAgICAvL1VuZm9sZCBhbGwgaGVhZGVyIGNvbnRpbnVhdGlvbiBsaW5lcwogICAgICAgIC8vQWxzbyBjb2xsYXBzZXMgZm9sZGVkIHdoaXRlc3BhY2UuCiAgICAgICAgLy9Ob3RlIFBDUkUgXHMgaXMgdG9vIGJyb2FkIGEgZGVmaW5pdGlvbiBvZiB3aGl0ZXNwYWNlOyBSRkM1MzIyIGRlZmluZXMgaXQgYXMgYFsgXHRdYAogICAgICAgIC8vQHNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTMyMiNzZWN0aW9uLTIuMgogICAgICAgIC8vVGhhdCBtZWFucyB0aGlzIG1heSBicmVhayBpZiB5b3UgZG8gc29tZXRoaW5nIGRhZnQgbGlrZSBwdXQgdmVydGljYWwgdGFicyBpbiB5b3VyIGhlYWRlcnMuCiAgICAgICAgJHNpZ25IZWFkZXIgPSBwcmVnX3JlcGxhY2UoJy9cclxuWyBcdF0rLycsICcgJywgJHNpZ25IZWFkZXIpOwogICAgICAgICRsaW5lcyA9IGV4cGxvZGUoIlxyXG4iLCAkc2lnbkhlYWRlcik7CiAgICAgICAgZm9yZWFjaCAoJGxpbmVzIGFzICRrZXkgPT4gJGxpbmUpIHsKICAgICAgICAgICAgLy9JZiB0aGUgaGVhZGVyIGlzIG1pc3NpbmcgYSA6LCBza2lwIGl0IGFzIGl0J3MgaW52YWxpZAogICAgICAgICAgICAvL1RoaXMgaXMgbGlrZWx5IHRvIGhhcHBlbiBiZWNhdXNlIHRoZSBleHBsb2RlKCkgYWJvdmUgd2lsbCBhbHNvIHNwbGl0CiAgICAgICAgICAgIC8vb24gdGhlIHRyYWlsaW5nIExFLCBsZWF2aW5nIGFuIGVtcHR5IGxpbmUKICAgICAgICAgICAgaWYgKHN0cnBvcygkbGluZSwgJzonKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QoJGhlYWRpbmcsICR2YWx1ZSkgPSBleHBsb2RlKCc6JywgJGxpbmUsIDIpOwogICAgICAgICAgICAvL0xvd2VyLWNhc2UgaGVhZGVyIG5hbWUKICAgICAgICAgICAgJGhlYWRpbmcgPSBzdHJ0b2xvd2VyKCRoZWFkaW5nKTsKICAgICAgICAgICAgLy9Db2xsYXBzZSB3aGl0ZSBzcGFjZSB3aXRoaW4gdGhlIHZhbHVlCiAgICAgICAgICAgICR2YWx1ZSA9IHByZWdfcmVwbGFjZSgnL1sgXHRdezIsfS8nLCAnICcsICR2YWx1ZSk7CiAgICAgICAgICAgIC8vUkZDNjM3NiBpcyBzbGlnaHRseSB1bmNsZWFyIGhlcmUgLSBpdCBzYXlzIHRvIGRlbGV0ZSBzcGFjZSBhdCB0aGUgKmVuZCogb2YgZWFjaCB2YWx1ZQogICAgICAgICAgICAvL0J1dCB0aGVuIHNheXMgdG8gZGVsZXRlIHNwYWNlIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNvbG9uLgogICAgICAgICAgICAvL05ldCByZXN1bHQgaXMgdGhlIHNhbWUgYXMgdHJpbW1pbmcgYm90aCBlbmRzIG9mIHRoZSB2YWx1ZS4KICAgICAgICAgICAgLy9ieSBlbGltaW5hdGlvbiwgdGhlIHNhbWUgYXBwbGllcyB0byB0aGUgZmllbGQgbmFtZQogICAgICAgICAgICAkbGluZXNbJGtleV0gPSB0cmltKCRoZWFkaW5nLCAiIFx0IikgLiAnOicgLiB0cmltKCR2YWx1ZSwgIiBcdCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGltcGxvZGUoIlxyXG4iLCAkbGluZXMpOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGUgYSBES0lNIGNhbm9uaWNhbGl6YXRpb24gYm9keS4KICAgICAqIFVzZXMgdGhlICdzaW1wbGUnIGFsZ29yaXRobSBmcm9tIFJGQzYzNzYgc2VjdGlvbiAzLjQuMy4KICAgICAqIENhbm9uaWNhbGl6ZWQgYm9kaWVzIHNob3VsZCAqYWx3YXlzKiB1c2UgQ1JMRiwgcmVnYXJkbGVzcyBvZiBtYWlsZXIgc2V0dGluZy4KICAgICAqCiAgICAgKiBAc2VlICAgIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2Mzc2I3NlY3Rpb24tMy40LjMKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRib2R5IE1lc3NhZ2UgQm9keQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBES0lNX0JvZHlDKCRib2R5KQogICAgewogICAgICAgIGlmIChlbXB0eSgkYm9keSkpIHsKICAgICAgICAgICAgcmV0dXJuICJcclxuIjsKICAgICAgICB9CiAgICAgICAgLy8gTm9ybWFsaXplIGxpbmUgZW5kaW5ncyB0byBDUkxGCiAgICAgICAgJGJvZHkgPSBzdGF0aWM6Om5vcm1hbGl6ZUJyZWFrcygkYm9keSwgIlxyXG4iKTsKCiAgICAgICAgLy9SZWR1Y2UgbXVsdGlwbGUgdHJhaWxpbmcgbGluZSBicmVha3MgdG8gYSBzaW5nbGUgb25lCiAgICAgICAgcmV0dXJuIHJ0cmltKCRib2R5LCAiXHJcbiIpIC4gIlxyXG4iOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIHRoZSBES0lNIGhlYWRlciBhbmQgYm9keSBpbiBhIG5ldyBtZXNzYWdlIGhlYWRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRoZWFkZXJzX2xpbmUgSGVhZGVyIGxpbmVzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzdWJqZWN0ICAgICAgU3ViamVjdAogICAgICogQHBhcmFtIHN0cmluZyAkYm9keSAgICAgICAgIEJvZHkKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gREtJTV9BZGQoJGhlYWRlcnNfbGluZSwgJHN1YmplY3QsICRib2R5KQogICAgewogICAgICAgICRES0lNc2lnbmF0dXJlVHlwZSA9ICdyc2Etc2hhMjU2JzsgLy8gU2lnbmF0dXJlICYgaGFzaCBhbGdvcml0aG1zCiAgICAgICAgJERLSU1jYW5vbmljYWxpemF0aW9uID0gJ3JlbGF4ZWQvc2ltcGxlJzsgLy8gQ2Fub25pY2FsaXphdGlvbiBvZiBoZWFkZXIvYm9keQogICAgICAgICRES0lNcXVlcnkgPSAnZG5zL3R4dCc7IC8vIFF1ZXJ5IG1ldGhvZAogICAgICAgICRES0lNdGltZSA9IHRpbWUoKTsgLy8gU2lnbmF0dXJlIFRpbWVzdGFtcCA9IHNlY29uZHMgc2luY2UgMDA6MDA6MDAgLSBKYW4gMSwgMTk3MCAoVVRDIHRpbWUgem9uZSkKICAgICAgICAkc3ViamVjdF9oZWFkZXIgPSAiU3ViamVjdDogJHN1YmplY3QiOwogICAgICAgICRoZWFkZXJzID0gZXhwbG9kZShzdGF0aWM6OiRMRSwgJGhlYWRlcnNfbGluZSk7CiAgICAgICAgJGZyb21faGVhZGVyID0gJyc7CiAgICAgICAgJHRvX2hlYWRlciA9ICcnOwogICAgICAgICRkYXRlX2hlYWRlciA9ICcnOwogICAgICAgICRjdXJyZW50ID0gJyc7CiAgICAgICAgJGNvcGllZEhlYWRlckZpZWxkcyA9ICcnOwogICAgICAgICRmb3VuZEV4dHJhSGVhZGVycyA9IFtdOwogICAgICAgICRleHRyYUhlYWRlcktleXMgPSAnJzsKICAgICAgICAkZXh0cmFIZWFkZXJWYWx1ZXMgPSAnJzsKICAgICAgICAkZXh0cmFDb3B5SGVhZGVyRmllbGRzID0gJyc7CiAgICAgICAgZm9yZWFjaCAoJGhlYWRlcnMgYXMgJGhlYWRlcikgewogICAgICAgICAgICBpZiAoc3RycG9zKCRoZWFkZXIsICdGcm9tOicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAkZnJvbV9oZWFkZXIgPSAkaGVhZGVyOwogICAgICAgICAgICAgICAgJGN1cnJlbnQgPSAnZnJvbV9oZWFkZXInOwogICAgICAgICAgICB9IGVsc2VpZiAoc3RycG9zKCRoZWFkZXIsICdUbzonKSA9PT0gMCkgewogICAgICAgICAgICAgICAgJHRvX2hlYWRlciA9ICRoZWFkZXI7CiAgICAgICAgICAgICAgICAkY3VycmVudCA9ICd0b19oZWFkZXInOwogICAgICAgICAgICB9IGVsc2VpZiAoc3RycG9zKCRoZWFkZXIsICdEYXRlOicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAkZGF0ZV9oZWFkZXIgPSAkaGVhZGVyOwogICAgICAgICAgICAgICAgJGN1cnJlbnQgPSAnZGF0ZV9oZWFkZXInOwogICAgICAgICAgICB9IGVsc2VpZiAoIWVtcHR5KCR0aGlzLT5ES0lNX2V4dHJhSGVhZGVycykpIHsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR0aGlzLT5ES0lNX2V4dHJhSGVhZGVycyBhcyAkZXh0cmFIZWFkZXIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RycG9zKCRoZWFkZXIsICRleHRyYUhlYWRlciAuICc6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGhlYWRlclZhbHVlID0gJGhlYWRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHRoaXMtPkN1c3RvbUhlYWRlciBhcyAkY3VzdG9tSGVhZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGN1c3RvbUhlYWRlclswXSA9PT0gJGV4dHJhSGVhZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhlYWRlclZhbHVlID0gdHJpbSgkY3VzdG9tSGVhZGVyWzBdKSAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzogJyAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmVuY29kZUhlYWRlcih0cmltKCRjdXN0b21IZWFkZXJbMV0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAkZm91bmRFeHRyYUhlYWRlcnNbJGV4dHJhSGVhZGVyXSA9ICRoZWFkZXJWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKCFlbXB0eSgkJGN1cnJlbnQpIGFuZCBzdHJwb3MoJGhlYWRlciwgJyA9PycpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgJCRjdXJyZW50IC49ICRoZWFkZXI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRjdXJyZW50ID0gJyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yZWFjaCAoJGZvdW5kRXh0cmFIZWFkZXJzIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICAgICAgICAgICRleHRyYUhlYWRlcktleXMgLj0gJzonIC4gJGtleTsKICAgICAgICAgICAgJGV4dHJhSGVhZGVyVmFsdWVzIC49ICR2YWx1ZSAuICJcclxuIjsKICAgICAgICAgICAgaWYgKCR0aGlzLT5ES0lNX2NvcHlIZWFkZXJGaWVsZHMpIHsKICAgICAgICAgICAgICAgICRleHRyYUNvcHlIZWFkZXJGaWVsZHMgLj0gIlx0fCIgLiBzdHJfcmVwbGFjZSgnfCcsICc9N0MnLCAkdGhpcy0+REtJTV9RUCgkdmFsdWUpKSAuICI7XHJcbiI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCR0aGlzLT5ES0lNX2NvcHlIZWFkZXJGaWVsZHMpIHsKICAgICAgICAgICAgJGZyb20gPSBzdHJfcmVwbGFjZSgnfCcsICc9N0MnLCAkdGhpcy0+REtJTV9RUCgkZnJvbV9oZWFkZXIpKTsKICAgICAgICAgICAgJHRvID0gc3RyX3JlcGxhY2UoJ3wnLCAnPTdDJywgJHRoaXMtPkRLSU1fUVAoJHRvX2hlYWRlcikpOwogICAgICAgICAgICAkZGF0ZSA9IHN0cl9yZXBsYWNlKCd8JywgJz03QycsICR0aGlzLT5ES0lNX1FQKCRkYXRlX2hlYWRlcikpOwogICAgICAgICAgICAkc3ViamVjdCA9IHN0cl9yZXBsYWNlKCd8JywgJz03QycsICR0aGlzLT5ES0lNX1FQKCRzdWJqZWN0X2hlYWRlcikpOwogICAgICAgICAgICAkY29waWVkSGVhZGVyRmllbGRzID0gIlx0ej0kZnJvbVxyXG4iIC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJcdHwkdG9cclxuIiAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXHR8JGRhdGVcclxuIiAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXHR8JHN1YmplY3Q7XHJcbiIgLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGV4dHJhQ29weUhlYWRlckZpZWxkczsKICAgICAgICB9CiAgICAgICAgJGJvZHkgPSAkdGhpcy0+REtJTV9Cb2R5QygkYm9keSk7CiAgICAgICAgJERLSU1sZW4gPSBzdHJsZW4oJGJvZHkpOyAvLyBMZW5ndGggb2YgYm9keQogICAgICAgICRES0lNYjY0ID0gYmFzZTY0X2VuY29kZShwYWNrKCdIKicsIGhhc2goJ3NoYTI1NicsICRib2R5KSkpOyAvLyBCYXNlNjQgb2YgcGFja2VkIGJpbmFyeSBTSEEtMjU2IGhhc2ggb2YgYm9keQogICAgICAgIGlmICgnJyA9PSAkdGhpcy0+REtJTV9pZGVudGl0eSkgewogICAgICAgICAgICAkaWRlbnQgPSAnJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkaWRlbnQgPSAnIGk9JyAuICR0aGlzLT5ES0lNX2lkZW50aXR5IC4gJzsnOwogICAgICAgIH0KICAgICAgICAkZGtpbWhkcnMgPSAnREtJTS1TaWduYXR1cmU6IHY9MTsgYT0nIC4KICAgICAgICAgICAgJERLSU1zaWduYXR1cmVUeXBlIC4gJzsgcT0nIC4KICAgICAgICAgICAgJERLSU1xdWVyeSAuICc7IGw9JyAuCiAgICAgICAgICAgICRES0lNbGVuIC4gJzsgcz0nIC4KICAgICAgICAgICAgJHRoaXMtPkRLSU1fc2VsZWN0b3IgLgogICAgICAgICAgICAiO1xyXG4iIC4KICAgICAgICAgICAgIlx0dD0iIC4gJERLSU10aW1lIC4gJzsgYz0nIC4gJERLSU1jYW5vbmljYWxpemF0aW9uIC4gIjtcclxuIiAuCiAgICAgICAgICAgICJcdGg9RnJvbTpUbzpEYXRlOlN1YmplY3QiIC4gJGV4dHJhSGVhZGVyS2V5cyAuICI7XHJcbiIgLgogICAgICAgICAgICAiXHRkPSIgLiAkdGhpcy0+REtJTV9kb21haW4gLiAnOycgLiAkaWRlbnQgLiAiXHJcbiIgLgogICAgICAgICAgICAkY29waWVkSGVhZGVyRmllbGRzIC4KICAgICAgICAgICAgIlx0Ymg9IiAuICRES0lNYjY0IC4gIjtcclxuIiAuCiAgICAgICAgICAgICJcdGI9IjsKICAgICAgICAkdG9TaWduID0gJHRoaXMtPkRLSU1fSGVhZGVyQygKICAgICAgICAgICAgJGZyb21faGVhZGVyIC4gIlxyXG4iIC4KICAgICAgICAgICAgJHRvX2hlYWRlciAuICJcclxuIiAuCiAgICAgICAgICAgICRkYXRlX2hlYWRlciAuICJcclxuIiAuCiAgICAgICAgICAgICRzdWJqZWN0X2hlYWRlciAuICJcclxuIiAuCiAgICAgICAgICAgICRleHRyYUhlYWRlclZhbHVlcyAuCiAgICAgICAgICAgICRka2ltaGRycwogICAgICAgICk7CiAgICAgICAgJHNpZ25lZCA9ICR0aGlzLT5ES0lNX1NpZ24oJHRvU2lnbik7CgogICAgICAgIHJldHVybiBzdGF0aWM6Om5vcm1hbGl6ZUJyZWFrcygkZGtpbWhkcnMgLiAkc2lnbmVkKSAuIHN0YXRpYzo6JExFOwogICAgfQoKICAgIC8qKgogICAgICogRGV0ZWN0IGlmIGEgc3RyaW5nIGNvbnRhaW5zIGEgbGluZSBsb25nZXIgdGhhbiB0aGUgbWF4aW11bSBsaW5lIGxlbmd0aAogICAgICogYWxsb3dlZCBieSBSRkMgMjgyMiBzZWN0aW9uIDIuMS4xLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc0xpbmVMb25nZXJUaGFuTWF4KCRzdHIpCiAgICB7CiAgICAgICAgcmV0dXJuIChib29sKSBwcmVnX21hdGNoKCcvXigueycgLiAoc2VsZjo6TUFYX0xJTkVfTEVOR1RIICsgc3RybGVuKHN0YXRpYzo6JExFKSkgLiAnLH0pL20nLCAkc3RyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBmb3IgcHVibGljIHJlYWQgYWNjZXNzIHRvICd0bycgcHJvcGVydHkuCiAgICAgKiBCZWZvcmUgdGhlIHNlbmQoKSBjYWxsLCBxdWV1ZWQgYWRkcmVzc2VzIChpLmUuIHdpdGggSUROKSBhcmUgbm90IHlldCBpbmNsdWRlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRUb0FkZHJlc3NlcygpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT50bzsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBmb3IgcHVibGljIHJlYWQgYWNjZXNzIHRvICdjYycgcHJvcGVydHkuCiAgICAgKiBCZWZvcmUgdGhlIHNlbmQoKSBjYWxsLCBxdWV1ZWQgYWRkcmVzc2VzIChpLmUuIHdpdGggSUROKSBhcmUgbm90IHlldCBpbmNsdWRlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRDY0FkZHJlc3NlcygpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYzsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBmb3IgcHVibGljIHJlYWQgYWNjZXNzIHRvICdiY2MnIHByb3BlcnR5LgogICAgICogQmVmb3JlIHRoZSBzZW5kKCkgY2FsbCwgcXVldWVkIGFkZHJlc3NlcyAoaS5lLiB3aXRoIElETikgYXJlIG5vdCB5ZXQgaW5jbHVkZWQuCiAgICAgKgogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QmNjQWRkcmVzc2VzKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmJjYzsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBmb3IgcHVibGljIHJlYWQgYWNjZXNzIHRvICdSZXBseVRvJyBwcm9wZXJ0eS4KICAgICAqIEJlZm9yZSB0aGUgc2VuZCgpIGNhbGwsIHF1ZXVlZCBhZGRyZXNzZXMgKGkuZS4gd2l0aCBJRE4pIGFyZSBub3QgeWV0IGluY2x1ZGVkLgogICAgICoKICAgICAqIEByZXR1cm4gYXJyYXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFJlcGx5VG9BZGRyZXNzZXMoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+UmVwbHlUbzsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBmb3IgcHVibGljIHJlYWQgYWNjZXNzIHRvICdhbGxfcmVjaXBpZW50cycgcHJvcGVydHkuCiAgICAgKiBCZWZvcmUgdGhlIHNlbmQoKSBjYWxsLCBxdWV1ZWQgYWRkcmVzc2VzIChpLmUuIHdpdGggSUROKSBhcmUgbm90IHlldCBpbmNsdWRlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxSZWNpcGllbnRBZGRyZXNzZXMoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+YWxsX3JlY2lwaWVudHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBQZXJmb3JtIGEgY2FsbGJhY2suCiAgICAgKgogICAgICogQHBhcmFtIGJvb2wgICAkaXNTZW50CiAgICAgKiBAcGFyYW0gYXJyYXkgICR0bwogICAgICogQHBhcmFtIGFycmF5ICAkY2MKICAgICAqIEBwYXJhbSBhcnJheSAgJGJjYwogICAgICogQHBhcmFtIHN0cmluZyAkc3ViamVjdAogICAgICogQHBhcmFtIHN0cmluZyAkYm9keQogICAgICogQHBhcmFtIHN0cmluZyAkZnJvbQogICAgICogQHBhcmFtIGFycmF5ICAkZXh0cmEKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGRvQ2FsbGJhY2soJGlzU2VudCwgJHRvLCAkY2MsICRiY2MsICRzdWJqZWN0LCAkYm9keSwgJGZyb20sICRleHRyYSkKICAgIHsKICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5hY3Rpb25fZnVuY3Rpb24pIGFuZCBpc19jYWxsYWJsZSgkdGhpcy0+YWN0aW9uX2Z1bmN0aW9uKSkgewogICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygkdGhpcy0+YWN0aW9uX2Z1bmN0aW9uLCAkaXNTZW50LCAkdG8sICRjYywgJGJjYywgJHN1YmplY3QsICRib2R5LCAkZnJvbSwgJGV4dHJhKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIE9BdXRoIGluc3RhbmNlLgogICAgICoKICAgICAqIEByZXR1cm4gT0F1dGgKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldE9BdXRoKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPm9hdXRoOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGFuIE9BdXRoIGluc3RhbmNlLgogICAgICoKICAgICAqIEBwYXJhbSBPQXV0aCAkb2F1dGgKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldE9BdXRoKE9BdXRoICRvYXV0aCkKICAgIHsKICAgICAgICAkdGhpcy0+b2F1dGggPSAkb2F1dGg7CiAgICB9Cn0K',
  'ofw/lib/email/SMTP.php' => 'data:text/x-php;base64,PD9waHAKLyoqCiAqIFBIUE1haWxlciBSRkM4MjEgU01UUCBlbWFpbCB0cmFuc3BvcnQgY2xhc3MuCiAqIFBIUCBWZXJzaW9uIDUuNS4KICoKICogQHNlZSAgICAgICBodHRwczovL2dpdGh1Yi5jb20vUEhQTWFpbGVyL1BIUE1haWxlci8gVGhlIFBIUE1haWxlciBHaXRIdWIgcHJvamVjdAogKgogKiBAYXV0aG9yICAgIE1hcmN1cyBCb2ludG9uIChTeW5jaHJvL2Nvb2xicnUpIDxwaHBtYWlsZXJAc3luY2hyb21lZGlhLmNvLnVrPgogKiBAYXV0aG9yICAgIEppbSBKYWdpZWxza2kgKGppbWphZykgPGppbWphZ0BnbWFpbC5jb20+CiAqIEBhdXRob3IgICAgQW5keSBQcmV2b3N0IChjb2Rld29yeHRlY2gpIDxjb2Rld29yeHRlY2hAdXNlcnMuc291cmNlZm9yZ2UubmV0PgogKiBAYXV0aG9yICAgIEJyZW50IFIuIE1hdHplbGxlIChvcmlnaW5hbCBmb3VuZGVyKQogKiBAY29weXJpZ2h0IDIwMTIgLSAyMDE3IE1hcmN1cyBCb2ludG9uCiAqIEBjb3B5cmlnaHQgMjAxMCAtIDIwMTIgSmltIEphZ2llbHNraQogKiBAY29weXJpZ2h0IDIwMDQgLSAyMDA5IEFuZHkgUHJldm9zdAogKiBAbGljZW5zZSAgIGh0dHA6Ly93d3cuZ251Lm9yZy9jb3B5bGVmdC9sZXNzZXIuaHRtbCBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKICogQG5vdGUgICAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCAtIFdJVEhPVVQKICogQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yCiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLgogKi8KCm5hbWVzcGFjZSBQSFBNYWlsZXJcUEhQTWFpbGVyOwoKLyoqCiAqIFBIUE1haWxlciBSRkM4MjEgU01UUCBlbWFpbCB0cmFuc3BvcnQgY2xhc3MuCiAqIEltcGxlbWVudHMgUkZDIDgyMSBTTVRQIGNvbW1hbmRzIGFuZCBwcm92aWRlcyBzb21lIHV0aWxpdHkgbWV0aG9kcyBmb3Igc2VuZGluZyBtYWlsIHRvIGFuIFNNVFAgc2VydmVyLgogKgogKiBAYXV0aG9yICBDaHJpcyBSeWFuCiAqIEBhdXRob3IgIE1hcmN1cyBCb2ludG9uIDxwaHBtYWlsZXJAc3luY2hyb21lZGlhLmNvLnVrPgogKi8KY2xhc3MgU01UUAp7CiAgICAvKioKICAgICAqIFRoZSBQSFBNYWlsZXIgU01UUCB2ZXJzaW9uIG51bWJlci4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBjb25zdCBWRVJTSU9OID0gJzYuMC41JzsKCiAgICAvKioKICAgICAqIFNNVFAgbGluZSBicmVhayBjb25zdGFudC4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBjb25zdCBMRSA9ICJcclxuIjsKCiAgICAvKioKICAgICAqIFRoZSBTTVRQIHBvcnQgdG8gdXNlIGlmIG9uZSBpcyBub3Qgc3BlY2lmaWVkLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIGNvbnN0IERFRkFVTFRfUE9SVCA9IDI1OwoKICAgIC8qKgogICAgICogVGhlIG1heGltdW0gbGluZSBsZW5ndGggYWxsb3dlZCBieSBSRkMgMjgyMiBzZWN0aW9uIDIuMS4xLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIGNvbnN0IE1BWF9MSU5FX0xFTkdUSCA9IDk5ODsKCiAgICAvKioKICAgICAqIERlYnVnIGxldmVsIGZvciBubyBvdXRwdXQuCiAgICAgKi8KICAgIGNvbnN0IERFQlVHX09GRiA9IDA7CgogICAgLyoqCiAgICAgKiBEZWJ1ZyBsZXZlbCB0byBzaG93IGNsaWVudCAtPiBzZXJ2ZXIgbWVzc2FnZXMuCiAgICAgKi8KICAgIGNvbnN0IERFQlVHX0NMSUVOVCA9IDE7CgogICAgLyoqCiAgICAgKiBEZWJ1ZyBsZXZlbCB0byBzaG93IGNsaWVudCAtPiBzZXJ2ZXIgYW5kIHNlcnZlciAtPiBjbGllbnQgbWVzc2FnZXMuCiAgICAgKi8KICAgIGNvbnN0IERFQlVHX1NFUlZFUiA9IDI7CgogICAgLyoqCiAgICAgKiBEZWJ1ZyBsZXZlbCB0byBzaG93IGNvbm5lY3Rpb24gc3RhdHVzLCBjbGllbnQgLT4gc2VydmVyIGFuZCBzZXJ2ZXIgLT4gY2xpZW50IG1lc3NhZ2VzLgogICAgICovCiAgICBjb25zdCBERUJVR19DT05ORUNUSU9OID0gMzsKCiAgICAvKioKICAgICAqIERlYnVnIGxldmVsIHRvIHNob3cgYWxsIG1lc3NhZ2VzLgogICAgICovCiAgICBjb25zdCBERUJVR19MT1dMRVZFTCA9IDQ7CgogICAgLyoqCiAgICAgKiBEZWJ1ZyBvdXRwdXQgbGV2ZWwuCiAgICAgKiBPcHRpb25zOgogICAgICogKiBzZWxmOjpERUJVR19PRkYgKGAwYCkgTm8gZGVidWcgb3V0cHV0LCBkZWZhdWx0CiAgICAgKiAqIHNlbGY6OkRFQlVHX0NMSUVOVCAoYDFgKSBDbGllbnQgY29tbWFuZHMKICAgICAqICogc2VsZjo6REVCVUdfU0VSVkVSIChgMmApIENsaWVudCBjb21tYW5kcyBhbmQgc2VydmVyIHJlc3BvbnNlcwogICAgICogKiBzZWxmOjpERUJVR19DT05ORUNUSU9OIChgM2ApIEFzIERFQlVHX1NFUlZFUiBwbHVzIGNvbm5lY3Rpb24gc3RhdHVzCiAgICAgKiAqIHNlbGY6OkRFQlVHX0xPV0xFVkVMIChgNGApIExvdy1sZXZlbCBkYXRhIG91dHB1dCwgYWxsIG1lc3NhZ2VzLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIHB1YmxpYyAkZG9fZGVidWcgPSBzZWxmOjpERUJVR19PRkY7CgogICAgLyoqCiAgICAgKiBIb3cgdG8gaGFuZGxlIGRlYnVnIG91dHB1dC4KICAgICAqIE9wdGlvbnM6CiAgICAgKiAqIGBlY2hvYCBPdXRwdXQgcGxhaW4tdGV4dCBhcy1pcywgYXBwcm9wcmlhdGUgZm9yIENMSQogICAgICogKiBgaHRtbGAgT3V0cHV0IGVzY2FwZWQsIGxpbmUgYnJlYWtzIGNvbnZlcnRlZCB0byBgPGJyPmAsIGFwcHJvcHJpYXRlIGZvciBicm93c2VyIG91dHB1dAogICAgICogKiBgZXJyb3JfbG9nYCBPdXRwdXQgdG8gZXJyb3IgbG9nIGFzIGNvbmZpZ3VyZWQgaW4gcGhwLmluaQogICAgICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwcm92aWRlIGEgY2FsbGFibGUgZXhwZWN0aW5nIHR3byBwYXJhbXM6IGEgbWVzc2FnZSBzdHJpbmcgYW5kIHRoZSBkZWJ1ZyBsZXZlbDoKICAgICAqCiAgICAgKiBgYGBwaHAKICAgICAqICRzbXRwLT5EZWJ1Z291dHB1dCA9IGZ1bmN0aW9uKCRzdHIsICRsZXZlbCkge2VjaG8gImRlYnVnIGxldmVsICRsZXZlbDsgbWVzc2FnZTogJHN0ciI7fTsKICAgICAqIGBgYAogICAgICoKICAgICAqIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcGFzcyBpbiBhbiBpbnN0YW5jZSBvZiBhIFBTUi0zIGNvbXBhdGlibGUgbG9nZ2VyLCB0aG91Z2ggb25seSBgZGVidWdgCiAgICAgKiBsZXZlbCBvdXRwdXQgaXMgdXNlZDoKICAgICAqCiAgICAgKiBgYGBwaHAKICAgICAqICRtYWlsLT5EZWJ1Z291dHB1dCA9IG5ldyBteVBzcjNMb2dnZXI7CiAgICAgKiBgYGAKICAgICAqCiAgICAgKiBAdmFyIHN0cmluZ3xjYWxsYWJsZXxcUHNyXExvZ1xMb2dnZXJJbnRlcmZhY2UKICAgICAqLwogICAgcHVibGljICREZWJ1Z291dHB1dCA9ICdlY2hvJzsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIFZFUlAuCiAgICAgKgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1ZhcmlhYmxlX2VudmVsb3BlX3JldHVybl9wYXRoCiAgICAgKiBAc2VlIGh0dHA6Ly93d3cucG9zdGZpeC5vcmcvVkVSUF9SRUFETUUuaHRtbCBJbmZvIG9uIFZFUlAKICAgICAqCiAgICAgKiBAdmFyIGJvb2wKICAgICAqLwogICAgcHVibGljICRkb192ZXJwID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBUaGUgdGltZW91dCB2YWx1ZSBmb3IgY29ubmVjdGlvbiwgaW4gc2Vjb25kcy4KICAgICAqIERlZmF1bHQgb2YgNSBtaW51dGVzICgzMDBzZWMpIGlzIGZyb20gUkZDMjgyMSBzZWN0aW9uIDQuNS4zLjIuCiAgICAgKiBUaGlzIG5lZWRzIHRvIGJlIHF1aXRlIGhpZ2ggdG8gZnVuY3Rpb24gY29ycmVjdGx5IHdpdGggaG9zdHMgdXNpbmcgZ3JlZXRkZWxheSBhcyBhbiBhbnRpLXNwYW0gbWVhc3VyZS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzI4MjEjc2VjdGlvbi00LjUuMy4yCiAgICAgKgogICAgICogQHZhciBpbnQKICAgICAqLwogICAgcHVibGljICRUaW1lb3V0ID0gMzAwOwoKICAgIC8qKgogICAgICogSG93IGxvbmcgdG8gd2FpdCBmb3IgY29tbWFuZHMgdG8gY29tcGxldGUsIGluIHNlY29uZHMuCiAgICAgKiBEZWZhdWx0IG9mIDUgbWludXRlcyAoMzAwc2VjKSBpcyBmcm9tIFJGQzI4MjEgc2VjdGlvbiA0LjUuMy4yLgogICAgICoKICAgICAqIEB2YXIgaW50CiAgICAgKi8KICAgIHB1YmxpYyAkVGltZWxpbWl0ID0gMzAwOwoKICAgIC8qKgogICAgICogUGF0dGVybnMgdG8gZXh0cmFjdCBhbiBTTVRQIHRyYW5zYWN0aW9uIGlkIGZyb20gcmVwbHkgdG8gYSBEQVRBIGNvbW1hbmQuCiAgICAgKiBUaGUgZmlyc3QgY2FwdHVyZSBncm91cCBpbiBlYWNoIHJlZ2V4IHdpbGwgYmUgdXNlZCBhcyB0aGUgSUQuCiAgICAgKiBNUyBFU01UUCByZXR1cm5zIHRoZSBtZXNzYWdlIElELCB3aGljaCBtYXkgbm90IGJlIGNvcnJlY3QgZm9yIGludGVybmFsIHRyYWNraW5nLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nW10KICAgICAqLwogICAgcHJvdGVjdGVkICRzbXRwX3RyYW5zYWN0aW9uX2lkX3BhdHRlcm5zID0gWwogICAgICAgICdleGltJyA9PiAnL1tcZF17M30gT0sgaWQ9KC4qKS8nLAogICAgICAgICdzZW5kbWFpbCcgPT4gJy9bXGRdezN9IDIuMC4wICguKikgTWVzc2FnZS8nLAogICAgICAgICdwb3N0Zml4JyA9PiAnL1tcZF17M30gMi4wLjAgT2s6IHF1ZXVlZCBhcyAoLiopLycsCiAgICAgICAgJ01pY3Jvc29mdF9FU01UUCcgPT4gJy9bMC05XXszfSAyLltcZF0uMCAoLiopQCg/Oi4qKSBRdWV1ZWQgbWFpbCBmb3IgZGVsaXZlcnkvJywKICAgICAgICAnQW1hem9uX1NFUycgPT4gJy9bXGRdezN9IE9rICguKikvJywKICAgICAgICAnU2VuZEdyaWQnID0+ICcvW1xkXXszfSBPazogcXVldWVkIGFzICguKikvJywKICAgICAgICAnQ2FtcGFpZ25Nb25pdG9yJyA9PiAnL1tcZF17M30gMi4wLjAgT0s6KFthLXpBLVpcZF17NDh9KS8nLAogICAgXTsKCiAgICAvKioKICAgICAqIFRoZSBsYXN0IHRyYW5zYWN0aW9uIElEIGlzc3VlZCBpbiByZXNwb25zZSB0byBhIERBVEEgY29tbWFuZCwKICAgICAqIGlmIG9uZSB3YXMgZGV0ZWN0ZWQuCiAgICAgKgogICAgICogQHZhciBzdHJpbmd8Ym9vbHxudWxsCiAgICAgKi8KICAgIHByb3RlY3RlZCAkbGFzdF9zbXRwX3RyYW5zYWN0aW9uX2lkOwoKICAgIC8qKgogICAgICogVGhlIHNvY2tldCBmb3IgdGhlIHNlcnZlciBjb25uZWN0aW9uLgogICAgICoKICAgICAqIEB2YXIgP3Jlc291cmNlCiAgICAgKi8KICAgIHByb3RlY3RlZCAkc210cF9jb25uOwoKICAgIC8qKgogICAgICogRXJyb3IgaW5mb3JtYXRpb24sIGlmIGFueSwgZm9yIHRoZSBsYXN0IFNNVFAgY29tbWFuZC4KICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCAkZXJyb3IgPSBbCiAgICAgICAgJ2Vycm9yJyA9PiAnJywKICAgICAgICAnZGV0YWlsJyA9PiAnJywKICAgICAgICAnc210cF9jb2RlJyA9PiAnJywKICAgICAgICAnc210cF9jb2RlX2V4JyA9PiAnJywKICAgIF07CgogICAgLyoqCiAgICAgKiBUaGUgcmVwbHkgdGhlIHNlcnZlciBzZW50IHRvIHVzIGZvciBIRUxPLgogICAgICogSWYgbnVsbCwgbm8gSEVMTyBzdHJpbmcgaGFzIHlldCBiZWVuIHJlY2VpdmVkLgogICAgICoKICAgICAqIEB2YXIgc3RyaW5nfG51bGwKICAgICAqLwogICAgcHJvdGVjdGVkICRoZWxvX3JwbHkgPSBudWxsOwoKICAgIC8qKgogICAgICogVGhlIHNldCBvZiBTTVRQIGV4dGVuc2lvbnMgc2VudCBpbiByZXBseSB0byBFSExPIGNvbW1hbmQuCiAgICAgKiBJbmRleGVzIG9mIHRoZSBhcnJheSBhcmUgZXh0ZW5zaW9uIG5hbWVzLgogICAgICogVmFsdWUgYXQgaW5kZXggJ0hFTE8nIG9yICdFSExPJyAoYWNjb3JkaW5nIHRvIGNvbW1hbmQgdGhhdCB3YXMgc2VudCkKICAgICAqIHJlcHJlc2VudHMgdGhlIHNlcnZlciBuYW1lLiBJbiBjYXNlIG9mIEhFTE8gaXQgaXMgdGhlIG9ubHkgZWxlbWVudCBvZiB0aGUgYXJyYXkuCiAgICAgKiBPdGhlciB2YWx1ZXMgY2FuIGJlIGJvb2xlYW4gVFJVRSBvciBhbiBhcnJheSBjb250YWluaW5nIGV4dGVuc2lvbiBvcHRpb25zLgogICAgICogSWYgbnVsbCwgbm8gSEVMTy9FSExPIHN0cmluZyBoYXMgeWV0IGJlZW4gcmVjZWl2ZWQuCiAgICAgKgogICAgICogQHZhciBhcnJheXxudWxsCiAgICAgKi8KICAgIHByb3RlY3RlZCAkc2VydmVyX2NhcHMgPSBudWxsOwoKICAgIC8qKgogICAgICogVGhlIG1vc3QgcmVjZW50IHJlcGx5IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci4KICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgJGxhc3RfcmVwbHkgPSAnJzsKCiAgICAvKioKICAgICAqIE91dHB1dCBkZWJ1Z2dpbmcgaW5mbyB2aWEgYSB1c2VyLXNlbGVjdGVkIG1ldGhvZC4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzdHIgICBEZWJ1ZyBzdHJpbmcgdG8gb3V0cHV0CiAgICAgKiBAcGFyYW0gaW50ICAgICRsZXZlbCBUaGUgZGVidWcgbGV2ZWwgb2YgdGhpcyBtZXNzYWdlOyBzZWUgREVCVUdfKiBjb25zdGFudHMKICAgICAqCiAgICAgKiBAc2VlIFNNVFA6OiREZWJ1Z291dHB1dAogICAgICogQHNlZSBTTVRQOjokZG9fZGVidWcKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGVkZWJ1Zygkc3RyLCAkbGV2ZWwgPSAwKQogICAgewogICAgICAgIGlmICgkbGV2ZWwgPiAkdGhpcy0+ZG9fZGVidWcpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvL0lzIHRoaXMgYSBQU1ItMyBsb2dnZXI/CiAgICAgICAgaWYgKCR0aGlzLT5EZWJ1Z291dHB1dCBpbnN0YW5jZW9mIFxQc3JcTG9nXExvZ2dlckludGVyZmFjZSkgewogICAgICAgICAgICAkdGhpcy0+RGVidWdvdXRwdXQtPmRlYnVnKCRzdHIpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvL0F2b2lkIGNsYXNoIHdpdGggYnVpbHQtaW4gZnVuY3Rpb24gbmFtZXMKICAgICAgICBpZiAoIWluX2FycmF5KCR0aGlzLT5EZWJ1Z291dHB1dCwgWydlcnJvcl9sb2cnLCAnaHRtbCcsICdlY2hvJ10pIGFuZCBpc19jYWxsYWJsZSgkdGhpcy0+RGVidWdvdXRwdXQpKSB7CiAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jKCR0aGlzLT5EZWJ1Z291dHB1dCwgJHN0ciwgJGxldmVsKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICgkdGhpcy0+RGVidWdvdXRwdXQpIHsKICAgICAgICAgICAgY2FzZSAnZXJyb3JfbG9nJzoKICAgICAgICAgICAgICAgIC8vRG9uJ3Qgb3V0cHV0LCBqdXN0IGxvZwogICAgICAgICAgICAgICAgZXJyb3JfbG9nKCRzdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2h0bWwnOgogICAgICAgICAgICAgICAgLy9DbGVhbnMgdXAgb3V0cHV0IGEgYml0IGZvciBhIGJldHRlciBsb29raW5nLCBIVE1MLXNhZmUgb3V0cHV0CiAgICAgICAgICAgICAgICBlY2hvIGdtZGF0ZSgnWS1tLWQgSDppOnMnKSwgJyAnLCBodG1sZW50aXRpZXMoCiAgICAgICAgICAgICAgICAgICAgcHJlZ19yZXBsYWNlKCcvW1xyXG5dKy8nLCAnJywgJHN0ciksCiAgICAgICAgICAgICAgICAgICAgRU5UX1FVT1RFUywKICAgICAgICAgICAgICAgICAgICAnVVRGLTgnCiAgICAgICAgICAgICAgICApLCAiPGJyPlxuIjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdlY2hvJzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIGxpbmUgYnJlYWtzCiAgICAgICAgICAgICAgICAkc3RyID0gcHJlZ19yZXBsYWNlKCcvXHJcbnxcci9tcycsICJcbiIsICRzdHIpOwogICAgICAgICAgICAgICAgZWNobyBnbWRhdGUoJ1ktbS1kIEg6aTpzJyksCiAgICAgICAgICAgICAgICAiXHQiLAogICAgICAgICAgICAgICAgICAgIC8vVHJpbSB0cmFpbGluZyBzcGFjZQogICAgICAgICAgICAgICAgdHJpbSgKICAgICAgICAgICAgICAgIC8vSW5kZW50IGZvciByZWFkYWJpbGl0eSwgZXhjZXB0IGZvciB0cmFpbGluZyBicmVhawogICAgICAgICAgICAgICAgICAgIHN0cl9yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgICAiXG4iLAogICAgICAgICAgICAgICAgICAgICAgICAiXG4gICAgICAgICAgICAgICAgICAgXHQgICAgICAgICAgICAgICAgICAiLAogICAgICAgICAgICAgICAgICAgICAgICB0cmltKCRzdHIpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICJcbiI7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ29ubmVjdCB0byBhbiBTTVRQIHNlcnZlci4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRob3N0ICAgIFNNVFAgc2VydmVyIElQIG9yIGhvc3QgbmFtZQogICAgICogQHBhcmFtIGludCAgICAkcG9ydCAgICBUaGUgcG9ydCBudW1iZXIgdG8gY29ubmVjdCB0bwogICAgICogQHBhcmFtIGludCAgICAkdGltZW91dCBIb3cgbG9uZyB0byB3YWl0IGZvciB0aGUgY29ubmVjdGlvbiB0byBvcGVuCiAgICAgKiBAcGFyYW0gYXJyYXkgICRvcHRpb25zIEFuIGFycmF5IG9mIG9wdGlvbnMgZm9yIHN0cmVhbV9jb250ZXh0X2NyZWF0ZSgpCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjb25uZWN0KCRob3N0LCAkcG9ydCA9IG51bGwsICR0aW1lb3V0ID0gMzAsICRvcHRpb25zID0gW10pCiAgICB7CiAgICAgICAgc3RhdGljICRzdHJlYW1vazsKICAgICAgICAvL1RoaXMgaXMgZW5hYmxlZCBieSBkZWZhdWx0IHNpbmNlIDUuMC4wIGJ1dCBzb21lIHByb3ZpZGVycyBkaXNhYmxlIGl0CiAgICAgICAgLy9DaGVjayB0aGlzIG9uY2UgYW5kIGNhY2hlIHRoZSByZXN1bHQKICAgICAgICBpZiAobnVsbCA9PT0gJHN0cmVhbW9rKSB7CiAgICAgICAgICAgICRzdHJlYW1vayA9IGZ1bmN0aW9uX2V4aXN0cygnc3RyZWFtX3NvY2tldF9jbGllbnQnKTsKICAgICAgICB9CiAgICAgICAgLy8gQ2xlYXIgZXJyb3JzIHRvIGF2b2lkIGNvbmZ1c2lvbgogICAgICAgICR0aGlzLT5zZXRFcnJvcignJyk7CiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGFyZSBfX25vdF9fIGNvbm5lY3RlZAogICAgICAgIGlmICgkdGhpcy0+Y29ubmVjdGVkKCkpIHsKICAgICAgICAgICAgLy8gQWxyZWFkeSBjb25uZWN0ZWQsIGdlbmVyYXRlIGVycm9yCiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcignQWxyZWFkeSBjb25uZWN0ZWQgdG8gYSBzZXJ2ZXInKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKGVtcHR5KCRwb3J0KSkgewogICAgICAgICAgICAkcG9ydCA9IHNlbGY6OkRFRkFVTFRfUE9SVDsKICAgICAgICB9CiAgICAgICAgLy8gQ29ubmVjdCB0byB0aGUgU01UUCBzZXJ2ZXIKICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAiQ29ubmVjdGlvbjogb3BlbmluZyB0byAkaG9zdDokcG9ydCwgdGltZW91dD0kdGltZW91dCwgb3B0aW9ucz0iIC4KICAgICAgICAgICAgKGNvdW50KCRvcHRpb25zKSA+IDAgPyB2YXJfZXhwb3J0KCRvcHRpb25zLCB0cnVlKSA6ICdhcnJheSgpJyksCiAgICAgICAgICAgIHNlbGY6OkRFQlVHX0NPTk5FQ1RJT04KICAgICAgICApOwogICAgICAgICRlcnJubyA9IDA7CiAgICAgICAgJGVycnN0ciA9ICcnOwogICAgICAgIGlmICgkc3RyZWFtb2spIHsKICAgICAgICAgICAgJHNvY2tldF9jb250ZXh0ID0gc3RyZWFtX2NvbnRleHRfY3JlYXRlKCRvcHRpb25zKTsKICAgICAgICAgICAgc2V0X2Vycm9yX2hhbmRsZXIoWyR0aGlzLCAnZXJyb3JIYW5kbGVyJ10pOwogICAgICAgICAgICAkdGhpcy0+c210cF9jb25uID0gc3RyZWFtX3NvY2tldF9jbGllbnQoCiAgICAgICAgICAgICAgICAkaG9zdCAuICc6JyAuICRwb3J0LAogICAgICAgICAgICAgICAgJGVycm5vLAogICAgICAgICAgICAgICAgJGVycnN0ciwKICAgICAgICAgICAgICAgICR0aW1lb3V0LAogICAgICAgICAgICAgICAgU1RSRUFNX0NMSUVOVF9DT05ORUNULAogICAgICAgICAgICAgICAgJHNvY2tldF9jb250ZXh0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlc3RvcmVfZXJyb3JfaGFuZGxlcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vRmFsbCBiYWNrIHRvIGZzb2Nrb3BlbiB3aGljaCBzaG91bGQgd29yayBpbiBtb3JlIHBsYWNlcywgYnV0IGlzIG1pc3Npbmcgc29tZSBmZWF0dXJlcwogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb246IHN0cmVhbV9zb2NrZXRfY2xpZW50IG5vdCBhdmFpbGFibGUsIGZhbGxpbmcgYmFjayB0byBmc29ja29wZW4nLAogICAgICAgICAgICAgICAgc2VsZjo6REVCVUdfQ09OTkVDVElPTgogICAgICAgICAgICApOwogICAgICAgICAgICBzZXRfZXJyb3JfaGFuZGxlcihbJHRoaXMsICdlcnJvckhhbmRsZXInXSk7CiAgICAgICAgICAgICR0aGlzLT5zbXRwX2Nvbm4gPSBmc29ja29wZW4oCiAgICAgICAgICAgICAgICAkaG9zdCwKICAgICAgICAgICAgICAgICRwb3J0LAogICAgICAgICAgICAgICAgJGVycm5vLAogICAgICAgICAgICAgICAgJGVycnN0ciwKICAgICAgICAgICAgICAgICR0aW1lb3V0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlc3RvcmVfZXJyb3JfaGFuZGxlcigpOwogICAgICAgIH0KICAgICAgICAvLyBWZXJpZnkgd2UgY29ubmVjdGVkIHByb3Blcmx5CiAgICAgICAgaWYgKCFpc19yZXNvdXJjZSgkdGhpcy0+c210cF9jb25uKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoCiAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gc2VydmVyJywKICAgICAgICAgICAgICAgICcnLAogICAgICAgICAgICAgICAgKHN0cmluZykgJGVycm5vLAogICAgICAgICAgICAgICAgKHN0cmluZykgJGVycnN0cgogICAgICAgICAgICApOwogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAgICAgJ1NNVFAgRVJST1I6ICcgLiAkdGhpcy0+ZXJyb3JbJ2Vycm9yJ10KICAgICAgICAgICAgICAgIC4gIjogJGVycnN0ciAoJGVycm5vKSIsCiAgICAgICAgICAgICAgICBzZWxmOjpERUJVR19DTElFTlQKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPmVkZWJ1ZygnQ29ubmVjdGlvbjogb3BlbmVkJywgc2VsZjo6REVCVUdfQ09OTkVDVElPTik7CiAgICAgICAgLy8gU01UUCBzZXJ2ZXIgY2FuIHRha2UgbG9uZ2VyIHRvIHJlc3BvbmQsIGdpdmUgbG9uZ2VyIHRpbWVvdXQgZm9yIGZpcnN0IHJlYWQKICAgICAgICAvLyBXaW5kb3dzIGRvZXMgbm90IGhhdmUgc3VwcG9ydCBmb3IgdGhpcyB0aW1lb3V0IGZ1bmN0aW9uCiAgICAgICAgaWYgKHN1YnN0cihQSFBfT1MsIDAsIDMpICE9ICdXSU4nKSB7CiAgICAgICAgICAgICRtYXggPSBpbmlfZ2V0KCdtYXhfZXhlY3V0aW9uX3RpbWUnKTsKICAgICAgICAgICAgLy8gRG9uJ3QgYm90aGVyIGlmIHVubGltaXRlZAogICAgICAgICAgICBpZiAoMCAhPSAkbWF4IGFuZCAkdGltZW91dCA+ICRtYXgpIHsKICAgICAgICAgICAgICAgIEBzZXRfdGltZV9saW1pdCgkdGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RyZWFtX3NldF90aW1lb3V0KCR0aGlzLT5zbXRwX2Nvbm4sICR0aW1lb3V0LCAwKTsKICAgICAgICB9CiAgICAgICAgLy8gR2V0IGFueSBhbm5vdW5jZW1lbnQKICAgICAgICAkYW5ub3VuY2UgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CiAgICAgICAgJHRoaXMtPmVkZWJ1ZygnU0VSVkVSIC0+IENMSUVOVDogJyAuICRhbm5vdW5jZSwgc2VsZjo6REVCVUdfU0VSVkVSKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbml0aWF0ZSBhIFRMUyAoZW5jcnlwdGVkKSBzZXNzaW9uLgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RhcnRUTFMoKQogICAgewogICAgICAgIGlmICghJHRoaXMtPnNlbmRDb21tYW5kKCdTVEFSVFRMUycsICdTVEFSVFRMUycsIDIyMCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy9BbGxvdyB0aGUgYmVzdCBUTFMgdmVyc2lvbihzKSB3ZSBjYW4KICAgICAgICAkY3J5cHRvX21ldGhvZCA9IFNUUkVBTV9DUllQVE9fTUVUSE9EX1RMU19DTElFTlQ7CgogICAgICAgIC8vUEhQIDUuNi43IGRyb3BwZWQgaW5jbHVzaW9uIG9mIFRMUyAxLjEgYW5kIDEuMiBpbiBTVFJFQU1fQ1JZUFRPX01FVEhPRF9UTFNfQ0xJRU5UCiAgICAgICAgLy9zbyBhZGQgdGhlbSBiYWNrIGluIG1hbnVhbGx5IGlmIHdlIGNhbgogICAgICAgIGlmIChkZWZpbmVkKCdTVFJFQU1fQ1JZUFRPX01FVEhPRF9UTFN2MV8yX0NMSUVOVCcpKSB7CiAgICAgICAgICAgICRjcnlwdG9fbWV0aG9kIHw9IFNUUkVBTV9DUllQVE9fTUVUSE9EX1RMU3YxXzJfQ0xJRU5UOwogICAgICAgICAgICAkY3J5cHRvX21ldGhvZCB8PSBTVFJFQU1fQ1JZUFRPX01FVEhPRF9UTFN2MV8xX0NMSUVOVDsKICAgICAgICB9CgogICAgICAgIC8vIEJlZ2luIGVuY3J5cHRlZCBjb25uZWN0aW9uCiAgICAgICAgc2V0X2Vycm9yX2hhbmRsZXIoWyR0aGlzLCAnZXJyb3JIYW5kbGVyJ10pOwogICAgICAgICRjcnlwdG9fb2sgPSBzdHJlYW1fc29ja2V0X2VuYWJsZV9jcnlwdG8oCiAgICAgICAgICAgICR0aGlzLT5zbXRwX2Nvbm4sCiAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICRjcnlwdG9fbWV0aG9kCiAgICAgICAgKTsKICAgICAgICByZXN0b3JlX2Vycm9yX2hhbmRsZXIoKTsKCiAgICAgICAgcmV0dXJuIChib29sKSAkY3J5cHRvX29rOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybSBTTVRQIGF1dGhlbnRpY2F0aW9uLgogICAgICogTXVzdCBiZSBydW4gYWZ0ZXIgaGVsbG8oKS4KICAgICAqCiAgICAgKiBAc2VlICAgIGhlbGxvKCkKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICR1c2VybmFtZSBUaGUgdXNlciBuYW1lCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXNzd29yZCBUaGUgcGFzc3dvcmQKICAgICAqIEBwYXJhbSBzdHJpbmcgJGF1dGh0eXBlIFRoZSBhdXRoIHR5cGUgKENSQU0tTUQ1LCBQTEFJTiwgTE9HSU4sIFhPQVVUSDIpCiAgICAgKiBAcGFyYW0gT0F1dGggICRPQXV0aCAgICBBbiBvcHRpb25hbCBPQXV0aCBpbnN0YW5jZSBmb3IgWE9BVVRIMiBhdXRoZW50aWNhdGlvbgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIHN1Y2Nlc3NmdWxseSBhdXRoZW50aWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhdXRoZW50aWNhdGUoCiAgICAgICAgJHVzZXJuYW1lLAogICAgICAgICRwYXNzd29yZCwKICAgICAgICAkYXV0aHR5cGUgPSBudWxsLAogICAgICAgICRPQXV0aCA9IG51bGwKICAgICkgewogICAgICAgIGlmICghJHRoaXMtPnNlcnZlcl9jYXBzKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcignQXV0aGVudGljYXRpb24gaXMgbm90IGFsbG93ZWQgYmVmb3JlIEhFTE8vRUhMTycpOwoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ0VITE8nLCAkdGhpcy0+c2VydmVyX2NhcHMpKSB7CiAgICAgICAgICAgIC8vIFNNVFAgZXh0ZW5zaW9ucyBhcmUgYXZhaWxhYmxlOyB0cnkgdG8gZmluZCBhIHByb3BlciBhdXRoZW50aWNhdGlvbiBtZXRob2QKICAgICAgICAgICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCdBVVRIJywgJHRoaXMtPnNlcnZlcl9jYXBzKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCdBdXRoZW50aWNhdGlvbiBpcyBub3QgYWxsb3dlZCBhdCB0aGlzIHN0YWdlJyk7CiAgICAgICAgICAgICAgICAvLyAnYXQgdGhpcyBzdGFnZScgbWVhbnMgdGhhdCBhdXRoIG1heSBiZSBhbGxvd2VkIGFmdGVyIHRoZSBzdGFnZSBjaGFuZ2VzCiAgICAgICAgICAgICAgICAvLyBlLmcuIGFmdGVyIFNUQVJUVExTCgogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCdBdXRoIG1ldGhvZCByZXF1ZXN0ZWQ6ICcgLiAoJGF1dGh0eXBlID8gJGF1dGh0eXBlIDogJ1VOU1BFQ0lGSUVEJyksIHNlbGY6OkRFQlVHX0xPV0xFVkVMKTsKICAgICAgICAgICAgJHRoaXMtPmVkZWJ1ZygKICAgICAgICAgICAgICAgICdBdXRoIG1ldGhvZHMgYXZhaWxhYmxlIG9uIHRoZSBzZXJ2ZXI6ICcgLiBpbXBsb2RlKCcsJywgJHRoaXMtPnNlcnZlcl9jYXBzWydBVVRIJ10pLAogICAgICAgICAgICAgICAgc2VsZjo6REVCVUdfTE9XTEVWRUwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIC8vSWYgd2UgaGF2ZSByZXF1ZXN0ZWQgYSBzcGVjaWZpYyBhdXRoIHR5cGUsIGNoZWNrIHRoZSBzZXJ2ZXIgc3VwcG9ydHMgaXQgYmVmb3JlIHRyeWluZyBvdGhlcnMKICAgICAgICAgICAgaWYgKG51bGwgIT09ICRhdXRodHlwZSBhbmQgIWluX2FycmF5KCRhdXRodHlwZSwgJHRoaXMtPnNlcnZlcl9jYXBzWydBVVRIJ10pKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCdSZXF1ZXN0ZWQgYXV0aCBtZXRob2Qgbm90IGF2YWlsYWJsZTogJyAuICRhdXRodHlwZSwgc2VsZjo6REVCVUdfTE9XTEVWRUwpOwogICAgICAgICAgICAgICAgJGF1dGh0eXBlID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGVtcHR5KCRhdXRodHlwZSkpIHsKICAgICAgICAgICAgICAgIC8vSWYgbm8gYXV0aCBtZWNoYW5pc20gaXMgc3BlY2lmaWVkLCBhdHRlbXB0IHRvIHVzZSB0aGVzZSwgaW4gdGhpcyBvcmRlcgogICAgICAgICAgICAgICAgLy9UcnkgQ1JBTS1NRDUgZmlyc3QgYXMgaXQncyBtb3JlIHNlY3VyZSB0aGFuIHRoZSBvdGhlcnMKICAgICAgICAgICAgICAgIGZvcmVhY2ggKFsnQ1JBTS1NRDUnLCAnTE9HSU4nLCAnUExBSU4nLCAnWE9BVVRIMiddIGFzICRtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoJG1ldGhvZCwgJHRoaXMtPnNlcnZlcl9jYXBzWydBVVRIJ10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRhdXRodHlwZSA9ICRtZXRob2Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChlbXB0eSgkYXV0aHR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCdObyBzdXBwb3J0ZWQgYXV0aGVudGljYXRpb24gbWV0aG9kcyBmb3VuZCcpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZWxmOjplZGVidWcoJ0F1dGggbWV0aG9kIHNlbGVjdGVkOiAnIC4gJGF1dGh0eXBlLCBzZWxmOjpERUJVR19MT1dMRVZFTCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghaW5fYXJyYXkoJGF1dGh0eXBlLCAkdGhpcy0+c2VydmVyX2NhcHNbJ0FVVEgnXSkpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigiVGhlIHJlcXVlc3RlZCBhdXRoZW50aWNhdGlvbiBtZXRob2QgXCIkYXV0aHR5cGVcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBzZXJ2ZXIiKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2VpZiAoZW1wdHkoJGF1dGh0eXBlKSkgewogICAgICAgICAgICAkYXV0aHR5cGUgPSAnTE9HSU4nOwogICAgICAgIH0KICAgICAgICBzd2l0Y2ggKCRhdXRodHlwZSkgewogICAgICAgICAgICBjYXNlICdQTEFJTic6CiAgICAgICAgICAgICAgICAvLyBTdGFydCBhdXRoZW50aWNhdGlvbgogICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+c2VuZENvbW1hbmQoJ0FVVEgnLCAnQVVUSCBQTEFJTicsIDMzNCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBTZW5kIGVuY29kZWQgdXNlcm5hbWUgYW5kIHBhc3N3b3JkCiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLT5zZW5kQ29tbWFuZCgKICAgICAgICAgICAgICAgICAgICAnVXNlciAmIFBhc3N3b3JkJywKICAgICAgICAgICAgICAgICAgICBiYXNlNjRfZW5jb2RlKCJcMCIgLiAkdXNlcm5hbWUgLiAiXDAiIC4gJHBhc3N3b3JkKSwKICAgICAgICAgICAgICAgICAgICAyMzUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdMT0dJTic6CiAgICAgICAgICAgICAgICAvLyBTdGFydCBhdXRoZW50aWNhdGlvbgogICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+c2VuZENvbW1hbmQoJ0FVVEgnLCAnQVVUSCBMT0dJTicsIDMzNCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLT5zZW5kQ29tbWFuZCgnVXNlcm5hbWUnLCBiYXNlNjRfZW5jb2RlKCR1c2VybmFtZSksIDMzNCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLT5zZW5kQ29tbWFuZCgnUGFzc3dvcmQnLCBiYXNlNjRfZW5jb2RlKCRwYXNzd29yZCksIDIzNSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnQ1JBTS1NRDUnOgogICAgICAgICAgICAgICAgLy8gU3RhcnQgYXV0aGVudGljYXRpb24KICAgICAgICAgICAgICAgIGlmICghJHRoaXMtPnNlbmRDb21tYW5kKCdBVVRIIENSQU0tTUQ1JywgJ0FVVEggQ1JBTS1NRDUnLCAzMzQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBjaGFsbGVuZ2UKICAgICAgICAgICAgICAgICRjaGFsbGVuZ2UgPSBiYXNlNjRfZGVjb2RlKHN1YnN0cigkdGhpcy0+bGFzdF9yZXBseSwgNCkpOwoKICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSByZXNwb25zZQogICAgICAgICAgICAgICAgJHJlc3BvbnNlID0gJHVzZXJuYW1lIC4gJyAnIC4gJHRoaXMtPmhtYWMoJGNoYWxsZW5nZSwgJHBhc3N3b3JkKTsKCiAgICAgICAgICAgICAgICAvLyBzZW5kIGVuY29kZWQgY3JlZGVudGlhbHMKICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+c2VuZENvbW1hbmQoJ1VzZXJuYW1lJywgYmFzZTY0X2VuY29kZSgkcmVzcG9uc2UpLCAyMzUpOwogICAgICAgICAgICBjYXNlICdYT0FVVEgyJzoKICAgICAgICAgICAgICAgIC8vVGhlIE9BdXRoIGluc3RhbmNlIG11c3QgYmUgc2V0IHVwIHByaW9yIHRvIHJlcXVlc3RpbmcgYXV0aC4KICAgICAgICAgICAgICAgIGlmIChudWxsID09PSAkT0F1dGgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkb2F1dGggPSAkT0F1dGgtPmdldE9hdXRoNjQoKTsKCiAgICAgICAgICAgICAgICAvLyBTdGFydCBhdXRoZW50aWNhdGlvbgogICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+c2VuZENvbW1hbmQoJ0FVVEgnLCAnQVVUSCBYT0FVVEgyICcgLiAkb2F1dGgsIDIzNSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigiQXV0aGVudGljYXRpb24gbWV0aG9kIFwiJGF1dGh0eXBlXCIgaXMgbm90IHN1cHBvcnRlZCIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlIGFuIE1ENSBITUFDIGhhc2guCiAgICAgKiBXb3JrcyBsaWtlIGhhc2hfaG1hYygnbWQ1JywgJGRhdGEsICRrZXkpCiAgICAgKiBpbiBjYXNlIHRoYXQgZnVuY3Rpb24gaXMgbm90IGF2YWlsYWJsZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRkYXRhIFRoZSBkYXRhIHRvIGhhc2gKICAgICAqIEBwYXJhbSBzdHJpbmcgJGtleSAgVGhlIGtleSB0byBoYXNoIHdpdGgKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gaG1hYygkZGF0YSwgJGtleSkKICAgIHsKICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdoYXNoX2htYWMnKSkgewogICAgICAgICAgICByZXR1cm4gaGFzaF9obWFjKCdtZDUnLCAkZGF0YSwgJGtleSk7CiAgICAgICAgfQoKICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGJvcnJvd2VkIGZyb20KICAgICAgICAvLyBodHRwOi8vcGhwLm5ldC9tYW51YWwvZW4vZnVuY3Rpb24ubWhhc2gucGhwIzI3MjI1CgogICAgICAgIC8vIFJGQyAyMTA0IEhNQUMgaW1wbGVtZW50YXRpb24gZm9yIHBocC4KICAgICAgICAvLyBDcmVhdGVzIGFuIG1kNSBITUFDLgogICAgICAgIC8vIEVsaW1pbmF0ZXMgdGhlIG5lZWQgdG8gaW5zdGFsbCBtaGFzaCB0byBjb21wdXRlIGEgSE1BQwogICAgICAgIC8vIGJ5IExhbmNlIFJ1c2hpbmcKCiAgICAgICAgJGJ5dGVsZW4gPSA2NDsgLy8gYnl0ZSBsZW5ndGggZm9yIG1kNQogICAgICAgIGlmIChzdHJsZW4oJGtleSkgPiAkYnl0ZWxlbikgewogICAgICAgICAgICAka2V5ID0gcGFjaygnSConLCBtZDUoJGtleSkpOwogICAgICAgIH0KICAgICAgICAka2V5ID0gc3RyX3BhZCgka2V5LCAkYnl0ZWxlbiwgY2hyKDB4MDApKTsKICAgICAgICAkaXBhZCA9IHN0cl9wYWQoJycsICRieXRlbGVuLCBjaHIoMHgzNikpOwogICAgICAgICRvcGFkID0gc3RyX3BhZCgnJywgJGJ5dGVsZW4sIGNocigweDVjKSk7CiAgICAgICAgJGtfaXBhZCA9ICRrZXkgXiAkaXBhZDsKICAgICAgICAka19vcGFkID0gJGtleSBeICRvcGFkOwoKICAgICAgICByZXR1cm4gbWQ1KCRrX29wYWQgLiBwYWNrKCdIKicsIG1kNSgka19pcGFkIC4gJGRhdGEpKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBjb25uZWN0aW9uIHN0YXRlLgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIGNvbm5lY3RlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY29ubmVjdGVkKCkKICAgIHsKICAgICAgICBpZiAoaXNfcmVzb3VyY2UoJHRoaXMtPnNtdHBfY29ubikpIHsKICAgICAgICAgICAgJHNvY2tfc3RhdHVzID0gc3RyZWFtX2dldF9tZXRhX2RhdGEoJHRoaXMtPnNtdHBfY29ubik7CiAgICAgICAgICAgIGlmICgkc29ja19zdGF0dXNbJ2VvZiddKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgc29ja2V0IGlzIHZhbGlkIGJ1dCB3ZSBhcmUgbm90IGNvbm5lY3RlZAogICAgICAgICAgICAgICAgJHRoaXMtPmVkZWJ1ZygKICAgICAgICAgICAgICAgICAgICAnU01UUCBOT1RJQ0U6IEVPRiBjYXVnaHQgd2hpbGUgY2hlY2tpbmcgaWYgY29ubmVjdGVkJywKICAgICAgICAgICAgICAgICAgICBzZWxmOjpERUJVR19DTElFTlQKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y2xvc2UoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBldmVyeXRoaW5nIGxvb2tzIGdvb2QKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIENsb3NlIHRoZSBzb2NrZXQgYW5kIGNsZWFuIHVwIHRoZSBzdGF0ZSBvZiB0aGUgY2xhc3MuCiAgICAgKiBEb24ndCB1c2UgdGhpcyBmdW5jdGlvbiB3aXRob3V0IGZpcnN0IHRyeWluZyB0byB1c2UgUVVJVC4KICAgICAqCiAgICAgKiBAc2VlIHF1aXQoKQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY2xvc2UoKQogICAgewogICAgICAgICR0aGlzLT5zZXRFcnJvcignJyk7CiAgICAgICAgJHRoaXMtPnNlcnZlcl9jYXBzID0gbnVsbDsKICAgICAgICAkdGhpcy0+aGVsb19ycGx5ID0gbnVsbDsKICAgICAgICBpZiAoaXNfcmVzb3VyY2UoJHRoaXMtPnNtdHBfY29ubikpIHsKICAgICAgICAgICAgLy8gY2xvc2UgdGhlIGNvbm5lY3Rpb24gYW5kIGNsZWFudXAKICAgICAgICAgICAgZmNsb3NlKCR0aGlzLT5zbXRwX2Nvbm4pOwogICAgICAgICAgICAkdGhpcy0+c210cF9jb25uID0gbnVsbDsgLy9NYWtlcyBmb3IgY2xlYW5lciBzZXJpYWxpemF0aW9uCiAgICAgICAgICAgICR0aGlzLT5lZGVidWcoJ0Nvbm5lY3Rpb246IGNsb3NlZCcsIHNlbGY6OkRFQlVHX0NPTk5FQ1RJT04pOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYW4gU01UUCBEQVRBIGNvbW1hbmQuCiAgICAgKiBJc3N1ZXMgYSBkYXRhIGNvbW1hbmQgYW5kIHNlbmRzIHRoZSBtc2dfZGF0YSB0byB0aGUgc2VydmVyLAogICAgICogZmluaWFsaXppbmcgdGhlIG1haWwgdHJhbnNhY3Rpb24uICRtc2dfZGF0YSBpcyB0aGUgbWVzc2FnZQogICAgICogdGhhdCBpcyB0byBiZSBzZW5kIHdpdGggdGhlIGhlYWRlcnMuIEVhY2ggaGVhZGVyIG5lZWRzIHRvIGJlCiAgICAgKiBvbiBhIHNpbmdsZSBsaW5lIGZvbGxvd2VkIGJ5IGEgPENSTEY+IHdpdGggdGhlIG1lc3NhZ2UgaGVhZGVycwogICAgICogYW5kIHRoZSBtZXNzYWdlIGJvZHkgYmVpbmcgc2VwYXJhdGVkIGJ5IGFuIGFkZGl0aW9uYWwgPENSTEY+LgogICAgICogSW1wbGVtZW50cyBSRkMgODIxOiBEQVRBIDxDUkxGPi4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRtc2dfZGF0YSBNZXNzYWdlIGRhdGEgdG8gc2VuZAogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZGF0YSgkbXNnX2RhdGEpCiAgICB7CiAgICAgICAgLy9UaGlzIHdpbGwgdXNlIHRoZSBzdGFuZGFyZCB0aW1lbGltaXQKICAgICAgICBpZiAoISR0aGlzLT5zZW5kQ29tbWFuZCgnREFUQScsICdEQVRBJywgMzU0KSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvKiBUaGUgc2VydmVyIGlzIHJlYWR5IHRvIGFjY2VwdCBkYXRhIQogICAgICAgICAqIEFjY29yZGluZyB0byByZmM4MjEgd2Ugc2hvdWxkIG5vdCBzZW5kIG1vcmUgdGhhbiAxMDAwIGNoYXJhY3RlcnMgb24gYSBzaW5nbGUgbGluZSAoaW5jbHVkaW5nIHRoZSBMRSkKICAgICAgICAgKiBzbyB3ZSB3aWxsIGJyZWFrIHRoZSBkYXRhIHVwIGludG8gbGluZXMgYnkgXHIgYW5kL29yIFxuIHRoZW4gaWYgbmVlZGVkIHdlIHdpbGwgYnJlYWsgZWFjaCBvZiB0aG9zZSBpbnRvCiAgICAgICAgICogc21hbGxlciBsaW5lcyB0byBmaXQgd2l0aGluIHRoZSBsaW1pdC4KICAgICAgICAgKiBXZSB3aWxsIGFsc28gbG9vayBmb3IgbGluZXMgdGhhdCBzdGFydCB3aXRoIGEgJy4nIGFuZCBwcmVwZW5kIGFuIGFkZGl0aW9uYWwgJy4nLgogICAgICAgICAqIE5PVEU6IHRoaXMgZG9lcyBub3QgY291bnQgdG93YXJkcyBsaW5lLWxlbmd0aCBsaW1pdC4KICAgICAgICAgKi8KCiAgICAgICAgLy8gTm9ybWFsaXplIGxpbmUgYnJlYWtzIGJlZm9yZSBleHBsb2RpbmcKICAgICAgICAkbGluZXMgPSBleHBsb2RlKCJcbiIsIHN0cl9yZXBsYWNlKFsiXHJcbiIsICJcciJdLCAiXG4iLCAkbXNnX2RhdGEpKTsKCiAgICAgICAgLyogVG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiBhIGNvbXBsZXRlIFJGQzgyMiBtZXNzYWdlIGFuZCBhIHBsYWluIG1lc3NhZ2UgYm9keSwgd2UgY2hlY2sgaWYgdGhlIGZpcnN0IGZpZWxkCiAgICAgICAgICogb2YgdGhlIGZpcnN0IGxpbmUgKCc6JyBzZXBhcmF0ZWQpIGRvZXMgbm90IGNvbnRhaW4gYSBzcGFjZSB0aGVuIGl0IF9zaG91bGRfIGJlIGEgaGVhZGVyIGFuZCB3ZSB3aWxsCiAgICAgICAgICogcHJvY2VzcyBhbGwgbGluZXMgYmVmb3JlIGEgYmxhbmsgbGluZSBhcyBoZWFkZXJzLgogICAgICAgICAqLwoKICAgICAgICAkZmllbGQgPSBzdWJzdHIoJGxpbmVzWzBdLCAwLCBzdHJwb3MoJGxpbmVzWzBdLCAnOicpKTsKICAgICAgICAkaW5faGVhZGVycyA9IGZhbHNlOwogICAgICAgIGlmICghZW1wdHkoJGZpZWxkKSBhbmQgc3RycG9zKCRmaWVsZCwgJyAnKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgJGluX2hlYWRlcnMgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJGxpbmVzIGFzICRsaW5lKSB7CiAgICAgICAgICAgICRsaW5lc19vdXQgPSBbXTsKICAgICAgICAgICAgaWYgKCRpbl9oZWFkZXJzIGFuZCAkbGluZSA9PSAnJykgewogICAgICAgICAgICAgICAgJGluX2hlYWRlcnMgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0JyZWFrIHRoaXMgbGluZSB1cCBpbnRvIHNldmVyYWwgc21hbGxlciBsaW5lcyBpZiBpdCdzIHRvbyBsb25nCiAgICAgICAgICAgIC8vTWljcm8tb3B0aW1pc2F0aW9uOiBpc3NldCgkc3RyWyRsZW5dKSBpcyBmYXN0ZXIgdGhhbiAoc3RybGVuKCRzdHIpID4gJGxlbiksCiAgICAgICAgICAgIHdoaWxlIChpc3NldCgkbGluZVtzZWxmOjpNQVhfTElORV9MRU5HVEhdKSkgewogICAgICAgICAgICAgICAgLy9Xb3JraW5nIGJhY2t3YXJkcywgdHJ5IHRvIGZpbmQgYSBzcGFjZSB3aXRoaW4gdGhlIGxhc3QgTUFYX0xJTkVfTEVOR1RIIGNoYXJzIG9mIHRoZSBsaW5lIHRvIGJyZWFrIG9uCiAgICAgICAgICAgICAgICAvL3NvIGFzIHRvIGF2b2lkIGJyZWFraW5nIGluIHRoZSBtaWRkbGUgb2YgYSB3b3JkCiAgICAgICAgICAgICAgICAkcG9zID0gc3RycnBvcyhzdWJzdHIoJGxpbmUsIDAsIHNlbGY6Ok1BWF9MSU5FX0xFTkdUSCksICcgJyk7CiAgICAgICAgICAgICAgICAvL0RlbGliZXJhdGVseSBtYXRjaGVzIGJvdGggZmFsc2UgYW5kIDAKICAgICAgICAgICAgICAgIGlmICghJHBvcykgewogICAgICAgICAgICAgICAgICAgIC8vTm8gbmljZSBicmVhayBmb3VuZCwgYWRkIGEgaGFyZCBicmVhawogICAgICAgICAgICAgICAgICAgICRwb3MgPSBzZWxmOjpNQVhfTElORV9MRU5HVEggLSAxOwogICAgICAgICAgICAgICAgICAgICRsaW5lc19vdXRbXSA9IHN1YnN0cigkbGluZSwgMCwgJHBvcyk7CiAgICAgICAgICAgICAgICAgICAgJGxpbmUgPSBzdWJzdHIoJGxpbmUsICRwb3MpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL0JyZWFrIGF0IHRoZSBmb3VuZCBwb2ludAogICAgICAgICAgICAgICAgICAgICRsaW5lc19vdXRbXSA9IHN1YnN0cigkbGluZSwgMCwgJHBvcyk7CiAgICAgICAgICAgICAgICAgICAgLy9Nb3ZlIGFsb25nIGJ5IHRoZSBhbW91bnQgd2UgZGVhbHQgd2l0aAogICAgICAgICAgICAgICAgICAgICRsaW5lID0gc3Vic3RyKCRsaW5lLCAkcG9zICsgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL0lmIHByb2Nlc3NpbmcgaGVhZGVycyBhZGQgYSBMV1NQLWNoYXIgdG8gdGhlIGZyb250IG9mIG5ldyBsaW5lIFJGQzgyMiBzZWN0aW9uIDMuMS4xCiAgICAgICAgICAgICAgICBpZiAoJGluX2hlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAkbGluZSA9ICJcdCIgLiAkbGluZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAkbGluZXNfb3V0W10gPSAkbGluZTsKCiAgICAgICAgICAgIC8vU2VuZCB0aGUgbGluZXMgdG8gdGhlIHNlcnZlcgogICAgICAgICAgICBmb3JlYWNoICgkbGluZXNfb3V0IGFzICRsaW5lX291dCkgewogICAgICAgICAgICAgICAgLy9SRkMyODIxIHNlY3Rpb24gNC41LjIKICAgICAgICAgICAgICAgIGlmICghZW1wdHkoJGxpbmVfb3V0KSBhbmQgJGxpbmVfb3V0WzBdID09ICcuJykgewogICAgICAgICAgICAgICAgICAgICRsaW5lX291dCA9ICcuJyAuICRsaW5lX291dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0aGlzLT5jbGllbnRfc2VuZCgkbGluZV9vdXQgLiBzdGF0aWM6OkxFLCAnREFUQScpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL01lc3NhZ2UgZGF0YSBoYXMgYmVlbiBzZW50LCBjb21wbGV0ZSB0aGUgY29tbWFuZAogICAgICAgIC8vSW5jcmVhc2UgdGltZWxpbWl0IGZvciBlbmQgb2YgREFUQSBjb21tYW5kCiAgICAgICAgJHNhdmV0aW1lbGltaXQgPSAkdGhpcy0+VGltZWxpbWl0OwogICAgICAgICR0aGlzLT5UaW1lbGltaXQgPSAkdGhpcy0+VGltZWxpbWl0ICogMjsKICAgICAgICAkcmVzdWx0ID0gJHRoaXMtPnNlbmRDb21tYW5kKCdEQVRBIEVORCcsICcuJywgMjUwKTsKICAgICAgICAkdGhpcy0+cmVjb3JkTGFzdFRyYW5zYWN0aW9uSUQoKTsKICAgICAgICAvL1Jlc3RvcmUgdGltZWxpbWl0CiAgICAgICAgJHRoaXMtPlRpbWVsaW1pdCA9ICRzYXZldGltZWxpbWl0OwoKICAgICAgICByZXR1cm4gJHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYW4gU01UUCBIRUxPIG9yIEVITE8gY29tbWFuZC4KICAgICAqIFVzZWQgdG8gaWRlbnRpZnkgdGhlIHNlbmRpbmcgc2VydmVyIHRvIHRoZSByZWNlaXZpbmcgc2VydmVyLgogICAgICogVGhpcyBtYWtlcyBzdXJlIHRoYXQgY2xpZW50IGFuZCBzZXJ2ZXIgYXJlIGluIGEga25vd24gc3RhdGUuCiAgICAgKiBJbXBsZW1lbnRzIFJGQyA4MjE6IEhFTE8gPFNQPiA8ZG9tYWluPiA8Q1JMRj4KICAgICAqIGFuZCBSRkMgMjgyMSBFSExPLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGhvc3QgVGhlIGhvc3QgbmFtZSBvciBJUCB0byBjb25uZWN0IHRvCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBoZWxsbygkaG9zdCA9ICcnKQogICAgewogICAgICAgIC8vVHJ5IGV4dGVuZGVkIGhlbGxvIGZpcnN0IChSRkMgMjgyMSkKICAgICAgICByZXR1cm4gKGJvb2wpICgkdGhpcy0+c2VuZEhlbGxvKCdFSExPJywgJGhvc3QpIG9yICR0aGlzLT5zZW5kSGVsbG8oJ0hFTE8nLCAkaG9zdCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBhbiBTTVRQIEhFTE8gb3IgRUhMTyBjb21tYW5kLgogICAgICogTG93LWxldmVsIGltcGxlbWVudGF0aW9uIHVzZWQgYnkgaGVsbG8oKS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRoZWxsbyBUaGUgSEVMTyBzdHJpbmcKICAgICAqIEBwYXJhbSBzdHJpbmcgJGhvc3QgIFRoZSBob3N0bmFtZSB0byBzYXkgd2UgYXJlCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKgogICAgICogQHNlZSAgICBoZWxsbygpCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZW5kSGVsbG8oJGhlbGxvLCAkaG9zdCkKICAgIHsKICAgICAgICAkbm9lcnJvciA9ICR0aGlzLT5zZW5kQ29tbWFuZCgkaGVsbG8sICRoZWxsbyAuICcgJyAuICRob3N0LCAyNTApOwogICAgICAgICR0aGlzLT5oZWxvX3JwbHkgPSAkdGhpcy0+bGFzdF9yZXBseTsKICAgICAgICBpZiAoJG5vZXJyb3IpIHsKICAgICAgICAgICAgJHRoaXMtPnBhcnNlSGVsbG9GaWVsZHMoJGhlbGxvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdGhpcy0+c2VydmVyX2NhcHMgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRub2Vycm9yOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgYSByZXBseSB0byBIRUxPL0VITE8gY29tbWFuZCB0byBkaXNjb3ZlciBzZXJ2ZXIgZXh0ZW5zaW9ucy4KICAgICAqIEluIGNhc2Ugb2YgSEVMTywgdGhlIG9ubHkgcGFyYW1ldGVyIHRoYXQgY2FuIGJlIGRpc2NvdmVyZWQgaXMgYSBzZXJ2ZXIgbmFtZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIGBIRUxPYCBvciBgRUhMT2AKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIHBhcnNlSGVsbG9GaWVsZHMoJHR5cGUpCiAgICB7CiAgICAgICAgJHRoaXMtPnNlcnZlcl9jYXBzID0gW107CiAgICAgICAgJGxpbmVzID0gZXhwbG9kZSgiXG4iLCAkdGhpcy0+aGVsb19ycGx5KTsKCiAgICAgICAgZm9yZWFjaCAoJGxpbmVzIGFzICRuID0+ICRzKSB7CiAgICAgICAgICAgIC8vRmlyc3QgNCBjaGFycyBjb250YWluIHJlc3BvbnNlIGNvZGUgZm9sbG93ZWQgYnkgLSBvciBzcGFjZQogICAgICAgICAgICAkcyA9IHRyaW0oc3Vic3RyKCRzLCA0KSk7CiAgICAgICAgICAgIGlmIChlbXB0eSgkcykpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRmaWVsZHMgPSBleHBsb2RlKCcgJywgJHMpOwogICAgICAgICAgICBpZiAoIWVtcHR5KCRmaWVsZHMpKSB7CiAgICAgICAgICAgICAgICBpZiAoISRuKSB7CiAgICAgICAgICAgICAgICAgICAgJG5hbWUgPSAkdHlwZTsKICAgICAgICAgICAgICAgICAgICAkZmllbGRzID0gJGZpZWxkc1swXTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJG5hbWUgPSBhcnJheV9zaGlmdCgkZmllbGRzKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCRuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NJWkUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZpZWxkcyA9ICgkZmllbGRzID8gJGZpZWxkc1swXSA6IDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FVVEgnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc19hcnJheSgkZmllbGRzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaWVsZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZpZWxkcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHRoaXMtPnNlcnZlcl9jYXBzWyRuYW1lXSA9ICRmaWVsZHM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIGFuIFNNVFAgTUFJTCBjb21tYW5kLgogICAgICogU3RhcnRzIGEgbWFpbCB0cmFuc2FjdGlvbiBmcm9tIHRoZSBlbWFpbCBhZGRyZXNzIHNwZWNpZmllZCBpbgogICAgICogJGZyb20uIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIG9yIGZhbHNlIG90aGVyd2lzZS4gSWYgVHJ1ZQogICAgICogdGhlIG1haWwgdHJhbnNhY3Rpb24gaXMgc3RhcnRlZCBhbmQgdGhlbiBvbmUgb3IgbW9yZSByZWNpcGllbnQKICAgICAqIGNvbW1hbmRzIG1heSBiZSBjYWxsZWQgZm9sbG93ZWQgYnkgYSBkYXRhIGNvbW1hbmQuCiAgICAgKiBJbXBsZW1lbnRzIFJGQyA4MjE6IE1BSUwgPFNQPiBGUk9NOjxyZXZlcnNlLXBhdGg+IDxDUkxGPi4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRmcm9tIFNvdXJjZSBhZGRyZXNzIG9mIHRoaXMgbWVzc2FnZQogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gbWFpbCgkZnJvbSkKICAgIHsKICAgICAgICAkdXNlVmVycCA9ICgkdGhpcy0+ZG9fdmVycCA/ICcgWFZFUlAnIDogJycpOwoKICAgICAgICByZXR1cm4gJHRoaXMtPnNlbmRDb21tYW5kKAogICAgICAgICAgICAnTUFJTCBGUk9NJywKICAgICAgICAgICAgJ01BSUwgRlJPTTo8JyAuICRmcm9tIC4gJz4nIC4gJHVzZVZlcnAsCiAgICAgICAgICAgIDI1MAogICAgICAgICk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIGFuIFNNVFAgUVVJVCBjb21tYW5kLgogICAgICogQ2xvc2VzIHRoZSBzb2NrZXQgaWYgdGhlcmUgaXMgbm8gZXJyb3Igb3IgdGhlICRjbG9zZV9vbl9lcnJvciBhcmd1bWVudCBpcyB0cnVlLgogICAgICogSW1wbGVtZW50cyBmcm9tIFJGQyA4MjE6IFFVSVQgPENSTEY+LgogICAgICoKICAgICAqIEBwYXJhbSBib29sICRjbG9zZV9vbl9lcnJvciBTaG91bGQgdGhlIGNvbm5lY3Rpb24gY2xvc2UgaWYgYW4gZXJyb3Igb2NjdXJzPwogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcXVpdCgkY2xvc2Vfb25fZXJyb3IgPSB0cnVlKQogICAgewogICAgICAgICRub2Vycm9yID0gJHRoaXMtPnNlbmRDb21tYW5kKCdRVUlUJywgJ1FVSVQnLCAyMjEpOwogICAgICAgICRlcnIgPSAkdGhpcy0+ZXJyb3I7IC8vU2F2ZSBhbnkgZXJyb3IKICAgICAgICBpZiAoJG5vZXJyb3Igb3IgJGNsb3NlX29uX2Vycm9yKSB7CiAgICAgICAgICAgICR0aGlzLT5jbG9zZSgpOwogICAgICAgICAgICAkdGhpcy0+ZXJyb3IgPSAkZXJyOyAvL1Jlc3RvcmUgYW55IGVycm9yIGZyb20gdGhlIHF1aXQgY29tbWFuZAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRub2Vycm9yOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBhbiBTTVRQIFJDUFQgY29tbWFuZC4KICAgICAqIFNldHMgdGhlIFRPIGFyZ3VtZW50IHRvICR0b2FkZHIuCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlY2lwaWVudCB3YXMgYWNjZXB0ZWQgZmFsc2UgaWYgaXQgd2FzIHJlamVjdGVkLgogICAgICogSW1wbGVtZW50cyBmcm9tIFJGQyA4MjE6IFJDUFQgPFNQPiBUTzo8Zm9yd2FyZC1wYXRoPiA8Q1JMRj4uCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkYWRkcmVzcyBUaGUgYWRkcmVzcyB0aGUgbWVzc2FnZSBpcyBiZWluZyBzZW50IHRvCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiByZWNpcGllbnQoJGFkZHJlc3MpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZW5kQ29tbWFuZCgKICAgICAgICAgICAgJ1JDUFQgVE8nLAogICAgICAgICAgICAnUkNQVCBUTzo8JyAuICRhZGRyZXNzIC4gJz4nLAogICAgICAgICAgICBbMjUwLCAyNTFdCiAgICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYW4gU01UUCBSU0VUIGNvbW1hbmQuCiAgICAgKiBBYm9ydCBhbnkgdHJhbnNhY3Rpb24gdGhhdCBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuCiAgICAgKiBJbXBsZW1lbnRzIFJGQyA4MjE6IFJTRVQgPENSTEY+LgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbCBUcnVlIG9uIHN1Y2Nlc3MKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHJlc2V0KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPnNlbmRDb21tYW5kKCdSU0VUJywgJ1JTRVQnLCAyNTApOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBhIGNvbW1hbmQgdG8gYW4gU01UUCBzZXJ2ZXIgYW5kIGNoZWNrIGl0cyByZXR1cm4gY29kZS4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICRjb21tYW5kICAgICAgIFRoZSBjb21tYW5kIG5hbWUgLSBub3Qgc2VudCB0byB0aGUgc2VydmVyCiAgICAgKiBAcGFyYW0gc3RyaW5nICAgICRjb21tYW5kc3RyaW5nIFRoZSBhY3R1YWwgY29tbWFuZCB0byBzZW5kCiAgICAgKiBAcGFyYW0gaW50fGFycmF5ICRleHBlY3QgICAgICAgIE9uZSBvciBtb3JlIGV4cGVjdGVkIGludGVnZXIgc3VjY2VzcyBjb2RlcwogICAgICoKICAgICAqIEByZXR1cm4gYm9vbCBUcnVlIG9uIHN1Y2Nlc3MKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRDb21tYW5kKCRjb21tYW5kLCAkY29tbWFuZHN0cmluZywgJGV4cGVjdCkKICAgIHsKICAgICAgICBpZiAoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0RXJyb3IoIkNhbGxlZCAkY29tbWFuZCB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAvL1JlamVjdCBsaW5lIGJyZWFrcyBpbiBhbGwgY29tbWFuZHMKICAgICAgICBpZiAoc3RycG9zKCRjb21tYW5kc3RyaW5nLCAiXG4iKSAhPT0gZmFsc2Ugb3Igc3RycG9zKCRjb21tYW5kc3RyaW5nLCAiXHIiKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCJDb21tYW5kICckY29tbWFuZCcgY29udGFpbmVkIGxpbmUgYnJlYWtzIik7CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5jbGllbnRfc2VuZCgkY29tbWFuZHN0cmluZyAuIHN0YXRpYzo6TEUsICRjb21tYW5kKTsKCiAgICAgICAgJHRoaXMtPmxhc3RfcmVwbHkgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CiAgICAgICAgLy8gRmV0Y2ggU01UUCBjb2RlIGFuZCBwb3NzaWJsZSBlcnJvciBjb2RlIGV4cGxhbmF0aW9uCiAgICAgICAgJG1hdGNoZXMgPSBbXTsKICAgICAgICBpZiAocHJlZ19tYXRjaCgnL14oWzAtOV17M30pWyAtXSg/OihbMC05XVxcLlswLTldXFwuWzAtOV0pICk/LycsICR0aGlzLT5sYXN0X3JlcGx5LCAkbWF0Y2hlcykpIHsKICAgICAgICAgICAgJGNvZGUgPSAkbWF0Y2hlc1sxXTsKICAgICAgICAgICAgJGNvZGVfZXggPSAoY291bnQoJG1hdGNoZXMpID4gMiA/ICRtYXRjaGVzWzJdIDogbnVsbCk7CiAgICAgICAgICAgIC8vIEN1dCBvZmYgZXJyb3IgY29kZSBmcm9tIGVhY2ggcmVzcG9uc2UgbGluZQogICAgICAgICAgICAkZGV0YWlsID0gcHJlZ19yZXBsYWNlKAogICAgICAgICAgICAgICAgIi97JGNvZGV9WyAtXSIgLgogICAgICAgICAgICAgICAgKCRjb2RlX2V4ID8gc3RyX3JlcGxhY2UoJy4nLCAnXFwuJywgJGNvZGVfZXgpIC4gJyAnIDogJycpIC4gJy9tJywKICAgICAgICAgICAgICAgICcnLAogICAgICAgICAgICAgICAgJHRoaXMtPmxhc3RfcmVwbHkKICAgICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2ltcGxlIHBhcnNpbmcgaWYgcmVnZXggZmFpbHMKICAgICAgICAgICAgJGNvZGUgPSBzdWJzdHIoJHRoaXMtPmxhc3RfcmVwbHksIDAsIDMpOwogICAgICAgICAgICAkY29kZV9leCA9IG51bGw7CiAgICAgICAgICAgICRkZXRhaWwgPSBzdWJzdHIoJHRoaXMtPmxhc3RfcmVwbHksIDQpOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPmVkZWJ1ZygnU0VSVkVSIC0+IENMSUVOVDogJyAuICR0aGlzLT5sYXN0X3JlcGx5LCBzZWxmOjpERUJVR19TRVJWRVIpOwoKICAgICAgICBpZiAoIWluX2FycmF5KCRjb2RlLCAoYXJyYXkpICRleHBlY3QpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcigKICAgICAgICAgICAgICAgICIkY29tbWFuZCBjb21tYW5kIGZhaWxlZCIsCiAgICAgICAgICAgICAgICAkZGV0YWlsLAogICAgICAgICAgICAgICAgJGNvZGUsCiAgICAgICAgICAgICAgICAkY29kZV9leAogICAgICAgICAgICApOwogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAgICAgJ1NNVFAgRVJST1I6ICcgLiAkdGhpcy0+ZXJyb3JbJ2Vycm9yJ10gLiAnOiAnIC4gJHRoaXMtPmxhc3RfcmVwbHksCiAgICAgICAgICAgICAgICBzZWxmOjpERUJVR19DTElFTlQKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5zZXRFcnJvcignJyk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBhbiBTTVRQIFNBTUwgY29tbWFuZC4KICAgICAqIFN0YXJ0cyBhIG1haWwgdHJhbnNhY3Rpb24gZnJvbSB0aGUgZW1haWwgYWRkcmVzcyBzcGVjaWZpZWQgaW4gJGZyb20uCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3VjY2Vzc2Z1bCBvciBmYWxzZSBvdGhlcndpc2UuIElmIFRydWUKICAgICAqIHRoZSBtYWlsIHRyYW5zYWN0aW9uIGlzIHN0YXJ0ZWQgYW5kIHRoZW4gb25lIG9yIG1vcmUgcmVjaXBpZW50CiAgICAgKiBjb21tYW5kcyBtYXkgYmUgY2FsbGVkIGZvbGxvd2VkIGJ5IGEgZGF0YSBjb21tYW5kLiBUaGlzIGNvbW1hbmQKICAgICAqIHdpbGwgc2VuZCB0aGUgbWVzc2FnZSB0byB0aGUgdXNlcnMgdGVybWluYWwgaWYgdGhleSBhcmUgbG9nZ2VkCiAgICAgKiBpbiBhbmQgc2VuZCB0aGVtIGFuIGVtYWlsLgogICAgICogSW1wbGVtZW50cyBSRkMgODIxOiBTQU1MIDxTUD4gRlJPTTo8cmV2ZXJzZS1wYXRoPiA8Q1JMRj4uCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkZnJvbSBUaGUgYWRkcmVzcyB0aGUgbWVzc2FnZSBpcyBmcm9tCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZW5kQW5kTWFpbCgkZnJvbSkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPnNlbmRDb21tYW5kKCdTQU1MJywgIlNBTUwgRlJPTTokZnJvbSIsIDI1MCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIGFuIFNNVFAgVlJGWSBjb21tYW5kLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgVGhlIG5hbWUgdG8gdmVyaWZ5CiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB2ZXJpZnkoJG5hbWUpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZW5kQ29tbWFuZCgnVlJGWScsICJWUkZZICRuYW1lIiwgWzI1MCwgMjUxXSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIGFuIFNNVFAgTk9PUCBjb21tYW5kLgogICAgICogVXNlZCB0byBrZWVwIGtlZXAtYWxpdmVzIGFsaXZlLCBkb2Vzbid0IGFjdHVhbGx5IGRvIGFueXRoaW5nLgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gbm9vcCgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZW5kQ29tbWFuZCgnTk9PUCcsICdOT09QJywgMjUwKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYW4gU01UUCBUVVJOIGNvbW1hbmQuCiAgICAgKiBUaGlzIGlzIGFuIG9wdGlvbmFsIGNvbW1hbmQgZm9yIFNNVFAgdGhhdCB0aGlzIGNsYXNzIGRvZXMgbm90IHN1cHBvcnQuCiAgICAgKiBUaGlzIG1ldGhvZCBpcyBoZXJlIHRvIG1ha2UgdGhlIFJGQzgyMSBEZWZpbml0aW9uIGNvbXBsZXRlIGZvciB0aGlzIGNsYXNzCiAgICAgKiBhbmQgX21heV8gYmUgaW1wbGVtZW50ZWQgaW4gZnV0dXJlLgogICAgICogSW1wbGVtZW50cyBmcm9tIFJGQyA4MjE6IFRVUk4gPENSTEY+LgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdHVybigpCiAgICB7CiAgICAgICAgJHRoaXMtPnNldEVycm9yKCdUaGUgU01UUCBUVVJOIGNvbW1hbmQgaXMgbm90IGltcGxlbWVudGVkJyk7CiAgICAgICAgJHRoaXMtPmVkZWJ1ZygnU01UUCBOT1RJQ0U6ICcgLiAkdGhpcy0+ZXJyb3JbJ2Vycm9yJ10sIHNlbGY6OkRFQlVHX0NMSUVOVCk7CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgcmF3IGRhdGEgdG8gdGhlIHNlcnZlci4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRkYXRhICAgIFRoZSBkYXRhIHRvIHNlbmQKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNvbW1hbmQgT3B0aW9uYWxseSwgdGhlIGNvbW1hbmQgdGhpcyBpcyBwYXJ0IG9mLCB1c2VkIG9ubHkgZm9yIGNvbnRyb2xsaW5nIGRlYnVnIG91dHB1dAogICAgICoKICAgICAqIEByZXR1cm4gaW50fGJvb2wgVGhlIG51bWJlciBvZiBieXRlcyBzZW50IHRvIHRoZSBzZXJ2ZXIgb3IgZmFsc2Ugb24gZXJyb3IKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNsaWVudF9zZW5kKCRkYXRhLCAkY29tbWFuZCA9ICcnKQogICAgewogICAgICAgIC8vSWYgU01UUCB0cmFuc2NyaXB0cyBhcmUgbGVmdCBlbmFibGVkLCBvciBkZWJ1ZyBvdXRwdXQgaXMgcG9zdGVkIG9ubGluZQogICAgICAgIC8vaXQgY2FuIGxlYWsgY3JlZGVudGlhbHMsIHNvIGhpZGUgY3JlZGVudGlhbHMgaW4gYWxsIGJ1dCBsb3dlc3QgbGV2ZWwKICAgICAgICBpZiAoc2VsZjo6REVCVUdfTE9XTEVWRUwgPiAkdGhpcy0+ZG9fZGVidWcgYW5kCiAgICAgICAgICAgIGluX2FycmF5KCRjb21tYW5kLCBbJ1VzZXIgJiBQYXNzd29yZCcsICdVc2VybmFtZScsICdQYXNzd29yZCddLCB0cnVlKSkgewogICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKCdDTElFTlQgLT4gU0VSVkVSOiA8Y3JlZGVudGlhbHMgaGlkZGVuPicsIHNlbGY6OkRFQlVHX0NMSUVOVCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPmVkZWJ1ZygnQ0xJRU5UIC0+IFNFUlZFUjogJyAuICRkYXRhLCBzZWxmOjpERUJVR19DTElFTlQpOwogICAgICAgIH0KICAgICAgICBzZXRfZXJyb3JfaGFuZGxlcihbJHRoaXMsICdlcnJvckhhbmRsZXInXSk7CiAgICAgICAgJHJlc3VsdCA9IGZ3cml0ZSgkdGhpcy0+c210cF9jb25uLCAkZGF0YSk7CiAgICAgICAgcmVzdG9yZV9lcnJvcl9oYW5kbGVyKCk7CgogICAgICAgIHJldHVybiAkcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBsYXRlc3QgZXJyb3IuCiAgICAgKgogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0RXJyb3IoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZXJyb3I7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgU01UUCBleHRlbnNpb25zIGF2YWlsYWJsZSBvbiB0aGUgc2VydmVyLgogICAgICoKICAgICAqIEByZXR1cm4gYXJyYXl8bnVsbAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U2VydmVyRXh0TGlzdCgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXJ2ZXJfY2FwczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBtZXRhZGF0YSBhYm91dCB0aGUgU01UUCBzZXJ2ZXIgZnJvbSBpdHMgSEVMTy9FSExPIHJlc3BvbnNlLgogICAgICogVGhlIG1ldGhvZCB3b3JrcyBpbiB0aHJlZSB3YXlzLCBkZXBlbmRlbnQgb24gYXJndW1lbnQgdmFsdWUgYW5kIGN1cnJlbnQgc3RhdGU6CiAgICAgKiAgIDEuIEhFTE8vRUhMTyBoYXMgbm90IGJlZW4gc2VudCAtIHJldHVybnMgbnVsbCBhbmQgcG9wdWxhdGVzICR0aGlzLT5lcnJvci4KICAgICAqICAgMi4gSEVMTyBoYXMgYmVlbiBzZW50IC0KICAgICAqICAgICAkbmFtZSA9PSAnSEVMTyc6IHJldHVybnMgc2VydmVyIG5hbWUKICAgICAqICAgICAkbmFtZSA9PSAnRUhMTyc6IHJldHVybnMgYm9vbGVhbiBmYWxzZQogICAgICogICAgICRuYW1lID09IGFueSBvdGhlciBzdHJpbmc6IHJldHVybnMgbnVsbCBhbmQgcG9wdWxhdGVzICR0aGlzLT5lcnJvcgogICAgICogICAzLiBFSExPIGhhcyBiZWVuIHNlbnQgLQogICAgICogICAgICRuYW1lID09ICdIRUxPJ3wnRUhMTyc6IHJldHVybnMgdGhlIHNlcnZlciBuYW1lCiAgICAgKiAgICAgJG5hbWUgPT0gYW55IG90aGVyIHN0cmluZzogaWYgZXh0ZW5zaW9uICRuYW1lIGV4aXN0cywgcmV0dXJucyBUcnVlCiAgICAgKiAgICAgICBvciBpdHMgb3B0aW9ucyAoZS5nLiBBVVRIIG1lY2hhbmlzbXMgc3VwcG9ydGVkKS4gT3RoZXJ3aXNlIHJldHVybnMgRmFsc2UuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSBOYW1lIG9mIFNNVFAgZXh0ZW5zaW9uIG9yICdIRUxPJ3wnRUhMTycKICAgICAqCiAgICAgKiBAcmV0dXJuIG1peGVkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRTZXJ2ZXJFeHQoJG5hbWUpCiAgICB7CiAgICAgICAgaWYgKCEkdGhpcy0+c2VydmVyX2NhcHMpIHsKICAgICAgICAgICAgJHRoaXMtPnNldEVycm9yKCdObyBIRUxPL0VITE8gd2FzIHNlbnQnKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghYXJyYXlfa2V5X2V4aXN0cygkbmFtZSwgJHRoaXMtPnNlcnZlcl9jYXBzKSkgewogICAgICAgICAgICBpZiAoJ0hFTE8nID09ICRuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMtPnNlcnZlcl9jYXBzWydFSExPJ107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCdFSExPJyA9PSAkbmFtZSB8fCBhcnJheV9rZXlfZXhpc3RzKCdFSExPJywgJHRoaXMtPnNlcnZlcl9jYXBzKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR0aGlzLT5zZXRFcnJvcignSEVMTyBoYW5kc2hha2Ugd2FzIHVzZWQ7IE5vIGluZm9ybWF0aW9uIGFib3V0IHNlcnZlciBleHRlbnNpb25zIGF2YWlsYWJsZScpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXJ2ZXJfY2Fwc1skbmFtZV07CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGxhc3QgcmVwbHkgZnJvbSB0aGUgc2VydmVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0UmVwbHkoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+bGFzdF9yZXBseTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlYWQgdGhlIFNNVFAgc2VydmVyJ3MgcmVzcG9uc2UuCiAgICAgKiBFaXRoZXIgYmVmb3JlIGVvZiBvciBzb2NrZXQgdGltZW91dCBvY2N1cnMgb24gdGhlIG9wZXJhdGlvbi4KICAgICAqIFdpdGggU01UUCB3ZSBjYW4gdGVsbCBpZiB3ZSBoYXZlIG1vcmUgbGluZXMgdG8gcmVhZCBpZiB0aGUKICAgICAqIDR0aCBjaGFyYWN0ZXIgaXMgJy0nIHN5bWJvbC4gSWYgaXQgaXMgYSBzcGFjZSB0aGVuIHdlIGRvbid0CiAgICAgKiBuZWVkIHRvIHJlYWQgYW55dGhpbmcgZWxzZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0X2xpbmVzKCkKICAgIHsKICAgICAgICAvLyBJZiB0aGUgY29ubmVjdGlvbiBpcyBiYWQsIGdpdmUgdXAgc3RyYWlnaHQgYXdheQogICAgICAgIGlmICghaXNfcmVzb3VyY2UoJHRoaXMtPnNtdHBfY29ubikpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KICAgICAgICAkZGF0YSA9ICcnOwogICAgICAgICRlbmR0aW1lID0gMDsKICAgICAgICBzdHJlYW1fc2V0X3RpbWVvdXQoJHRoaXMtPnNtdHBfY29ubiwgJHRoaXMtPlRpbWVvdXQpOwogICAgICAgIGlmICgkdGhpcy0+VGltZWxpbWl0ID4gMCkgewogICAgICAgICAgICAkZW5kdGltZSA9IHRpbWUoKSArICR0aGlzLT5UaW1lbGltaXQ7CiAgICAgICAgfQogICAgICAgICRzZWxSID0gWyR0aGlzLT5zbXRwX2Nvbm5dOwogICAgICAgICRzZWxXID0gbnVsbDsKICAgICAgICB3aGlsZSAoaXNfcmVzb3VyY2UoJHRoaXMtPnNtdHBfY29ubikgYW5kICFmZW9mKCR0aGlzLT5zbXRwX2Nvbm4pKSB7CiAgICAgICAgICAgIC8vTXVzdCBwYXNzIHZhcnMgaW4gaGVyZSBhcyBwYXJhbXMgYXJlIGJ5IHJlZmVyZW5jZQogICAgICAgICAgICBpZiAoIXN0cmVhbV9zZWxlY3QoJHNlbFIsICRzZWxXLCAkc2VsVywgJHRoaXMtPlRpbWVsaW1pdCkpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5lZGVidWcoCiAgICAgICAgICAgICAgICAgICAgJ1NNVFAgLT4gZ2V0X2xpbmVzKCk6IHRpbWVkLW91dCAoJyAuICR0aGlzLT5UaW1lb3V0IC4gJyBzZWMpJywKICAgICAgICAgICAgICAgICAgICBzZWxmOjpERUJVR19MT1dMRVZFTAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vRGVsaWJlcmF0ZSBub2lzZSBzdXBwcmVzc2lvbiAtIGVycm9ycyBhcmUgaGFuZGxlZCBhZnRlcndhcmRzCiAgICAgICAgICAgICRzdHIgPSBAZmdldHMoJHRoaXMtPnNtdHBfY29ubiwgNTE1KTsKICAgICAgICAgICAgJHRoaXMtPmVkZWJ1ZygnU01UUCBJTkJPVU5EOiAiJyAuIHRyaW0oJHN0cikgLiAnIicsIHNlbGY6OkRFQlVHX0xPV0xFVkVMKTsKICAgICAgICAgICAgJGRhdGEgLj0gJHN0cjsKICAgICAgICAgICAgLy8gSWYgcmVzcG9uc2UgaXMgb25seSAzIGNoYXJzIChub3QgdmFsaWQsIGJ1dCBSRkM1MzIxIFM0LjIgc2F5cyBpdCBtdXN0IGJlIGhhbmRsZWQpLAogICAgICAgICAgICAvLyBvciA0dGggY2hhcmFjdGVyIGlzIGEgc3BhY2UsIHdlIGFyZSBkb25lIHJlYWRpbmcsIGJyZWFrIHRoZSBsb29wLAogICAgICAgICAgICAvLyBzdHJpbmcgYXJyYXkgYWNjZXNzIGlzIGEgbWljcm8tb3B0aW1pc2F0aW9uIG92ZXIgc3RybGVuCiAgICAgICAgICAgIGlmICghaXNzZXQoJHN0clszXSkgb3IgKGlzc2V0KCRzdHJbM10pIGFuZCAkc3RyWzNdID09ICcgJykpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRpbWVkLW91dD8gTG9nIGFuZCBicmVhawogICAgICAgICAgICAkaW5mbyA9IHN0cmVhbV9nZXRfbWV0YV9kYXRhKCR0aGlzLT5zbXRwX2Nvbm4pOwogICAgICAgICAgICBpZiAoJGluZm9bJ3RpbWVkX291dCddKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAgICAgICAgICdTTVRQIC0+IGdldF9saW5lcygpOiB0aW1lZC1vdXQgKCcgLiAkdGhpcy0+VGltZW91dCAuICcgc2VjKScsCiAgICAgICAgICAgICAgICAgICAgc2VsZjo6REVCVUdfTE9XTEVWRUwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBOb3cgY2hlY2sgaWYgcmVhZHMgdG9vayB0b28gbG9uZwogICAgICAgICAgICBpZiAoJGVuZHRpbWUgYW5kIHRpbWUoKSA+ICRlbmR0aW1lKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAgICAgICAgICdTTVRQIC0+IGdldF9saW5lcygpOiB0aW1lbGltaXQgcmVhY2hlZCAoJyAuCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPlRpbWVsaW1pdCAuICcgc2VjKScsCiAgICAgICAgICAgICAgICAgICAgc2VsZjo6REVCVUdfTE9XTEVWRUwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRkYXRhOwogICAgfQoKICAgIC8qKgogICAgICogRW5hYmxlIG9yIGRpc2FibGUgVkVSUCBhZGRyZXNzIGdlbmVyYXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGJvb2wgJGVuYWJsZWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldFZlcnAoJGVuYWJsZWQgPSBmYWxzZSkKICAgIHsKICAgICAgICAkdGhpcy0+ZG9fdmVycCA9ICRlbmFibGVkOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IFZFUlAgYWRkcmVzcyBnZW5lcmF0aW9uIG1vZGUuCiAgICAgKgogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRWZXJwKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmRvX3ZlcnA7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgZXJyb3IgbWVzc2FnZXMgYW5kIGNvZGVzLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJG1lc3NhZ2UgICAgICBUaGUgZXJyb3IgbWVzc2FnZQogICAgICogQHBhcmFtIHN0cmluZyAkZGV0YWlsICAgICAgIEZ1cnRoZXIgZGV0YWlsIG9uIHRoZSBlcnJvcgogICAgICogQHBhcmFtIHN0cmluZyAkc210cF9jb2RlICAgIEFuIGFzc29jaWF0ZWQgU01UUCBlcnJvciBjb2RlCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzbXRwX2NvZGVfZXggRXh0ZW5kZWQgU01UUCBjb2RlCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZXRFcnJvcigkbWVzc2FnZSwgJGRldGFpbCA9ICcnLCAkc210cF9jb2RlID0gJycsICRzbXRwX2NvZGVfZXggPSAnJykKICAgIHsKICAgICAgICAkdGhpcy0+ZXJyb3IgPSBbCiAgICAgICAgICAgICdlcnJvcicgPT4gJG1lc3NhZ2UsCiAgICAgICAgICAgICdkZXRhaWwnID0+ICRkZXRhaWwsCiAgICAgICAgICAgICdzbXRwX2NvZGUnID0+ICRzbXRwX2NvZGUsCiAgICAgICAgICAgICdzbXRwX2NvZGVfZXgnID0+ICRzbXRwX2NvZGVfZXgsCiAgICAgICAgXTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBkZWJ1ZyBvdXRwdXQgbWV0aG9kLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmd8Y2FsbGFibGUgJG1ldGhvZCBUaGUgbmFtZSBvZiB0aGUgbWVjaGFuaXNtIHRvIHVzZSBmb3IgZGVidWdnaW5nIG91dHB1dCwgb3IgYSBjYWxsYWJsZSB0byBoYW5kbGUgaXQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldERlYnVnT3V0cHV0KCRtZXRob2QgPSAnZWNobycpCiAgICB7CiAgICAgICAgJHRoaXMtPkRlYnVnb3V0cHV0ID0gJG1ldGhvZDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBkZWJ1ZyBvdXRwdXQgbWV0aG9kLgogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREZWJ1Z091dHB1dCgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5EZWJ1Z291dHB1dDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBkZWJ1ZyBvdXRwdXQgbGV2ZWwuCiAgICAgKgogICAgICogQHBhcmFtIGludCAkbGV2ZWwKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldERlYnVnTGV2ZWwoJGxldmVsID0gMCkKICAgIHsKICAgICAgICAkdGhpcy0+ZG9fZGVidWcgPSAkbGV2ZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgZGVidWcgb3V0cHV0IGxldmVsLgogICAgICoKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREZWJ1Z0xldmVsKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmRvX2RlYnVnOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IFNNVFAgdGltZW91dC4KICAgICAqCiAgICAgKiBAcGFyYW0gaW50ICR0aW1lb3V0IFRoZSB0aW1lb3V0IGR1cmF0aW9uIGluIHNlY29uZHMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldFRpbWVvdXQoJHRpbWVvdXQgPSAwKQogICAgewogICAgICAgICR0aGlzLT5UaW1lb3V0ID0gJHRpbWVvdXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgU01UUCB0aW1lb3V0LgogICAgICoKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRUaW1lb3V0KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPlRpbWVvdXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXBvcnRzIGFuIGVycm9yIG51bWJlciBhbmQgc3RyaW5nLgogICAgICoKICAgICAqIEBwYXJhbSBpbnQgICAgJGVycm5vICAgVGhlIGVycm9yIG51bWJlciByZXR1cm5lZCBieSBQSFAKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVycm1zZyAgVGhlIGVycm9yIG1lc3NhZ2UgcmV0dXJuZWQgYnkgUEhQCiAgICAgKiBAcGFyYW0gc3RyaW5nICRlcnJmaWxlIFRoZSBmaWxlIHRoZSBlcnJvciBvY2N1cnJlZCBpbgogICAgICogQHBhcmFtIGludCAgICAkZXJybGluZSBUaGUgbGluZSBudW1iZXIgdGhlIGVycm9yIG9jY3VycmVkIG9uCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBlcnJvckhhbmRsZXIoJGVycm5vLCAkZXJybXNnLCAkZXJyZmlsZSA9ICcnLCAkZXJybGluZSA9IDApCiAgICB7CiAgICAgICAgJG5vdGljZSA9ICdDb25uZWN0aW9uIGZhaWxlZC4nOwogICAgICAgICR0aGlzLT5zZXRFcnJvcigKICAgICAgICAgICAgJG5vdGljZSwKICAgICAgICAgICAgJGVycm1zZywKICAgICAgICAgICAgKHN0cmluZykgJGVycm5vCiAgICAgICAgKTsKICAgICAgICAkdGhpcy0+ZWRlYnVnKAogICAgICAgICAgICAiJG5vdGljZSBFcnJvciAjJGVycm5vOiAkZXJybXNnIFskZXJyZmlsZSBsaW5lICRlcnJsaW5lXSIsCiAgICAgICAgICAgIHNlbGY6OkRFQlVHX0NPTk5FQ1RJT04KICAgICAgICApOwogICAgfQoKICAgIC8qKgogICAgICogRXh0cmFjdCBhbmQgcmV0dXJuIHRoZSBJRCBvZiB0aGUgbGFzdCBTTVRQIHRyYW5zYWN0aW9uIGJhc2VkIG9uCiAgICAgKiBhIGxpc3Qgb2YgcGF0dGVybnMgcHJvdmlkZWQgaW4gU01UUDo6JHNtdHBfdHJhbnNhY3Rpb25faWRfcGF0dGVybnMuCiAgICAgKiBSZWxpZXMgb24gdGhlIGhvc3QgcHJvdmlkaW5nIHRoZSBJRCBpbiByZXNwb25zZSB0byBhIERBVEEgY29tbWFuZC4KICAgICAqIElmIG5vIHJlcGx5IGhhcyBiZWVuIHJlY2VpdmVkIHlldCwgaXQgd2lsbCByZXR1cm4gbnVsbC4KICAgICAqIElmIG5vIHBhdHRlcm4gd2FzIG1hdGNoZWQsIGl0IHdpbGwgcmV0dXJuIGZhbHNlLgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbHxudWxsfHN0cmluZwogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gcmVjb3JkTGFzdFRyYW5zYWN0aW9uSUQoKQogICAgewogICAgICAgICRyZXBseSA9ICR0aGlzLT5nZXRMYXN0UmVwbHkoKTsKCiAgICAgICAgaWYgKGVtcHR5KCRyZXBseSkpIHsKICAgICAgICAgICAgJHRoaXMtPmxhc3Rfc210cF90cmFuc2FjdGlvbl9pZCA9IG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPmxhc3Rfc210cF90cmFuc2FjdGlvbl9pZCA9IGZhbHNlOwogICAgICAgICAgICBmb3JlYWNoICgkdGhpcy0+c210cF90cmFuc2FjdGlvbl9pZF9wYXR0ZXJucyBhcyAkc210cF90cmFuc2FjdGlvbl9pZF9wYXR0ZXJuKSB7CiAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgkc210cF90cmFuc2FjdGlvbl9pZF9wYXR0ZXJuLCAkcmVwbHksICRtYXRjaGVzKSkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5sYXN0X3NtdHBfdHJhbnNhY3Rpb25faWQgPSB0cmltKCRtYXRjaGVzWzFdKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5sYXN0X3NtdHBfdHJhbnNhY3Rpb25faWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1ZXVlL3RyYW5zYWN0aW9uIElEIG9mIHRoZSBsYXN0IFNNVFAgdHJhbnNhY3Rpb24KICAgICAqIElmIG5vIHJlcGx5IGhhcyBiZWVuIHJlY2VpdmVkIHlldCwgaXQgd2lsbCByZXR1cm4gbnVsbC4KICAgICAqIElmIG5vIHBhdHRlcm4gd2FzIG1hdGNoZWQsIGl0IHdpbGwgcmV0dXJuIGZhbHNlLgogICAgICoKICAgICAqIEByZXR1cm4gYm9vbHxudWxsfHN0cmluZwogICAgICoKICAgICAqIEBzZWUgcmVjb3JkTGFzdFRyYW5zYWN0aW9uSUQoKQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TGFzdFRyYW5zYWN0aW9uSUQoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+bGFzdF9zbXRwX3RyYW5zYWN0aW9uX2lkOwogICAgfQp9Cg==',
  'ofw/lib/email/email.txt' => 'data:text/plain;base64,RW4gY2FzbyBkZSBuZWNlc2l0YXIgZWwgZW52w61vIGRlIGVtYWlscyBtZWRpYW50ZSBTTVRQLCBlbiBlc3TDoSBjYXJwZXRhIGhheSBxdWUgaW5jbHVpciBsYSBsaWJyZXLDrWEgUEhQTWFpbGVyIChodHRwczovL2dpdGh1Yi5jb20vUEhQTWFpbGVyL1BIUE1haWxlcik6CgogwrcgRXhjZXB0aW9uLnBocAogwrcgUEhQTWFpbGVyLnBocAogwrcgU01UUC5waHA=',
  'ofw/lib/image/SimpleImage.php' => 'data:text/x-php;base64,PD9waHAKLyoKKiBGaWxlOiBTaW1wbGVJbWFnZS5waHAKKiBBdXRob3I6IFNpbW9uIEphcnZpcwoqIENvcHlyaWdodDogMjAwNiBTaW1vbiBKYXJ2aXMKKiBEYXRlOiAwOC8xMS8wNgoqIExpbms6IGh0dHA6Ly93d3cud2hpdGUtaGF0LXdlYi1kZXNpZ24uY28udWsvYXJ0aWNsZXMvcGhwLWltYWdlLXJlc2l6aW5nLnBocAoqCiogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgoqIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiogYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIKKiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKgoqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAoqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlsczoKKiBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLmh0bWwKKgoqLwpjbGFzcyBTaW1wbGVJbWFnZSB7CiAKICAgdmFyICRpbWFnZTsKICAgdmFyICRpbWFnZV90eXBlOwogCiAgIGZ1bmN0aW9uIGxvYWQoJGZpbGVuYW1lKSB7CiAKICAgICAgJGltYWdlX2luZm8gPSBnZXRpbWFnZXNpemUoJGZpbGVuYW1lKTsKICAgICAgJHRoaXMtPmltYWdlX3R5cGUgPSAkaW1hZ2VfaW5mb1syXTsKICAgICAgaWYoICR0aGlzLT5pbWFnZV90eXBlID09IElNQUdFVFlQRV9KUEVHICkgewogCiAgICAgICAgICR0aGlzLT5pbWFnZSA9IGltYWdlY3JlYXRlZnJvbWpwZWcoJGZpbGVuYW1lKTsKICAgICAgfSBlbHNlaWYoICR0aGlzLT5pbWFnZV90eXBlID09IElNQUdFVFlQRV9HSUYgKSB7CiAKICAgICAgICAgJHRoaXMtPmltYWdlID0gaW1hZ2VjcmVhdGVmcm9tZ2lmKCRmaWxlbmFtZSk7CiAgICAgIH0gZWxzZWlmKCAkdGhpcy0+aW1hZ2VfdHlwZSA9PSBJTUFHRVRZUEVfUE5HICkgewogCiAgICAgICAgICR0aGlzLT5pbWFnZSA9IGltYWdlY3JlYXRlZnJvbXBuZygkZmlsZW5hbWUpOwogICAgICB9CiAgIH0KICAgZnVuY3Rpb24gc2F2ZSgkZmlsZW5hbWUsICRpbWFnZV90eXBlPUlNQUdFVFlQRV9KUEVHLCAkY29tcHJlc3Npb249NzUsICRwZXJtaXNzaW9ucz1udWxsKSB7CiAKICAgICAgaWYoICRpbWFnZV90eXBlID09IElNQUdFVFlQRV9KUEVHICkgewogICAgICAgICBpbWFnZWpwZWcoJHRoaXMtPmltYWdlLCRmaWxlbmFtZSwkY29tcHJlc3Npb24pOwogICAgICB9IGVsc2VpZiggJGltYWdlX3R5cGUgPT0gSU1BR0VUWVBFX0dJRiApIHsKIAogICAgICAgICBpbWFnZWdpZigkdGhpcy0+aW1hZ2UsJGZpbGVuYW1lKTsKICAgICAgfSBlbHNlaWYoICRpbWFnZV90eXBlID09IElNQUdFVFlQRV9QTkcgKSB7CiAKICAgICAgICAgaW1hZ2VwbmcoJHRoaXMtPmltYWdlLCRmaWxlbmFtZSk7CiAgICAgIH0KICAgICAgaWYoICRwZXJtaXNzaW9ucyAhPSBudWxsKSB7CiAKICAgICAgICAgY2htb2QoJGZpbGVuYW1lLCRwZXJtaXNzaW9ucyk7CiAgICAgIH0KICAgfQogICBmdW5jdGlvbiBvdXRwdXQoJGltYWdlX3R5cGU9SU1BR0VUWVBFX0pQRUcpIHsKIAogICAgICBpZiggJGltYWdlX3R5cGUgPT0gSU1BR0VUWVBFX0pQRUcgKSB7CiAgICAgICAgIGltYWdlanBlZygkdGhpcy0+aW1hZ2UpOwogICAgICB9IGVsc2VpZiggJGltYWdlX3R5cGUgPT0gSU1BR0VUWVBFX0dJRiApIHsKIAogICAgICAgICBpbWFnZWdpZigkdGhpcy0+aW1hZ2UpOwogICAgICB9IGVsc2VpZiggJGltYWdlX3R5cGUgPT0gSU1BR0VUWVBFX1BORyApIHsKIAogICAgICAgICBpbWFnZXBuZygkdGhpcy0+aW1hZ2UpOwogICAgICB9CiAgIH0KICAgZnVuY3Rpb24gZ2V0V2lkdGgoKSB7CiAKICAgICAgcmV0dXJuIGltYWdlc3goJHRoaXMtPmltYWdlKTsKICAgfQogICBmdW5jdGlvbiBnZXRIZWlnaHQoKSB7CiAKICAgICAgcmV0dXJuIGltYWdlc3koJHRoaXMtPmltYWdlKTsKICAgfQogICBmdW5jdGlvbiByZXNpemVUb0hlaWdodCgkaGVpZ2h0KSB7CiAKICAgICAgJHJhdGlvID0gJGhlaWdodCAvICR0aGlzLT5nZXRIZWlnaHQoKTsKICAgICAgJHdpZHRoID0gJHRoaXMtPmdldFdpZHRoKCkgKiAkcmF0aW87CiAgICAgICR0aGlzLT5yZXNpemUoJHdpZHRoLCRoZWlnaHQpOwogICB9CiAKICAgZnVuY3Rpb24gcmVzaXplVG9XaWR0aCgkd2lkdGgpIHsKICAgICAgJHJhdGlvID0gJHdpZHRoIC8gJHRoaXMtPmdldFdpZHRoKCk7CiAgICAgICRoZWlnaHQgPSAkdGhpcy0+Z2V0aGVpZ2h0KCkgKiAkcmF0aW87CiAgICAgICR0aGlzLT5yZXNpemUoJHdpZHRoLCRoZWlnaHQpOwogICB9CiAKICAgZnVuY3Rpb24gc2NhbGUoJHNjYWxlKSB7CiAgICAgICR3aWR0aCA9ICR0aGlzLT5nZXRXaWR0aCgpICogJHNjYWxlLzEwMDsKICAgICAgJGhlaWdodCA9ICR0aGlzLT5nZXRoZWlnaHQoKSAqICRzY2FsZS8xMDA7CiAgICAgICR0aGlzLT5yZXNpemUoJHdpZHRoLCRoZWlnaHQpOwogICB9CiAKICAgZnVuY3Rpb24gcmVzaXplKCR3aWR0aCwkaGVpZ2h0KSB7CiAgICAgICRuZXdfaW1hZ2UgPSBpbWFnZWNyZWF0ZXRydWVjb2xvcigkd2lkdGgsICRoZWlnaHQpOwogICAgICBpbWFnZWNvcHlyZXNhbXBsZWQoJG5ld19pbWFnZSwgJHRoaXMtPmltYWdlLCAwLCAwLCAwLCAwLCAkd2lkdGgsICRoZWlnaHQsICR0aGlzLT5nZXRXaWR0aCgpLCAkdGhpcy0+Z2V0SGVpZ2h0KCkpOwogICAgICAkdGhpcy0+aW1hZ2UgPSAkbmV3X2ltYWdlOwogICB9ICAgICAgCiAKfQ==',
  'ofw/lib/pdf/.gitignore' => 'data:text/plain;base64,KgohLmdpdGlnbm9yZQohcGRmLnR4dA==',
  'ofw/lib/pdf/pdf.txt' => 'data:text/plain;base64,RW4gY2FzbyBkZSBuZWNlc2l0YXIgbGEgY3JlYWNpw7NuIGRlIGFyY2hpdm9zIFBERiwgZW4gZXN0w6EgY2FycGV0YSBoYXkgcXVlIGluY2x1aXIgbGEgbGlicmVyw61hIFRDUERGIChodHRwczovL2dpdGh1Yi5jb20vdGVjbmlja2NvbS90Y3BkZik=',
  'ofw/lib/routing/sfObjectRoute.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZk9iamVjdFJvdXRlIHJlcHJlc2VudHMgYSByb3V0ZSB0aGF0IGlzIGJvdW5kIHRvIFBIUCBvYmplY3QocykuCiAqCiAqIEFuIG9iamVjdCByb3V0ZSBjYW4gcmVwcmVzZW50IGEgc2luZ2xlIG9iamVjdCBvciBhIGxpc3Qgb2Ygb2JqZWN0cy4KICoKICogQHBhY2thZ2UgICAgc3ltZm9ueQogKiBAc3VicGFja2FnZSByb3V0aW5nCiAqIEBhdXRob3IgICAgIEZhYmllbiBQb3RlbmNpZXIgPGZhYmllbi5wb3RlbmNpZXJAc3ltZm9ueS1wcm9qZWN0LmNvbT4KICogQHZlcnNpb24gICAgU1ZOOiAkSWQ6IHNmT2JqZWN0Um91dGUuY2xhc3MucGhwIDIwNzg0IDIwMDktMDgtMDQgMjA6NTM6NTdaIEtyaXMuV2FsbHNtaXRoICQKICovCmNsYXNzIHNmT2JqZWN0Um91dGUgZXh0ZW5kcyBzZlJlcXVlc3RSb3V0ZQp7CiAgcHJvdGVjdGVkCiAgICAkb2JqZWN0ICA9IGZhbHNlLAogICAgJG9iamVjdHMgPSBmYWxzZTsKCiAgLyoqCiAgICogQ29uc3RydWN0b3IuCiAgICoKICAgKiBAcGFyYW0gc3RyaW5nICRwYXR0ZXJuICAgICAgIFRoZSBwYXR0ZXJuIHRvIG1hdGNoCiAgICogQHBhcmFtIGFycmF5ICAkZGVmYXVsdHMgICAgICBBbiBhcnJheSBvZiBkZWZhdWx0IHBhcmFtZXRlciB2YWx1ZXMKICAgKiBAcGFyYW0gYXJyYXkgICRyZXF1aXJlbWVudHMgIEFuIGFycmF5IG9mIHJlcXVpcmVtZW50cyBmb3IgcGFyYW1ldGVycyAocmVnZXhlcykKICAgKiBAcGFyYW0gYXJyYXkgICRvcHRpb25zICAgICAgIEFuIGFycmF5IG9mIG9wdGlvbnMKICAgKgogICAqIEBzZWUgc2ZSb3V0ZQogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcGF0dGVybiwgYXJyYXkgJGRlZmF1bHRzID0gYXJyYXkoKSwgYXJyYXkgJHJlcXVpcmVtZW50cyA9IGFycmF5KCksIGFycmF5ICRvcHRpb25zID0gYXJyYXkoKSkKICB7CiAgICBpZiAoIWlzc2V0KCRvcHRpb25zWydtb2RlbCddKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbihzcHJpbnRmKCdZb3UgbXVzdCBwYXNzIGEgIm1vZGVsIiBvcHRpb24gZm9yIGEgJXMgb2JqZWN0ICglcykuJywgZ2V0X2NsYXNzKCR0aGlzKSwgJHBhdHRlcm4pKTsKICAgIH0KCiAgICBpZiAoIWlzc2V0KCRvcHRpb25zWyd0eXBlJ10pKQogICAgewogICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKHNwcmludGYoJ1lvdSBtdXN0IHBhc3MgYSAidHlwZSIgb3B0aW9uIGZvciBhICVzIG9iamVjdCAoJXMpLicsIGdldF9jbGFzcygkdGhpcyksICRwYXR0ZXJuKSk7CiAgICB9CgogICAgaWYgKCFpbl9hcnJheSgkb3B0aW9uc1sndHlwZSddLCBhcnJheSgnb2JqZWN0JywgJ2xpc3QnKSkpCiAgICB7CiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oc3ByaW50ZignVGhlICJ0eXBlIiBvcHRpb24gY2FuIG9ubHkgYmUgIm9iamVjdCIgb3IgImxpc3QiLCAiJXMiIGdpdmVuICglcykuJywgJG9wdGlvbnNbJ3R5cGUnXSwgJHBhdHRlcm4pKTsKICAgIH0KCiAgICBwYXJlbnQ6Ol9fY29uc3RydWN0KCRwYXR0ZXJuLCAkZGVmYXVsdHMsICRyZXF1aXJlbWVudHMsICRvcHRpb25zKTsKICB9CgogIC8qKgogICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFyYW1ldGVycyBtYXRjaGVzIHRoaXMgcm91dGUsIGZhbHNlIG90aGVyd2lzZS4KICAgKgogICAqIEBwYXJhbSAgbWl4ZWQgICRwYXJhbXMgIFRoZSBwYXJhbWV0ZXJzCiAgICogQHBhcmFtICBhcnJheSAgJGNvbnRleHQgVGhlIGNvbnRleHQKICAgKgogICAqIEByZXR1cm4gQm9vbGVhbiAgICAgICAgIHRydWUgaWYgdGhlIHBhcmFtZXRlcnMgbWF0Y2hlcyB0aGlzIHJvdXRlLCBmYWxzZSBvdGhlcndpc2UuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIG1hdGNoZXNQYXJhbWV0ZXJzKCRwYXJhbXMsICRjb250ZXh0ID0gYXJyYXkoKSkKICB7CiAgICByZXR1cm4gcGFyZW50OjptYXRjaGVzUGFyYW1ldGVycygnb2JqZWN0JyA9PSAkdGhpcy0+b3B0aW9uc1sndHlwZSddID8gJHRoaXMtPmNvbnZlcnRPYmplY3RUb0FycmF5KCRwYXJhbXMpIDogJHBhcmFtcyk7CiAgfQoKICAvKioKICAgKiBHZW5lcmF0ZXMgYSBVUkwgZnJvbSB0aGUgZ2l2ZW4gcGFyYW1ldGVycy4KICAgKgogICAqIEBwYXJhbSAgbWl4ZWQgICAkcGFyYW1zICAgIFRoZSBwYXJhbWV0ZXIgdmFsdWVzCiAgICogQHBhcmFtICBhcnJheSAgICRjb250ZXh0ICAgVGhlIGNvbnRleHQKICAgKiBAcGFyYW0gIEJvb2xlYW4gJGFic29sdXRlICBXaGV0aGVyIHRvIGdlbmVyYXRlIGFuIGFic29sdXRlIFVSTAogICAqCiAgICogQHJldHVybiBzdHJpbmcgVGhlIGdlbmVyYXRlZCBVUkwKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGUoJHBhcmFtcywgJGNvbnRleHQgPSBhcnJheSgpLCAkYWJzb2x1dGUgPSBmYWxzZSkKICB7CiAgICByZXR1cm4gcGFyZW50OjpnZW5lcmF0ZSgnb2JqZWN0JyA9PSAkdGhpcy0+b3B0aW9uc1sndHlwZSddID8gJHRoaXMtPmNvbnZlcnRPYmplY3RUb0FycmF5KCRwYXJhbXMpIDogJHBhcmFtcywgJGNvbnRleHQsICRhYnNvbHV0ZSk7CiAgfQoKICAvKioKICAgKiBHZXRzIHRoZSBvYmplY3QgcmVsYXRlZCB0byB0aGUgY3VycmVudCByb3V0ZSBhbmQgcGFyYW1ldGVycy4KICAgKgogICAqIFRoaXMgbWV0aG9kIGlzIG9ubHkgYWNjZXNzaWJsZSBpZiB0aGUgcm91dGUgaXMgYm91bmQgYW5kIG9mIHR5cGUgIm9iamVjdCIuCiAgICoKICAgKiBAcmV0dXJuIE9iamVjdCBUaGUgcmVsYXRlZCBvYmplY3QKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0T2JqZWN0KCkKICB7CiAgICBpZiAoISR0aGlzLT5pc0JvdW5kKCkpCiAgICB7CiAgICAgIHRocm93IG5ldyBMb2dpY0V4Y2VwdGlvbignVGhlIHJvdXRlIGlzIG5vdCBib3VuZC4nKTsKICAgIH0KCiAgICBpZiAoJ29iamVjdCcgIT0gJHRoaXMtPm9wdGlvbnNbJ3R5cGUnXSkKICAgIHsKICAgICAgdGhyb3cgbmV3IExvZ2ljRXhjZXB0aW9uKHNwcmludGYoJ1RoZSByb3V0ZSAiJXMiIGlzIG5vdCBvZiB0eXBlICJvYmplY3QiLicsICR0aGlzLT5wYXR0ZXJuKSk7CiAgICB9CgogICAgaWYgKGZhbHNlICE9PSAkdGhpcy0+b2JqZWN0KQogICAgewogICAgICByZXR1cm4gJHRoaXMtPm9iamVjdDsKICAgIH0KCiAgICAvLyBjaGVjayB0aGUgcmVsYXRlZCBvYmplY3QKICAgIGlmICghKCR0aGlzLT5vYmplY3QgPSAkdGhpcy0+Z2V0T2JqZWN0Rm9yUGFyYW1ldGVycygkdGhpcy0+cGFyYW1ldGVycykpICYmICghaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ2FsbG93X2VtcHR5J10pIHx8ICEkdGhpcy0+b3B0aW9uc1snYWxsb3dfZW1wdHknXSkpCiAgICB7CiAgICAgIHRocm93IG5ldyBzZkVycm9yNDA0RXhjZXB0aW9uKHNwcmludGYoJ1VuYWJsZSB0byBmaW5kIHRoZSAlcyBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnMgIiVzIikuJywgJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sIHN0cl9yZXBsYWNlKCJcbiIsICcnLCB2YXJfZXhwb3J0KCR0aGlzLT5maWx0ZXJQYXJhbWV0ZXJzKCR0aGlzLT5wYXJhbWV0ZXJzKSwgdHJ1ZSkpKSk7CiAgICB9CgogICAgcmV0dXJuICR0aGlzLT5vYmplY3Q7CiAgfQoKICAvKioKICAgKiBHZXRzIHRoZSBsaXN0IG9mIG9iamVjdHMgcmVsYXRlZCB0byB0aGUgY3VycmVudCByb3V0ZSBhbmQgcGFyYW1ldGVycy4KICAgKgogICAqIFRoaXMgbWV0aG9kIGlzIG9ubHkgYWNjZXNzaWJsZSBpZiB0aGUgcm91dGUgaXMgYm91bmQgYW5kIG9mIHR5cGUgImxpc3QiLgogICAqCiAgICogQHJldHVybiBhcnJheSBBbmQgYXJyYXkgb2YgcmVsYXRlZCBvYmplY3RzCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdldE9iamVjdHMoKQogIHsKICAgIGlmICghJHRoaXMtPmlzQm91bmQoKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IExvZ2ljRXhjZXB0aW9uKCdUaGUgcm91dGUgaXMgbm90IGJvdW5kLicpOwogICAgfQoKICAgIGlmICgnbGlzdCcgIT0gJHRoaXMtPm9wdGlvbnNbJ3R5cGUnXSkKICAgIHsKICAgICAgdGhyb3cgbmV3IExvZ2ljRXhjZXB0aW9uKHNwcmludGYoJ1RoZSByb3V0ZSAiJXMiIGlzIG5vdCBvZiB0eXBlICJsaXN0Ii4nLCAkdGhpcy0+cGF0dGVybikpOwogICAgfQoKICAgIGlmIChmYWxzZSAhPT0gJHRoaXMtPm9iamVjdHMpCiAgICB7CiAgICAgIHJldHVybiAkdGhpcy0+b2JqZWN0czsKICAgIH0KCiAgICAkdGhpcy0+b2JqZWN0cyA9ICR0aGlzLT5nZXRPYmplY3RzRm9yUGFyYW1ldGVycygkdGhpcy0+cGFyYW1ldGVycyk7CgogICAgaWYgKCFjb3VudCgkdGhpcy0+b2JqZWN0cykgJiYgaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ2FsbG93X2VtcHR5J10pICYmICEkdGhpcy0+b3B0aW9uc1snYWxsb3dfZW1wdHknXSkKICAgIHsKICAgICAgdGhyb3cgbmV3IHNmRXJyb3I0MDRFeGNlcHRpb24oc3ByaW50ZignTm8gJXMgb2JqZWN0IGZvdW5kIGZvciB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnMgIiVzIikuJywgJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sIHN0cl9yZXBsYWNlKCJcbiIsICcnLCB2YXJfZXhwb3J0KCR0aGlzLT5maWx0ZXJQYXJhbWV0ZXJzKCR0aGlzLT5wYXJhbWV0ZXJzKSwgdHJ1ZSkpKSk7CiAgICB9CgogICAgcmV0dXJuICR0aGlzLT5vYmplY3RzOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldE9iamVjdEZvclBhcmFtZXRlcnMoJHBhcmFtZXRlcnMpCiAgewogICAgJGNsYXNzTmFtZSA9ICR0aGlzLT5vcHRpb25zWydtb2RlbCddOwoKICAgIGlmICghaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ21ldGhvZCddKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbihzcHJpbnRmKCdZb3UgbXVzdCBwYXNzIGEgIm1ldGhvZCIgb3B0aW9uIGZvciBhICVzIG9iamVjdC4nLCBnZXRfY2xhc3MoJHRoaXMpKSk7CiAgICB9CgogICAgcmV0dXJuIGNhbGxfdXNlcl9mdW5jKGFycmF5KCRjbGFzc05hbWUsICR0aGlzLT5vcHRpb25zWydtZXRob2QnXSksICR0aGlzLT5maWx0ZXJQYXJhbWV0ZXJzKCRwYXJhbWV0ZXJzKSk7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0T2JqZWN0c0ZvclBhcmFtZXRlcnMoJHBhcmFtZXRlcnMpCiAgewogICAgJGNsYXNzTmFtZSA9ICR0aGlzLT5vcHRpb25zWydtb2RlbCddOwoKICAgIGlmICghaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ21ldGhvZCddKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbihzcHJpbnRmKCdZb3UgbXVzdCBwYXNzIGEgIm1ldGhvZCIgb3B0aW9uIGZvciBhICVzIG9iamVjdC4nLCBnZXRfY2xhc3MoJHRoaXMpKSk7CiAgICB9CgogICAgcmV0dXJuIGNhbGxfdXNlcl9mdW5jKGFycmF5KCRjbGFzc05hbWUsICR0aGlzLT5vcHRpb25zWydtZXRob2QnXSksICR0aGlzLT5maWx0ZXJQYXJhbWV0ZXJzKCRwYXJhbWV0ZXJzKSk7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZmlsdGVyUGFyYW1ldGVycygkcGFyYW1ldGVycykKICB7CiAgICBpZiAoIWlzX2FycmF5KCRwYXJhbWV0ZXJzKSkKICAgIHsKICAgICAgcmV0dXJuICRwYXJhbWV0ZXJzOwogICAgfQoKICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgZm9yZWFjaCAoYXJyYXlfa2V5cygkdGhpcy0+dmFyaWFibGVzKSBhcyAkdmFyaWFibGUpCiAgICB7CiAgICAgICRwYXJhbXNbJHZhcmlhYmxlXSA9ICRwYXJhbWV0ZXJzWyR2YXJpYWJsZV07CiAgICB9CgogICAgcmV0dXJuICRwYXJhbXM7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gY29udmVydE9iamVjdFRvQXJyYXkoJG9iamVjdCkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICBpZiAoaXNfYXJyYXkoJG9iamVjdCkpCiAgICB7CiAgICAgIGlmICghaXNzZXQoJG9iamVjdFsnc2Zfc3ViamVjdCddKSkKICAgICAgewogICAgICAgIHJldHVybiAkb2JqZWN0OwogICAgICB9CgogICAgICAkcGFyYW1ldGVycyA9ICRvYmplY3Q7CiAgICAgICRvYmplY3QgPSAkcGFyYW1ldGVyc1snc2Zfc3ViamVjdCddOwogICAgICB1bnNldCgkcGFyYW1ldGVyc1snc2Zfc3ViamVjdCddKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgJHBhcmFtZXRlcnMgPSBhcnJheSgpOwogICAgfQoKICAgIHJldHVybiBhcnJheV9tZXJnZSgkcGFyYW1ldGVycywgJHRoaXMtPmRvQ29udmVydE9iamVjdFRvQXJyYXkoJG9iamVjdCkpOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGRvQ29udmVydE9iamVjdFRvQXJyYXkoJG9iamVjdCkKICB7CiAgICAkbWV0aG9kID0gaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ2NvbnZlcnQnXSkgPyAkdGhpcy0+b3B0aW9uc1snY29udmVydCddIDogJ3RvUGFyYW1zJzsKCiAgICByZXR1cm4gJG9iamVjdC0+JG1ldGhvZCgpOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJlYWxWYXJpYWJsZXMoKQogIHsKICAgICR2YXJpYWJsZXMgPSBhcnJheSgpOwoKICAgIGZvcmVhY2ggKGFycmF5X2tleXMoJHRoaXMtPnZhcmlhYmxlcykgYXMgJHZhcmlhYmxlKQogICAgewogICAgICBpZiAoMCA9PT0gc3RycG9zKCR2YXJpYWJsZSwgJ3NmXycpIHx8IGluX2FycmF5KCR2YXJpYWJsZSwgYXJyYXkoJ21vZHVsZScsICdhY3Rpb24nKSkpCiAgICAgIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgJHZhcmlhYmxlc1tdID0gJHZhcmlhYmxlOwogICAgfQoKICAgIHJldHVybiAkdmFyaWFibGVzOwogIH0KfQo=',
  'ofw/lib/routing/sfObjectRouteCollection.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZk9iamVjdFJvdXRlQ29sbGVjdGlvbiByZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiByb3V0ZXMgYm91bmQgdG8gb2JqZWN0cy4KICoKICogQHBhY2thZ2UgICAgc3ltZm9ueQogKiBAc3VicGFja2FnZSByb3V0aW5nCiAqIEBhdXRob3IgICAgIEZhYmllbiBQb3RlbmNpZXIgPGZhYmllbi5wb3RlbmNpZXJAc3ltZm9ueS1wcm9qZWN0LmNvbT4KICogQHZlcnNpb24gICAgU1ZOOiAkSWQ6IHNmT2JqZWN0Um91dGVDb2xsZWN0aW9uLmNsYXNzLnBocCAyNDU5MSAyMDA5LTExLTMwIDE4OjM0OjI5WiBGYWJpYW5MYW5nZSAkCiAqLwpjbGFzcyBzZk9iamVjdFJvdXRlQ29sbGVjdGlvbiBleHRlbmRzIHNmUm91dGVDb2xsZWN0aW9uCnsKICBwcm90ZWN0ZWQKICAgICRyb3V0ZUNsYXNzID0gJ3NmT2JqZWN0Um91dGUnOwoKICAvKioKICAgKiBDb25zdHJ1Y3Rvci4KICAgKgogICAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucyBBbiBhcnJheSBvZiBvcHRpb25zCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KGFycmF5ICRvcHRpb25zKQogIHsKICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoJG9wdGlvbnMpOwoKICAgIGlmICghaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10pKQogICAgewogICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKHNwcmludGYoJ1lvdSBtdXN0IHBhc3MgYSAibW9kZWwiIG9wdGlvbiB0byAlcyAoIiVzIiByb3V0ZSknLCBnZXRfY2xhc3MoJHRoaXMpLCAkdGhpcy0+b3B0aW9uc1snbmFtZSddKSk7CiAgICB9CiAgICAKICAgICR0aGlzLT5vcHRpb25zID0gYXJyYXlfbWVyZ2UoYXJyYXkoCiAgICAgICdhY3Rpb25zJyAgICAgICAgICAgICAgPT4gZmFsc2UsCiAgICAgICdtb2R1bGUnICAgICAgICAgICAgICAgPT4gJHRoaXMtPm9wdGlvbnNbJ25hbWUnXSwKICAgICAgJ3ByZWZpeF9wYXRoJyAgICAgICAgICA9PiAnLycuJHRoaXMtPm9wdGlvbnNbJ25hbWUnXSwKICAgICAgJ2NvbHVtbicgICAgICAgICAgICAgICA9PiBpc3NldCgkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10pID8gJHRoaXMtPm9wdGlvbnNbJ2NvbHVtbiddIDogJ2lkJywKICAgICAgJ3dpdGhfc2hvdycgICAgICAgICAgICA9PiB0cnVlLAogICAgICAnc2VnbWVudF9uYW1lcycgICAgICAgID0+IGFycmF5KCdlZGl0JyA9PiAnZWRpdCcsICduZXcnID0+ICduZXcnKSwKICAgICAgJ21vZGVsX21ldGhvZHMnICAgICAgICA9PiBhcnJheSgpLAogICAgICAncmVxdWlyZW1lbnRzJyAgICAgICAgID0+IGFycmF5KCksCiAgICAgICd3aXRoX3dpbGRjYXJkX3JvdXRlcycgPT4gZmFsc2UsCiAgICAgICdkZWZhdWx0X3BhcmFtcycgICA9PiBhcnJheSgpLAogICAgKSwgJHRoaXMtPm9wdGlvbnMpOwogICAgCiAgICAkdGhpcy0+b3B0aW9uc1sncmVxdWlyZW1lbnRzJ10gPSBhcnJheV9tZXJnZShhcnJheSgkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10gPT4gJ2lkJyA9PSAkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10gPyAnXGQrJyA6IG51bGwpLCAkdGhpcy0+b3B0aW9uc1sncmVxdWlyZW1lbnRzJ10pOwogICAgJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXSA9IGFycmF5X21lcmdlKGFycmF5KCdsaXN0JyA9PiBudWxsLCAnb2JqZWN0JyA9PiBudWxsKSwgJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXSk7CgogICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25zWydyb3V0ZV9jbGFzcyddKSkKICAgIHsKICAgICAgJHRoaXMtPnJvdXRlQ2xhc3MgPSAkdGhpcy0+b3B0aW9uc1sncm91dGVfY2xhc3MnXTsKICAgIH0KCiAgICAkdGhpcy0+Z2VuZXJhdGVSb3V0ZXMoKTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcygpCiAgewogICAgLy8gY29sbGVjdGlvbiBhY3Rpb25zCiAgICBpZiAoaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ2NvbGxlY3Rpb25fYWN0aW9ucyddKSkKICAgIHsKICAgICAgZm9yZWFjaCAoJHRoaXMtPm9wdGlvbnNbJ2NvbGxlY3Rpb25fYWN0aW9ucyddIGFzICRhY3Rpb24gPT4gJG1ldGhvZHMpCiAgICAgIHsKICAgICAgICAkdGhpcy0+cm91dGVzWyR0aGlzLT5nZXRSb3V0ZSgkYWN0aW9uKV0gPSAkdGhpcy0+Z2V0Um91dGVGb3JDb2xsZWN0aW9uKCRhY3Rpb24sICRtZXRob2RzKTsKICAgICAgfQogICAgfQoKICAgIC8vICJzdGFuZGFyZCIgYWN0aW9ucwogICAgJGFjdGlvbnMgPSBmYWxzZSA9PT0gJHRoaXMtPm9wdGlvbnNbJ2FjdGlvbnMnXSA/ICR0aGlzLT5nZXREZWZhdWx0QWN0aW9ucygpIDogJHRoaXMtPm9wdGlvbnNbJ2FjdGlvbnMnXTsKICAgIGZvcmVhY2ggKCRhY3Rpb25zIGFzICRhY3Rpb24pCiAgICB7CiAgICAgICRtZXRob2QgPSAnZ2V0Um91dGVGb3InLnVjZmlyc3QoJGFjdGlvbik7CiAgICAgIGlmICghbWV0aG9kX2V4aXN0cygkdGhpcywgJG1ldGhvZCkpCiAgICAgIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKHNwcmludGYoJ1VuYWJsZSB0byBnZW5lcmF0ZSBhIHJvdXRlIGZvciB0aGUgIiVzIiBhY3Rpb24uJywgJGFjdGlvbikpOwogICAgICB9CgogICAgICAkdGhpcy0+cm91dGVzWyR0aGlzLT5nZXRSb3V0ZSgkYWN0aW9uKV0gPSAkdGhpcy0+JG1ldGhvZCgpOwogICAgfQoKICAgIC8vIG9iamVjdCBhY3Rpb25zCiAgICBpZiAoaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ29iamVjdF9hY3Rpb25zJ10pKQogICAgewogICAgICBmb3JlYWNoICgkdGhpcy0+b3B0aW9uc1snb2JqZWN0X2FjdGlvbnMnXSBhcyAkYWN0aW9uID0+ICRtZXRob2RzKQogICAgICB7CiAgICAgICAgJHRoaXMtPnJvdXRlc1skdGhpcy0+Z2V0Um91dGUoJGFjdGlvbildID0gJHRoaXMtPmdldFJvdXRlRm9yT2JqZWN0KCRhY3Rpb24sICRtZXRob2RzKTsKICAgICAgfQogICAgfQoKICAgIGlmICgkdGhpcy0+b3B0aW9uc1snd2l0aF93aWxkY2FyZF9yb3V0ZXMnXSkKICAgIHsKICAgICAgLy8gd2lsZGNhcmQgb2JqZWN0IGFjdGlvbnMKICAgICAgJHRoaXMtPnJvdXRlc1skdGhpcy0+Z2V0Um91dGUoJ29iamVjdCcpXSA9IG5ldyAkdGhpcy0+cm91dGVDbGFzcygKICAgICAgICBzcHJpbnRmKCclcy86JXMvOmFjdGlvbi46c2ZfZm9ybWF0JywgJHRoaXMtPm9wdGlvbnNbJ3ByZWZpeF9wYXRoJ10sICR0aGlzLT5vcHRpb25zWydjb2x1bW4nXSksCiAgICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ2RlZmF1bHRfcGFyYW1zJ10sIGFycmF5KCdtb2R1bGUnID0+ICR0aGlzLT5vcHRpb25zWydtb2R1bGUnXSwgJ3NmX2Zvcm1hdCcgPT4gJ2h0bWwnKSksCiAgICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ3JlcXVpcmVtZW50cyddLCBhcnJheSgnc2ZfbWV0aG9kJyA9PiAnZ2V0JykpLAogICAgICAgIGFycmF5KCdtb2RlbCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sICd0eXBlJyA9PiAnb2JqZWN0JywgJ21ldGhvZCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXVsnb2JqZWN0J10pCiAgICAgICk7CgogICAgICAvLyB3aWxkY2FyZCBjb2xsZWN0aW9uIGFjdGlvbnMKICAgICAgJHRoaXMtPnJvdXRlc1skdGhpcy0+Z2V0Um91dGUoJ2NvbGxlY3Rpb24nKV0gPSBuZXcgJHRoaXMtPnJvdXRlQ2xhc3MoCiAgICAgICAgc3ByaW50ZignJXMvOmFjdGlvbi9hY3Rpb24uOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddKSwKICAgICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnc2ZfZm9ybWF0JyA9PiAnaHRtbCcpKSwKICAgICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1sncmVxdWlyZW1lbnRzJ10sIGFycmF5KCdzZl9tZXRob2QnID0+ICdwb3N0JykpLAogICAgICAgIGFycmF5KCdtb2RlbCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sICd0eXBlJyA9PiAnbGlzdCcsICdtZXRob2QnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbF9tZXRob2RzJ11bJ2xpc3QnXSkKICAgICAgKTsKICAgIH0KICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRSb3V0ZUZvckNvbGxlY3Rpb24oJGFjdGlvbiwgJG1ldGhvZHMpCiAgewogICAgcmV0dXJuIG5ldyAkdGhpcy0+cm91dGVDbGFzcygKICAgICAgc3ByaW50ZignJXMvJXMuOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddLCAkYWN0aW9uKSwKICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ2RlZmF1bHRfcGFyYW1zJ10sIGFycmF5KCdtb2R1bGUnID0+ICR0aGlzLT5vcHRpb25zWydtb2R1bGUnXSwgJ2FjdGlvbicgPT4gJGFjdGlvbiwgJ3NmX2Zvcm1hdCcgPT4gJ2h0bWwnKSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydyZXF1aXJlbWVudHMnXSwgYXJyYXkoJ3NmX21ldGhvZCcgPT4gJG1ldGhvZHMpKSwKICAgICAgYXJyYXkoJ21vZGVsJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kZWwnXSwgJ3R5cGUnID0+ICdsaXN0JywgJ21ldGhvZCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXVsnbGlzdCddKQogICAgKTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRSb3V0ZUZvck9iamVjdCgkYWN0aW9uLCAkbWV0aG9kcykKICB7CiAgICByZXR1cm4gbmV3ICR0aGlzLT5yb3V0ZUNsYXNzKAogICAgICBzcHJpbnRmKCclcy86JXMvJXMuOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddLCAkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10sICRhY3Rpb24pLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnYWN0aW9uJyA9PiAkYWN0aW9uLCAnc2ZfZm9ybWF0JyA9PiAnaHRtbCcpKSwKICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ3JlcXVpcmVtZW50cyddLCBhcnJheSgnc2ZfbWV0aG9kJyA9PiAkbWV0aG9kcykpLAogICAgICBhcnJheSgnbW9kZWwnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbCddLCAndHlwZScgPT4gJ29iamVjdCcsICdtZXRob2QnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbF9tZXRob2RzJ11bJ29iamVjdCddKQogICAgKTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRSb3V0ZUZvckxpc3QoKQogIHsKICAgIHJldHVybiBuZXcgJHRoaXMtPnJvdXRlQ2xhc3MoCiAgICAgIHNwcmludGYoJyVzLjpzZl9mb3JtYXQnLCAkdGhpcy0+b3B0aW9uc1sncHJlZml4X3BhdGgnXSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydkZWZhdWx0X3BhcmFtcyddLCBhcnJheSgnbW9kdWxlJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kdWxlJ10sICdhY3Rpb24nID0+ICR0aGlzLT5nZXRBY3Rpb25NZXRob2QoJ2xpc3QnKSwgJ3NmX2Zvcm1hdCcgPT4gJ2h0bWwnKSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydyZXF1aXJlbWVudHMnXSwgYXJyYXkoJ3NmX21ldGhvZCcgPT4gJ2dldCcpKSwKICAgICAgYXJyYXkoJ21vZGVsJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kZWwnXSwgJ3R5cGUnID0+ICdsaXN0JywgJ21ldGhvZCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXVsnbGlzdCddKQogICAgKTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRSb3V0ZUZvck5ldygpCiAgewogICAgcmV0dXJuIG5ldyAkdGhpcy0+cm91dGVDbGFzcygKICAgICAgc3ByaW50ZignJXMvJXMuOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddLCAkdGhpcy0+b3B0aW9uc1snc2VnbWVudF9uYW1lcyddWyduZXcnXSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydkZWZhdWx0X3BhcmFtcyddLCBhcnJheSgnbW9kdWxlJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kdWxlJ10sICdhY3Rpb24nID0+ICR0aGlzLT5nZXRBY3Rpb25NZXRob2QoJ25ldycpLCAnc2ZfZm9ybWF0JyA9PiAnaHRtbCcpKSwKICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ3JlcXVpcmVtZW50cyddLCBhcnJheSgnc2ZfbWV0aG9kJyA9PiAnZ2V0JykpLAogICAgICBhcnJheSgnbW9kZWwnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbCddLCAndHlwZScgPT4gJ29iamVjdCcpCiAgICApOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJvdXRlRm9yQ3JlYXRlKCkKICB7CiAgICByZXR1cm4gbmV3ICR0aGlzLT5yb3V0ZUNsYXNzKAogICAgICBzcHJpbnRmKCclcy46c2ZfZm9ybWF0JywgJHRoaXMtPm9wdGlvbnNbJ3ByZWZpeF9wYXRoJ10pLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnYWN0aW9uJyA9PiAkdGhpcy0+Z2V0QWN0aW9uTWV0aG9kKCdjcmVhdGUnKSwgJ3NmX2Zvcm1hdCcgPT4gJ2h0bWwnKSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydyZXF1aXJlbWVudHMnXSwgYXJyYXkoJ3NmX21ldGhvZCcgPT4gJ3Bvc3QnKSksCiAgICAgIGFycmF5KCdtb2RlbCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sICd0eXBlJyA9PiAnb2JqZWN0JykKICAgICk7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Um91dGVGb3JTaG93KCkKICB7CiAgICByZXR1cm4gbmV3ICR0aGlzLT5yb3V0ZUNsYXNzKAogICAgICBzcHJpbnRmKCclcy86JXMuOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddLCAkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10pLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnYWN0aW9uJyA9PiAkdGhpcy0+Z2V0QWN0aW9uTWV0aG9kKCdzaG93JyksICdzZl9mb3JtYXQnID0+ICdodG1sJykpLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1sncmVxdWlyZW1lbnRzJ10sIGFycmF5KCdzZl9tZXRob2QnID0+ICdnZXQnKSksCiAgICAgIGFycmF5KCdtb2RlbCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sICd0eXBlJyA9PiAnb2JqZWN0JywgJ21ldGhvZCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXVsnb2JqZWN0J10pCiAgICApOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJvdXRlRm9yRWRpdCgpCiAgewogICAgcmV0dXJuIG5ldyAkdGhpcy0+cm91dGVDbGFzcygKICAgICAgc3ByaW50ZignJXMvOiVzLyVzLjpzZl9mb3JtYXQnLCAkdGhpcy0+b3B0aW9uc1sncHJlZml4X3BhdGgnXSwgJHRoaXMtPm9wdGlvbnNbJ2NvbHVtbiddLCAkdGhpcy0+b3B0aW9uc1snc2VnbWVudF9uYW1lcyddWydlZGl0J10pLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnYWN0aW9uJyA9PiAkdGhpcy0+Z2V0QWN0aW9uTWV0aG9kKCdlZGl0JyksICdzZl9mb3JtYXQnID0+ICdodG1sJykpLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1sncmVxdWlyZW1lbnRzJ10sIGFycmF5KCdzZl9tZXRob2QnID0+ICdnZXQnKSksCiAgICAgIGFycmF5KCdtb2RlbCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsJ10sICd0eXBlJyA9PiAnb2JqZWN0JywgJ21ldGhvZCcgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZGVsX21ldGhvZHMnXVsnb2JqZWN0J10pCiAgICApOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJvdXRlRm9yVXBkYXRlKCkKICB7CiAgICByZXR1cm4gbmV3ICR0aGlzLT5yb3V0ZUNsYXNzKAogICAgICBzcHJpbnRmKCclcy86JXMuOnNmX2Zvcm1hdCcsICR0aGlzLT5vcHRpb25zWydwcmVmaXhfcGF0aCddLCAkdGhpcy0+b3B0aW9uc1snY29sdW1uJ10pLAogICAgICBhcnJheV9tZXJnZSgkdGhpcy0+b3B0aW9uc1snZGVmYXVsdF9wYXJhbXMnXSwgYXJyYXkoJ21vZHVsZScgPT4gJHRoaXMtPm9wdGlvbnNbJ21vZHVsZSddLCAnYWN0aW9uJyA9PiAkdGhpcy0+Z2V0QWN0aW9uTWV0aG9kKCd1cGRhdGUnKSwgJ3NmX2Zvcm1hdCcgPT4gJ2h0bWwnKSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydyZXF1aXJlbWVudHMnXSwgYXJyYXkoJ3NmX21ldGhvZCcgPT4gJ3B1dCcpKSwKICAgICAgYXJyYXkoJ21vZGVsJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kZWwnXSwgJ3R5cGUnID0+ICdvYmplY3QnLCAnbWV0aG9kJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kZWxfbWV0aG9kcyddWydvYmplY3QnXSkKICAgICk7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Um91dGVGb3JEZWxldGUoKQogIHsKICAgIHJldHVybiBuZXcgJHRoaXMtPnJvdXRlQ2xhc3MoCiAgICAgIHNwcmludGYoJyVzLzolcy46c2ZfZm9ybWF0JywgJHRoaXMtPm9wdGlvbnNbJ3ByZWZpeF9wYXRoJ10sICR0aGlzLT5vcHRpb25zWydjb2x1bW4nXSksCiAgICAgIGFycmF5X21lcmdlKCR0aGlzLT5vcHRpb25zWydkZWZhdWx0X3BhcmFtcyddLCBhcnJheSgnbW9kdWxlJyA9PiAkdGhpcy0+b3B0aW9uc1snbW9kdWxlJ10sICdhY3Rpb24nID0+ICR0aGlzLT5nZXRBY3Rpb25NZXRob2QoJ2RlbGV0ZScpLCAnc2ZfZm9ybWF0JyA9PiAnaHRtbCcpKSwKICAgICAgYXJyYXlfbWVyZ2UoJHRoaXMtPm9wdGlvbnNbJ3JlcXVpcmVtZW50cyddLCBhcnJheSgnc2ZfbWV0aG9kJyA9PiAnZGVsZXRlJykpLAogICAgICBhcnJheSgnbW9kZWwnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbCddLCAndHlwZScgPT4gJ29iamVjdCcsICdtZXRob2QnID0+ICR0aGlzLT5vcHRpb25zWydtb2RlbF9tZXRob2RzJ11bJ29iamVjdCddKQogICAgKTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBnZXREZWZhdWx0QWN0aW9ucygpCiAgewogICAgJGFjdGlvbnMgPSBhcnJheSgnbGlzdCcsICduZXcnLCAnY3JlYXRlJywgJ2VkaXQnLCAndXBkYXRlJywgJ2RlbGV0ZScpOwoKICAgIGlmICgkdGhpcy0+b3B0aW9uc1snd2l0aF9zaG93J10pCiAgICB7CiAgICAgICRhY3Rpb25zW10gPSAnc2hvdyc7CiAgICB9CgogICAgcmV0dXJuICRhY3Rpb25zOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJvdXRlKCRhY3Rpb24pCiAgewogICAgcmV0dXJuICdsaXN0JyA9PSAkYWN0aW9uID8gJHRoaXMtPm9wdGlvbnNbJ25hbWUnXSA6ICR0aGlzLT5vcHRpb25zWyduYW1lJ10uJ18nLiRhY3Rpb247CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0QWN0aW9uTWV0aG9kKCRhY3Rpb24pCiAgewogICAgcmV0dXJuICdsaXN0JyA9PSAkYWN0aW9uID8gJ2luZGV4JyA6ICRhY3Rpb247CiAgfQp9Cg==',
  'ofw/lib/routing/sfPatternRouting.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZlBhdHRlcm5Sb3V0aW5nIGNsYXNzIGNvbnRyb2xzIHRoZSBnZW5lcmF0aW9uIGFuZCBwYXJzaW5nIG9mIFVSTHMuCiAqCiAqIEl0IHBhcnNlcyBhbmQgZ2VuZXJhdGVzIFVSTHMgYnkgZGVsZWdhdGluZyB0aGUgd29yayB0byBhbiBhcnJheSBvZiBzZlJvdXRlIG9iamVjdHMuCiAqCiAqIEBwYWNrYWdlICAgIHN5bWZvbnkKICogQHN1YnBhY2thZ2Ugcm91dGluZwogKiBAYXV0aG9yICAgICBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqIEB2ZXJzaW9uICAgIFNWTjogJElkOiBzZlBhdHRlcm5Sb3V0aW5nLmNsYXNzLnBocCAyNDA2MSAyMDA5LTExLTE2IDIyOjM1OjAzWiBGYWJpYW5MYW5nZSAkCiAqLwpjbGFzcyBzZlBhdHRlcm5Sb3V0aW5nIGV4dGVuZHMgc2ZSb3V0aW5nCnsKICBwcm90ZWN0ZWQKICAgICRjdXJyZW50Um91dGVOYW1lICAgPSBudWxsLAogICAgJGN1cnJlbnRJbnRlcm5hbFVyaSA9IGFycmF5KCksCiAgICAkcm91dGVzICAgICAgICAgICAgID0gYXJyYXkoKSwKICAgICRkZWZhdWx0UGFyYW1zRGlydHkgPSBmYWxzZSwKICAgICRjYWNoZURhdGEgICAgICAgICAgPSBhcnJheSgpLAogICAgJGNhY2hlQ2hhbmdlZCAgICAgICA9IGZhbHNlOwoKICAvKioKICAgKiBJbml0aWFsaXplcyB0aGlzIFJvdXRpbmcuCiAgICoKICAgKiBBdmFpbGFibGUgb3B0aW9uczoKICAgKgogICAqICAqIHN1ZmZpeDogICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCBzdWZmaXgKICAgKiAgKiB2YXJpYWJsZV9wcmVmaXhlczogICAgICAgICAgICAgICAgQW4gYXJyYXkgb2YgY2hhcmFjdGVycyB0aGF0IHN0YXJ0cyBhIHZhcmlhYmxlIG5hbWUgKDogYnkgZGVmYXVsdCkKICAgKiAgKiBzZWdtZW50X3NlcGFyYXRvcnM6ICAgICAgICAgICAgICAgQW4gYXJyYXkgb2YgYWxsb3dlZCBjaGFyYWN0ZXJzIGZvciBzZWdtZW50IHNlcGFyYXRvcnMgKC8gYW5kIC4gYnkgZGVmYXVsdCkKICAgKiAgKiB2YXJpYWJsZV9yZWdleDogICAgICAgICAgICAgICAgICAgQSByZWdleCB0aGF0IG1hdGNoIGEgdmFsaWQgdmFyaWFibGUgbmFtZSAoW1x3XGRfXSsgYnkgZGVmYXVsdCkKICAgKiAgKiBnZW5lcmF0ZV9zaG9ydGVzdF91cmw6ICAgICAgICAgICAgV2hldGhlciB0byBnZW5lcmF0ZSB0aGUgc2hvcnRlc3QgVVJMIHBvc3NpYmxlICh0cnVlIGJ5IGRlZmF1bHQpCiAgICogICogZXh0cmFfcGFyYW1ldGVyc19hc19xdWVyeV9zdHJpbmc6IFdoZXRoZXIgdG8gZ2VuZXJhdGUgZXh0cmEgcGFyYW1ldGVycyBhcyBhIHF1ZXJ5IHN0cmluZwogICAqICAqIGxvb2t1cF9jYWNoZV9kZWRpY2F0ZWRfa2V5czogICAgICBXaGV0aGVyIHRvIHVzZSBkZWRpY2F0ZWQga2V5cyBmb3IgcGFyc2UvZ2VuZXJhdGUgY2FjaGUgKGZhbHNlIGJ5IGRlZmF1bHQpCiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdBUk5JTkc6IFdoZW4gdGhpcyBvcHRpb24gaXMgYWN0aXZhdGVkLCBkbyBub3QgdXNlIHNmRmlsZUNhY2hlOyB1c2UgYSBmYXN0IGFjY2VzcwogICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZSBiYWNrZW5kIChsaWtlIHNmQVBDQ2FjaGUpLgogICAqCiAgICogQHNlZSBzZlJvdXRpbmcKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gaW5pdGlhbGl6ZShzZkV2ZW50RGlzcGF0Y2hlciAkZGlzcGF0Y2hlciwgc2ZDYWNoZSAkY2FjaGUgPSBudWxsLCAkb3B0aW9ucyA9IGFycmF5KCkpCiAgewogICAgJG9wdGlvbnMgPSBhcnJheV9tZXJnZShhcnJheSgKICAgICAgJ3ZhcmlhYmxlX3ByZWZpeGVzJyAgICAgICAgICAgICAgICA9PiBhcnJheSgnOicpLAogICAgICAnc2VnbWVudF9zZXBhcmF0b3JzJyAgICAgICAgICAgICAgID0+IGFycmF5KCcvJywgJy4nKSwKICAgICAgJ3ZhcmlhYmxlX3JlZ2V4JyAgICAgICAgICAgICAgICAgICA9PiAnW1x3XGRfXSsnLAogICAgICAnbG9hZF9jb25maWd1cmF0aW9uJyAgICAgICAgICAgICAgID0+IGZhbHNlLAogICAgICAnc3VmZml4JyAgICAgICAgICAgICAgICAgICAgICAgICAgID0+ICcnLAogICAgICAnZ2VuZXJhdGVfc2hvcnRlc3RfdXJsJyAgICAgICAgICAgID0+IHRydWUsCiAgICAgICdleHRyYV9wYXJhbWV0ZXJzX2FzX3F1ZXJ5X3N0cmluZycgPT4gdHJ1ZSwKICAgICAgJ2xvb2t1cF9jYWNoZV9kZWRpY2F0ZWRfa2V5cycgICAgICA9PiBmYWxzZSwKICAgICksICRvcHRpb25zKTsKCiAgICAvLyBmb3IgQkMKICAgIGlmICgnLicgPT0gJG9wdGlvbnNbJ3N1ZmZpeCddKQogICAgewogICAgICAkb3B0aW9uc1snc3VmZml4J10gPSAnJzsKICAgIH0KCiAgICBwYXJlbnQ6OmluaXRpYWxpemUoJGRpc3BhdGNoZXIsICRjYWNoZSwgJG9wdGlvbnMpOwoKICAgIGlmIChudWxsICE9PSAkdGhpcy0+Y2FjaGUgJiYgISRvcHRpb25zWydsb29rdXBfY2FjaGVfZGVkaWNhdGVkX2tleXMnXSAmJiAkY2FjaGVEYXRhID0gJHRoaXMtPmNhY2hlLT5nZXQoJ3N5bWZvbnkucm91dGluZy5kYXRhJykpCiAgICB7CiAgICAgICR0aGlzLT5jYWNoZURhdGEgPSB1bnNlcmlhbGl6ZSgkY2FjaGVEYXRhKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGxvYWRDb25maWd1cmF0aW9uKCkKICB7CiAgICBpZiAoJHRoaXMtPm9wdGlvbnNbJ2xvYWRfY29uZmlndXJhdGlvbiddICYmICRjb25maWcgPSAkdGhpcy0+Z2V0Q29uZmlnRmlsZW5hbWUoKSkKICAgIHsKICAgICAgaW5jbHVkZSgkY29uZmlnKTsKICAgIH0KCiAgICBwYXJlbnQ6OmxvYWRDb25maWd1cmF0aW9uKCk7CiAgfQoKICAvKioKICAgKiBBZGRlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLiBXZSBuZWVkIHRvIGVuc3VyZSB0aGF0IGNoYW5nZWQgZGVmYXVsdCBwYXJhbWV0ZXJzCiAgICogYXJlIHNldCwgYnV0IHJlc2V0dGluZyB0aGVtIGV2ZXJ5dGltZSB3YXN0ZXMgbWFueSBjcHUgY3ljbGVzCiAgICovCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGVuc3VyZURlZmF1bHRQYXJhbWV0ZXJzQXJlU2V0KCkKICB7CiAgICBpZiAoJHRoaXMtPmRlZmF1bHRQYXJhbXNEaXJ0eSkKICAgIHsKICAgICAgZm9yZWFjaCAoJHRoaXMtPnJvdXRlcyBhcyAkcm91dGUpCiAgICAgIHsKICAgICAgICAkcm91dGUtPnNldERlZmF1bHRQYXJhbWV0ZXJzKCR0aGlzLT5kZWZhdWx0UGFyYW1ldGVycyk7CiAgICAgIH0KICAgICAgJHRoaXMtPmRlZmF1bHRQYXJhbXNEaXJ0eSA9IGZhbHNlOwogICAgfQogIH0KCiAgLyoqCiAgICogQHNlZSBzZlJvdXRpbmcKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gc2V0RGVmYXVsdFBhcmFtZXRlcigka2V5LCAkdmFsdWUpCiAgewogICAgcGFyZW50OjpzZXREZWZhdWx0UGFyYW1ldGVyKCRrZXksICR2YWx1ZSk7CiAgICAkdGhpcy0+ZGVmYXVsdFBhcmFtc0RpcnR5ID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRQYXJhbWV0ZXJzKCRwYXJhbWV0ZXJzKQogIHsKICAgIHBhcmVudDo6c2V0RGVmYXVsdFBhcmFtZXRlcnMoJHBhcmFtZXRlcnMpOwogICAgJHRoaXMtPmRlZmF1bHRQYXJhbXNEaXJ0eSA9IHRydWU7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Q29uZmlnRmlsZU5hbWUoKQogIHsKICAgIHJldHVybiBzZkNvbnRleHQ6OmdldEluc3RhbmNlKCktPmdldENvbmZpZ0NhY2hlKCktPmNoZWNrQ29uZmlnKCdjb25maWcvcm91dGluZy55bWwnLCB0cnVlKTsKICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdldEN1cnJlbnRJbnRlcm5hbFVyaSgkd2l0aFJvdXRlTmFtZSA9IGZhbHNlKQogIHsKICAgIHJldHVybiBudWxsID09PSAkdGhpcy0+Y3VycmVudFJvdXRlTmFtZSA/IG51bGwgOiAkdGhpcy0+Y3VycmVudEludGVybmFsVXJpWyR3aXRoUm91dGVOYW1lID8gMCA6IDFdOwogIH0KCiAgLyoqCiAgICogR2V0cyB0aGUgY3VycmVudCByb3V0ZSBuYW1lLgogICAqCiAgICogQHJldHVybiBzdHJpbmcgVGhlIHJvdXRlIG5hbWUKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VycmVudFJvdXRlTmFtZSgpCiAgewogICAgcmV0dXJuICR0aGlzLT5jdXJyZW50Um91dGVOYW1lOwogIH0KCiAgLyoqCiAgICogQHNlZSBzZlJvdXRpbmcKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Um91dGVzKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPnJvdXRlczsKICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHNldFJvdXRlcygkcm91dGVzKQogIHsKICAgIGZvcmVhY2ggKCRyb3V0ZXMgYXMgJG5hbWUgPT4gJHJvdXRlKQogICAgewogICAgICAkdGhpcy0+Y29ubmVjdCgkbmFtZSwgJHJvdXRlKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGhhc1JvdXRlcygpCiAgewogICAgcmV0dXJuIGNvdW50KCR0aGlzLT5yb3V0ZXMpID8gdHJ1ZSA6IGZhbHNlOwogIH0KCiAgLyoqCiAgICogQHNlZSBzZlJvdXRpbmcKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gY2xlYXJSb3V0ZXMoKQogIHsKICAgIGlmICgkdGhpcy0+b3B0aW9uc1snbG9nZ2luZyddKQogICAgewogICAgICAkdGhpcy0+ZGlzcGF0Y2hlci0+bm90aWZ5KG5ldyBzZkV2ZW50KCR0aGlzLCAnYXBwbGljYXRpb24ubG9nJywgYXJyYXkoJ0NsZWFyIGFsbCBjdXJyZW50IHJvdXRlcycpKSk7CiAgICB9CgogICAgJHRoaXMtPnJvdXRlcyA9IGFycmF5KCk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJvdXRlIG5hbWUgZ2l2ZW4gaXMgZGVmaW5lZC4KICAgKgogICAqIEBwYXJhbSAgc3RyaW5nICRuYW1lICBUaGUgcm91dGUgbmFtZQogICAqCiAgICogQHJldHVybiBib29sZWFuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGhhc1JvdXRlTmFtZSgkbmFtZSkKICB7CiAgICByZXR1cm4gaXNzZXQoJHRoaXMtPnJvdXRlc1skbmFtZV0pID8gdHJ1ZSA6IGZhbHNlOwogIH0KCiAgLyoqCiAgICogQWRkcyBhIG5ldyByb3V0ZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IGxpc3Qgb2Ygcm91dGVzLgogICAqCiAgICogQHNlZSBjb25uZWN0CiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHByZXBlbmRSb3V0ZSgkbmFtZSwgJHJvdXRlKQogIHsKICAgICRyb3V0ZXMgPSAkdGhpcy0+cm91dGVzOwogICAgJHRoaXMtPnJvdXRlcyA9IGFycmF5KCk7CiAgICAkdGhpcy0+Y29ubmVjdCgkbmFtZSwgJHJvdXRlKTsKICAgICR0aGlzLT5yb3V0ZXMgPSBhcnJheV9tZXJnZSgkdGhpcy0+cm91dGVzLCAkcm91dGVzKTsKICB9CgogIC8qKgogICAqIEFkZHMgYSBuZXcgcm91dGUuCiAgICoKICAgKiBBbGlhcyBmb3IgdGhlIGNvbm5lY3QgbWV0aG9kLgogICAqCiAgICogQHNlZSBjb25uZWN0CiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGFwcGVuZFJvdXRlKCRuYW1lLCAkcm91dGUpCiAgewogICAgcmV0dXJuICR0aGlzLT5jb25uZWN0KCRuYW1lLCAkcm91dGUpOwogIH0KCiAgLyoqCiAgICogQWRkcyBhIG5ldyByb3V0ZSBiZWZvcmUgYSBnaXZlbiBvbmUgaW4gdGhlIGN1cnJlbnQgbGlzdCBvZiByb3V0ZXMuCiAgICoKICAgKiBAc2VlIGNvbm5lY3QKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gaW5zZXJ0Um91dGVCZWZvcmUoJHBpdm90LCAkbmFtZSwgJHJvdXRlKQogIHsKICAgIGlmICghaXNzZXQoJHRoaXMtPnJvdXRlc1skcGl2b3RdKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IHNmQ29uZmlndXJhdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCdVbmFibGUgdG8gaW5zZXJ0IHJvdXRlICIlcyIgYmVmb3JlIGluZXhpc3RlbnQgcm91dGUgIiVzIi4nLCAkbmFtZSwgJHBpdm90KSk7CiAgICB9CgogICAgJHJvdXRlcyA9ICR0aGlzLT5yb3V0ZXM7CiAgICAkdGhpcy0+cm91dGVzID0gYXJyYXkoKTsKICAgICRuZXdyb3V0ZXMgPSBhcnJheSgpOwogICAgZm9yZWFjaCAoJHJvdXRlcyBhcyAka2V5ID0+ICR2YWx1ZSkKICAgIHsKICAgICAgaWYgKCRrZXkgPT0gJHBpdm90KQogICAgICB7CiAgICAgICAgJHRoaXMtPmNvbm5lY3QoJG5hbWUsICRyb3V0ZSk7CiAgICAgICAgJG5ld3JvdXRlcyA9IGFycmF5X21lcmdlKCRuZXdyb3V0ZXMsICR0aGlzLT5yb3V0ZXMpOwogICAgICB9CiAgICAgICRuZXdyb3V0ZXNbJGtleV0gPSAkdmFsdWU7CiAgICB9CgogICAgJHRoaXMtPnJvdXRlcyA9ICRuZXdyb3V0ZXM7CiAgfQoKICAvKioKICAgKiBBZGRzIGEgbmV3IHJvdXRlIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgbGlzdCBvZiByb3V0ZXMuCiAgICoKICAgKiBBIHJvdXRlIHN0cmluZyBpcyBhIHN0cmluZyB3aXRoIDIgc3BlY2lhbCBjb25zdHJ1Y3Rpb25zOgogICAqIC0gOnN0cmluZzogOnN0cmluZyBkZW5vdGVzIGEgbmFtZWQgcGFyYW1hdGVyIChhdmFpbGFibGUgbGF0ZXIgYXMgJHJlcXVlc3QtPmdldFBhcmFtZXRlcignc3RyaW5nJykpCiAgICogLSAqOiAqIG1hdGNoIGFuIGluZGVmaW5pdGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMgaW4gYSByb3V0ZQogICAqCiAgICogSGVyZSBpcyBhIHZlcnkgY29tbW9uIHJ1bGUgaW4gYSBzeW1mb255IHByb2plY3Q6CiAgICoKICAgKiA8Y29kZT4KICAgKiAkci0+Y29ubmVjdCgnZGVmYXVsdCcsIG5ldyBzZlJvdXRlKCcvOm1vZHVsZS86YWN0aW9uLyonKSk7CiAgICogPC9jb2RlPgogICAqCiAgICogQHBhcmFtICBzdHJpbmcgICRuYW1lICBUaGUgcm91dGUgbmFtZQogICAqIEBwYXJhbSAgc2ZSb3V0ZSAkcm91dGUgQSBzZlJvdXRlIGluc3RhbmNlCiAgICoKICAgKiBAcmV0dXJuIGFycmF5ICBjdXJyZW50IHJvdXRlcwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBjb25uZWN0KCRuYW1lLCAkcm91dGUpCiAgewogICAgJHJvdXRlcyA9ICRyb3V0ZSBpbnN0YW5jZW9mIHNmUm91dGVDb2xsZWN0aW9uID8gJHJvdXRlIDogYXJyYXkoJG5hbWUgPT4gJHJvdXRlKTsKICAgIGZvcmVhY2ggKHNlbGY6OmZsYXR0ZW5Sb3V0ZXMoJHJvdXRlcykgYXMgJG5hbWUgPT4gJHJvdXRlKQogICAgewogICAgICAkdGhpcy0+cm91dGVzWyRuYW1lXSA9ICRyb3V0ZTsKICAgICAgJHRoaXMtPmNvbmZpZ3VyZVJvdXRlKCRyb3V0ZSk7CgogICAgICBpZiAoJHRoaXMtPm9wdGlvbnNbJ2xvZ2dpbmcnXSkKICAgICAgewogICAgICAgICR0aGlzLT5kaXNwYXRjaGVyLT5ub3RpZnkobmV3IHNmRXZlbnQoJHRoaXMsICdhcHBsaWNhdGlvbi5sb2cnLCBhcnJheShzcHJpbnRmKCdDb25uZWN0ICVzICIlcyIgKCVzKScsIGdldF9jbGFzcygkcm91dGUpLCAkbmFtZSwgJHJvdXRlLT5nZXRQYXR0ZXJuKCkpKSkpOwogICAgICB9CiAgICB9CiAgfQoKICBwdWJsaWMgZnVuY3Rpb24gY29uZmlndXJlUm91dGUoc2ZSb3V0ZSAkcm91dGUpCiAgewogICAgJHJvdXRlLT5zZXREZWZhdWx0UGFyYW1ldGVycygkdGhpcy0+ZGVmYXVsdFBhcmFtZXRlcnMpOwogICAgJHJvdXRlLT5zZXREZWZhdWx0T3B0aW9ucygkdGhpcy0+b3B0aW9ucyk7CiAgfQoKICAvKioKICAgKiBAc2VlIHNmUm91dGluZwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZSgkbmFtZSwgJHBhcmFtcyA9IGFycmF5KCksICRhYnNvbHV0ZSA9IGZhbHNlKQogIHsKICAgIC8vIGZldGNoIGZyb20gY2FjaGUKICAgIGlmIChudWxsICE9PSAkdGhpcy0+Y2FjaGUpCiAgICB7CiAgICAgICRjYWNoZUtleSA9ICdnZW5lcmF0ZV8nLiRuYW1lLidfJy5tZDUoc2VyaWFsaXplKGFycmF5X21lcmdlKCR0aGlzLT5kZWZhdWx0UGFyYW1ldGVycywgJHBhcmFtcykpKS4nXycubWQ1KHNlcmlhbGl6ZSgkdGhpcy0+b3B0aW9uc1snY29udGV4dCddKSk7CiAgICAgIGlmICgkdGhpcy0+b3B0aW9uc1snbG9va3VwX2NhY2hlX2RlZGljYXRlZF9rZXlzJ10gJiYgJHVybCA9ICR0aGlzLT5jYWNoZS0+Z2V0KCdzeW1mb255LnJvdXRpbmcuZGF0YS4nLiRjYWNoZUtleSkpCiAgICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmZpeEdlbmVyYXRlZFVybCgkdXJsLCAkYWJzb2x1dGUpOwogICAgICB9CiAgICAgIGVsc2VpZiAoaXNzZXQoJHRoaXMtPmNhY2hlRGF0YVskY2FjaGVLZXldKSkKICAgICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Zml4R2VuZXJhdGVkVXJsKCR0aGlzLT5jYWNoZURhdGFbJGNhY2hlS2V5XSwgJGFic29sdXRlKTsKICAgICAgfQogICAgfQoKICAgIGlmICgkbmFtZSkKICAgIHsKICAgICAgLy8gbmFtZWQgcm91dGUKICAgICAgaWYgKCFpc3NldCgkdGhpcy0+cm91dGVzWyRuYW1lXSkpCiAgICAgIHsKICAgICAgICB0aHJvdyBuZXcgc2ZDb25maWd1cmF0aW9uRXhjZXB0aW9uKHNwcmludGYoJ1RoZSByb3V0ZSAiJXMiIGRvZXMgbm90IGV4aXN0LicsICRuYW1lKSk7CiAgICAgIH0KICAgICAgJHJvdXRlID0gJHRoaXMtPnJvdXRlc1skbmFtZV07ICAgICAgJHRoaXMtPmVuc3VyZURlZmF1bHRQYXJhbWV0ZXJzQXJlU2V0KCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgIC8vIGZpbmQgYSBtYXRjaGluZyByb3V0ZQogICAgICBpZiAoZmFsc2UgPT09ICRyb3V0ZSA9ICR0aGlzLT5nZXRSb3V0ZVRoYXRNYXRjaGVzUGFyYW1ldGVycygkcGFyYW1zLCAkdGhpcy0+b3B0aW9uc1snY29udGV4dCddKSkKICAgICAgewogICAgICAgIHRocm93IG5ldyBzZkNvbmZpZ3VyYXRpb25FeGNlcHRpb24oc3ByaW50ZignVW5hYmxlIHRvIGZpbmQgYSBtYXRjaGluZyByb3V0ZSB0byBnZW5lcmF0ZSB1cmwgZm9yIHBhcmFtcyAiJXMiLicsIGlzX29iamVjdCgkcGFyYW1zKSA/ICdPYmplY3QoJy5nZXRfY2xhc3MoJHBhcmFtcykuJyknIDogc3RyX3JlcGxhY2UoIlxuIiwgJycsIHZhcl9leHBvcnQoJHBhcmFtcywgdHJ1ZSkpKSk7CiAgICAgIH0KICAgIH0KCiAgICAkdXJsID0gJHJvdXRlLT5nZW5lcmF0ZSgkcGFyYW1zLCAkdGhpcy0+b3B0aW9uc1snY29udGV4dCddLCAkYWJzb2x1dGUpOwoKICAgIC8vIHN0b3JlIGluIGNhY2hlCiAgICBpZiAobnVsbCAhPT0gJHRoaXMtPmNhY2hlKQogICAgewogICAgICBpZiAoJHRoaXMtPm9wdGlvbnNbJ2xvb2t1cF9jYWNoZV9kZWRpY2F0ZWRfa2V5cyddKQogICAgICB7CiAgICAgICAgJHRoaXMtPmNhY2hlLT5zZXQoJ3N5bWZvbnkucm91dGluZy5kYXRhLicuJGNhY2hlS2V5LCAkdXJsKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAkdGhpcy0+Y2FjaGVDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAkdGhpcy0+Y2FjaGVEYXRhWyRjYWNoZUtleV0gPSAkdXJsOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuICR0aGlzLT5maXhHZW5lcmF0ZWRVcmwoJHVybCwgJGFic29sdXRlKTsKICB9CgogIC8qKgogICAqIEBzZWUgc2ZSb3V0aW5nCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHBhcnNlKCR1cmwpCiAgewogICAgaWYgKGZhbHNlID09PSAkaW5mbyA9ICR0aGlzLT5maW5kUm91dGUoJHVybCkpCiAgICB7CiAgICAgICR0aGlzLT5jdXJyZW50Um91dGVOYW1lID0gbnVsbDsKICAgICAgJHRoaXMtPmN1cnJlbnRJbnRlcm5hbFVyaSA9IGFycmF5KCk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKCR0aGlzLT5vcHRpb25zWydsb2dnaW5nJ10pCiAgICB7CiAgICAgICR0aGlzLT5kaXNwYXRjaGVyLT5ub3RpZnkobmV3IHNmRXZlbnQoJHRoaXMsICdhcHBsaWNhdGlvbi5sb2cnLCBhcnJheShzcHJpbnRmKCdNYXRjaCByb3V0ZSAiJXMiICglcykgZm9yICVzIHdpdGggcGFyYW1ldGVycyAlcycsICRpbmZvWyduYW1lJ10sICRpbmZvWydwYXR0ZXJuJ10sICR1cmwsIHN0cl9yZXBsYWNlKCJcbiIsICcnLCB2YXJfZXhwb3J0KCRpbmZvWydwYXJhbWV0ZXJzJ10sIHRydWUpKSkpKSk7CiAgICB9CgogICAgLy8gc3RvcmUgdGhlIGN1cnJlbnQgaW50ZXJuYWwgVVJJCiAgICAkdGhpcy0+dXBkYXRlQ3VycmVudEludGVybmFsVXJpKCRpbmZvWyduYW1lJ10sICRpbmZvWydwYXJhbWV0ZXJzJ10pOwoKICAgICRyb3V0ZSA9ICR0aGlzLT5yb3V0ZXNbJGluZm9bJ25hbWUnXV07CgogICAgJHRoaXMtPmVuc3VyZURlZmF1bHRQYXJhbWV0ZXJzQXJlU2V0KCk7CgogICAgJHJvdXRlLT5iaW5kKCR0aGlzLT5vcHRpb25zWydjb250ZXh0J10sICRpbmZvWydwYXJhbWV0ZXJzJ10pOwogICAgJGluZm9bJ3BhcmFtZXRlcnMnXVsnX3NmX3JvdXRlJ10gPSAkcm91dGU7CgogICAgcmV0dXJuICRpbmZvWydwYXJhbWV0ZXJzJ107CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gdXBkYXRlQ3VycmVudEludGVybmFsVXJpKCRuYW1lLCBhcnJheSAkcGFyYW1ldGVycykKICB7CiAgICAvLyBzdG9yZSB0aGUgcm91dGUgbmFtZQogICAgJHRoaXMtPmN1cnJlbnRSb3V0ZU5hbWUgPSAkbmFtZTsKCiAgICAkaW50ZXJuYWxVcmkgPSBhcnJheSgnQCcuJHRoaXMtPmN1cnJlbnRSb3V0ZU5hbWUsICRwYXJhbWV0ZXJzWydtb2R1bGUnXS4nLycuJHBhcmFtZXRlcnNbJ2FjdGlvbiddKTsKICAgIHVuc2V0KCRwYXJhbWV0ZXJzWydtb2R1bGUnXSwgJHBhcmFtZXRlcnNbJ2FjdGlvbiddKTsKCiAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgIGZvcmVhY2ggKCRwYXJhbWV0ZXJzIGFzICRrZXkgPT4gJHZhbHVlKQogICAgewogICAgICAkcGFyYW1zW10gPSAka2V5Lic9Jy4kdmFsdWU7CiAgICB9CgogICAgLy8gc29ydCB0byBndWFyYW50eSB1bmljaXR5CiAgICBzb3J0KCRwYXJhbXMpOwoKICAgICRwYXJhbXMgPSAkcGFyYW1zID8gJz8nLmltcGxvZGUoJyYnLCAkcGFyYW1zKSA6ICcnOwoKICAgICR0aGlzLT5jdXJyZW50SW50ZXJuYWxVcmkgPSBhcnJheSgkaW50ZXJuYWxVcmlbMF0uJHBhcmFtcywgJGludGVybmFsVXJpWzFdLiRwYXJhbXMpOwogIH0KCiAgLyoqCiAgICogRmluZHMgYSBtYXRjaGluZyByb3V0ZSBmb3IgZ2l2ZW4gVVJMLgogICAqCiAgICogUmV0dXJucyBmYWxzZSBpZiBubyByb3V0ZSBtYXRjaGVzLgogICAqCiAgICogUmV0dXJuZWQgYXJyYXkgY29udGFpbnM6CiAgICoKICAgKiAgLSBuYW1lOiAgICAgICBuYW1lIG9yIGFsaWFzIG9mIHRoZSByb3V0ZSB0aGF0IG1hdGNoZWQKICAgKiAgLSBwYXR0ZXJuOiAgICB0aGUgY29tcGlsZWQgcGF0dGVybiBvZiB0aGUgcm91dGUgdGhhdCBtYXRjaGVkCiAgICogIC0gcGFyYW1ldGVyczogYXJyYXkgY29udGFpbmluZyBrZXkgdmFsdWUgcGFpcnMgb2YgdGhlIHJlcXVlc3QgcGFyYW1ldGVycyBpbmNsdWRpbmcgZGVmYXVsdHMKICAgKgogICAqIEBwYXJhbSAgc3RyaW5nICR1cmwgICAgIFVSTCB0byBiZSBwYXJzZWQKICAgKgogICAqIEByZXR1cm4gYXJyYXl8ZmFsc2UgIEFuIGFycmF5IHdpdGggcm91dGluZyBpbmZvcm1hdGlvbiBvciBmYWxzZSBpZiBubyByb3V0ZSBtYXRjaGVkCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGZpbmRSb3V0ZSgkdXJsKQogIHsKICAgICR1cmwgPSAkdGhpcy0+bm9ybWFsaXplVXJsKCR1cmwpOwoKICAgIC8vIGZldGNoIGZyb20gY2FjaGUKICAgIGlmIChudWxsICE9PSAkdGhpcy0+Y2FjaGUpCiAgICB7CiAgICAgICRjYWNoZUtleSA9ICdwYXJzZV8nLiR1cmwuJ18nLm1kNShzZXJpYWxpemUoJHRoaXMtPm9wdGlvbnNbJ2NvbnRleHQnXSkpOwogICAgICBpZiAoJHRoaXMtPm9wdGlvbnNbJ2xvb2t1cF9jYWNoZV9kZWRpY2F0ZWRfa2V5cyddICYmICRpbmZvID0gJHRoaXMtPmNhY2hlLT5nZXQoJ3N5bWZvbnkucm91dGluZy5kYXRhLicuJGNhY2hlS2V5KSkKICAgICAgewogICAgICAgIHJldHVybiB1bnNlcmlhbGl6ZSgkaW5mbyk7CiAgICAgIH0KICAgICAgZWxzZWlmIChpc3NldCgkdGhpcy0+Y2FjaGVEYXRhWyRjYWNoZUtleV0pKQogICAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWNoZURhdGFbJGNhY2hlS2V5XTsKICAgICAgfQogICAgfQoKICAgICRpbmZvID0gJHRoaXMtPmdldFJvdXRlVGhhdE1hdGNoZXNVcmwoJHVybCk7CgogICAgLy8gc3RvcmUgaW4gY2FjaGUKICAgIGlmIChudWxsICE9PSAkdGhpcy0+Y2FjaGUpCiAgICB7CiAgICAgIGlmICgkdGhpcy0+b3B0aW9uc1snbG9va3VwX2NhY2hlX2RlZGljYXRlZF9rZXlzJ10pCiAgICAgIHsKICAgICAgICAkdGhpcy0+Y2FjaGUtPnNldCgnc3ltZm9ueS5yb3V0aW5nLmRhdGEuJy4kY2FjaGVLZXksIHNlcmlhbGl6ZSgkaW5mbykpOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAgICAgICR0aGlzLT5jYWNoZUNoYW5nZWQgPSB0cnVlOwogICAgICAgICR0aGlzLT5jYWNoZURhdGFbJGNhY2hlS2V5XSA9ICRpbmZvOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuICRpbmZvOwogIH0KCiAgc3RhdGljIHB1YmxpYyBmdW5jdGlvbiBmbGF0dGVuUm91dGVzKCRyb3V0ZXMpCiAgewogICAgJGZsYXR0ZW5Sb3V0ZXMgPSBhcnJheSgpOwogICAgZm9yZWFjaCAoJHJvdXRlcyBhcyAkbmFtZSA9PiAkcm91dGUpCiAgICB7CiAgICAgIGlmICgkcm91dGUgaW5zdGFuY2VvZiBzZlJvdXRlQ29sbGVjdGlvbikKICAgICAgewogICAgICAgICRmbGF0dGVuUm91dGVzID0gYXJyYXlfbWVyZ2UoJGZsYXR0ZW5Sb3V0ZXMsIHNlbGY6OmZsYXR0ZW5Sb3V0ZXMoJHJvdXRlKSk7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgJGZsYXR0ZW5Sb3V0ZXNbJG5hbWVdID0gJHJvdXRlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuICRmbGF0dGVuUm91dGVzOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldFJvdXRlVGhhdE1hdGNoZXNVcmwoJHVybCkKICB7CiAgICAkdGhpcy0+ZW5zdXJlRGVmYXVsdFBhcmFtZXRlcnNBcmVTZXQoKTsKICAgIGZvcmVhY2ggKCR0aGlzLT5yb3V0ZXMgYXMgJG5hbWUgPT4gJHJvdXRlKQogICAgewogICAgICBpZiAoZmFsc2UgPT09ICRwYXJhbWV0ZXJzID0gJHJvdXRlLT5tYXRjaGVzVXJsKCR1cmwsICR0aGlzLT5vcHRpb25zWydjb250ZXh0J10pKQogICAgICB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBhcnJheSgnbmFtZScgPT4gJG5hbWUsICdwYXR0ZXJuJyA9PiAkcm91dGUtPmdldFBhdHRlcm4oKSwgJ3BhcmFtZXRlcnMnID0+ICRwYXJhbWV0ZXJzKTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Um91dGVUaGF0TWF0Y2hlc1BhcmFtZXRlcnMoJHBhcmFtZXRlcnMpCiAgewogICAgJHRoaXMtPmVuc3VyZURlZmF1bHRQYXJhbWV0ZXJzQXJlU2V0KCk7CiAgICBmb3JlYWNoICgkdGhpcy0+cm91dGVzIGFzICRyb3V0ZSkKICAgIHsKICAgICAgaWYgKCRyb3V0ZS0+bWF0Y2hlc1BhcmFtZXRlcnMoJHBhcmFtZXRlcnMsICR0aGlzLT5vcHRpb25zWydjb250ZXh0J10pKQogICAgICB7CiAgICAgICAgcmV0dXJuICRyb3V0ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBub3JtYWxpemVVcmwoJHVybCkKICB7CiAgICAvLyBhbiBVUkwgc2hvdWxkIHN0YXJ0IHdpdGggYSAnLycsIG1vZF9yZXdyaXRlIGRvZXNuJ3QgcmVzcGVjdCB0aGF0LCBidXQgbm8tbW9kX3Jld3JpdGUgdmVyc2lvbiBkb2VzLgogICAgaWYgKCcvJyAhPSBzdWJzdHIoJHVybCwgMCwgMSkpCiAgICB7CiAgICAgICR1cmwgPSAnLycuJHVybDsKICAgIH0KCiAgICAvLyB3ZSByZW1vdmUgdGhlIHF1ZXJ5IHN0cmluZwogICAgaWYgKGZhbHNlICE9PSAkcG9zID0gc3RycG9zKCR1cmwsICc/JykpCiAgICB7CiAgICAgICR1cmwgPSBzdWJzdHIoJHVybCwgMCwgJHBvcyk7CiAgICB9CgogICAgLy8gcmVtb3ZlIG11bHRpcGxlIC8KICAgICR1cmwgPSBwcmVnX3JlcGxhY2UoJyMvKyMnLCAnLycsICR1cmwpOwoKICAgIHJldHVybiAkdXJsOwogIH0KCiAgLyoqCiAgICogQHNlZSBzZlJvdXRpbmcKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gc2h1dGRvd24oKQogIHsKICAgIGlmIChudWxsICE9PSAkdGhpcy0+Y2FjaGUgJiYgJHRoaXMtPmNhY2hlQ2hhbmdlZCkKICAgIHsKICAgICAgJHRoaXMtPmNhY2hlQ2hhbmdlZCA9IGZhbHNlOwogICAgICAkdGhpcy0+Y2FjaGUtPnNldCgnc3ltZm9ueS5yb3V0aW5nLmRhdGEnLCBzZXJpYWxpemUoJHRoaXMtPmNhY2hlRGF0YSkpOwogICAgfQogIH0KfQo=',
  'ofw/lib/routing/sfRequestRoute.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZlJlcXVlc3RSb3V0ZSByZXByZXNlbnRzIGEgcm91dGUgdGhhdCBpcyByZXF1ZXN0IGF3YXJlLgogKgogKiBJdCBpbXBsZW1lbnRzIHRoZSBzZl9tZXRob2QgcmVxdWlyZW1lbnQuCiAqCiAqIEBwYWNrYWdlICAgIHN5bWZvbnkKICogQHN1YnBhY2thZ2Ugcm91dGluZwogKiBAYXV0aG9yICAgICBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqIEB2ZXJzaW9uICAgIFNWTjogJElkOiBzZlJlcXVlc3RSb3V0ZS5jbGFzcy5waHAgMjA3ODQgMjAwOS0wOC0wNCAyMDo1Mzo1N1ogS3Jpcy5XYWxsc21pdGggJAogKi8KY2xhc3Mgc2ZSZXF1ZXN0Um91dGUgZXh0ZW5kcyBzZlJvdXRlCnsKICAvKioKICAgKiBDb25zdHJ1Y3Rvci4KICAgKgogICAqIEFwcGxpZXMgYSBkZWZhdWx0IHNmX21ldGhvZCByZXF1aXJlbWVudHMgb2YgR0VUIG9yIEhFQUQuCiAgICoKICAgKiBAc2VlIHNmUm91dGUKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhdHRlcm4sICRkZWZhdWx0cyA9IGFycmF5KCksICRyZXF1aXJlbWVudHMgPSBhcnJheSgpLCAkb3B0aW9ucyA9IGFycmF5KCkpCiAgewogICAgaWYgKCFpc3NldCgkcmVxdWlyZW1lbnRzWydzZl9tZXRob2QnXSkpCiAgICB7CiAgICAgICRyZXF1aXJlbWVudHNbJ3NmX21ldGhvZCddID0gYXJyYXkoJ2dldCcsICdoZWFkJyk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICRyZXF1aXJlbWVudHNbJ3NmX21ldGhvZCddID0gYXJyYXlfbWFwKCdzdHJ0b2xvd2VyJywgKGFycmF5KSAkcmVxdWlyZW1lbnRzWydzZl9tZXRob2QnXSk7CiAgICB9CgogICAgcGFyZW50OjpfX2NvbnN0cnVjdCgkcGF0dGVybiwgJGRlZmF1bHRzLCAkcmVxdWlyZW1lbnRzLCAkb3B0aW9ucyk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIFVSTCBtYXRjaGVzIHRoaXMgcm91dGUsIGZhbHNlIG90aGVyd2lzZS4KICAgKgogICAqIEBwYXJhbSAgc3RyaW5nICAkdXJsICAgICBUaGUgVVJMCiAgICogQHBhcmFtICBhcnJheSAgICRjb250ZXh0IFRoZSBjb250ZXh0CiAgICoKICAgKiBAcmV0dXJuIGFycmF5ICAgQW4gYXJyYXkgb2YgcGFyYW1ldGVycwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBtYXRjaGVzVXJsKCR1cmwsICRjb250ZXh0ID0gYXJyYXkoKSkKICB7CiAgICBpZiAoZmFsc2UgPT09ICRwYXJhbWV0ZXJzID0gcGFyZW50OjptYXRjaGVzVXJsKCR1cmwsICRjb250ZXh0KSkKICAgIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGVuZm9yY2UgdGhlIHNmX21ldGhvZCByZXF1aXJlbWVudAogICAgaWYgKGluX2FycmF5KHN0cnRvbG93ZXIoJGNvbnRleHRbJ21ldGhvZCddKSwgJHRoaXMtPnJlcXVpcmVtZW50c1snc2ZfbWV0aG9kJ10pKQogICAgewogICAgICByZXR1cm4gJHBhcmFtZXRlcnM7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwYXJhbWV0ZXJzIG1hdGNoIHRoaXMgcm91dGUsIGZhbHNlIG90aGVyd2lzZS4KICAgKgogICAqIEBwYXJhbSAgbWl4ZWQgICAkcGFyYW1zIFRoZSBwYXJhbWV0ZXJzCiAgICogQHBhcmFtICBhcnJheSAgICRjb250ZXh0IFRoZSBjb250ZXh0CiAgICoKICAgKiBAcmV0dXJuIEJvb2xlYW4gdHJ1ZSBpZiB0aGUgcGFyYW1ldGVycyBtYXRjaCB0aGlzIHJvdXRlLCBmYWxzZSBvdGhlcndpc2UuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIG1hdGNoZXNQYXJhbWV0ZXJzKCRwYXJhbXMsICRjb250ZXh0ID0gYXJyYXkoKSkKICB7CiAgICBpZiAoaXNzZXQoJHBhcmFtc1snc2ZfbWV0aG9kJ10pKQogICAgewogICAgICAvLyBlbmZvcmNlIHRoZSBzZl9tZXRob2QgcmVxdWlyZW1lbnQKICAgICAgaWYgKCFpbl9hcnJheShzdHJ0b2xvd2VyKCRwYXJhbXNbJ3NmX21ldGhvZCddKSwgJHRoaXMtPnJlcXVpcmVtZW50c1snc2ZfbWV0aG9kJ10pKQogICAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB1bnNldCgkcGFyYW1zWydzZl9tZXRob2QnXSk7CiAgICB9CgogICAgcmV0dXJuIHBhcmVudDo6bWF0Y2hlc1BhcmFtZXRlcnMoJHBhcmFtcywgJGNvbnRleHQpOwogIH0KCiAgLyoqCiAgICogR2VuZXJhdGVzIGEgVVJMIGZyb20gdGhlIGdpdmVuIHBhcmFtZXRlcnMuCiAgICoKICAgKiBAcGFyYW0gIG1peGVkICAgJHBhcmFtcyAgICBUaGUgcGFyYW1ldGVyIHZhbHVlcwogICAqIEBwYXJhbSAgYXJyYXkgICAkY29udGV4dCAgIFRoZSBjb250ZXh0CiAgICogQHBhcmFtICBCb29sZWFuICRhYnNvbHV0ZSAgV2hldGhlciB0byBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSBVUkwKICAgKgogICAqIEByZXR1cm4gc3RyaW5nIFRoZSBnZW5lcmF0ZWQgVVJMCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlKCRwYXJhbXMsICRjb250ZXh0ID0gYXJyYXkoKSwgJGFic29sdXRlID0gZmFsc2UpCiAgewogICAgdW5zZXQoJHBhcmFtc1snc2ZfbWV0aG9kJ10pOwoKICAgIHJldHVybiBwYXJlbnQ6OmdlbmVyYXRlKCRwYXJhbXMsICRjb250ZXh0LCAkYWJzb2x1dGUpOwogIH0KfQo=',
  'ofw/lib/routing/sfRoute.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZlJvdXRlIHJlcHJlc2VudHMgYSByb3V0ZS4KICoKICogQHBhY2thZ2UgICAgc3ltZm9ueQogKiBAc3VicGFja2FnZSByb3V0aW5nCiAqIEBhdXRob3IgICAgIEZhYmllbiBQb3RlbmNpZXIgPGZhYmllbi5wb3RlbmNpZXJAc3ltZm9ueS1wcm9qZWN0LmNvbT4KICogQHZlcnNpb24gICAgU1ZOOiAkSWQ6IHNmUm91dGUuY2xhc3MucGhwIDI3MTgzIDIwMTAtMDEtMjYgMTE6NTI6NDZaIEZhYmlhbkxhbmdlICQKICovCmNsYXNzIHNmUm91dGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUKewogIHByb3RlY3RlZAogICAgJGlzQm91bmQgICAgICAgICAgID0gZmFsc2UsCiAgICAkY29udGV4dCAgICAgICAgICAgPSBudWxsLAogICAgJHBhcmFtZXRlcnMgICAgICAgID0gbnVsbCwKICAgICRzdWZmaXggICAgICAgICAgICA9IG51bGwsCiAgICAkZGVmYXVsdFBhcmFtZXRlcnMgPSBhcnJheSgpLAogICAgJGRlZmF1bHRPcHRpb25zICAgID0gYXJyYXkoKSwKICAgICRjb21waWxlZCAgICAgICAgICA9IGZhbHNlLAogICAgJG9wdGlvbnMgICAgICAgICAgID0gYXJyYXkoKSwKICAgICRwYXR0ZXJuICAgICAgICAgICA9IG51bGwsCiAgICAkc3RhdGljUHJlZml4ICAgICAgPSBudWxsLAogICAgJHJlZ2V4ICAgICAgICAgICAgID0gbnVsbCwKICAgICR2YXJpYWJsZXMgICAgICAgICA9IGFycmF5KCksCiAgICAkZGVmYXVsdHMgICAgICAgICAgPSBhcnJheSgpLAogICAgJHJlcXVpcmVtZW50cyAgICAgID0gYXJyYXkoKSwKICAgICR0b2tlbnMgICAgICAgICAgICA9IGFycmF5KCksCiAgICAkY3VzdG9tVG9rZW4gICAgICAgPSBmYWxzZTsKCiAgLyoqCiAgICogQ29uc3RydWN0b3IuCiAgICoKICAgKiBBdmFpbGFibGUgb3B0aW9uczoKICAgKgogICAqICAqIHZhcmlhYmxlX3ByZWZpeGVzOiAgICAgICAgICAgICAgICBBbiBhcnJheSBvZiBjaGFyYWN0ZXJzIHRoYXQgc3RhcnRzIGEgdmFyaWFibGUgbmFtZSAoOiBieSBkZWZhdWx0KQogICAqICAqIHNlZ21lbnRfc2VwYXJhdG9yczogICAgICAgICAgICAgICBBbiBhcnJheSBvZiBhbGxvd2VkIGNoYXJhY3RlcnMgZm9yIHNlZ21lbnQgc2VwYXJhdG9ycyAoLyBhbmQgLiBieSBkZWZhdWx0KQogICAqICAqIHZhcmlhYmxlX3JlZ2V4OiAgICAgICAgICAgICAgICAgICBBIHJlZ2V4IHRoYXQgbWF0Y2ggYSB2YWxpZCB2YXJpYWJsZSBuYW1lIChbXHdcZF9dKyBieSBkZWZhdWx0KQogICAqICAqIGdlbmVyYXRlX3Nob3J0ZXN0X3VybDogICAgICAgICAgICBXaGV0aGVyIHRvIGdlbmVyYXRlIHRoZSBzaG9ydGVzdCBVUkwgcG9zc2libGUgKHRydWUgYnkgZGVmYXVsdCkKICAgKiAgKiBleHRyYV9wYXJhbWV0ZXJzX2FzX3F1ZXJ5X3N0cmluZzogV2hldGhlciB0byBnZW5lcmF0ZSBleHRyYSBwYXJhbWV0ZXJzIGFzIGEgcXVlcnkgc3RyaW5nCiAgICoKICAgKiBAcGFyYW0gc3RyaW5nICRwYXR0ZXJuICAgICAgIFRoZSBwYXR0ZXJuIHRvIG1hdGNoCiAgICogQHBhcmFtIGFycmF5ICAkZGVmYXVsdHMgICAgICBBbiBhcnJheSBvZiBkZWZhdWx0IHBhcmFtZXRlciB2YWx1ZXMKICAgKiBAcGFyYW0gYXJyYXkgICRyZXF1aXJlbWVudHMgIEFuIGFycmF5IG9mIHJlcXVpcmVtZW50cyBmb3IgcGFyYW1ldGVycyAocmVnZXhlcykKICAgKiBAcGFyYW0gYXJyYXkgICRvcHRpb25zICAgICAgIEFuIGFycmF5IG9mIG9wdGlvbnMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhdHRlcm4sIGFycmF5ICRkZWZhdWx0cyA9IGFycmF5KCksIGFycmF5ICRyZXF1aXJlbWVudHMgPSBhcnJheSgpLCBhcnJheSAkb3B0aW9ucyA9IGFycmF5KCkpCiAgewogICAgJHRoaXMtPnBhdHRlcm4gICAgICA9IHRyaW0oJHBhdHRlcm4pOwogICAgJHRoaXMtPmRlZmF1bHRzICAgICA9ICRkZWZhdWx0czsKICAgICR0aGlzLT5yZXF1aXJlbWVudHMgPSAkcmVxdWlyZW1lbnRzOwogICAgJHRoaXMtPm9wdGlvbnMgICAgICA9ICRvcHRpb25zOwogIH0KCiAgLyoqCiAgICogQmluZHMgdGhlIGN1cnJlbnQgcm91dGUgZm9yIGEgZ2l2ZW4gY29udGV4dCBhbmQgcGFyYW1ldGVycy4KICAgKgogICAqIEBwYXJhbSBhcnJheSAkY29udGV4dCAgICBUaGUgY29udGV4dAogICAqIEBwYXJhbSBhcnJheSAkcGFyYW1ldGVycyBUaGUgcGFyYW1ldGVycwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBiaW5kKCRjb250ZXh0LCAkcGFyYW1ldGVycykKICB7CiAgICAkdGhpcy0+aXNCb3VuZCAgICA9IHRydWU7CiAgICAkdGhpcy0+Y29udGV4dCAgICA9ICRjb250ZXh0OwogICAgJHRoaXMtPnBhcmFtZXRlcnMgPSAkcGFyYW1ldGVyczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcm91dGUgaXMgYm91bmQgdG8gY29udGV4dCBhbmQgcGFyYW1ldGVycy4KICAgKgogICAqIEByZXR1cm4gQm9vbGVhbiB0cnVlIGlmIHRoZXJvdXRlIGlzIGJvdW5kIHRvIGNvbnRleHQgYW5kIHBhcmFtZXRlcnMsIGZhbHNlIG90aGVyd2lzZQogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBpc0JvdW5kKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPmlzQm91bmQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHBhcmFtZXRlcnMgaWYgdGhlIFVSTCBtYXRjaGVzIHRoaXMgcm91dGUsIGZhbHNlIG90aGVyd2lzZS4KICAgKgogICAqIEBwYXJhbSAgc3RyaW5nICAkdXJsICAgICBUaGUgVVJMCiAgICogQHBhcmFtICBhcnJheSAgICRjb250ZXh0IFRoZSBjb250ZXh0CiAgICoKICAgKiBAcmV0dXJuIGFycmF5ICAgQW4gYXJyYXkgb2YgcGFyYW1ldGVycwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBtYXRjaGVzVXJsKCR1cmwsICRjb250ZXh0ID0gYXJyYXkoKSkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICAvLyBjaGVjayB0aGUgc3RhdGljIHByZWZpeCB1ZiB0aGUgVVJMIGZpcnN0LiBPbmx5IHVzZSB0aGUgbW9yZSBleHBlbnNpdmUgcHJlZ19tYXRjaCB3aGVuIGl0IG1hdGNoZXMKICAgIGlmICgnJyAhPT0gJHRoaXMtPnN0YXRpY1ByZWZpeCAgJiYgMCAhPT0gc3RycG9zKCR1cmwsICR0aGlzLT5zdGF0aWNQcmVmaXgpKQogICAgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoIXByZWdfbWF0Y2goJHRoaXMtPnJlZ2V4LCAkdXJsLCAkbWF0Y2hlcykpCiAgICB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAkZGVmYXVsdHMgICA9IGFycmF5X21lcmdlKCR0aGlzLT5nZXREZWZhdWx0UGFyYW1ldGVycygpLCAkdGhpcy0+ZGVmYXVsdHMpOwogICAgJHBhcmFtZXRlcnMgPSBhcnJheSgpOwoKICAgIC8vICoKICAgIGlmIChpc3NldCgkbWF0Y2hlc1snX3N0YXInXSkpCiAgICB7CiAgICAgICRwYXJhbWV0ZXJzID0gJHRoaXMtPnBhcnNlU3RhclBhcmFtZXRlcigkbWF0Y2hlc1snX3N0YXInXSk7CiAgICAgIHVuc2V0KCRtYXRjaGVzWydfc3RhciddLCAkcGFyYW1ldGVyc1snbW9kdWxlJ10sICRwYXJhbWV0ZXJzWydhY3Rpb24nXSk7CiAgICB9CgogICAgLy8gZGVmYXVsdHMKICAgICRwYXJhbWV0ZXJzID0gJHRoaXMtPm1lcmdlQXJyYXlzKCRkZWZhdWx0cywgJHBhcmFtZXRlcnMpOwoKICAgIC8vIHZhcmlhYmxlcwogICAgZm9yZWFjaCAoJG1hdGNoZXMgYXMgJGtleSA9PiAkdmFsdWUpCiAgICB7CiAgICAgIGlmICghaXNfaW50KCRrZXkpKQogICAgICB7CiAgICAgICAgJHBhcmFtZXRlcnNbJGtleV0gPSB1cmxkZWNvZGUoJHZhbHVlKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkcGFyYW1ldGVyczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFyYW1ldGVycyBtYXRjaGVzIHRoaXMgcm91dGUsIGZhbHNlIG90aGVyd2lzZS4KICAgKgogICAqIEBwYXJhbSAgbWl4ZWQgICRwYXJhbXMgIFRoZSBwYXJhbWV0ZXJzCiAgICogQHBhcmFtICBhcnJheSAgJGNvbnRleHQgVGhlIGNvbnRleHQKICAgKgogICAqIEByZXR1cm4gQm9vbGVhbiAgICAgICAgIHRydWUgaWYgdGhlIHBhcmFtZXRlcnMgbWF0Y2hlcyB0aGlzIHJvdXRlLCBmYWxzZSBvdGhlcndpc2UuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIG1hdGNoZXNQYXJhbWV0ZXJzKCRwYXJhbXMsICRjb250ZXh0ID0gYXJyYXkoKSkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICBpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQogICAgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgJGRlZmF1bHRzID0gJHRoaXMtPm1lcmdlQXJyYXlzKCR0aGlzLT5nZXREZWZhdWx0UGFyYW1ldGVycygpLCAkdGhpcy0+ZGVmYXVsdHMpOwogICAgJHRwYXJhbXMgPSAkdGhpcy0+bWVyZ2VBcnJheXMoJGRlZmF1bHRzLCAkcGFyYW1zKTsKCiAgICAvLyBhbGwgJHZhcmlhYmxlcyBtdXN0IGJlIGRlZmluZWQgaW4gdGhlICR0cGFyYW1zIGFycmF5CiAgICBpZiAoYXJyYXlfZGlmZl9rZXkoJHRoaXMtPnZhcmlhYmxlcywgJHRwYXJhbXMpKQogICAgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gY2hlY2sgcmVxdWlyZW1lbnRzCiAgICBmb3JlYWNoIChhcnJheV9rZXlzKCR0aGlzLT52YXJpYWJsZXMpIGFzICR2YXJpYWJsZSkKICAgIHsKICAgICAgaWYgKCEkdHBhcmFtc1skdmFyaWFibGVdKQogICAgICB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmICghcHJlZ19tYXRjaCgnIycuJHRoaXMtPnJlcXVpcmVtZW50c1skdmFyaWFibGVdLicjJywgJHRwYXJhbXNbJHZhcmlhYmxlXSkpCiAgICAgIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICAvLyBhbGwgJHBhcmFtcyBtdXN0IGJlIGluICR2YXJpYWJsZXMgb3IgJGRlZmF1bHRzIGlmIHRoZXJlIGlzIG5vICogaW4gcm91dGUKICAgIGlmICghJHRoaXMtPm9wdGlvbnNbJ2V4dHJhX3BhcmFtZXRlcnNfYXNfcXVlcnlfc3RyaW5nJ10pCiAgICB7CiAgICAgIGlmIChmYWxzZSA9PT0gc3RycG9zKCR0aGlzLT5yZWdleCwgJzxfc3Rhcj4nKSAmJiBhcnJheV9kaWZmX2tleSgkcGFyYW1zLCAkdGhpcy0+dmFyaWFibGVzLCAkZGVmYXVsdHMpKQogICAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgLy8gY2hlY2sgdGhhdCAkcGFyYW1zIGRvZXMgbm90IG92ZXJyaWRlIGEgZGVmYXVsdCB2YWx1ZSB0aGF0IGlzIG5vdCBhIHZhcmlhYmxlCiAgICBmb3JlYWNoICgkZGVmYXVsdHMgYXMgJGtleSA9PiAkdmFsdWUpCiAgICB7CiAgICAgIGlmICghaXNzZXQoJHRoaXMtPnZhcmlhYmxlc1ska2V5XSkgJiYgJHRwYXJhbXNbJGtleV0gIT0gJHZhbHVlKQogICAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBHZW5lcmF0ZXMgYSBVUkwgZnJvbSB0aGUgZ2l2ZW4gcGFyYW1ldGVycy4KICAgKgogICAqIEBwYXJhbSAgbWl4ZWQgICAkcGFyYW1zICAgIFRoZSBwYXJhbWV0ZXIgdmFsdWVzCiAgICogQHBhcmFtICBhcnJheSAgICRjb250ZXh0ICAgVGhlIGNvbnRleHQKICAgKiBAcGFyYW0gIEJvb2xlYW4gJGFic29sdXRlICBXaGV0aGVyIHRvIGdlbmVyYXRlIGFuIGFic29sdXRlIFVSTAogICAqCiAgICogQHJldHVybiBzdHJpbmcgVGhlIGdlbmVyYXRlZCBVUkwKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGUoJHBhcmFtcywgJGNvbnRleHQgPSBhcnJheSgpLCAkYWJzb2x1dGUgPSBmYWxzZSkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICAkdXJsID0gJHRoaXMtPnBhdHRlcm47CgogICAgJGRlZmF1bHRzID0gJHRoaXMtPm1lcmdlQXJyYXlzKCR0aGlzLT5nZXREZWZhdWx0UGFyYW1ldGVycygpLCAkdGhpcy0+ZGVmYXVsdHMpOwogICAgJHRwYXJhbXMgPSAkdGhpcy0+bWVyZ2VBcnJheXMoJGRlZmF1bHRzLCAkcGFyYW1zKTsKCiAgICAvLyBhbGwgcGFyYW1zIG11c3QgYmUgZ2l2ZW4KICAgIGlmICgkZGlmZiA9IGFycmF5X2RpZmZfa2V5KCR0aGlzLT52YXJpYWJsZXMsICR0cGFyYW1zKSkKICAgIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbihzcHJpbnRmKCdUaGUgIiVzIiByb3V0ZSBoYXMgc29tZSBtaXNzaW5nIG1hbmRhdG9yeSBwYXJhbWV0ZXJzICglcykuJywgJHRoaXMtPnBhdHRlcm4sIGltcGxvZGUoJywgJywgJGRpZmYpKSk7CiAgICB9CgogICAgaWYgKCR0aGlzLT5vcHRpb25zWydnZW5lcmF0ZV9zaG9ydGVzdF91cmwnXSB8fCAkdGhpcy0+Y3VzdG9tVG9rZW4pCiAgICB7CiAgICAgICR1cmwgPSAkdGhpcy0+Z2VuZXJhdGVXaXRoVG9rZW5zKCR0cGFyYW1zKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgLy8gcmVwbGFjZSB2YXJpYWJsZXMKICAgICAgJHZhcmlhYmxlcyA9ICR0aGlzLT52YXJpYWJsZXM7CiAgICAgIHVhc29ydCgkdmFyaWFibGVzLCBjcmVhdGVfZnVuY3Rpb24oJyRhLCAkYicsICdyZXR1cm4gc3RybGVuKCRhKSA8IHN0cmxlbigkYik7JykpOwogICAgICBmb3JlYWNoICgkdmFyaWFibGVzIGFzICR2YXJpYWJsZSA9PiAkdmFsdWUpCiAgICAgIHsKICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJHZhbHVlLCB1cmxlbmNvZGUoJHRwYXJhbXNbJHZhcmlhYmxlXSksICR1cmwpOwogICAgICB9CgogICAgICBpZighaW5fYXJyYXkoJHRoaXMtPnN1ZmZpeCwgJHRoaXMtPm9wdGlvbnNbJ3NlZ21lbnRfc2VwYXJhdG9ycyddKSkKICAgICAgewogICAgICAgICR1cmwgLj0gJHRoaXMtPnN1ZmZpeDsKICAgICAgfQogICAgfQoKICAgIC8vIHJlcGxhY2UgZXh0cmEgcGFyYW1ldGVycyBpZiB0aGUgcm91dGUgY29udGFpbnMgKgogICAgJHVybCA9ICR0aGlzLT5nZW5lcmF0ZVN0YXJQYXJhbWV0ZXIoJHVybCwgJGRlZmF1bHRzLCAkdHBhcmFtcyk7CgogICAgaWYgKCR0aGlzLT5vcHRpb25zWydleHRyYV9wYXJhbWV0ZXJzX2FzX3F1ZXJ5X3N0cmluZyddICYmICEkdGhpcy0+aGFzU3RhclBhcmFtZXRlcigpKQogICAgewogICAgICAvLyBhZGQgYSBxdWVyeSBzdHJpbmcgaWYgbmVlZGVkCiAgICAgIGlmICgkZXh0cmEgPSBhcnJheV9kaWZmX2tleSgkcGFyYW1zLCAkdGhpcy0+dmFyaWFibGVzLCAkZGVmYXVsdHMpKQogICAgICB7CiAgICAgICAgJHVybCAuPSAnPycuaHR0cF9idWlsZF9xdWVyeSgkZXh0cmEpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuICR1cmw7CiAgfQoKICAvKioKICAgKiBHZW5lcmF0ZXMgYSBVUkwgZm9yIHRoZSBnaXZlbiBwYXJhbWV0ZXJzIGJ5IHVzaW5nIHRoZSByb3V0ZSB0b2tlbnMuCiAgICoKICAgKiBAcGFyYW0gYXJyYXkgJHBhcmFtZXRlcnMgQW4gYXJyYXkgb2YgcGFyYW1ldGVycwogICAqLwogIHByb3RlY3RlZCBmdW5jdGlvbiBnZW5lcmF0ZVdpdGhUb2tlbnMoJHBhcmFtZXRlcnMpCiAgewogICAgJHVybCA9IGFycmF5KCk7CiAgICAkb3B0aW9uYWwgPSAkdGhpcy0+b3B0aW9uc1snZ2VuZXJhdGVfc2hvcnRlc3RfdXJsJ107CiAgICAkZmlyc3QgPSB0cnVlOwogICAgJHRva2VucyA9IGFycmF5X3JldmVyc2UoJHRoaXMtPnRva2Vucyk7CiAgICBmb3JlYWNoICgkdG9rZW5zIGFzICR0b2tlbikKICAgIHsKICAgICAgc3dpdGNoICgkdG9rZW5bMF0pCiAgICAgIHsKICAgICAgICBjYXNlICd2YXJpYWJsZSc6CiAgICAgICAgICBpZiAoISRvcHRpb25hbCB8fCAhaXNzZXQoJHRoaXMtPmRlZmF1bHRzWyR0b2tlblszXV0pIHx8ICRwYXJhbWV0ZXJzWyR0b2tlblszXV0gIT0gJHRoaXMtPmRlZmF1bHRzWyR0b2tlblszXV0pCiAgICAgICAgICB7CiAgICAgICAgICAgICR1cmxbXSA9IHVybGVuY29kZSgkcGFyYW1ldGVyc1skdG9rZW5bM11dKTsKICAgICAgICAgICAgJG9wdGlvbmFsID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd0ZXh0JzoKICAgICAgICAgICR1cmxbXSA9ICR0b2tlblsyXTsKICAgICAgICAgICRvcHRpb25hbCA9IGZhbHNlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnc2VwYXJhdG9yJzoKICAgICAgICAgIGlmIChmYWxzZSA9PT0gJG9wdGlvbmFsIHx8ICRmaXJzdCkKICAgICAgICAgIHsKICAgICAgICAgICAgJHVybFtdID0gJHRva2VuWzJdOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIC8vIGhhbmRsZSBjdXN0b20gdG9rZW5zCiAgICAgICAgICBpZiAoJHNlZ21lbnQgPSBjYWxsX3VzZXJfZnVuY19hcnJheShhcnJheSgkdGhpcywgJ2dlbmVyYXRlRm9yJy51Y2ZpcnN0KGFycmF5X3NoaWZ0KCR0b2tlbikpKSwgYXJyYXlfbWVyZ2UoYXJyYXkoJG9wdGlvbmFsLCAkcGFyYW1ldGVycyksICR0b2tlbikpKQogICAgICAgICAgewogICAgICAgICAgICAkdXJsW10gPSAkc2VnbWVudDsKICAgICAgICAgICAgJG9wdGlvbmFsID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgJGZpcnN0ID0gZmFsc2U7CiAgICB9CgogICAgJHVybCA9IGltcGxvZGUoJycsIGFycmF5X3JldmVyc2UoJHVybCkpOwogICAgaWYgKCEkdXJsKQogICAgewogICAgICAkdXJsID0gJy8nOwogICAgfQoKICAgIHJldHVybiAkdXJsOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgcm91dGUgcGFyYW1ldGVycy4KICAgKgogICAqIEByZXR1cm4gYXJyYXkgVGhlIHJvdXRlIHBhcmFtZXRlcnMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGFyYW1ldGVycygpCiAgewogICAgaWYgKCEkdGhpcy0+Y29tcGlsZWQpCiAgICB7CiAgICAgICR0aGlzLT5jb21waWxlKCk7CiAgICB9CgogICAgcmV0dXJuICR0aGlzLT5wYXJhbWV0ZXJzOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgY29tcGlsZWQgcGF0dGVybi4KICAgKgogICAqIEByZXR1cm4gc3RyaW5nIFRoZSBjb21waWxlZCBwYXR0ZXJuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdldFBhdHRlcm4oKQogIHsKICAgIGlmICghJHRoaXMtPmNvbXBpbGVkKQogICAgewogICAgICAkdGhpcy0+Y29tcGlsZSgpOwogICAgfQoKICAgIHJldHVybiAkdGhpcy0+cGF0dGVybjsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGNvbXBpbGVkIHJlZ2V4LgogICAqCiAgICogQHJldHVybiBzdHJpbmcgVGhlIGNvbXBpbGVkIHJlZ2V4CiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdldFJlZ2V4KCkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICByZXR1cm4gJHRoaXMtPnJlZ2V4OwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgY29tcGlsZWQgdG9rZW5zLgogICAqCiAgICogQHJldHVybiBhcnJheSBUaGUgY29tcGlsZWQgdG9rZW5zCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGdldFRva2VucygpCiAgewogICAgaWYgKCEkdGhpcy0+Y29tcGlsZWQpCiAgICB7CiAgICAgICR0aGlzLT5jb21waWxlKCk7CiAgICB9CgogICAgcmV0dXJuICR0aGlzLT50b2tlbnM7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBjb21waWxlZCBvcHRpb25zLgogICAqCiAgICogQHJldHVybiBhcnJheSBUaGUgY29tcGlsZWQgb3B0aW9ucwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXRPcHRpb25zKCkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICByZXR1cm4gJHRoaXMtPm9wdGlvbnM7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBjb21waWxlZCB2YXJpYWJsZXMuCiAgICoKICAgKiBAcmV0dXJuIGFycmF5IFRoZSBjb21waWxlZCB2YXJpYWJsZXMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0VmFyaWFibGVzKCkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICByZXR1cm4gJHRoaXMtPnZhcmlhYmxlczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGNvbXBpbGVkIGRlZmF1bHRzLgogICAqCiAgICogQHJldHVybiBhcnJheSBUaGUgY29tcGlsZWQgZGVmYXVsdHMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKQogIHsKICAgIGlmICghJHRoaXMtPmNvbXBpbGVkKQogICAgewogICAgICAkdGhpcy0+Y29tcGlsZSgpOwogICAgfQoKICAgIHJldHVybiAkdGhpcy0+ZGVmYXVsdHM7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBjb21waWxlZCByZXF1aXJlbWVudHMuCiAgICoKICAgKiBAcmV0dXJuIGFycmF5IFRoZSBjb21waWxlZCByZXF1aXJlbWVudHMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWlyZW1lbnRzKCkKICB7CiAgICBpZiAoISR0aGlzLT5jb21waWxlZCkKICAgIHsKICAgICAgJHRoaXMtPmNvbXBpbGUoKTsKICAgIH0KCiAgICByZXR1cm4gJHRoaXMtPnJlcXVpcmVtZW50czsKICB9CgogIC8qKgogICAqIENvbXBpbGVzIHRoZSBjdXJyZW50IHJvdXRlIGluc3RhbmNlLgogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBjb21waWxlKCkKICB7CiAgICBpZiAoJHRoaXMtPmNvbXBpbGVkKQogICAgewogICAgICByZXR1cm47CiAgICB9CgogICAgJHRoaXMtPmluaXRpYWxpemVPcHRpb25zKCk7CiAgICAkdGhpcy0+Zml4UmVxdWlyZW1lbnRzKCk7CiAgICAkdGhpcy0+Zml4RGVmYXVsdHMoKTsKICAgICR0aGlzLT5maXhTdWZmaXgoKTsKCiAgICAkdGhpcy0+Y29tcGlsZWQgPSB0cnVlOwogICAgJHRoaXMtPmZpcnN0T3B0aW9uYWwgPSAwOwogICAgJHRoaXMtPnNlZ21lbnRzID0gYXJyYXkoKTsKCiAgICAkdGhpcy0+cHJlQ29tcGlsZSgpOwoKICAgICR0aGlzLT50b2tlbml6ZSgpOwoKICAgIC8vIHBhcnNlCiAgICBmb3JlYWNoICgkdGhpcy0+dG9rZW5zIGFzICR0b2tlbikKICAgIHsKICAgICAgY2FsbF91c2VyX2Z1bmNfYXJyYXkoYXJyYXkoJHRoaXMsICdjb21waWxlRm9yJy51Y2ZpcnN0KGFycmF5X3NoaWZ0KCR0b2tlbikpKSwgJHRva2VuKTsKICAgIH0KCiAgICAkdGhpcy0+cG9zdENvbXBpbGUoKTsKCiAgICAkc2VwYXJhdG9yID0gJyc7CiAgICBpZiAoY291bnQoJHRoaXMtPnRva2VucykpCiAgICB7CiAgICAgICRsYXN0VG9rZW4gPSAkdGhpcy0+dG9rZW5zW2NvdW50KCR0aGlzLT50b2tlbnMpIC0gMV07CiAgICAgICRzZXBhcmF0b3IgPSAnc2VwYXJhdG9yJyA9PSAkbGFzdFRva2VuWzBdID8gJGxhc3RUb2tlblsyXSA6ICcnOwogICAgfQoKICAgICR0aGlzLT5yZWdleCA9ICIjXiIuaW1wbG9kZSgiIiwgJHRoaXMtPnNlZ21lbnRzKS4iIi5wcmVnX3F1b3RlKCRzZXBhcmF0b3IsICcjJykuIiQjeCI7CiAgfQoKICAvKioKICAgKiBQcmUtY29tcGlsZXMgYSByb3V0ZS4KICAgKi8KICBwcm90ZWN0ZWQgZnVuY3Rpb24gcHJlQ29tcGlsZSgpCiAgewogICAgLy8gYSByb3V0ZSBtdXN0IHN0YXJ0IHdpdGggYSBzbGFzaAogICAgaWYgKGVtcHR5KCR0aGlzLT5wYXR0ZXJuKSB8fCAnLycgIT0gJHRoaXMtPnBhdHRlcm5bMF0pCiAgICB7CiAgICAgICR0aGlzLT5wYXR0ZXJuID0gJy8nLiR0aGlzLT5wYXR0ZXJuOwogICAgfQogIH0KCiAgLyoqCiAgICogUG9zdC1jb21waWxlcyBhIHJvdXRlLgogICAqLwogIHByb3RlY3RlZCBmdW5jdGlvbiBwb3N0Q29tcGlsZSgpCiAgewogICAgLy8gYWxsIHNlZ21lbnRzIGFmdGVyIHRoZSBsYXN0IHN0YXRpYyBzZWdtZW50IGFyZSBvcHRpb25hbAogICAgLy8gYmUgY2FyZWZ1bCwgdGhlIG4tMSBpcyBvcHRpb25hbCBvbmx5IGlmIG4gaXMgZW1wdHkKICAgIGZvciAoJGkgPSAkdGhpcy0+Zmlyc3RPcHRpb25hbCwgJG1heCA9IGNvdW50KCR0aGlzLT5zZWdtZW50cyk7ICRpIDwgJG1heDsgJGkrKykKICAgIHsKICAgICAgJHRoaXMtPnNlZ21lbnRzWyRpXSA9ICgwID09ICRpID8gJy8/JyA6ICcnKS5zdHJfcmVwZWF0KCcgJywgJGkgLSAkdGhpcy0+Zmlyc3RPcHRpb25hbCkuJyg/OicuJHRoaXMtPnNlZ21lbnRzWyRpXTsKICAgICAgJHRoaXMtPnNlZ21lbnRzW10gPSBzdHJfcmVwZWF0KCcgJywgJG1heCAtICRpIC0gMSkuJyk/JzsKICAgIH0KCiAgICAkdGhpcy0+c3RhdGljUHJlZml4ID0gJyc7CiAgICBmb3JlYWNoICgkdGhpcy0+dG9rZW5zIGFzICR0b2tlbikKICAgIHsKICAgICAgc3dpdGNoICgkdG9rZW5bMF0pCiAgICAgIHsKICAgICAgICBjYXNlICdzZXBhcmF0b3InOgogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndGV4dCc6CiAgICAgICAgICBpZiAoJHRva2VuWzJdICE9PSAnKicpCiAgICAgICAgICB7CiAgICAgICAgICAgIC8vIG5vbi1zdGFyIHRleHQgaXMgc3RhdGljCiAgICAgICAgICAgICR0aGlzLT5zdGF0aWNQcmVmaXggLj0gJHRva2VuWzFdLiR0b2tlblsyXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZSBpbmRpY2F0ZXMgdmFyaWFibGUgcGFydHMuIGJyZWFrIHN3aXRjaCBhbmQgZm9yIGxvb3AKICAgICAgICAgIGJyZWFrIDI7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFRva2VuaXplcyB0aGUgcm91dGUuCiAgICovCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIHRva2VuaXplKCkKICB7CiAgICAkdGhpcy0+dG9rZW5zID0gYXJyYXkoKTsKICAgICRidWZmZXIgPSAkdGhpcy0+cGF0dGVybjsKICAgICRhZnRlckFTZXBhcmF0b3IgPSBmYWxzZTsKICAgICRjdXJyZW50U2VwYXJhdG9yID0gJyc7CgogICAgLy8gYSByb3V0ZSBpcyBhbiBhcnJheSBvZiAoc2VwYXJhdG9yICsgdmFyaWFibGUpIG9yIChzZXBhcmF0b3IgKyB0ZXh0KSBzZWdtZW50cwogICAgd2hpbGUgKHN0cmxlbigkYnVmZmVyKSkKICAgIHsKICAgICAgaWYgKGZhbHNlICE9PSAkdGhpcy0+dG9rZW5pemVCdWZmZXJCZWZvcmUoJGJ1ZmZlciwgJHRva2VucywgJGFmdGVyQVNlcGFyYXRvciwgJGN1cnJlbnRTZXBhcmF0b3IpKQogICAgICB7CiAgICAgICAgLy8gYSBjdXN0b20gdG9rZW4KICAgICAgICAkdGhpcy0+Y3VzdG9tVG9rZW4gPSB0cnVlOwogICAgICB9CiAgICAgIGVsc2UgaWYgKCRhZnRlckFTZXBhcmF0b3IgJiYgcHJlZ19tYXRjaCgnI14nLiR0aGlzLT5vcHRpb25zWyd2YXJpYWJsZV9wcmVmaXhfcmVnZXgnXS4nKCcuJHRoaXMtPm9wdGlvbnNbJ3ZhcmlhYmxlX3JlZ2V4J10uJykjJywgJGJ1ZmZlciwgJG1hdGNoKSkKICAgICAgewogICAgICAgIC8vIGEgdmFyaWFibGUKICAgICAgICAkdGhpcy0+dG9rZW5zW10gPSBhcnJheSgndmFyaWFibGUnLCAkY3VycmVudFNlcGFyYXRvciwgJG1hdGNoWzBdLCAkbWF0Y2hbMV0pOwoKICAgICAgICAkY3VycmVudFNlcGFyYXRvciA9ICcnOwogICAgICAgICRidWZmZXIgPSBzdWJzdHIoJGJ1ZmZlciwgc3RybGVuKCRtYXRjaFswXSkpOwogICAgICAgICRhZnRlckFTZXBhcmF0b3IgPSBmYWxzZTsKICAgICAgfQogICAgICBlbHNlIGlmICgkYWZ0ZXJBU2VwYXJhdG9yICYmIHByZWdfbWF0Y2goJyNeKCcuJHRoaXMtPm9wdGlvbnNbJ3RleHRfcmVnZXgnXS4nKSg/OicuJHRoaXMtPm9wdGlvbnNbJ3NlZ21lbnRfc2VwYXJhdG9yc19yZWdleCddLid8JCkjJywgJGJ1ZmZlciwgJG1hdGNoKSkKICAgICAgewogICAgICAgIC8vIGEgdGV4dAogICAgICAgICR0aGlzLT50b2tlbnNbXSA9IGFycmF5KCd0ZXh0JywgJGN1cnJlbnRTZXBhcmF0b3IsICRtYXRjaFsxXSwgbnVsbCk7CgogICAgICAgICRjdXJyZW50U2VwYXJhdG9yID0gJyc7CiAgICAgICAgJGJ1ZmZlciA9IHN1YnN0cigkYnVmZmVyLCBzdHJsZW4oJG1hdGNoWzFdKSk7CiAgICAgICAgJGFmdGVyQVNlcGFyYXRvciA9IGZhbHNlOwogICAgICB9CiAgICAgIGVsc2UgaWYgKCEkYWZ0ZXJBU2VwYXJhdG9yICYmIHByZWdfbWF0Y2goJyNeL3xeJy4kdGhpcy0+b3B0aW9uc1snc2VnbWVudF9zZXBhcmF0b3JzX3JlZ2V4J10uJyMnLCAkYnVmZmVyLCAkbWF0Y2gpKQogICAgICB7CiAgICAgICAgLy8gYmVnaW5uaW5nIG9mIFVSTCAoXi8pIG9yIGEgc2VwYXJhdG9yCiAgICAgICAgJHRoaXMtPnRva2Vuc1tdID0gYXJyYXkoJ3NlcGFyYXRvcicsICRjdXJyZW50U2VwYXJhdG9yLCAkbWF0Y2hbMF0sIG51bGwpOwoKICAgICAgICAkY3VycmVudFNlcGFyYXRvciA9ICRtYXRjaFswXTsKICAgICAgICAkYnVmZmVyID0gc3Vic3RyKCRidWZmZXIsIHN0cmxlbigkbWF0Y2hbMF0pKTsKICAgICAgICAkYWZ0ZXJBU2VwYXJhdG9yID0gdHJ1ZTsKICAgICAgfQogICAgICBlbHNlIGlmIChmYWxzZSAhPT0gJHRoaXMtPnRva2VuaXplQnVmZmVyQWZ0ZXIoJGJ1ZmZlciwgJHRva2VucywgJGFmdGVyQVNlcGFyYXRvciwgJGN1cnJlbnRTZXBhcmF0b3IpKQogICAgICB7CiAgICAgICAgLy8gYSBjdXN0b20gdG9rZW4KICAgICAgICAkdGhpcy0+Y3VzdG9tVG9rZW4gPSB0cnVlOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAgICAgIC8vIHBhcnNpbmcgcHJvYmxlbQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oc3ByaW50ZignVW5hYmxlIHRvIHBhcnNlICIlcyIgcm91dGUgbmVhciAiJXMiLicsICR0aGlzLT5wYXR0ZXJuLCAkYnVmZmVyKSk7CiAgICAgIH0KICAgIH0KICAgIAogICAgLy8gY2hlY2sgZm9yIHN1ZmZpeAogICAgaWYgKCR0aGlzLT5zdWZmaXgpCiAgICB7CiAgICAgIC8vIHRyZWF0IGFzIGEgc2VwYXJhdG9yCiAgICAgICR0aGlzLT50b2tlbnNbXSA9IGFycmF5KCdzZXBhcmF0b3InLCAkY3VycmVudFNlcGFyYXRvciwgJHRoaXMtPnN1ZmZpeCk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogVG9rZW5pemVzIHRoZSBidWZmZXIgYmVmb3JlIGRlZmF1bHQgbG9naWMgaXMgYXBwbGllZC4KICAgKgogICAqIFRoaXMgbWV0aG9kIG11c3QgcmV0dXJuIGZhbHNlIGlmIHRoZSBidWZmZXIgaGFzIG5vdCBiZWVuIHBhcnNlZC4KICAgKgogICAqIEBwYXJhbSBzdHJpbmcgICAkYnVmZmVyICAgICAgICAgICBUaGUgY3VycmVudCByb3V0ZSBidWZmZXIKICAgKiBAcGFyYW0gYXJyYXkgICAgJHRva2VucyAgICAgICAgICAgQW4gYXJyYXkgb2YgY3VycmVudCB0b2tlbnMKICAgKiBAcGFyYW0gQm9vbGVhbiAgJGFmdGVyQVNlcGFyYXRvciAgV2hldGhlciB0aGUgYnVmZmVyIGlzIGp1c3QgYWZ0ZXIgYSBzZXBhcmF0b3IKICAgKiBAcGFyYW0gc3RyaW5nICAgJGN1cnJlbnRTZXBhcmF0b3IgVGhlIGxhc3QgbWF0Y2hlZCBzZXBhcmF0b3IKICAgKgogICAqIEByZXR1cm4gQm9vbGVhbiB0cnVlIGlmIGEgdG9rZW4gaGFzIGJlZW4gZ2VuZXJhdGVkLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBwcm90ZWN0ZWQgZnVuY3Rpb24gdG9rZW5pemVCdWZmZXJCZWZvcmUoJiRidWZmZXIsICYkdG9rZW5zLCAmJGFmdGVyQVNlcGFyYXRvciwgJiRjdXJyZW50U2VwYXJhdG9yKQogIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8qKgogICAqIFRva2VuaXplcyB0aGUgYnVmZmVyIGFmdGVyIGRlZmF1bHQgbG9naWMgaXMgYXBwbGllZC4KICAgKgogICAqIFRoaXMgbWV0aG9kIG11c3QgcmV0dXJuIGZhbHNlIGlmIHRoZSBidWZmZXIgaGFzIG5vdCBiZWVuIHBhcnNlZC4KICAgKgogICAqIEBwYXJhbSBzdHJpbmcgICAkYnVmZmVyICAgICAgICAgICBUaGUgY3VycmVudCByb3V0ZSBidWZmZXIKICAgKiBAcGFyYW0gYXJyYXkgICAgJHRva2VucyAgICAgICAgICAgQW4gYXJyYXkgb2YgY3VycmVudCB0b2tlbnMKICAgKiBAcGFyYW0gQm9vbGVhbiAgJGFmdGVyQVNlcGFyYXRvciAgV2hldGhlciB0aGUgYnVmZmVyIGlzIGp1c3QgYWZ0ZXIgYSBzZXBhcmF0b3IKICAgKiBAcGFyYW0gc3RyaW5nICAgJGN1cnJlbnRTZXBhcmF0b3IgVGhlIGxhc3QgbWF0Y2hlZCBzZXBhcmF0b3IKICAgKgogICAqIEByZXR1cm4gQm9vbGVhbiB0cnVlIGlmIGEgdG9rZW4gaGFzIGJlZW4gZ2VuZXJhdGVkLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBwcm90ZWN0ZWQgZnVuY3Rpb24gdG9rZW5pemVCdWZmZXJBZnRlcigmJGJ1ZmZlciwgJiR0b2tlbnMsICYkYWZ0ZXJBU2VwYXJhdG9yLCAmJGN1cnJlbnRTZXBhcmF0b3IpCiAgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGNvbXBpbGVGb3JUZXh0KCRzZXBhcmF0b3IsICR0ZXh0KQogIHsKICAgIGlmICgnKicgPT0gJHRleHQpCiAgICB7CiAgICAgICR0aGlzLT5zZWdtZW50c1tdID0gJyg/OicucHJlZ19xdW90ZSgkc2VwYXJhdG9yLCAnIycpLicoP1A8X3N0YXI+LiopKT8nOwogICAgfQogICAgZWxzZQogICAgewogICAgICAkdGhpcy0+Zmlyc3RPcHRpb25hbCA9IGNvdW50KCR0aGlzLT5zZWdtZW50cykgKyAxOwoKICAgICAgJHRoaXMtPnNlZ21lbnRzW10gPSBwcmVnX3F1b3RlKCRzZXBhcmF0b3IsICcjJykucHJlZ19xdW90ZSgkdGV4dCwgJyMnKTsKICAgIH0KICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBjb21waWxlRm9yVmFyaWFibGUoJHNlcGFyYXRvciwgJG5hbWUsICR2YXJpYWJsZSkKICB7CiAgICBpZiAoIWlzc2V0KCR0aGlzLT5yZXF1aXJlbWVudHNbJHZhcmlhYmxlXSkpCiAgICB7CiAgICAgICR0aGlzLT5yZXF1aXJlbWVudHNbJHZhcmlhYmxlXSA9ICR0aGlzLT5vcHRpb25zWyd2YXJpYWJsZV9jb250ZW50X3JlZ2V4J107CiAgICB9CgogICAgJHRoaXMtPnNlZ21lbnRzW10gPSBwcmVnX3F1b3RlKCRzZXBhcmF0b3IsICcjJykuJyg/UDwnLiR2YXJpYWJsZS4nPicuJHRoaXMtPnJlcXVpcmVtZW50c1skdmFyaWFibGVdLicpJzsKICAgICR0aGlzLT52YXJpYWJsZXNbJHZhcmlhYmxlXSA9ICRuYW1lOwoKICAgIGlmICghaXNzZXQoJHRoaXMtPmRlZmF1bHRzWyR2YXJpYWJsZV0pKQogICAgewogICAgICAkdGhpcy0+Zmlyc3RPcHRpb25hbCA9IGNvdW50KCR0aGlzLT5zZWdtZW50cyk7CiAgICB9CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gY29tcGlsZUZvclNlcGFyYXRvcigkc2VwYXJhdG9yLCAkcmVnZXhTZXBhcmF0b3IpCiAgewogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGdldERlZmF1bHRQYXJhbWV0ZXJzKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPmRlZmF1bHRQYXJhbWV0ZXJzOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRQYXJhbWV0ZXJzKCRwYXJhbWV0ZXJzKQogIHsKICAgICR0aGlzLT5kZWZhdWx0UGFyYW1ldGVycyA9ICRwYXJhbWV0ZXJzOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPmRlZmF1bHRPcHRpb25zOwogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKCRvcHRpb25zKQogIHsKICAgICR0aGlzLT5kZWZhdWx0T3B0aW9ucyA9ICRvcHRpb25zOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGluaXRpYWxpemVPcHRpb25zKCkKICB7CiAgICAkdGhpcy0+b3B0aW9ucyA9IGFycmF5X21lcmdlKGFycmF5KAogICAgICAnc3VmZml4JyAgICAgICAgICAgICAgICAgICAgICAgICAgID0+ICcnLAogICAgICAndmFyaWFibGVfcHJlZml4ZXMnICAgICAgICAgICAgICAgID0+IGFycmF5KCc6JyksCiAgICAgICdzZWdtZW50X3NlcGFyYXRvcnMnICAgICAgICAgICAgICAgPT4gYXJyYXkoJy8nLCAnLicpLAogICAgICAndmFyaWFibGVfcmVnZXgnICAgICAgICAgICAgICAgICAgID0+ICdbXHdcZF9dKycsCiAgICAgICd0ZXh0X3JlZ2V4JyAgICAgICAgICAgICAgICAgICAgICAgPT4gJy4rPycsCiAgICAgICdnZW5lcmF0ZV9zaG9ydGVzdF91cmwnICAgICAgICAgICAgPT4gdHJ1ZSwKICAgICAgJ2V4dHJhX3BhcmFtZXRlcnNfYXNfcXVlcnlfc3RyaW5nJyA9PiB0cnVlLAogICAgKSwgJHRoaXMtPmdldERlZmF1bHRPcHRpb25zKCksICR0aGlzLT5vcHRpb25zKTsKCiAgICAkcHJlZ19xdW90ZV9oYXNoID0gY3JlYXRlX2Z1bmN0aW9uKCckYScsICdyZXR1cm4gcHJlZ19xdW90ZSgkYSwgXCcjXCcpOycpOwoKICAgIC8vIGNvbXB1dGUgc29tZSByZWdleGVzCiAgICAkdGhpcy0+b3B0aW9uc1sndmFyaWFibGVfcHJlZml4X3JlZ2V4J10gPSAnKD86Jy5pbXBsb2RlKCd8JywgYXJyYXlfbWFwKCRwcmVnX3F1b3RlX2hhc2gsICR0aGlzLT5vcHRpb25zWyd2YXJpYWJsZV9wcmVmaXhlcyddKSkuJyknOwoKICAgIGlmIChjb3VudCgkdGhpcy0+b3B0aW9uc1snc2VnbWVudF9zZXBhcmF0b3JzJ10pKQogICAgewogICAgICAkdGhpcy0+b3B0aW9uc1snc2VnbWVudF9zZXBhcmF0b3JzX3JlZ2V4J10gPSAnKD86Jy5pbXBsb2RlKCd8JywgYXJyYXlfbWFwKCRwcmVnX3F1b3RlX2hhc2gsICR0aGlzLT5vcHRpb25zWydzZWdtZW50X3NlcGFyYXRvcnMnXSkpLicpJzsKCiAgICAgIC8vIGFzIG9mIFBIUCA1LjMuMCwgcHJlZ19xdW90ZSBhdXRvbWF0aWNhbGx5IHF1b3RlcyBkYXNoZXMgIi0iIChzZWUgaHR0cDovL2J1Z3MucGhwLm5ldC9idWcucGhwP2lkPTQ3MjI5KQogICAgICAkcHJlZ19xdW90ZV9oYXNoXzUzID0gY3JlYXRlX2Z1bmN0aW9uKCckYScsICdyZXR1cm4gc3RyX3JlcGxhY2UoXCctXCcsIFwnXC1cJywgcHJlZ19xdW90ZSgkYSwgXCcjXCcpKTsnKTsKICAgICAgJHRoaXMtPm9wdGlvbnNbJ3ZhcmlhYmxlX2NvbnRlbnRfcmVnZXgnXSA9ICdbXicuaW1wbG9kZSgnJywKICAgICAgICAgIGFycmF5X21hcCh2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc1LjMuMFJDNCcsICc+PScpID8gJHByZWdfcXVvdGVfaGFzaCA6ICRwcmVnX3F1b3RlX2hhc2hfNTMsICR0aGlzLT5vcHRpb25zWydzZWdtZW50X3NlcGFyYXRvcnMnXSkKICAgICAgICApLiddKyc7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgIC8vIHVzZSBzaW1wbGlmaWVkIHJlZ2V4ZXMgZm9yIGNhc2Ugd2hlcmUgbm8gc2VwYXJhdG9ycyBhcmUgdXNlZAogICAgICAkdGhpcy0+b3B0aW9uc1snc2VnbWVudF9zZXBhcmF0b3JzX3JlZ2V4J10gPSAnKCknOwogICAgICAkdGhpcy0+b3B0aW9uc1sndmFyaWFibGVfY29udGVudF9yZWdleCddICAgPSAnLisnOwogICAgfQogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIHBhcnNlU3RhclBhcmFtZXRlcigkc3RhcikKICB7CiAgICAkcGFyYW1ldGVycyA9IGFycmF5KCk7CiAgICAkdG1wID0gZXhwbG9kZSgnLycsICRzdGFyKTsKICAgIGZvciAoJGkgPSAwLCAkbWF4ID0gY291bnQoJHRtcCk7ICRpIDwgJG1heDsgJGkgKz0gMikKICAgIHsKICAgICAgLy9kb250IGFsbG93IGEgcGFyYW0gbmFtZSB0byBiZSBlbXB0eSAtICM0MTczCiAgICAgIGlmICghZW1wdHkoJHRtcFskaV0pKQogICAgICB7CiAgICAgICAgJHBhcmFtZXRlcnNbJHRtcFskaV1dID0gaXNzZXQoJHRtcFskaSArIDFdKSA/IHVybGRlY29kZSgkdG1wWyRpICsgMV0pIDogdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkcGFyYW1ldGVyczsKICB9CgogIHByb3RlY3RlZCBmdW5jdGlvbiBoYXNTdGFyUGFyYW1ldGVyKCkKICB7CiAgICByZXR1cm4gZmFsc2UgIT09IHN0cnBvcygkdGhpcy0+cmVnZXgsICc8X3N0YXI+Jyk7CiAgfQoKICBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2VuZXJhdGVTdGFyUGFyYW1ldGVyKCR1cmwsICRkZWZhdWx0cywgJHBhcmFtZXRlcnMpCiAgewogICAgaWYgKGZhbHNlID09PSBzdHJwb3MoJHRoaXMtPnJlZ2V4LCAnPF9zdGFyPicpKQogICAgewogICAgICByZXR1cm4gJHVybDsKICAgIH0KCiAgICAkdG1wID0gYXJyYXkoKTsKICAgIGZvcmVhY2ggKGFycmF5X2RpZmZfa2V5KCRwYXJhbWV0ZXJzLCAkdGhpcy0+dmFyaWFibGVzLCAkZGVmYXVsdHMpIGFzICRrZXkgPT4gJHZhbHVlKQogICAgewogICAgICBpZiAoaXNfYXJyYXkoJHZhbHVlKSkKICAgICAgewogICAgICAgIGZvcmVhY2ggKCR2YWx1ZSBhcyAkdikKICAgICAgICB7CiAgICAgICAgICAkdG1wW10gPSAka2V5Lic9Jy51cmxlbmNvZGUoJHYpOwogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAkdG1wW10gPSB1cmxlbmNvZGUoJGtleSkuJy8nLnVybGVuY29kZSgkdmFsdWUpOwogICAgICB9CiAgICB9CiAgICAkdG1wID0gaW1wbG9kZSgnLycsICR0bXApOwogICAgaWYgKCR0bXApCiAgICB7CiAgICAgICR0bXAgPSAnLycuJHRtcDsKICAgIH0KCiAgICByZXR1cm4gcHJlZ19yZXBsYWNlKCcjJy4kdGhpcy0+b3B0aW9uc1snc2VnbWVudF9zZXBhcmF0b3JzX3JlZ2V4J10uJ1wqKCcuJHRoaXMtPm9wdGlvbnNbJ3NlZ21lbnRfc2VwYXJhdG9yc19yZWdleCddLid8JCkjJywgIiR0bXAkMSIsICR1cmwpOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIG1lcmdlQXJyYXlzKCRhcnIxLCAkYXJyMikKICB7CiAgICBmb3JlYWNoICgkYXJyMiBhcyAka2V5ID0+ICR2YWx1ZSkKICAgIHsKICAgICAgJGFycjFbJGtleV0gPSAkdmFsdWU7CiAgICB9CgogICAgcmV0dXJuICRhcnIxOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGZpeERlZmF1bHRzKCkKICB7CiAgICBmb3JlYWNoICgkdGhpcy0+ZGVmYXVsdHMgYXMgJGtleSA9PiAkdmFsdWUpCiAgICB7CiAgICAgIGlmIChjdHlwZV9kaWdpdCgka2V5KSkKICAgICAgewogICAgICAgICR0aGlzLT5kZWZhdWx0c1skdmFsdWVdID0gdHJ1ZTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAkdGhpcy0+ZGVmYXVsdHNbJGtleV0gPSB1cmxkZWNvZGUoJHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGZpeFJlcXVpcmVtZW50cygpCiAgewogICAgZm9yZWFjaCAoJHRoaXMtPnJlcXVpcmVtZW50cyBhcyAka2V5ID0+ICRyZWdleCkKICAgIHsKICAgICAgaWYgKCFpc19zdHJpbmcoJHJlZ2V4KSkKICAgICAgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBpZiAoJ14nID09ICRyZWdleFswXSkKICAgICAgewogICAgICAgICRyZWdleCA9IHN1YnN0cigkcmVnZXgsIDEpOwogICAgICB9CiAgICAgIGlmICgnJCcgPT0gc3Vic3RyKCRyZWdleCwgLTEpKQogICAgICB7CiAgICAgICAgJHJlZ2V4ID0gc3Vic3RyKCRyZWdleCwgMCwgLTEpOwogICAgICB9CgogICAgICAkdGhpcy0+cmVxdWlyZW1lbnRzWyRrZXldID0gJHJlZ2V4OwogICAgfQogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGZpeFN1ZmZpeCgpCiAgewogICAgJGxlbmd0aCA9IHN0cmxlbigkdGhpcy0+cGF0dGVybik7CgogICAgaWYgKCRsZW5ndGggPiAwICYmICcvJyA9PSAkdGhpcy0+cGF0dGVyblskbGVuZ3RoIC0gMV0pCiAgICB7CiAgICAgIC8vIHJvdXRlIGVuZHMgYnkgLyAoZGlyZWN0b3J5KQogICAgICAkdGhpcy0+c3VmZml4ID0gJy8nOwogICAgfQogICAgZWxzZSBpZiAoJGxlbmd0aCA+IDAgJiYgJy4nID09ICR0aGlzLT5wYXR0ZXJuWyRsZW5ndGggLSAxXSkKICAgIHsKICAgICAgLy8gcm91dGUgZW5kcyBieSAuIChubyBzdWZmaXgpCiAgICAgICR0aGlzLT5zdWZmaXggPSAnJzsKICAgICAgJHRoaXMtPnBhdHRlcm4gPSBzdWJzdHIoJHRoaXMtPnBhdHRlcm4sIDAsICRsZW5ndGggLSAxKTsKICAgIH0KICAgIGVsc2UgaWYgKHByZWdfbWF0Y2goJyNcLig/OicuJHRoaXMtPm9wdGlvbnNbJ3ZhcmlhYmxlX3ByZWZpeF9yZWdleCddLiR0aGlzLT5vcHRpb25zWyd2YXJpYWJsZV9yZWdleCddLid8Jy4kdGhpcy0+b3B0aW9uc1sndmFyaWFibGVfY29udGVudF9yZWdleCddLicpJCNpJywgJHRoaXMtPnBhdHRlcm4pKQogICAgewogICAgICAvLyBzcGVjaWZpYyBzdWZmaXggZm9yIHRoaXMgcm91dGUKICAgICAgLy8gYSAuIHdpdGggYSB2YXJpYWJsZSBhZnRlciBvciBzb21lIGNoYXJzIHdpdGhvdXQgYW55IHNlcGFyYXRvcnMKICAgICAgJHRoaXMtPnN1ZmZpeCA9ICcnOwogICAgfQogICAgZWxzZQogICAgewogICAgICAkdGhpcy0+c3VmZml4ID0gJHRoaXMtPm9wdGlvbnNbJ3N1ZmZpeCddOwogICAgfQogIH0KCiAgcHVibGljIGZ1bmN0aW9uIHNlcmlhbGl6ZSgpCiAgewogICAgLy8gYWx3YXlzIHNlcmlhbGl6ZSBjb21waWxlZCByb3V0ZXMKICAgICR0aGlzLT5jb21waWxlKCk7CiAgICAvLyBzZlBhdHRlcm5Sb3V0aW5nIHdpbGwgYWx3YXlzIHJlLXNldCBkZWZhdWx0UGFyYW1ldGVycywgc28gbm8gbmVlZCB0byBzZXJpYWxpemUgdGhlbQogICAgcmV0dXJuIHNlcmlhbGl6ZShhcnJheSgkdGhpcy0+dG9rZW5zLCAkdGhpcy0+ZGVmYXVsdE9wdGlvbnMsICR0aGlzLT5vcHRpb25zLCAkdGhpcy0+cGF0dGVybiwgJHRoaXMtPnN0YXRpY1ByZWZpeCwgJHRoaXMtPnJlZ2V4LCAkdGhpcy0+dmFyaWFibGVzLCAkdGhpcy0+ZGVmYXVsdHMsICR0aGlzLT5yZXF1aXJlbWVudHMsICR0aGlzLT5zdWZmaXgpKTsKICB9CgogIHB1YmxpYyBmdW5jdGlvbiB1bnNlcmlhbGl6ZSgkZGF0YSkKICB7CiAgICBsaXN0KCR0aGlzLT50b2tlbnMsICR0aGlzLT5kZWZhdWx0T3B0aW9ucywgJHRoaXMtPm9wdGlvbnMsICR0aGlzLT5wYXR0ZXJuLCAkdGhpcy0+c3RhdGljUHJlZml4LCAkdGhpcy0+cmVnZXgsICR0aGlzLT52YXJpYWJsZXMsICR0aGlzLT5kZWZhdWx0cywgJHRoaXMtPnJlcXVpcmVtZW50cywgJHRoaXMtPnN1ZmZpeCkgPSB1bnNlcmlhbGl6ZSgkZGF0YSk7CiAgICAkdGhpcy0+Y29tcGlsZWQgPSB0cnVlOwogIH0KfQ==',
  'ofw/lib/routing/sfRouteCollection.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8qKgogKiBzZk9iamVjdFJvdXRlQ29sbGVjdGlvbiByZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiByb3V0ZXMuCiAqCiAqIEBwYWNrYWdlICAgIHN5bWZvbnkKICogQHN1YnBhY2thZ2Ugcm91dGluZwogKiBAYXV0aG9yICAgICBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqIEB2ZXJzaW9uICAgIFNWTjogJElkOiBzZlJvdXRlQ29sbGVjdGlvbi5jbGFzcy5waHAgMTE0NzEgMjAwOC0wOS0xMiAxMDowMzo0OVogZmFiaWVuICQKICovCmNsYXNzIHNmUm91dGVDb2xsZWN0aW9uIGltcGxlbWVudHMgSXRlcmF0b3IKewogIHByb3RlY3RlZAogICAgJGNvdW50ICAgPSAwLAogICAgJG9wdGlvbnMgPSBhcnJheSgpLAogICAgJHJvdXRlcyAgPSBhcnJheSgpOwoKICAvKioKICAgKiBDb25zdHJ1Y3Rvci4KICAgKgogICAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucyBBbiBhcnJheSBvZiBvcHRpb25zCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KGFycmF5ICRvcHRpb25zKQogIHsKICAgIGlmICghaXNzZXQoJG9wdGlvbnNbJ25hbWUnXSkpCiAgICB7CiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oJ1lvdSBtdXN0IHBhc3MgYSAibmFtZSIgb3B0aW9uIHRvIHNmUm91dGVDb2xsZWN0aW9uJyk7CiAgICB9CgogICAgJHRoaXMtPm9wdGlvbnMgPSAkb3B0aW9uczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIHJvdXRlcy4KICAgKgogICAqIEByZXR1cm4gYXJyYXkgVGhlIHJvdXRlcwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXRSb3V0ZXMoKQogIHsKICAgIHJldHVybiAkdGhpcy0+cm91dGVzOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgb3B0aW9ucy4KICAgKgogICAqIEByZXR1cm4gYXJyYXkgVGhlIG9wdGlvbnMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0T3B0aW9ucygpCiAgewogICAgcmV0dXJuICR0aGlzLT5vcHRpb25zOwogIH0KCiAgLyoqCiAgICogUmVzZXQgdGhlIGVycm9yIGFycmF5IHRvIHRoZSBiZWdpbm5pbmcgKGltcGxlbWVudHMgdGhlIEl0ZXJhdG9yIGludGVyZmFjZSkuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHJld2luZCgpCiAgewogICAgcmVzZXQoJHRoaXMtPnJvdXRlcyk7CgogICAgJHRoaXMtPmNvdW50ID0gY291bnQoJHRoaXMtPnJvdXRlcyk7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgcm91dGUgKGltcGxlbWVudHMgdGhlIEl0ZXJhdG9yIGludGVyZmFjZSkuCiAgICoKICAgKiBAcmV0dXJuIHN0cmluZyBUaGUga2V5CiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGtleSgpCiAgewogICAgcmV0dXJuIGtleSgkdGhpcy0+cm91dGVzKTsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGN1cnJlbnQgcm91dGUgKGltcGxlbWVudHMgdGhlIEl0ZXJhdG9yIGludGVyZmFjZSkuCiAgICoKICAgKiBAcmV0dXJuIG1peGVkIFRoZSBlc2NhcGVkIHZhbHVlCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGN1cnJlbnQoKQogIHsKICAgIHJldHVybiBjdXJyZW50KCR0aGlzLT5yb3V0ZXMpOwogIH0KCiAgLyoqCiAgICogTW92ZXMgdG8gdGhlIG5leHQgcm91dGUgKGltcGxlbWVudHMgdGhlIEl0ZXJhdG9yIGludGVyZmFjZSkuCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIG5leHQoKQogIHsKICAgIG5leHQoJHRoaXMtPnJvdXRlcyk7CgogICAgLS0kdGhpcy0+Y291bnQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgcm91dGUgaXMgdmFsaWQgKGltcGxlbWVudHMgdGhlIEl0ZXJhdG9yIGludGVyZmFjZSkuCiAgICoKICAgKiBAcmV0dXJuIGJvb2xlYW4gVGhlIHZhbGlkaXR5IG9mIHRoZSBjdXJyZW50IHJvdXRlOyB0cnVlIGlmIGl0IGlzIHZhbGlkCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHZhbGlkKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPmNvdW50ID4gMDsKICB9Cn0K',
  'ofw/lib/routing/sfRouting.class.php' => 'data:text/x-php;base64,PD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBzeW1mb255IHBhY2thZ2UuCiAqIChjKSAyMDA0LTIwMDYgRmFiaWVuIFBvdGVuY2llciA8ZmFiaWVuLnBvdGVuY2llckBzeW1mb255LXByb2plY3QuY29tPgogKgogKiBGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQogKiBmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4KICovCgovKioKICogc2ZSb3V0aW5nIGNsYXNzIGNvbnRyb2xzIHRoZSBnZW5lcmF0aW9uIGFuZCBwYXJzaW5nIG9mIFVSTHMuCiAqCiAqIEBwYWNrYWdlICAgIHN5bWZvbnkKICogQHN1YnBhY2thZ2Ugcm91dGluZwogKiBAYXV0aG9yICAgICBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW4ucG90ZW5jaWVyQHN5bWZvbnktcHJvamVjdC5jb20+CiAqIEB2ZXJzaW9uICAgIFNWTjogJElkOiBzZlJvdXRpbmcuY2xhc3MucGhwIDIzODEwIDIwMDktMTEtMTIgMTE6MDc6NDRaIEtyaXMuV2FsbHNtaXRoICQKICovCmFic3RyYWN0IGNsYXNzIHNmUm91dGluZwp7CiAgcHJvdGVjdGVkCiAgICAkZGlzcGF0Y2hlciAgICAgICAgPSBudWxsLAogICAgJGNhY2hlICAgICAgICAgICAgID0gbnVsbCwKICAgICRkZWZhdWx0UGFyYW1ldGVycyA9IGFycmF5KCksCiAgICAkb3B0aW9ucyAgICAgICAgICAgPSBhcnJheSgpOwoKICAvKioKICAgKiBDbGFzcyBjb25zdHJ1Y3Rvci4KICAgKgogICAqIEBzZWUgaW5pdGlhbGl6ZSgpCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KHNmRXZlbnREaXNwYXRjaGVyICRkaXNwYXRjaGVyLCBzZkNhY2hlICRjYWNoZSA9IG51bGwsICRvcHRpb25zID0gYXJyYXkoKSkKICB7CiAgICAkdGhpcy0+aW5pdGlhbGl6ZSgkZGlzcGF0Y2hlciwgJGNhY2hlLCAkb3B0aW9ucyk7CgogICAgaWYgKCFpc3NldCgkdGhpcy0+b3B0aW9uc1snYXV0b19zaHV0ZG93biddKSB8fCAkdGhpcy0+b3B0aW9uc1snYXV0b19zaHV0ZG93biddKQogICAgewogICAgICByZWdpc3Rlcl9zaHV0ZG93bl9mdW5jdGlvbihhcnJheSgkdGhpcywgJ3NodXRkb3duJykpOwogICAgfQogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgcm91dGluZyBjYWNoZSBvYmplY3QuCiAgICoKICAgKiBAcmV0dXJuIHNmQ2FjaGUgQSBzZkNhY2hlIGluc3RhbmNlIG9yIG51bGwKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FjaGUoKQogIHsKICAgIHJldHVybiAkdGhpcy0+Y2FjaGU7CiAgfQoKICAvKioKICAgKiBJbml0aWFsaXplcyB0aGlzIHNmUm91dGluZyBpbnN0YW5jZS4KICAgKgogICAqIEF2YWlsYWJsZSBvcHRpb25zOgogICAqCiAgICogICogZGVmYXVsdF9tb2R1bGU6IFRoZSBkZWZhdWx0IG1vZHVsZSBuYW1lCiAgICogICogZGVmYXVsdF9hY3Rpb246IFRoZSBkZWZhdWx0IGFjdGlvbiBuYW1lCiAgICogICogbG9nZ2luZzogICAgICAgIFdoZXRoZXIgdG8gbG9nIG9yIG5vdCAoZmFsc2UgYnkgZGVmYXVsdCkKICAgKiAgKiBkZWJ1ZzogICAgICAgICAgV2hldGhlciB0byBjYWNoZSBvciBub3QgKGZhbHNlIGJ5IGRlZmF1bHQpCiAgICogICogY29udGV4dDogICAgICAgIEFuIGFycmF5IG9mIGNvbnRleHQgdmFyaWFibGVzIHRvIGhlbHAgVVJMIG1hdGNoaW5nIGFuZCBnZW5lcmF0aW9uCiAgICoKICAgKiBAcGFyYW0gc2ZFdmVudERpc3BhdGNoZXIgJGRpc3BhdGNoZXIgIEFuIHNmRXZlbnREaXNwYXRjaGVyIGluc3RhbmNlCiAgICogQHBhcmFtIHNmQ2FjaGUgICAgICAgICAgICRjYWNoZSAgICAgICBBbiBzZkNhY2hlIGluc3RhbmNlCiAgICogQHBhcmFtIGFycmF5ICAgICAgICAgICAgICRvcHRpb25zICAgICBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBpbml0aWFsaXphdGlvbiBvcHRpb25zLgogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBpbml0aWFsaXplKHNmRXZlbnREaXNwYXRjaGVyICRkaXNwYXRjaGVyLCBzZkNhY2hlICRjYWNoZSA9IG51bGwsICRvcHRpb25zID0gYXJyYXkoKSkKICB7CiAgICAkdGhpcy0+ZGlzcGF0Y2hlciA9ICRkaXNwYXRjaGVyOwoKICAgICRvcHRpb25zWydkZWJ1ZyddID0gaXNzZXQoJG9wdGlvbnNbJ2RlYnVnJ10pID8gKGJvb2xlYW4pICRvcHRpb25zWydkZWJ1ZyddIDogZmFsc2U7CgogICAgLy8gZGlzYWJsZSBjYWNoaW5nIHdoZW4gaW4gZGVidWcgbW9kZQogICAgJHRoaXMtPmNhY2hlID0gJG9wdGlvbnNbJ2RlYnVnJ10gPyBudWxsIDogJGNhY2hlOwoKICAgICR0aGlzLT5zZXREZWZhdWx0UGFyYW1ldGVyKCdtb2R1bGUnLCBpc3NldCgkb3B0aW9uc1snZGVmYXVsdF9tb2R1bGUnXSkgPyAkb3B0aW9uc1snZGVmYXVsdF9tb2R1bGUnXSA6ICdkZWZhdWx0Jyk7CiAgICAkdGhpcy0+c2V0RGVmYXVsdFBhcmFtZXRlcignYWN0aW9uJywgaXNzZXQoJG9wdGlvbnNbJ2RlZmF1bHRfYWN0aW9uJ10pID8gJG9wdGlvbnNbJ2RlZmF1bHRfYWN0aW9uJ10gOiAnaW5kZXgnKTsKCiAgICBpZiAoIWlzc2V0KCRvcHRpb25zWydsb2dnaW5nJ10pKQogICAgewogICAgICAkb3B0aW9uc1snbG9nZ2luZyddID0gZmFsc2U7CiAgICB9CgogICAgaWYgKCFpc3NldCgkb3B0aW9uc1snY29udGV4dCddKSkKICAgIHsKICAgICAgJG9wdGlvbnNbJ2NvbnRleHQnXSA9IGFycmF5KCk7CiAgICB9CgogICAgJHRoaXMtPm9wdGlvbnMgPSAkb3B0aW9uczsKCiAgICAkdGhpcy0+ZGlzcGF0Y2hlci0+Y29ubmVjdCgndXNlci5jaGFuZ2VfY3VsdHVyZScsIGFycmF5KCR0aGlzLCAnbGlzdGVuVG9DaGFuZ2VDdWx0dXJlRXZlbnQnKSk7CiAgICAkdGhpcy0+ZGlzcGF0Y2hlci0+Y29ubmVjdCgncmVxdWVzdC5maWx0ZXJfcGFyYW1ldGVycycsIGFycmF5KCR0aGlzLCAnZmlsdGVyUGFyYW1ldGVyc0V2ZW50JykpOwoKICAgICR0aGlzLT5sb2FkQ29uZmlndXJhdGlvbigpOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgb3B0aW9ucy4KICAgKgogICAqIEByZXR1cm4gYXJyYXkgQW4gYXJyYXkgb2Ygb3B0aW9ucwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXRPcHRpb25zKCkKICB7CiAgICByZXR1cm4gJHRoaXMtPm9wdGlvbnM7CiAgfQoKICAvKioKICAgKiBMb2FkcyByb3V0aW5nIGNvbmZpZ3VyYXRpb24uCiAgICoKICAgKiBUaGlzIG1ldGhvZHMgbm90aWZpZXMgYSByb3V0aW5nLmxvYWRfY29uZmlndXJhdGlvbiBldmVudC4KICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gbG9hZENvbmZpZ3VyYXRpb24oKQogIHsKICAgICR0aGlzLT5kaXNwYXRjaGVyLT5ub3RpZnkobmV3IHNmRXZlbnQoJHRoaXMsICdyb3V0aW5nLmxvYWRfY29uZmlndXJhdGlvbicpKTsKICB9CgogIC8qKgogICAqIEdldHMgdGhlIGludGVybmFsIFVSSSBmb3IgdGhlIGN1cnJlbnQgcmVxdWVzdC4KICAgKgogICAqIEBwYXJhbSAgYm9vbCAkd2l0aF9yb3V0ZV9uYW1lICBXaGV0aGVyIHRvIGdpdmUgYW4gaW50ZXJuYWwgVVJJIHdpdGggdGhlIHJvdXRlIG5hbWUgKEByb3V0ZSkKICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Igd2l0aCB0aGUgbW9kdWxlL2FjdGlvbiBwYWlyCiAgICoKICAgKiBAcmV0dXJuIHN0cmluZyBUaGUgY3VycmVudCBpbnRlcm5hbCBVUkkKICAgKi8KICBhYnN0cmFjdCBwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VycmVudEludGVybmFsVXJpKCR3aXRoX3JvdXRlX25hbWUgPSBmYWxzZSk7CgogIC8qKgogICAqIEdldHMgdGhlIGN1cnJlbnQgY29tcGlsZWQgcm91dGUgYXJyYXkuCiAgICoKICAgKiBAcmV0dXJuIGFycmF5IFRoZSByb3V0ZSBhcnJheQogICAqLwogIGFic3RyYWN0IHB1YmxpYyBmdW5jdGlvbiBnZXRSb3V0ZXMoKTsKCiAgLyoqCiAgICogU2V0cyB0aGUgY29tcGlsZWQgcm91dGUgYXJyYXkuCiAgICoKICAgKiBAcGFyYW0gIGFycmF5ICRyb3V0ZXMgIFRoZSByb3V0ZSBhcnJheQogICAqCiAgICogQHJldHVybiBhcnJheSBUaGUgcm91dGUgYXJyYXkKICAgKi8KICBhYnN0cmFjdCBwdWJsaWMgZnVuY3Rpb24gc2V0Um91dGVzKCRyb3V0ZXMpOwoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBpbnN0YW5jZSBoYXMgc29tZSByb3V0ZXMuCiAgICoKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBhYnN0cmFjdCBwdWJsaWMgZnVuY3Rpb24gaGFzUm91dGVzKCk7CgogIC8qKgogICAqIENsZWFycyBhbGwgY3VycmVudCByb3V0ZXMuCiAgICovCiAgYWJzdHJhY3QgcHVibGljIGZ1bmN0aW9uIGNsZWFyUm91dGVzKCk7CgogLyoqCiAgKiBHZW5lcmF0ZXMgYSB2YWxpZCBVUkxzIGZvciBwYXJhbWV0ZXJzLgogICoKICAqIEBwYXJhbSAgc3RyaW5nICAkbmFtZSAgICAgIFRoZSByb3V0ZSBuYW1lCiAgKiBAcGFyYW0gIGFycmF5ICAgJHBhcmFtcyAgICBUaGUgcGFyYW1ldGVyIHZhbHVlcwogICogQHBhcmFtICBCb29sZWFuICRhYnNvbHV0ZSAgV2hldGhlciB0byBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSBVUkwKICAqCiAgKiBAcmV0dXJuIHN0cmluZyBUaGUgZ2VuZXJhdGVkIFVSTAogICovCiAgYWJzdHJhY3QgcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlKCRuYW1lLCAkcGFyYW1zID0gYXJyYXkoKSwgJGFic29sdXRlID0gZmFsc2UpOwoKIC8qKgogICogUGFyc2VzIGEgVVJMIHRvIGZpbmQgYSBtYXRjaGluZyByb3V0ZSBhbmQgc2V0cyBpbnRlcm5hbCBzdGF0ZS4KICAqCiAgKiBSZXR1cm5zIGZhbHNlIGlmIG5vIHJvdXRlIG1hdGNoIHRoZSBVUkwuCiAgKgogICogQHBhcmFtICBzdHJpbmcgJHVybCAgVVJMIHRvIGJlIHBhcnNlZAogICoKICAqIEByZXR1cm4gYXJyYXl8ZmFsc2UgIEFuIGFycmF5IG9mIHBhcmFtZXRlcnMgb3IgZmFsc2UgaWYgdGhlIHJvdXRlIGRvZXMgbm90IG1hdGNoCiAgKi8KICBhYnN0cmFjdCBwdWJsaWMgZnVuY3Rpb24gcGFyc2UoJHVybCk7CgogIC8qKgogICAqIEdldHMgdGhlIGRlZmF1bHQgcGFyYW1ldGVycyBmb3IgVVJMIGdlbmVyYXRpb24uCiAgICoKICAgKiBAcmV0dXJuIGFycmF5ICBBbiBhcnJheSBvZiBkZWZhdWx0IHBhcmFtZXRlcnMKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVmYXVsdFBhcmFtZXRlcnMoKQogIHsKICAgIHJldHVybiAkdGhpcy0+ZGVmYXVsdFBhcmFtZXRlcnM7CiAgfQoKICAvKioKICAgKiBHZXRzIGEgZGVmYXVsdCBwYXJhbWV0ZXIuCiAgICoKICAgKiBAcGFyYW0gIHN0cmluZyAka2V5ICAgIFRoZSBrZXkKICAgKgogICAqIEByZXR1cm4gc3RyaW5nIFRoZSB2YWx1ZQogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBnZXREZWZhdWx0UGFyYW1ldGVyKCRrZXkpCiAgewogICAgcmV0dXJuIGlzc2V0KCR0aGlzLT5kZWZhdWx0UGFyYW1ldGVyc1ska2V5XSkgPyAkdGhpcy0+ZGVmYXVsdFBhcmFtZXRlcnNbJGtleV0gOiBudWxsOwogIH0KCiAgLyoqCiAgICogU2V0cyBhIGRlZmF1bHQgcGFyYW1ldGVyLgogICAqCiAgICogQHBhcmFtIHN0cmluZyAka2V5ICAgIFRoZSBrZXkKICAgKiBAcGFyYW0gc3RyaW5nICR2YWx1ZSAgVGhlIHZhbHVlCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRQYXJhbWV0ZXIoJGtleSwgJHZhbHVlKQogIHsKICAgICR0aGlzLT5kZWZhdWx0UGFyYW1ldGVyc1ska2V5XSA9ICR2YWx1ZTsKICB9CgogIC8qKgogICAqIFNldHMgdGhlIGRlZmF1bHQgcGFyYW1ldGVycyBmb3IgVVJMIGdlbmVyYXRpb24uCiAgICoKICAgKiBAcGFyYW0gYXJyYXkgJHBhcmFtZXRlcnMgIEFuIGFycmF5IG9mIGRlZmF1bHQgcGFyYW1ldGVycwogICAqLwogIHB1YmxpYyBmdW5jdGlvbiBzZXREZWZhdWx0UGFyYW1ldGVycygkcGFyYW1ldGVycykKICB7CiAgICAkdGhpcy0+ZGVmYXVsdFBhcmFtZXRlcnMgPSAkcGFyYW1ldGVyczsKICB9CgogIC8qKgogICAqIExpc3RlbnMgdG8gdGhlIHVzZXIuY2hhbmdlX2N1bHR1cmUgZXZlbnQuCiAgICoKICAgKiBAcGFyYW0gc2ZFdmVudCAkZXZlbnQgQW4gc2ZFdmVudCBpbnN0YW5jZQogICAqCiAgICovCiAgcHVibGljIGZ1bmN0aW9uIGxpc3RlblRvQ2hhbmdlQ3VsdHVyZUV2ZW50KHNmRXZlbnQgJGV2ZW50KQogIHsKICAgIC8vIGNoYW5nZSB0aGUgY3VsdHVyZSBpbiB0aGUgcm91dGluZyBkZWZhdWx0IHBhcmFtZXRlcnMKICAgICR0aGlzLT5zZXREZWZhdWx0UGFyYW1ldGVyKCdzZl9jdWx0dXJlJywgJGV2ZW50WydjdWx0dXJlJ10pOwogIH0KCiAgLyoqCiAgICogTGlzdGVucyB0byB0aGUgcmVxdWVzdC5maWx0ZXJfcGFyYW1ldGVycyBldmVudC4KICAgKgogICAqIEBwYXJhbSAgc2ZFdmVudCAkZXZlbnQgICAgICAgQW4gc2ZFdmVudCBpbnN0YW5jZQogICAqCiAgICogQHJldHVybiBhcnJheSAgICRwYXJhbWV0ZXJzICBBbiBhcnJheSBvZiBwYXJhbWV0ZXJzIGZvciB0aGUgZXZlbnQKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gZmlsdGVyUGFyYW1ldGVyc0V2ZW50KHNmRXZlbnQgJGV2ZW50LCAkcGFyYW1ldGVycykKICB7CiAgICAkY29udGV4dCA9ICRldmVudC0+Z2V0UGFyYW1ldGVycygpOwoKICAgICR0aGlzLT5vcHRpb25zWydjb250ZXh0J10gPSAkY29udGV4dDsKCiAgICBpZiAoZmFsc2UgPT09ICRwYXJhbXMgPSAkdGhpcy0+cGFyc2UoJGV2ZW50WydwYXRoX2luZm8nXSkpCiAgICB7CiAgICAgIHJldHVybiAkcGFyYW1ldGVyczsKICAgIH0KCiAgICByZXR1cm4gYXJyYXlfbWVyZ2UoJHBhcmFtZXRlcnMsICRwYXJhbXMpOwogIH0KCiAgcHJvdGVjdGVkIGZ1bmN0aW9uIGZpeEdlbmVyYXRlZFVybCgkdXJsLCAkYWJzb2x1dGUgPSBmYWxzZSkKICB7CiAgICBpZiAoaXNzZXQoJHRoaXMtPm9wdGlvbnNbJ2NvbnRleHQnXVsncHJlZml4J10pKQogICAgewogICAgICBpZiAoMCA9PT0gc3RycG9zKCR1cmwsICdodHRwJykpCiAgICAgIHsKICAgICAgICAkdXJsID0gcHJlZ19yZXBsYWNlKCcjaHR0cHM/XDovL1teL10rIycsICckMCcuJHRoaXMtPm9wdGlvbnNbJ2NvbnRleHQnXVsncHJlZml4J10sICR1cmwpOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAgICAgICR1cmwgPSAkdGhpcy0+b3B0aW9uc1snY29udGV4dCddWydwcmVmaXgnXS4kdXJsOwogICAgICB9CiAgICB9CgogICAgaWYgKCRhYnNvbHV0ZSAmJiBpc3NldCgkdGhpcy0+b3B0aW9uc1snY29udGV4dCddWydob3N0J10pICYmIDAgIT09IHN0cnBvcygkdXJsLCAnaHR0cCcpKQogICAgewogICAgICAkdXJsID0gJ2h0dHAnLihpc3NldCgkdGhpcy0+b3B0aW9uc1snY29udGV4dCddWydpc19zZWN1cmUnXSkgJiYgJHRoaXMtPm9wdGlvbnNbJ2NvbnRleHQnXVsnaXNfc2VjdXJlJ10gPyAncycgOiAnJykuJzovLycuJHRoaXMtPm9wdGlvbnNbJ2NvbnRleHQnXVsnaG9zdCddLiR1cmw7CiAgICB9CgogICAgcmV0dXJuICR1cmw7CiAgfQoKICAvKioKICAgKiBFeGVjdXRlIHRoZSBzaHV0ZG93biBwcm9jZWR1cmUuCiAgICoKICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBwdWJsaWMgZnVuY3Rpb24gc2h1dGRvd24oKQogIHsKICB9Cn0K',
  'ofw/sql/model.sql' => 'data:text/plain;base64,LyohNDAwMTQgU0VUIEBPTERfRk9SRUlHTl9LRVlfQ0hFQ0tTPUBARk9SRUlHTl9LRVlfQ0hFQ0tTLCBGT1JFSUdOX0tFWV9DSEVDS1M9MCAqLzsKCkNSRUFURSBUQUJMRSBgdGFnYCAoCiAgYGlkYCBJTlQoMTEpIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5UIENPTU1FTlQgJ0lkIMO6bmljbyBkZSBjYWRhIHRhZycsCiAgYG5hbWVgIFZBUkNIQVIoMjApIENPTExBVEUgdXRmOF91bmljb2RlX2NpIE5PVCBOVUxMIERFRkFVTFQgJycgQ09NTUVOVCAnTm9tYnJlIGRlIGxhIHRhZycsCiAgYGlkX3VzZXJgIElOVCgxMSkgTk9UIE5VTEwgQ09NTUVOVCAnSWQgZGVsIHVzdWFyaW8nLAogIGBjcmVhdGVkX2F0YCBEQVRFVElNRSBOT1QgTlVMTCBDT01NRU5UICdGZWNoYSBkZSBjcmVhY2nDs24gZGVsIHJlZ2lzdHJvJywKICBgdXBkYXRlZF9hdGAgREFURVRJTUUgTlVMTCBDT01NRU5UICdGZWNoYSBkZSDDumx0aW1hIG1vZGlmaWNhY2nDs24gZGVsIHJlZ2lzdHJvJywKICBQUklNQVJZIEtFWSAoYGlkYCkKKSBFTkdJTkU9SW5ub0RCIERFRkFVTFQgQ0hBUlNFVD11dGY4IENPTExBVEU9dXRmOF91bmljb2RlX2NpOwoKCkNSRUFURSBUQUJMRSBgdXNlcmAgKAogIGBpZGAgSU5UKDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCBDT01NRU5UICdJZCDDum5pY28gZGUgdW4gdXN1YXJpbycsCiAgYHVzZXJgIFZBUkNIQVIoNTApIENPTExBVEUgdXRmOF91bmljb2RlX2NpIE5PVCBOVUxMIERFRkFVTFQgJycgQ09NTUVOVCAnTm9tYnJlIGRlIHVzdWFyaW8nLAogIGBwYXNzYCBWQVJDSEFSKDEwMCkgQ09MTEFURSB1dGY4X3VuaWNvZGVfY2kgTk9UIE5VTEwgREVGQVVMVCAnJyBDT01NRU5UICdDb250cmFzZcOxYSBkZWwgdXN1YXJpbycsCiAgYG51bV9waG90b3NgIElOVCgxMSkgTk9UIE5VTEwgREVGQVVMVCAnMCcgQ09NTUVOVCAnTsO6bWVybyBkZSBmb3RvcyBkZSB1biB1c3VhcmlvJywKICBgc2NvcmVgIEZMT0FUIE5PVCBOVUxMIERFRkFVTFQgJzAnIENPTU1FTlQgJ1B1bnR1YWNpw7NuIGRlbCB1c3VhcmlvJywKICBgYWN0aXZlYCBUSU5ZSU5UKDEpIE5PVCBOVUxMIERFRkFVTFQgJzEnIENPTU1FTlQgJ1VzdWFyaW8gYWN0aXZvIDEgbyBubyAwJywKICBgbGFzdF9sb2dpbmAgREFURVRJTUUgTk9UIE5VTEwgQ09NTUVOVCAnRmVjaGEgZGUgbGEgw7psdGltYSB2ZXogcXVlIGluaWNpw7Mgc2VzacOzbicsCiAgYG5vdGVzYCBURVhUIE5PVCBOVUxMIERFRkFVTFQgJycgQ09NTUVOVCAnTm90YXMgc29icmUgZWwgdXN1YXJpbycsCiAgYGNyZWF0ZWRfYXRgIERBVEVUSU1FIE5PVCBOVUxMIENPTU1FTlQgJ0ZlY2hhIGRlIGNyZWFjacOzbiBkZWwgcmVnaXN0cm8nLAogIGB1cGRhdGVkX2F0YCBEQVRFVElNRSBOVUxMIENPTU1FTlQgJ0ZlY2hhIGRlIMO6bHRpbWEgbW9kaWZpY2FjacOzbiBkZWwgcmVnaXN0cm8nLAogIFBSSU1BUlkgS0VZIChgaWRgKQopIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjggQ09MTEFURT11dGY4X3VuaWNvZGVfY2k7CgoKQ1JFQVRFIFRBQkxFIGBwaG90b2AgKAogIGBpZGAgSU5UKDExKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCBDT01NRU5UICdJZCDDum5pY28gZGUgY2FkYSBmb3RvJywKICBgaWRfdXNlcmAgSU5UKDExKSBOT1QgTlVMTCBDT01NRU5UICdJZCBkZWwgdXN1YXJpbycsCiAgYGV4dGAgVkFSQ0hBUig1KSBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaSBOT1QgTlVMTCBERUZBVUxUICcnIENPTU1FTlQgJ0V4dGVuc2nDs24gZGUgbGEgZm90bycsCiAgYGNyZWF0ZWRfYXRgIERBVEVUSU1FIE5PVCBOVUxMIENPTU1FTlQgJ0ZlY2hhIGRlIGNyZWFjacOzbiBkZWwgcmVnaXN0cm8nLAogIGB1cGRhdGVkX2F0YCBEQVRFVElNRSBOVUxMIENPTU1FTlQgJ0ZlY2hhIGRlIMO6bHRpbWEgbW9kaWZpY2FjacOzbiBkZWwgcmVnaXN0cm8nLAogIFBSSU1BUlkgS0VZIChgaWRgKQopIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjggQ09MTEFURT11dGY4X3VuaWNvZGVfY2k7CgoKQ1JFQVRFIFRBQkxFIGBwaG90b190YWdgICgKICBgaWRfcGhvdG9gIElOVCgxMSkgTk9UIE5VTEwgQ09NTUVOVCAnSWQgZGUgbGEgZm90bycsCiAgYGlkX3RhZ2AgSU5UKDExKSBOT1QgTlVMTCBDT01NRU5UICdJZCBkZSBsYSB0YWcnLAogIGBjcmVhdGVkX2F0YCBEQVRFVElNRSBOT1QgTlVMTCBDT01NRU5UICdGZWNoYSBkZSBjcmVhY2nDs24gZGVsIHJlZ2lzdHJvJywKICBQUklNQVJZIEtFWSAoYGlkX3Bob3RvYCxgaWRfdGFnYCkKKSBFTkdJTkU9SW5ub0RCIERFRkFVTFQgQ0hBUlNFVD11dGY4IENPTExBVEU9dXRmOF91bmljb2RlX2NpOwoKCkFMVEVSIFRBQkxFIGB0YWdgCiAgQUREIEtFWSBgZmtfdGFnX3VzZXJfaWR4YCAoYGlkX3VzZXJgKSwKICBBREQgQ09OU1RSQUlOVCBgZmtfdGFnX3VzZXJgIEZPUkVJR04gS0VZIChgaWRfdXNlcmApIFJFRkVSRU5DRVMgYHVzZXJgIChgaWRgKSBPTiBERUxFVEUgTk8gQUNUSU9OIE9OIFVQREFURSBOTyBBQ1RJT047CgoKCgpBTFRFUiBUQUJMRSBgcGhvdG9gCiAgQUREIEtFWSBgZmtfcGhvdG9fdXNlcl9pZHhgIChgaWRfdXNlcmApLAogIEFERCBDT05TVFJBSU5UIGBma19waG90b191c2VyYCBGT1JFSUdOIEtFWSAoYGlkX3VzZXJgKSBSRUZFUkVOQ0VTIGB1c2VyYCAoYGlkYCkgT04gREVMRVRFIE5PIEFDVElPTiBPTiBVUERBVEUgTk8gQUNUSU9OOwoKCkFMVEVSIFRBQkxFIGBwaG90b190YWdgCiAgQUREIEtFWSBgZmtfcGhvdG9fdGFnX3Bob3RvX2lkeGAgKGBpZF9waG90b2ApLAogIEFERCBLRVkgYGZrX3Bob3RvX3RhZ190YWdfaWR4YCAoYGlkX3RhZ2ApLAogIEFERCBDT05TVFJBSU5UIGBma19waG90b190YWdfcGhvdG9gIEZPUkVJR04gS0VZIChgaWRfcGhvdG9gKSBSRUZFUkVOQ0VTIGBwaG90b2AgKGBpZGApIE9OIERFTEVURSBOTyBBQ1RJT04gT04gVVBEQVRFIE5PIEFDVElPTiwKICBBREQgQ09OU1RSQUlOVCBgZmtfcGhvdG9fdGFnX3RhZ2AgRk9SRUlHTiBLRVkgKGBpZF90YWdgKSBSRUZFUkVOQ0VTIGB0YWdgIChgaWRgKSBPTiBERUxFVEUgTk8gQUNUSU9OIE9OIFVQREFURSBOTyBBQ1RJT047CgoKLyohNDAwMTQgU0VUIEZPUkVJR05fS0VZX0NIRUNLUz1AT0xEX0ZPUkVJR05fS0VZX0NIRUNLUyAqLzsK',
  'ofw/task/composer.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIGNvbXBvc2VyVGFza3sNCiAgcHVibGljIGZ1bmN0aW9uIF9fdG9TdHJpbmcoKXsNCiAgICByZXR1cm4gImNvbXBvc2VyOiBGdW5jacOzbiBwYXJhIGV4cG9ydGFyIHVuYSBhcGxpY2FjacOzbiBjb24gdG9kb3Mgc3VzIGFyY2hpdm9zIGEgdW4gc29sbyBhcmNoaXZvIGF1dG9leHRyYcOtYmxlLiI7DQogIH0NCg0KICBwcml2YXRlICRiYXNlX2RpcjsNCiAgcHJpdmF0ZSAkZm9sZGVyX2xpc3QgPSBbDQogICAgJ2FwcCcgID0+IHRydWUsDQogICAgJ2xvZ3MnID0+IGZhbHNlLA0KICAgICdvZncnICA9PiB0cnVlLA0KICAgICd3ZWInICA9PiB0cnVlDQogIF07DQoNCiAgcHJpdmF0ZSBmdW5jdGlvbiBzY2FuRmlsZU5hbWVSZWN1cnNpdmx5KCRwYXRoID0gJycsICYkbmFtZSA9IFtdKXsNCiAgICAkcGF0aCA9ICgkcGF0aCA9PSAnJykgPyAkdGhpcy0+YmFzZV9kaXIgOiAkcGF0aDsNCiAgICAkbGlzdHMgPSBAc2NhbmRpcigkcGF0aCk7DQoNCiAgICBpZighZW1wdHkoJGxpc3RzKSl7DQogICAgICBmb3JlYWNoKCRsaXN0cyBhcyAkZil7DQogICAgICAgIGlmICgkZj09Jy4nIHx8ICRmPT0nLi4nKXsgY29udGludWU7IH0NCiAgICAgICAgaWYoaXNfZGlyKCRwYXRoLkRJUkVDVE9SWV9TRVBBUkFUT1IuJGYpICYmICRmICE9ICcuLicgJiYgJGYgIT0gJy4nKXsNCiAgICAgICAgICAkdGhpcy0+c2NhbkZpbGVOYW1lUmVjdXJzaXZseSgkcGF0aC5ESVJFQ1RPUllfU0VQQVJBVE9SLiRmLCAkbmFtZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICAkbmFtZVtdID0gJHBhdGguRElSRUNUT1JZX1NFUEFSQVRPUi4kZjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gJG5hbWU7DQogIH0NCg0KICBwdWJsaWMgZnVuY3Rpb24gcnVuKCl7DQogICAgZ2xvYmFsICRjOw0KICAgICR0aGlzLT5iYXNlX2RpciA9ICRjLT5nZXREaXIoJ2Jhc2UnKTsNCg0KICAgIGVjaG8gIkV4cG9ydGFuZG8gcHJveWVjdG9cbiI7DQogICAgJGRlc3RpbmF0aW9uID0gJGMtPmdldERpcignb2Z3X3RtcCcpLidvZndfY29tcG9zZXIucGhwJzsNCiAgICBpZiAoZmlsZV9leGlzdHMoJGRlc3RpbmF0aW9uKSl7DQogICAgICBlY2hvICIgIEFyY2hpdm8gZGVzdGlubyB5YSBleGlzdMOtYSwgc2UgaGEgYm9ycmFkb1xuIjsNCiAgICAgIHVubGluaygkZGVzdGluYXRpb24pOw0KICAgIH0NCiAgICAkZm9sZGVycyA9IFtdOw0KICAgICRmaWxlcyA9IFtdOw0KDQogICAgZmlsZV9wdXRfY29udGVudHMoJGRlc3RpbmF0aW9uLCAiPD9waHBcbiIpOw0KDQogICAgZWNobyAiT2J0ZW5pZW5kbyBjYXJwZXRhcyB5IGFyY2hpdm9zIGEgZXhwb3J0YXJcbiI7DQoNCiAgICAkZmlsZXNbJ29mdy5waHAnXSA9IEJhc2U6OmZpbGVUb0Jhc2U2NCgkYy0+Z2V0RGlyKCdiYXNlJykgLiAnb2Z3LnBocCcpOw0KDQogICAgLy8gUmVjb3JybyBjYXJwZXRhcw0KICAgIGZvcmVhY2ggKCR0aGlzLT5mb2xkZXJfbGlzdCBhcyAkZm9sZGVyID0+ICRleHBsb3JlKXsNCiAgICAgIC8vIFNpIGhheSBxdWUgZXhwbG9yYXIgbGEgY2FycGV0YQ0KICAgICAgaWYgKCRleHBsb3JlKSB7DQogICAgICAgIC8vIE9idGVuZ28gbGEgbGlzdGEgZGUgYXJjaGl2b3MgcmVjdXJzaXZhbWVudGUNCiAgICAgICAgJGZpbGVfbmFtZXMgPSAkdGhpcy0+c2NhbkZpbGVOYW1lUmVjdXJzaXZseSgkYy0+Z2V0RGlyKCdiYXNlJykgLiAkZm9sZGVyKTsNCg0KICAgICAgICAvLyBSZWNvcnJvIGNhZGEgYXJjaGl2bw0KICAgICAgICBmb3JlYWNoICgkZmlsZV9uYW1lcyBhcyAkZmlsZV9uYW1lKXsNCiAgICAgICAgICAvLyBDYXJwZXRhIHkgbm9tYnJlIGRlbCBhcmNoaXZvIHJlbGF0aXZvcw0KICAgICAgICAgICRrZXkgPSBzdHJfaXJlcGxhY2UoJGMtPmdldERpcignYmFzZScpLCAnJywgJGZpbGVfbmFtZSk7DQogICAgICAgICAgLy8gQ29udGVuaWRvIGRlbCBhcmNoaXZvDQogICAgICAgICAgJGNvbnRlbnQgPSBCYXNlOjpmaWxlVG9CYXNlNjQoJGZpbGVfbmFtZSk7DQogICAgICAgICAgLy8gQcOxYWRvIGFsIGFycmF5IGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2bw0KICAgICAgICAgICRmaWxlc1ska2V5XSA9ICRjb250ZW50Ow0KDQogICAgICAgICAgLy8gT2J0ZW5nbyBlbCBhcnJheSBjb24gbGEgcnV0YSBkZWwgYXJjaGl2byBlajogJ21vZGVsL2Jhc2UnID0+IFsnbW9kZWwnLCAnYmFzZScsICdiYXNlLnBocCddDQogICAgICAgICAgJGZvbGRlcl9uYW1lID0gZXhwbG9kZSgnLycsICRrZXkpOw0KICAgICAgICAgIC8vIFF1aXRvIGVsIGFyY2hpdm8gZGVsIGFycmF5IHBhcmEgcXVlZGFybWUgc29sbyBjb24gbGFzIGNhcnBldGFzIGVqOiBbJ21vZGVsJywgJ2Jhc2UnXQ0KICAgICAgICAgIGFycmF5X3BvcCgkZm9sZGVyX25hbWUpOw0KICAgICAgICAgIC8vIENvam8gbGEgcHJpbWVyYSBwYXJ0ZQ0KICAgICAgICAgICRjaGVja19mb2xkZXIgPSBhcnJheV9zaGlmdCgkZm9sZGVyX25hbWUpOw0KICAgICAgICAgIHdoaWxlIChjb3VudCgkZm9sZGVyX25hbWUpPi0xKXsNCiAgICAgICAgICAgIGlmICghaW5fYXJyYXkoJGNoZWNrX2ZvbGRlciwgJGZvbGRlcnMpKXsNCiAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkZm9sZGVycywgJGNoZWNrX2ZvbGRlcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoY291bnQoJGZvbGRlcl9uYW1lKT4wKSB7DQogICAgICAgICAgICAgICRjaGVja19mb2xkZXIgLj0gJy8nIC4gYXJyYXlfc2hpZnQoJGZvbGRlcl9uYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZWxzZXsNCiAgICAgICAgLy8gQcOxYWRvIGxhIGNhcnBldGEgYSBsYSBsaXN0YQ0KICAgICAgICBhcnJheV9wdXNoKCRmb2xkZXJzLCAkZm9sZGVyKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBlY2hvICJFeHBvcnRhbmRvICIuY291bnQoJGZpbGVzKS4iIGFyY2hpdm9zXG4iOw0KICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRkZXN0aW5hdGlvbiwgIiQiLiJmaWxlcyA9IFtcbiIsIEZJTEVfQVBQRU5EKTsNCiAgICAkY29udGVudF9hcnJheSA9IFtdOw0KICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAka2V5ID0+ICRjb250ZW50KXsNCiAgICAgIGFycmF5X3B1c2goJGNvbnRlbnRfYXJyYXksICIgICciLiRrZXkuIicgPT4gJyIuJGNvbnRlbnQuIiciKTsNCiAgICB9DQogICAgZmlsZV9wdXRfY29udGVudHMoJGRlc3RpbmF0aW9uLCBpbXBsb2RlKCIsXG4iLCAkY29udGVudF9hcnJheSksIEZJTEVfQVBQRU5EKTsNCiAgICBmaWxlX3B1dF9jb250ZW50cygkZGVzdGluYXRpb24sICJdO1xuIiwgRklMRV9BUFBFTkQpOw0KDQogICAgdW5zZXQoJGZpbGVzKTsNCiAgICB1bnNldCgkY29udGVudF9hcnJheSk7DQoNCiAgICBlY2hvICJFeHBvcnRhbmRvICIuY291bnQoJGZvbGRlcnMpLiIgY2FycGV0YXNcbiI7DQogICAgZmlsZV9wdXRfY29udGVudHMoJGRlc3RpbmF0aW9uLCAiJCIuImZvbGRlcnMgPSBbJyIsIEZJTEVfQVBQRU5EKTsNCiAgICBmaWxlX3B1dF9jb250ZW50cygkZGVzdGluYXRpb24sIGltcGxvZGUoIicsJyIsICRmb2xkZXJzKSwgRklMRV9BUFBFTkQpOw0KICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRkZXN0aW5hdGlvbiwgIiddO1xuIiwgRklMRV9BUFBFTkQpOw0KDQogICAgdW5zZXQoJGZpbGVzKTsNCg0KICAgIGVjaG8gIlByZXBhcmFuZG8gY29tcG9zZXJcbiI7DQogICAgJHN0ciA9ICJcbiI7DQogICAgJHN0ciAuPSAiZnVuIi4iY3Rpb24gYmFzZTY0VG9GaWxlKCQiLiJiYXNlNjRfc3RyaW5nLCAkIi4iZmlsZW5hbWUpe1xuIjsNCiAgICAkc3RyIC49ICIgICQiLiJpZnAgPSBmb3BlbiggJCIuImZpbGVuYW1lLCAnd2InICk7XG4iOw0KICAgICRzdHIgLj0gIiAgJCIuImRhdGEgPSBleHBsb2RlKCAnLCcsICQiLiJiYXNlNjRfc3RyaW5nICk7XG4iOw0KICAgICRzdHIgLj0gIiAgZndyaXRlKCAkIi4iaWZwLCBiYXNlNjRfZGVjb2RlKCAkIi4iZGF0YVsgMSBdICkgKTtcbiI7DQogICAgJHN0ciAuPSAiICBmY2xvc2UoICQiLiJpZnAgKTtcbiI7DQogICAgJHN0ciAuPSAifVxuXG4iOw0KDQogICAgJHN0ciAuPSAiJCIuImJhc2VkaXIgPSByZWFscGF0aChkaXJuYW1lKF9fRklMRV9fKSk7XG4iOw0KICAgICRzdHIgLj0gImVjaG8gXCJSVVRBIEJBU0U6IFwiLiQiLiJiYXNlZGlyLlwiXFxuXCI7XG4iOw0KICAgICRzdHIgLj0gImVjaG8gXCJDUkVBTkRPIENBUlBFVEFTIChcIi5jb3VudCgkIi4iZm9sZGVycykuXCIpXFxuXCI7XG4iOw0KICAgICRzdHIgLj0gImZvcmVhY2ggKCQiLiJmb2xkZXJzIGFzICQiLiJpID0+ICQiLiJmb2xkZXIpe1xuIjsNCiAgICAkc3RyIC49ICIgIGVjaG8gXCIgIFwiLigkIi4iaSsxKS5cIi9cIi5jb3VudCgkIi4iZm9sZGVycykuXCIgLSBcIi4kIi4iZm9sZGVyLlwiXFxuXCI7XG4iOw0KICAgICRzdHIgLj0gIiAgbWtkaXIoJCIuImJhc2VkaXIuXCIvXCIuJCIuImZvbGRlcik7XG4iOw0KICAgICRzdHIgLj0gIn1cblxuIjsNCg0KICAgICRzdHIgLj0gImVjaG8gXCJDUkVBTkRPIEFSQ0hJVk9TIChcIi5jb3VudCgkIi4iZmlsZXMpLlwiKVxcblwiO1xuIjsNCiAgICAkc3RyIC49ICIkIi4iY29udCA9IDE7XG4iOw0KICAgICRzdHIgLj0gImZvcmVhY2ggKCQiLiJmaWxlcyBhcyAkIi4ia2V5ID0+ICQiLiJmaWxlKXtcbiI7DQogICAgJHN0ciAuPSAiICBlY2hvIFwiICBcIi4kIi4iY29udC5cIi9cIi5jb3VudCgkIi4iZmlsZXMpLlwiIC0gXCIuJCIuImtleS5cIlxcblwiO1xuIjsNCiAgICAkc3RyIC49ICIgIGJhc2U2NFRvRmlsZSgkIi4iZmlsZSwgJCIuImJhc2VkaXIuJy8nLiQiLiJrZXkpO1xuIjsNCiAgICAkc3RyIC49ICIgICQiLiJjb250Kys7XG4iOw0KICAgICRzdHIgLj0gIn0iOw0KICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRkZXN0aW5hdGlvbiwgJHN0ciwgRklMRV9BUFBFTkQpOw0KDQogICAgZWNobyAiUHJveWVjdG8gZXhwb3J0YWRvXG4iOw0KICB9DQp9DQo=',
  'ofw/task/generateModel.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIGdlbmVyYXRlTW9kZWxUYXNrew0KICBwdWJsaWMgZnVuY3Rpb24gX190b1N0cmluZygpew0KICAgIHJldHVybiAiZ2VuZXJhdGVNb2RlbDogRnVuY2nDs24gcGFyYSBnZW5lcmFyIGVsIHNjcmlwdCBjb24gZWwgcXVlIGNyZWFyIGxhIGJhc2UgZGUgZGF0b3MgYSBwYXJ0aXIgZGVsIG1vZGVsby4iOw0KICB9DQoNCiAgcHVibGljIGZ1bmN0aW9uIHJ1bigpew0KICAgIEJhc2U6OmdlbmVyYXRlTW9kZWwoKTsNCiAgfQ0KfQ0K',
  'ofw/task/updateUrls.php' => 'data:text/x-php;base64,PD9waHANCmNsYXNzIHVwZGF0ZVVybHNUYXNrew0KICBwdWJsaWMgZnVuY3Rpb24gX190b1N0cmluZygpew0KICAgIHJldHVybiAidXBkYXRlVXJsczogRnVuY2nDs24gcGFyYSBjcmVhciBudWV2b3MgY29udHJvbGFkb3JlcyB5IGFjY2lvbmVzIGEgcGFydGlyIGRlbCBhcmNoaXZvIGRlIHVybHMuIjsNCiAgfQ0KDQogIHB1YmxpYyBmdW5jdGlvbiBydW4oKXsNCiAgICBCYXNlOjp1cGRhdGVVcmxzKCk7DQogIH0NCn0NCg==',
  'ofw/tmp/ofw_composer.php' => 'data:text/x-php;base64,PD9waHAK',
  'web/.htaccess' => 'data:text/plain;base64,T3B0aW9ucyArRm9sbG93U3ltTGlua3MgK0V4ZWNDR0kKCjxJZk1vZHVsZSBtb2RfcmV3cml0ZS5jPgogIFJld3JpdGVFbmdpbmUgT24KICBSZXdyaXRlQmFzZSAvCgogIFJld3JpdGVDb25kICV7SFRUUDpBdXRob3JpemF0aW9ufSBeKC4qKQogIFJld3JpdGVSdWxlIC4qIC0gW2U9SFRUUF9BVVRIT1JJWkFUSU9OOiUxXQoKICBSZXdyaXRlQ29uZCAle0hUVFBfSE9TVH0gXnd3d1wuKC4qKSQgW05DXQogIFJld3JpdGVSdWxlIF4oLiopJCBodHRwOi8vJTEvJDEgW1I9MzAxLExdCgogICMgRGVzY29tZW50YXIgcGFyYSByZWRpcmlnaXIgdG9kYXMgbGFzIGxsYW1hZGFzIGEgaHR0cHMKICBSZXdyaXRlQ29uZCAle1NFUlZFUl9QT1JUfSA4MAogIFJld3JpdGVSdWxlIF4oLiopJCBodHRwczovL3BydWViYS5pbmRvbWFibGVzdG9yZS5jb20vJDEgW1IsTF0KCiAgUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWYKICAjIFJlZGlyaWdpbW9zIHRvZG8gYWwgY29udHJvbGFkb3IgZnJvbnRhbAogIFJld3JpdGVSdWxlIF4oLiopJCBpbmRleC5waHAgW1FTQSxMXQo8L0lmTW9kdWxlPgo=',
  'web/favicon.png' => 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAYBQTFRFAAAAHhMOHRMNHhMNHxQPHBELGxAMIRYSHhINHRMMIBURIRURlYJhHRENHRINJx0VIBUQHxMOIBQPHREMIhcUIRQREwgEHhQOGQ4LHRINHhMOHxMOHRINHhINHxQPHxQPHxQPHxQPHxQPHxQPHxQPHxQOHRINHhMOHxQPHxQPHxQPHxQPHhMOHRIMHxQPHxQPHxQPHxQPHxQPHxQPHxQPHxQPHxQPHhIMHxQOHxQPHxQPHxQPHhMOHRMNHhMOHxQPHxQPHxQPHxMOHBENHxQPHxQPHxQPHxQPHBEMHhMOHxQPHxQPHxMPHxMPHxQPHxQPHhMOHxQOHxQPHxQPHhMOHxMOHxQPHxQPHhMOHhQOHxMOHxQPHxQPHhMOHxQPHxQPHxQPHxQPHxQPHxQPHhMOHxMPHxQPHhMOHxQPHxQPHxQOHhQOHxQPHxQPHxQPHhMOHhMOHxQPHxQPHxQPHhMPHhMOHxQPHhMOHhMNHxQPHxQPHxQPHhMPHhMOHxQP////xdKmtQAAAH50Uk5TAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAITIgMEOI3E2tvGkTwFC3jn6n4NBHv3/NWrrNf5gQU+6faKHgUgkPjsQgKVoqeZAxbK9EhL9csXI9zlKSrmIx80M+vWDLf9cm61cDw3bBvDekNCd9i/GDrQ/sw1LJ0oBy9gXi0GIHE9QAAAAAFiS0dEf0i/ceUAAAAJcEhZcwAAAEgAAABIAEbJaz4AAADtSURBVBjTZY9XNwNRAITnylWiLCFaoq2SFSIW0Wu0YJVkowRhdaL3bn67tXn0vX1z5sw5A9iIWp/f76vLQRZR39DYpDa3tLYFhONae5AOHZ0hO3F1hbup9/T2RXT2Dwy6IIeGOTI6FhifmJxidFpiZpac0+yqCM2TsQUsLtFYlrlAnlxZ5VocCZPJdfm3Ljc2aW4hFWF0Oxvs7DKdwt4+rYP8AsBdeGjxSEPRsUX1pLhEKT1NUz8rg+f8gjQzl1fXN+TtnYBSfv9APhqGRT49ywpA8b68Bm3Tk7G3Sudflef94zOc+fr+qa7Bf34BEZ42mEZZGB4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDQtMTZUMTE6NTE6NTArMDA6MDBoiSdhAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA0LTE2VDExOjUxOjUwKzAwOjAwGdSf3QAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE0LTA1LTEyIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ9yG7QAAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADE5Mg8AcoUAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTky06whCAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTIzODc5NTEwdOS8GwAAAA90RVh0VGh1bWI6OlNpemUAMEJClKI+7AAAAFZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL21udGxvZy9mYXZpY29ucy8yMDE4LTA0LTE2LzE4MDg5ZDQ1NWZlZWQ0MzY5MjdiM2VmNTE0OTI0NDE2Lmljby5wbmd6+MFnAAAAAElFTkSuQmCC',
  'web/index.php' => 'data:text/x-php;base64,PD9waHAKaGVhZGVyKCdQM1A6IENQPSJDQU8gUFNBIE9VUiInKTsKc2Vzc2lvbl9zdGFydCgpOwokc3RhcnRfdGltZSA9IG1pY3JvdGltZSh0cnVlKTsKJHdoZXJlID0gJ2luZGV4JzsKCmluY2x1ZGUoJy4uL29mdy9iYXNlL3N0YXJ0LnBocCcpOwoKaWYgKCRjLT5nZXRBbGxvd0Nyb3NzT3JpZ2luKCkpewogIGhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqJyk7CiAgaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzOiBPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0LCBBdXRob3JpemF0aW9uJyk7CiAgaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzOiBHRVQsIFBPU1QnKTsKfQoKLy8gQ2FyZ28gdXJsCiR1ID0gbmV3IE9VcmwoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10pOwokdS0+c2V0Q2hlY2tVcmwoJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10sICRfR0VULCAkX1BPU1QsICRfRklMRVMpOwokdXJsX3Jlc3VsdCA9ICR1LT5wcm9jZXNzKCk7CgppZiAoJHVybF9yZXN1bHRbJ3JlcyddKXsKICAvLyBTaSBlcyB1bmEgbGxhbWFkYSBkZSBPUFRJT05TLCBkZXZ1ZWx2byBPSyBkaXJlY3RhbWVudGUKICBpZiAoJHVybF9yZXN1bHRbJ3BhcmFtcyddWydtZXRob2QnXT09PSdvcHRpb25zJyl7CiAgICBoZWFkZXIoJF9TRVJWRVJbIlNFUlZFUl9QUk9UT0NPTCJdLiIgMjAwIE9LIik7CiAgICBleGl0KCk7CiAgfQoKICAvLyBTaSBoYXkgdW4gZmlsdHJvIGRlIHNlZ3VyaWRhZCBsbyBhcGxpY28gYW50ZXMgZGVsIGNvbnRyb2xsZXIKICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnZmlsdGVyJywgJHVybF9yZXN1bHQpKXsKICAgICR1cmxfcmVzdWx0WydwYXJhbXMnXSA9IGNhbGxfdXNlcl9mdW5jKCR1cmxfcmVzdWx0WydmaWx0ZXInXSwgJHVybF9yZXN1bHRbJ3BhcmFtcyddKTsKCiAgICAvLyBTaSBlbCBzdGF0dXMgZXMgZXJyb3IsIGRveSBzdGF0dXMgNDAzIEZvcmJpZGRlbgogICAgaWYgKCR1cmxfcmVzdWx0WydwYXJhbXMnXVsnZmlsdGVyJ11bJ3N0YXR1cyddPT0nZXJyb3InKXsKICAgICAgaWYgKGFycmF5X2tleV9leGlzdHMoJ3JldHVybicsICR1cmxfcmVzdWx0WydwYXJhbXMnXVsnZmlsdGVyJ10pKXsKICAgICAgICBPVXJsOjpnb1RvVXJsKCR1cmxfcmVzdWx0WydwYXJhbXMnXVsnZmlsdGVyJ11bJ3JldHVybiddKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBCYXNlOjpzaG93RXJyb3JQYWdlKCR1cmxfcmVzdWx0LCAnNDAzJyk7CiAgICAgIH0KICAgIH0KICB9CgogIGlmICghYXJyYXlfa2V5X2V4aXN0cygncGFja2FnZScsICR1cmxfcmVzdWx0KSl7CiAgICAkbW9kdWxlID0gJGMtPmdldERpcignYXBwX2NvbnRyb2xsZXInKS4kdXJsX3Jlc3VsdFsnbW9kdWxlJ10uJy5waHAnOwogIH0KICBlbHNlewogICAgJG1vZHVsZSA9ICRjLT5nZXREaXIoJ29md19wYWNrYWdlcycpLiR1cmxfcmVzdWx0WydwYWNrYWdlJ10uJy9jb250cm9sbGVycy8nLiR1cmxfcmVzdWx0Wydtb2R1bGUnXS4nLnBocCc7CiAgICBpbmNsdWRlKCRjLT5nZXREaXIoJ29md19wYWNrYWdlcycpLiR1cmxfcmVzdWx0WydwYWNrYWdlJ10uJy9jb25maWcvY29uZmlnLnBocCcpOwogIH0KCiAgaWYgKGZpbGVfZXhpc3RzKCRtb2R1bGUpKXsKICAgIGluY2x1ZGUoJG1vZHVsZSk7CiAgICAkY29udHJvbGxlciA9IG5ldyAkdXJsX3Jlc3VsdFsnbW9kdWxlJ10oKTsKICAgICRjb250cm9sbGVyLT5sb2FkQ29udHJvbGxlcigkdXJsX3Jlc3VsdCk7CgogICAgaWYgKG1ldGhvZF9leGlzdHMoJGNvbnRyb2xsZXIsICR1cmxfcmVzdWx0WydhY3Rpb24nXSkpewogICAgICBjYWxsX3VzZXJfZnVuYyhhcnJheSgkY29udHJvbGxlciwgJHVybF9yZXN1bHRbJ2FjdGlvbiddKSwgJHVybF9yZXN1bHRbJ3BhcmFtcyddKTsKICAgICAgJGNvbnRyb2xsZXItPmdldFRlbXBsYXRlKCktPnByb2Nlc3MoKTsKICAgIH0KICAgIGVsc2V7CiAgICAgIEJhc2U6OnNob3dFcnJvclBhZ2UoJHVybF9yZXN1bHQsICdhY3Rpb24nKTsKICAgIH0KICB9CiAgZWxzZXsKICAgIEJhc2U6OnNob3dFcnJvclBhZ2UoJHVybF9yZXN1bHQsICdtb2R1bGUnKTsKICB9Cn0KZWxzZXsKICBCYXNlOjpzaG93RXJyb3JQYWdlKCR1cmxfcmVzdWx0LCAnNDA0Jyk7Cn0K'];
$folders = ['app','app/cache','app/config','app/controller','app/filter','app/model','app/service','app/task','app/template','app/template/api','app/template/home','app/template/layout','app/template/partials','app/template/partials/home','logs','ofw','ofw/base','ofw/lib','ofw/lib/another','ofw/lib/email','ofw/lib/image','ofw/lib/pdf','ofw/lib/routing','ofw/sql','ofw/task','ofw/tmp','web'];

function base64ToFile($base64_string, $filename){
  $ifp = fopen( $filename, 'wb' );
  $data = explode( ',', $base64_string );
  fwrite( $ifp, base64_decode( $data[ 1 ] ) );
  fclose( $ifp );
}

$basedir = realpath(dirname(__FILE__));
echo "RUTA BASE: ".$basedir."\n";
echo "CREANDO CARPETAS (".count($folders).")\n";
foreach ($folders as $i => $folder){
  echo "  ".($i+1)."/".count($folders)." - ".$folder."\n";
  mkdir($basedir."/".$folder);
}

echo "CREANDO ARCHIVOS (".count($files).")\n";
$cont = 1;
foreach ($files as $key => $file){
  echo "  ".$cont."/".count($files)." - ".$key."\n";
  base64ToFile($file, $basedir.'/'.$key);
  $cont++;
}